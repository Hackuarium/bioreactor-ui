(this["webpackJsonpbioreactor-ui"]=this["webpackJsonpbioreactor-ui"]||[]).push([[7],{106:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return l}));var c=n(118),r=n.n(c),s="BIOREACTOR_devices",a="9001",o="tcp",i=["wss","tcp","http"],u=Object.keys(r.a).map((function(e){return r.a[e].kind})),l={compactSettings:"uc",runExperiment:"r",kinetic:"k",reset:"ur1234",sleep:"l",setParameter:function(e,t){return"".concat(e).concat(t)}}},133:function(e,t,n){"use strict";n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return O})),n.d(t,"f",(function(){return g})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return v}));var c=n(1),r=n(52),s=n.n(r),a=n(58),o=n(173),i=n(107);var u,l=function(){var e=null,t={};return{connect:function(n){(!e||t&&t.db_name!==n)&&((e=new o.a(n)).info().then((function(e){return t=e})),console.log('connected to DB "'.concat(n,'"')));return{getInfo:function(){return t},put:function(t){return"_id"in t?e.put(t):Promise.reject(new Error("doc must include _id"))},get:function(t){return e.get(t)},getAll:function(){var t=Object(a.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.allDocs(Object(c.a)({include_docs:!0},n));case 2:return r=t.sent,t.abrupt("return",r.rows);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getAllCount:function(){var t=Object(a.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.allDocs(Object(c.a)({include_docs:!0},n));case 2:return r=t.sent,t.abrupt("return",r.total_rows);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),update:function(t){return"_id"in t?e.get(t._id).then((function(n){return e.put(Object(c.a)(Object(c.a)({},t),{},{_rev:n._rev}))})):Promise.reject(new Error("doc must include _id"))},remove:function(t){return e.get(t).then((function(n){return e.remove({_id:t,_rev:n._rev})}))},removeAll:function(){return e.destroy().then((function(t){e=null,console.log('DB "'.concat(n,'" destroyed : ')+JSON.stringify(t))}))},close:function(t){return e.close((function(){e=null,console.log('DB "'.concat(n,'" closed')),Object(i.isFunction)(t)&&t()}))}}}}}(),d=n(175),p=n.n(d),j=n(148),b=n(106),x=function(e,t,n,c,r){return new Promise((function(s,a){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.c,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.b,c=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;u&&u.connected&&u.options.hostname===e&&Object(i.isFunction)(c)&&c(u);var s="".concat(t,"://").concat(e,":").concat(n);(u=p.a.connect(s,{keepalive:300,reconnectPeriod:5e3})).on("connect",(function(){console.log("connected to ".concat(s," : ").concat(u.connected)),Object(i.isFunction)(c)&&c(u)})),u.stream.on("error",(function(e){console.log(e);var t=new Error("Couldn't connect to BROKER \"".concat(s,'"'));t.name="Mqtt Error",u.end(),Object(i.isFunction)(r)&&r(t)}))}(e,t,n,c,r,(function(e){return s(e)}),(function(e){return a(e)}))}))},h=function(e,t,n,c){e.subscribe(t,{qos:2},(function(t){t?Object(i.isFunction)(c)&&c(t):e.on("message",(function(e,t){var c;Object(i.isFunction)(n)&&n((c=t,Object(j.parseCurrentSettings)(c.toString(),{})))}))}));return function(n){return e.unsubscribe(t,{},n)}},f=function(){var e=Object(a.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.connect(b.d),e.next=3,t.getAll();case 3:return n=e.sent,e.abrupt("return",n.map((function(e){return e.doc})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(a.a)(s.a.mark((function e(t){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.connect(b.d),e.next=3,n.get(t);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(a.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.connect(b.d),e.abrupt("return",n.update(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){return l.connect(b.d).remove(e).catch((function(e){var t=new Error("Couldn't remove record: ".concat(e.message));throw t.name="Database Error",t}))},y=function(e){var t=l.connect(b.d),n=e.kind,c=e.name,r=e.url,s=e.protocol,a=e.port,o=e.topic,i=e.username,u=e.password;for(var d in e)if(!e[d])throw new Error("Field missing [".concat(d,"]"));var p="".concat(n,"_").concat(c);return t.get(p).then((function(e){var t=new Error("Another device exists with the same name");throw t.payload={exist:!0,payload:e},t})).catch((function(e){if(e.payload&&e.payload.exist)throw e;return t.put({_id:p,name:c,url:r,protocol:s,port:a,topic:o,kind:n,username:i,password:u}).then((function(e){return{exist:!1,inserted:!0,payload:e}})).catch((function(e){var t=new Error(e.toString());throw t.payload={exist:!1,inserted:!1,payload:e.toString()},t}))}))},v=function(e){var t=e._id,n=e.name,r=e.kind,o=e.deviceId,u=void 0===o?t||"".concat(r,"_").concat(n):o,d=e.url,p=e.protocol,j=e.port,b=e.topic,f=e.username,O=e.password;return new Promise(function(){var e=Object(a.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(d,p,j,f,O);case 3:r=e.sent,a=l.connect(u),t({subscribe:function(e,t){return h(r,b,(function(t){a.put(Object(c.a)({_id:Date.now().toString()},t)),Object(i.isFunction)(e)&&e(t)}),t)},disconnect:function(){return t=function(){return a.close()},(e=r).end((function(){console.log('mqtt broker "'.concat(e.options.hostname,'" disconnected')),Object(i.isFunction)(t)&&t()}));var e,t},getAllData:function(){return a.getAll()},getLastData:function(){return a.getAll({descending:!0,limit:1})},getPageDate:function(e,t){return a.getAll({descending:!0,skip:e,limit:t})},getAllDataCount:function(){return a.getAllCount()}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}())}},174:function(e,t){},179:function(e,t){},180:function(e,t){},194:function(e,t){},195:function(e,t){},384:function(e,t,n){"use strict";n.r(t);var c=n(28),r=n(6),s=n(133),a=n(3),o=n(21),i=n(0);t.default=function(e){var t=e.match,n=Object(a.useState)(1),u=Object(r.a)(n,2),l=u[0],d=u[1],p=Object(a.useState)(0),j=Object(r.a)(p,2),b=j[0],x=j[1],h=Object(a.useState)([]),f=Object(r.a)(h,2),O=f[0],g=f[1],m=Object(a.useState)([]),y=Object(r.a)(m,2),v=y[0],w=y[1],k=Object(a.useState)(),_=Object(r.a)(k,2),D=_[0],F=_[1],S="".concat(t.params.id);return Object(a.useEffect)((function(){S&&Object(s.d)(S).then((function(e){Object(s.b)(e).then((function(e){return F(e)}))}))})),Object(a.useEffect)((function(){D&&(D.getAllDataCount().then((function(e){console.log(e),x(e)})),D.subscribe((function(e){return g([e].concat(Object(c.a)(O)))}),(function(e){return console.log(e)})),console.log(O),D.getPageDate(10*l,10).then((function(e){console.log(e),w(e)})))}),[D]),Object(a.useEffect)((function(){D&&D.getPageDate(10*l,10).then((function(e){console.log(e),w(e)}))}),[l]),Object(i.jsxs)("div",{class:"m-2 ",children:[Object(i.jsxs)("div",{class:" bg-white w-full rounded-lg shadow-xl",children:[Object(i.jsxs)("div",{class:"p-4 border-b",children:[Object(i.jsx)("h2",{class:"text-2xl ",children:"Device Details"}),Object(i.jsx)("p",{class:"text-sm text-gray-500",children:"Current details of the device."})]}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{class:"md:grid md:grid-cols-2 hover:bg-gray-50 md:space-y-0 space-y-1 p-4 border-b",children:[Object(i.jsx)("p",{class:"text-gray-600",children:"CPU Temperature"}),Object(i.jsx)("p",{children:O&&O[0]?O[0].parameters.A:""})]}),Object(i.jsxs)("div",{class:"md:grid md:grid-cols-2 hover:bg-gray-50 md:space-y-0 space-y-1 p-4 border-b",children:[Object(i.jsx)("p",{class:"text-gray-600",children:"Free Memory"}),Object(i.jsx)("p",{children:O&&O[0]?O[0].parameters.B:""})]})]})]}),Object(i.jsxs)("div",{class:"  my-8   bg-white w-full rounded-lg ",children:[Object(i.jsxs)("div",{class:"p-4 ",children:[Object(i.jsx)("h2",{class:"text-2xl ",children:"Previous Details"}),Object(i.jsx)("p",{class:"text-sm text-gray-500",children:"Previous details of the device."})]}),Object(i.jsx)(o.G,{class:"min-w-full table-auto",Header:function(){return Object(i.jsxs)("tr",{class:"bg-primary-900",children:[Object(i.jsx)("th",{class:"px-4 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"CPU Temp"})}),Object(i.jsx)("th",{class:"px-4 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"Free mem"})}),Object(i.jsx)("th",{class:"px-2 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"Free swap"})}),Object(i.jsx)("th",{class:"px-2 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"FS Read"})}),Object(i.jsx)("th",{class:"px-2 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"FS Write"})}),Object(i.jsx)("th",{class:"px-2 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"Network R"})}),Object(i.jsx)("th",{class:"px-2 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"Network W"})}),Object(i.jsx)("th",{class:"px-2 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"Load"})}),Object(i.jsx)("th",{class:"px-2 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"User L"})}),Object(i.jsx)("th",{class:"px-2 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"System L"})}),Object(i.jsx)("th",{class:"px-2 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"Nice L"})}),Object(i.jsx)("th",{class:"px-2 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"Idle L"})}),Object(i.jsx)("th",{class:"px-2 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"IRQ L"})}),Object(i.jsx)("th",{class:"px-4 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"FS min"})}),Object(i.jsx)("th",{class:"px-4 py-2",children:Object(i.jsx)("span",{class:"text-gray-300",children:"FS mix"})})]})},Tr:function(e){var t=e.value;return t&&t.doc.parameters?Object(i.jsxs)("tr",{class:"bg-white border-4 border-gray-200",children:[Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.A})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.B})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.C})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.D})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.E})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.F})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.G})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.H})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.I})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.J})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.K})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.L})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.M})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.N})}),Object(i.jsx)("td",{class:"px-4 py-2",children:Object(i.jsx)("span",{children:t.doc.parameters.O})})]}):null},data:v,pagination:{itemsPerPage:10,onPageChange:function(e){d(e)},page:l,totalCount:b,withText:!0}})]})]})}}}]);
//# sourceMappingURL=7.5f7e6901.chunk.js.map