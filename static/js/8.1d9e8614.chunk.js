(this["webpackJsonpbioreactor-ui"]=this["webpackJsonpbioreactor-ui"]||[]).push([[8],{108:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return u}));var a=n(120),c=n.n(a),r="BIOREACTOR_devices",l="9001",i="tcp",s=["tcp","http","wss"],o=Object.keys(c.a).map((function(e){return c.a[e].kind})),u={compactSettings:"uc",runExpirement:"r",kinetic:"k",reset:"ur1234",sleep:"l",setParameter:function(e,t){return"".concat(e).concat(t)}}},121:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(4),c=n(21),r=n(0);function l(){var e=Object(c.L)(),t=function(t,n,c){var l=c.textColor,i=c.Icon,s=c.timeout;e.addNotification({title:Object(r.jsx)("span",{className:Object(a.a)("text-base font-semibold",l+"500"),children:t}),content:Object(r.jsx)("span",{className:"text-sm text-neutral-500",children:n}),icon:Object(r.jsx)(i,{className:Object(a.a)("w-8 h-8",l+"600")})},s)};return{addErrorNotification:function(e,n){t(e,n,{textColor:"text-danger-",Icon:c.E,timeout:5e3})},addWarningNotification:function(e,n){t(e,n,{textColor:"text-warning-",Icon:c.E,timeout:2500})},addInfoNotification:function(e,n){t(e,n,{textColor:"text-primary-",Icon:c.v,timeout:1e3})}}}},388:function(e,t,n){"use strict";n.r(t);var a=n(50),c=n.n(a),r=n(28),l=n(58),i=n(6),s=n(3),o=n(149),u=n(21),d=n(121),f=n(109),m=n(379),x=new m.a(navigator.serial),b=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.requestDevices();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.updateDevices();case 2:return e.next=4,x.getDevicesList({ready:!0});case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(c.a.mark((function e(t){var n,a,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:3e3,a=setInterval(Object(l.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:n=e.sent,Object(f.isFunction)(t)&&t(n);case 4:case"end":return e.stop()}}),e)}))),n),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p={requestDevices:b,getConnectedDevices:v,continuousUpdateDevices:j,sendCommand:function(){var e=Object(l.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.sendCommand(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},h=n(108),O=n(0),w=h.e.map((function(e){return{label:e,type:"option"}})),g=function(e){var t=e.device,n=void 0===t?{label:"--"}:t,a=e.deviceType,r=void 0===a?w.filter((function(e){return"SimpleSpectro"===e.label}))[0]:a,o=e.onSelectDevice,f=e.onSelectType,m=Object(d.a)(),x=m.addInfoNotification,b=m.addWarningNotification,v=Object(s.useState)([]),j=Object(i.a)(v,2),h=j[0],g=j[1];Object(s.useEffect)((function(){f(r)}),[]),Object(s.useEffect)((function(){y();var e=p.continuousUpdateDevices((function(e){N(e)}));return function(){return e.then((function(e){return clearInterval(e)}))}}),[h.length]);var y=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getConnectedDevices();case 2:(t=e.sent).length>0&&((null===n||void 0===n?void 0:n.id)||o(E(t)[0]),g(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e){e.length>h.length?(x("New device connected"),(null===n||void 0===n?void 0:n.id)||o(E(e)[0])):e.length<h.length&&(b("Device disconnected"),0===e.length&&o({label:"--"})),g(e)},k=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.activeElement.blur(),e.next=3,p.requestDevices();case 3:return e.next=5,p.getConnectedDevices();case 5:t=e.sent,N(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){return e.map((function(e){return{id:e.id,label:"Device-"+e.id,type:"option"}}))};return Object(O.jsxs)("div",{className:"m-4 py-3 px-4 flex flex-col-reverse sm:flex-row sm:justify-between sm:items-center rounded-md bg-white shadow ",children:[Object(O.jsxs)("div",{className:"flex flex-row flex-wrap justify-between",children:[Object(O.jsxs)("div",{className:"my-1 mx-2 w-full sm:w-max flex items-center justify-end flex-nowrap",children:[Object(O.jsx)("h3",{className:"mr-2 text-base font-medium text-neutral-800 ",children:"Device Type :"}),Object(O.jsx)(u.c,{title:r.label,options:[w],onSelect:f})]}),Object(O.jsxs)("div",{className:"my-1 mx-2 w-full sm:w-max flex items-center justify-end flex-nowrap",children:[Object(O.jsx)("h3",{className:"mr-2 text-base font-medium text-neutral-800",children:"Select device :"}),Object(O.jsx)(u.c,{title:n.label,options:[E(h)],onSelect:o})]})]}),Object(O.jsx)(u.a,{className:"mb-3 sm:mb-0",onClick:k,children:"Request device"})]})},y=function(e){var t=e.title;return Object(O.jsx)("div",{className:"my-4",children:Object(O.jsx)(u.b,{justify:"start",children:Object(O.jsx)("span",{className:"px-2 bg-white text-xs font-medium text-neutral-400",children:t})})})},N=n(4);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function E(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var S=s.createElement("g",null,s.createElement("g",null,s.createElement("g",null,s.createElement("circle",{cx:265.911,cy:132.089,r:25}),s.createElement("path",{d:"M437.02,74.98C388.667,26.629,324.38,0,256,0S123.333,26.629,74.98,74.98C26.629,123.333,0,187.62,0,256 s26.629,132.667,74.98,181.02C123.333,485.371,187.62,512,256,512s132.667-26.629,181.02-74.98 C485.371,388.667,512,324.38,512,256S485.371,123.333,437.02,74.98z M256,472c-119.103,0-216-96.897-216-216S136.897,40,256,40 s216,96.897,216,216S375.103,472,256,472z"}),s.createElement("path",{d:"M278.528,366.083c-4.024,1.965-7.223,0.347-8.771-0.792c-1.546-1.138-4.041-3.705-3.359-8.17l17.163-114.269 c2.728-17.888-4.633-35.66-19.212-46.381c-14.582-10.724-33.746-12.454-50.01-4.517l-24.695,12.044l17.527,35.955l24.708-12.051 c4.023-1.962,7.223-0.345,8.771,0.793c1.547,1.138,4.041,3.706,3.36,8.17l-17.163,114.269 c-2.729,17.888,4.633,35.659,19.211,46.381c8.508,6.257,18.574,9.451,28.716,9.451c7.24,0,14.519-1.629,21.294-4.935 l24.696-12.045l-17.53-35.955L278.528,366.083z"})))),C=s.createElement("g",null),I=s.createElement("g",null),D=s.createElement("g",null),T=s.createElement("g",null),R=s.createElement("g",null),P=s.createElement("g",null),A=s.createElement("g",null),H=s.createElement("g",null),q=s.createElement("g",null),z=s.createElement("g",null),M=s.createElement("g",null),B=s.createElement("g",null),F=s.createElement("g",null),G=s.createElement("g",null),L=s.createElement("g",null);function J(e,t){var n=e.title,a=e.titleId,c=E(e,["title","titleId"]);return s.createElement("svg",k({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},c),n?s.createElement("title",{id:a},n):null,S,C,I,D,T,R,P,A,H,q,z,M,B,F,G,L)}var U=s.forwardRef(J),W=(n.p,function(e){var t=e.title,n=e.value,a=e.unit,c=e.placeholder,r=e.info,l=e.type,i=void 0===l?"text":l,s=e.editable,o=e.onChange,u=e.className;return Object(O.jsx)("div",{className:Object(N.a)("flex",u),children:Object(O.jsxs)("div",{className:"w-full m-1 p-2 flex flex-col justify-between items-center sm:items-start rounded-md bg-white shadow",children:[Object(O.jsxs)("div",{className:"w-full py-1 flex flex-row justify-between items-start relative",children:[Object(O.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:t}),r&&Object(O.jsxs)("div",{className:" group",children:[Object(O.jsx)(U,{height:"12",width:"12",className:"my-1 fill-current text-neutral-400 group-hover:text-primary-600"}),Object(O.jsx)("div",{className:"absolute bottom-full right-0 hidden group-hover:flex z-10 p-1 bg-neutral-50 shadow-md rounded","max-content":100,children:Object(O.jsx)("span",{className:" text-xs text-neutral-500 ",children:r})})]})]}),Object(O.jsxs)("div",{className:"w-full mt-2 flex flex-row justify-center sm:justify-end items-center",children:[s?Object(O.jsx)("input",{className:"w-full p-1 bg-neutral-50 border-neutral-200 text-right text-black text-sm font-bold placeholder-neutral-500 placeholder-opacity-30 rounded  focus:outline-none focus:ring-0 leading-none",id:t,name:t,type:i,placeholder:c,value:n,onChange:function(e){return o(e.target.value)}}):Object(O.jsx)("p",{className:"text-xl font-bold text-black",children:n}),Object(O.jsx)("p",{className:"ml-1 text-sm font-medium text-gray-400",children:a})]})]})})}),_=function(e){var t,n=e.data,a=e.device,r=Object(d.a)(),i=r.addInfoNotification,s=r.addErrorNotification,o=function(){var e=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.sendCommand(a.id,t);case 3:n=e.sent,console.log("runExpirement"),console.log(n),i(n),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("runExpirement error"),console.log(e.t0),s(e.t0);case 14:document.activeElement.blur();case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"flex flex-col mt-2",children:[Object(O.jsxs)("div",{className:"flex flex-row justify-end",children:[Object(O.jsx)(u.a,{className:"mx-2",onClick:function(){return o(h.a.runExpirement)},children:"Run experiment"}),Object(O.jsx)(u.a,{className:"mx-2",onClick:function(){return o(h.a.kinetic)},children:"Run Kinetic"})]}),(null===n||void 0===n?void 0:n.epoch)&&Object(O.jsx)(y,{title:Object(O.jsxs)("p",{className:" text-base font-medium text-black self-start",children:["Awake time:",Object(O.jsx)("span",{className:"mx-1 text-sm text-neutral-500",children:(null===n||void 0===n?void 0:n.epoch)/1e3+"s"})]})}),Object(O.jsx)("div",{className:" flex flex-row justify-around flex-wrap",children:null===n||void 0===n||null===(t=n.parametersArray)||void 0===t?void 0:t.map((function(e,t){return Object(O.jsx)(W,{title:e.name||e.label,value:e.value*e.factor,unit:e.unit,info:e.description,className:"w-full sm:w-1/2  md:w-1/3 lg:w-1/4 flex"},t)}))})]})},K=n(1),X=function(e){var t=e.data,n=e.deviceType,a=Object(s.useState)([]),c=Object(i.a)(a,2),l=c[0],o=c[1];Object(s.useEffect)((function(){var e,n=t&&t.length>0?null===(e=t[0].parametersArray)||void 0===e?void 0:e.map((function(e){return e.name||e.label})):[];o(["Epoch"].concat(Object(r.a)(n)))}),[n]);var d=Object(s.useCallback)((function(e){var t,n="text-xs text-center p-2";return Object(O.jsxs)("tr",{children:[Object(O.jsx)(u.H,{compact:!0,className:n+" font-medium",children:e.value.epoch}),null===(t=e.value.parametersArray)||void 0===t?void 0:t.map((function(e,t){return Object(O.jsx)(u.H,{compact:!0,className:n,children:e.value},t)}))]})}),[]),f=Object(s.useCallback)((function(){return Object(O.jsx)("tr",{children:null===l||void 0===l?void 0:l.map((function(e){return Object(O.jsx)(u.I,{className:"p-2 text-center font-normal normal-case",compact:!0,children:e},e)}))})}),[l]),m=Object(u.M)(t,{itemsPerPage:10,withText:!0}),x=m.pagination,b=m.data;return Object(O.jsx)("div",{className:"w-full p-1 overflow-x-auto",children:Object(O.jsx)(u.G,{pagination:x,data:b.map((function(e){return Object(K.a)(Object(K.a)({},e),{},{id:e.epoch})})),Header:f,Tr:d})})},Q=n(105),V=[1,2,5,10,30,60,120,300].map((function(e){return{label:e>59?"".concat(e/60," m"):"".concat(e," s"),value:1e3*e,type:"option"}})),Y=function(e){var t=e.device,n=e.data,a=e.refreshInterval,r=void 0===a?1e3:a,o=e.setRefreshInterval,f=Object(d.a)(),m=f.addInfoNotification,x=f.addErrorNotification,b=Object(s.useState)([]),v=Object(i.a)(b,2),j=v[0],w=v[1],g=Object(s.useState)({label:r/1e3+" s",value:r,type:"option"}),N=Object(i.a)(g,2),k=N[0],E=N[1],S=Object(s.useState)(!1),C=Object(i.a)(S,2),I=C[0],D=C[1],T=Object(s.useState)(!1),R=Object(i.a)(T,2),P=R[0],A=R[1];Object(s.useEffect)((function(){var e=null===n||void 0===n?void 0:n.parameters,t=e&&Object.keys(e).filter((function(t){return e[t].writable})).map((function(t){return Object(K.a)(Object(K.a)({},e[t]),{},{key:t})}));w(t)}),[I]);var H=function(){setTimeout((function(){D(!I)}),1e3)},q=function(){var e=Object(l.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.sendCommand(t.id,h.a.reset);case 3:n=e.sent,m(n),H(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),x(e.t0.message);case 11:document.activeElement.blur();case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.sendCommand(t.id,h.a.sleep);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),x(e.t0.message);case 8:document.activeElement.blur();case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(c.a.mark((function e(){var n,a,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(!0),n=!1,e.prev=2,a=Object(Q.a)(j),e.prev=4,a.s();case 6:if((r=a.n()).done){e.next=15;break}if(!(l=r.value).edited){e.next=13;break}return console.log(l.key+l.value),e.next=12,p.sendCommand(t.id,h.a.setParameter(l.key,l.value));case 12:n=!0;case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:m(n?"Saved":"No changes to save"),H(),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(2),x(e.t1.message);case 30:A(!1),document.activeElement.blur();case 32:case"end":return e.stop()}}),e,null,[[2,27],[4,17,20,23]])})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"w-full flex flex-col ",children:[Object(O.jsxs)("div",{className:"mt-2 flex flex-col sm:flex-row justify-between",children:[Object(O.jsxs)("div",{className:"my-1 mx-2 flex flex-row items-center justify-end",children:[Object(O.jsx)("p",{className:"mx-1 text-sm font-medium text-neutral-700",children:"Refresh inreval :"}),Object(O.jsx)(u.c,{title:k.label,options:[V],onSelect:function(e){E(e),o(e.value),document.activeElement.blur()}})]}),Object(O.jsxs)("div",{className:"my-1 flex flex-row justify-end",children:[Object(O.jsx)(u.a,{className:"mx-2",variant:"white",onClick:z,children:"Sleep"}),Object(O.jsx)(u.a,{className:"mx-2 ",variant:"white",onClick:q,children:"Reset Device"})]})]}),(null===j||void 0===j?void 0:j.length)>0&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(y,{title:"Edit parameters"}),Object(O.jsx)("div",{className:"flex flex-row justify-start flex-wrap",children:j.map((function(e,t){return Object(O.jsx)(W,{title:e.name||e.label,value:e.value*e.factor,placeholder:e.description,unit:e.unit,info:e.description,editable:!0,onChange:function(t){return function(e,t){var n=j.map((function(n){return n.label===e?Object(K.a)(Object(K.a)({},n),{},{value:t/n.factor,edited:!0}):n}));w(n)}(e.label,t)},className:"w-full sm:w-1/2  md:w-1/3 lg:w-1/4 flex"},t)}))}),Object(O.jsxs)(u.a,{className:"mx-2 mt-2 flex self-end",variant:"white",onClick:M,children:[P&&Object(O.jsx)(u.l,{className:"text-primary-600 w-5 mr-2"}),"Save"]})]})]})},Z=["General","History","Configuration"].map((function(e){return{value:e,label:e}}));t.default=function(){var e=Object(s.useState)(),t=Object(i.a)(e,2),n=t[0],a=t[1],f=Object(s.useState)(),m=Object(i.a)(f,2),x=m[0],b=m[1],v=Object(s.useState)(Z[0]),j=Object(i.a)(v,2),w=j[0],y=j[1],N=Object(s.useState)({}),k=Object(i.a)(N,2),E=k[0],S=k[1],C=Object(s.useState)([]),I=Object(i.a)(C,2),D=I[0],T=I[1],R=Object(s.useState)(1e4),P=Object(i.a)(R,2),A=P[0],H=P[1],q=Object(d.a)().addErrorNotification,z=Object(s.useCallback)(function(){var e=Object(l.a)(c.a.mark((function e(t){var n,a,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=17;break}return e.prev=1,e.next=4,p.sendCommand(t,h.a.compactSettings);case 4:n=e.sent,a=Object(o.parseCurrentSettings)(n,{kind:null===x||void 0===x?void 0:x.label,parameterInfo:!0,parametersArray:!0}),S(a),l=[a].concat(Object(r.a)(D)),console.log(l),T(l),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),q(e.t0.message);case 15:e.next=18;break;case 17:S({});case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),[D,null===x||void 0===x?void 0:x.label,null===n||void 0===n?void 0:n.id]);Object(s.useEffect)((function(){if(null===n||void 0===n?void 0:n.id){var e=setInterval((function(){return z(null===n||void 0===n?void 0:n.id)}),A);return function(){clearInterval(e)}}}),[A,z]),Object(s.useEffect)((function(){T([]),z(null===n||void 0===n?void 0:n.id)}),[null===x||void 0===x?void 0:x.label,null===n||void 0===n?void 0:n.id]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{deviceType:x,onSelectType:b,device:n,onSelectDevice:function(e){a(e),z(null===e||void 0===e?void 0:e.id)}}),(null===n||void 0===n?void 0:n.id)?Object(O.jsxs)("div",{className:"mx-4 pb-4",children:[Object(O.jsx)(u.f,{onSelect:y,selected:w,options:Z}),Object(O.jsx)("div",{className:"p-3 mt-4 sm:m-0 flex flex-col items-center rounded-md sm:rounded-t-none bg-white shadow ",children:function(e){switch(e.value){case"General":return Object(O.jsx)(_,{data:E,device:n});case"History":return Object(O.jsx)(X,{data:D,deviceType:null===x||void 0===x?void 0:x.label});case"Configuration":return Object(O.jsx)(Y,{device:n,data:E,refreshInterval:A,setRefreshInterval:H});default:return Object(O.jsx)("div",{})}}(w)})]}):Object(O.jsxs)("div",{className:"mx-5 mt-16 flex flex-col items-center",children:[Object(O.jsx)("h3",{className:"text-base font-bold text-gray-300 leading-loose",children:"No connected Device"}),Object(O.jsx)("h3",{className:"text-sm font-base text-gray-300",children:"Please plug your device into the computer"})]})]})}}}]);
//# sourceMappingURL=8.1d9e8614.chunk.js.map