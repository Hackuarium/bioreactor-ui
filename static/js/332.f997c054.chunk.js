"use strict";(self.webpackChunkbioreactor_ui=self.webpackChunkbioreactor_ui||[]).push([[332],{6499:function(e,n,t){t.d(n,{Z:function(){return c}});var s=t(8182),r=t(5749),a=t(184);function c(){var e=(0,r.JI$)(),n=function(n,t,r){var c=r.textColor,i=r.Icon,o=r.timeout;e.addNotification({title:(0,a.jsx)("span",{className:(0,s.Z)("text-base font-semibold",c+"500"),children:n}),content:(0,a.jsx)("span",{className:"text-sm text-neutral-500",children:t}),icon:(0,a.jsx)(i,{className:(0,s.Z)("w-8 h-8",c+"600")})},o)};return{addErrorNotification:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;n(e,t,{textColor:"text-danger-",Icon:r.mhZ,timeout:s})},addWarningNotification:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2500;n(e,t,{textColor:"text-warning-",Icon:r.mhZ,timeout:s})},addInfoNotification:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;n(e,t,{textColor:"text-primary-",Icon:r.aY4,timeout:s})}}}},3332:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var s=t(4165),r=t(5861),a=t(9439),c=t(2791),i=t(7689),o=t(5749),l=t(5155),u=t(8808),d=t(6499),f=t(184),m=function(e){var n=e.data,t=e.onSelect,s=e.onEdit,r=e.onDelete;return(0,f.jsx)("div",{className:"overflow-hidden bg-white shadow sm:rounded-md",children:n.map((function(e){var n,a;return(0,f.jsxs)("li",{className:"block transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none focus:bg-gray-50 cursor-pointer",onClick:function(n){return t(e,n)},children:[(0,f.jsxs)("div",{className:"relative flex items-center px-4 py-4 sm:px-6",children:[(0,f.jsx)("div",{className:"flex items-center flex-1 min-w-0",children:(0,f.jsxs)("div",{className:"flex-1 min-w-0 px-4 sm:grid sm:grid-col-2 sm:gap-4",children:[(0,f.jsxs)("div",{className:"col-span-2 flex flex-row items-center flex-wrap",children:[(0,f.jsx)("p",{className:"mr-4 text-lg font-semibold truncate text-primary-700 ",children:e.name}),(0,f.jsx)(o.Cts,{dot:!0,rounded:!0,label:e.connected?"Active":"Inactive",size:o.ODk.SMALL,color:e.connected?"success":"neutral",className:"w-min h-min"})]}),(0,f.jsxs)("div",{className:"flex flex-col text-xs font-italic text-neutral-600",children:[(0,f.jsxs)("p",{className:"truncate",children:[(0,f.jsx)("span",{className:"font-semibold",children:"Device kind : "}),null===(a=e.kind)||void 0===a?void 0:a.kind]}),(0,f.jsxs)("p",{className:"truncate",children:[(0,f.jsx)("span",{className:"font-semibold",children:"URL : "}),"".concat(e.protocol,"://").concat(e.url,":").concat(e.port)]}),(0,f.jsxs)("p",{className:"truncate",children:[(0,f.jsx)("span",{className:"font-semibold",children:"Topic : "}),e.topic]})]}),(0,f.jsxs)("div",{className:"pt-2 sm:pt-0 flex justify-end items-center cursor-default",children:[(0,f.jsx)("button",{className:"mx-1 p-2 border rounded shadow-sm bg-neutral-100 focus:outline-none active:bg-neutral-200",onClick:function(n){return s(e,n)},children:(0,f.jsx)(o.cw2,{className:"text-gray-700"})}),(0,f.jsx)("button",{className:"mx-1 p-2 border rounded shadow-sm bg-neutral-100 focus:outline-none active:bg-neutral-200",onClick:function(n){return r(e,n)},children:(0,f.jsx)(o.L9D,{className:"text-gray-700"})})]})]})}),(0,f.jsx)("div",{children:(0,f.jsx)(o.tl9,{className:"w-5 h-5 text-neutral-400"})})]}),(0,f.jsx)("div",{className:"w-full border-t border-neutral-100"})]},(null===(n=e.kind)||void 0===n?void 0:n.kind)+e.name)}))})},x=t(9783),h=t(7104),v=function(e){e.history;var n=e.match,t=(0,c.useState)(!1),v=(0,a.Z)(t,2),p=v[0],j=v[1],N=(0,c.useState)([]),b=(0,a.Z)(N,2),w=b[0],g=b[1],k=(0,c.useState)({}),Z=(0,a.Z)(k,2),y=Z[0],C=Z[1],S=(0,d.Z)().addErrorNotification,I=(0,i.s0)();(0,c.useEffect)((function(){E()}),[]),(0,c.useEffect)((function(){var e=(0,l.XS)(w,(function(e){var n=[],t=!1;e.forEach((function(e){if("fulfilled"===e.status){var s=e.value.device;s.connected||(s.connected=!0,t=!0),n.push(s)}else{var r=e.reason.device;r.connected&&(r.connected=!1,t=!0),n.push(r)}})),t&&g(n)}),1e4);return function(){return e.then((function(e){return clearInterval(e)}))}}),[w]);var E=function(){return(0,u.PW)(h.me.broadcast).then(g)},D=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,l.cO)(n),e.next=3,(0,u.S6)(t);case 3:E();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),A=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.xl)(n);case 2:E();case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:"p-8",children:[(0,f.jsx)("h2",{className:"text-3xl font-semibold mb-10",children:"Broadcast devices"}),(0,f.jsx)("div",{className:"w-full flex justify-end mb-4",children:(0,f.jsx)(o.zxk,{onClick:function(){return j(!0)},children:"Add"})}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"w-full my-2 flex flex-row items-center ",children:[(0,f.jsx)("h3",{className:"w-max ml-2 mr-4 text-neutral-600 text-sm whitespace-nowrap ",children:"Available devices"}),(0,f.jsx)("div",{className:"w-full border-t border-neutral-300"})]}),(0,f.jsx)(m,{data:w,onSelect:function(e,t){I(n.url+"/"+e._id)},onEdit:function(e,n){n.stopPropagation(),C(e),j(!0)},onDelete:function(e,n){n.stopPropagation(),(0,u.n1)(e._id).then((function(){return E()})).catch((function(e){return S(e.name,e.message)}))}})]}),(0,f.jsx)(x.Z,{isOpen:p,onClose:function(){j(!1),C({})},initialValues:y,onSave:D,onUpdate:A})]})}}}]);
//# sourceMappingURL=332.f997c054.chunk.js.map