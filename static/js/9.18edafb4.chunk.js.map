{"version":3,"sources":["services/devicesOptions.js","services/mqttService.js","services/db.js","services/broadCastDeviceService.js","pages/BroadcastDeviceDetails/deviceParameters.jsx","pages/BroadcastDeviceDetails/DataTable.jsx","pages/BroadcastDeviceDetails/ActualDetails.jsx","pages/BroadcastDeviceDetails/DetailsPlot.jsx","pages/BroadcastDeviceDetails/Details.jsx","pages/BroadcastDeviceDetails/index.jsx"],"names":["DEVICES_DB","DEFAULT_PORT","DEFAULT_PROTOCOL","DEVICE_PROTOCOLS","COMMANDS","help","settings","compactSettings","runExperiment","kinetic","reset","sleep","setParameter","label","value","DEVICE_KINDS_OPTIONS","Object","keys","legoinoDeviceInformation","map","key","kind","filter","type","getDeviceType","deviceId","selectedDeviceType","fromDeviceID","Number","element","id","e","console","log","client","DB","dbName","connect","PouchDB","getInfo","Promise","resolve","reject","db","info","then","res","close","catch","err","getAll","options","a","allDocs","include_docs","get","docId","Error","put","doc","update","_id","resGet","_rev","resPut","errPut","remove","resRm","errRm","url","protocol","port","username","password","onSuccess","onError","connected","hostname","isFunction","brokerUrl","mqtt","keepalive","reconnectPeriod","on","stream","error","name","end","getClientInstance","subscribe","topic","onMessageReceived","qos","payload","data","parseCurrentSettings","toString","unsubscribe","disconnect","callback","throwDbError","additionalMsg","message","getSavedDevices","rows","i","getDevice","updateDevice","deviceData","deleteDevice","deviceID","addDevice","connectDevice","mqttClient","dbClient","onSubscribe","Date","now","getAllData","getLastData","descending","limit","getPageData","skip","getAllDataCount","total_rows","testDeviceConnection","DEVICES_PARAMETERS","parameters","variable","description","factor","unit","writable","series","color","getParams","p","DataTable","props","useState","setParameters","useEffect","DetailType","params","EpochToDate","epoch","_epoch","getTimezoneOffset","className","Header","length","Tr","toLocaleString","previousData","pagination","itemsPerPage","onPageChange","page","setCurrentPage","currentPage","totalCount","count","withText","ActualDetails","index","title","DetailsPlot","setSeries","setData","allData","setAllData","lines","setLines","setType","pr","getSeries","t","forEach","s","table","d","push","x","y","getSeriesLines","dataItems","xAxis","yAxis","lineStyle","stroke","strokeWidth","displayMarker","markerShape","onSelect","width","height","margin","bottom","left","top","right","seriesViewportStyle","position","labelSpace","paddingEnd","paddingStart","scale","Details","DeviceDetails","match","setCount","selected","setSelected","setPreviousData","deviceClient","setDeviceClient","deviceInfos","setDeviceInfos","deviceInfo","result","style","backgroundColor","borderRadius","option","String"],"mappings":"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","file":"static/js/9.18edafb4.chunk.js","sourcesContent":["import legoinoDeviceInformation from 'legoino-device-information';\n\n// Default Values\n\nexport const DEVICES_DB = 'BIOREACTOR_devices';\nexport const DEFAULT_PORT = '80'; // old '8080'\nexport const DEFAULT_PROTOCOL = 'http'; // old tcp\n\n// Static Values\n\nexport const DEVICE_PROTOCOLS = ['http', 'tcp', 'wss'];\n\nexport const COMMANDS = {\n  help: 'h',\n  settings: 'u',\n  compactSettings: 'uc',\n  runExperiment: 'r',\n  kinetic: 'k',\n  reset: 'ur1234',\n  sleep: 'l',\n  setParameter: (label, value) => `${label}${value}`,\n};\n\nexport const DEVICE_KINDS = Object.keys(legoinoDeviceInformation).map(\n  (key) => legoinoDeviceInformation[key].kind,\n);\n\nexport const DEVICE_KINDS_OPTIONS = Object.keys(legoinoDeviceInformation)\n  .filter((key) => legoinoDeviceInformation[key].kind)\n  .map((key) => ({\n    ...legoinoDeviceInformation[key],\n    label: legoinoDeviceInformation[key].kind,\n    type: 'option',\n  }));\n\nexport const DEVICE_STATUS = {\n  opening: 1,\n  opened: 2,\n  closed: 3,\n  missing: 9,\n  error: 10,\n};\n\nexport const DEVICE_TYPE = {\n  broadcast: 'broadcast',\n  interactive: 'interactive',\n  local: 'local',\n};\n\nexport const getDeviceType = (deviceId) => {\n  try {\n    if (deviceId) {\n      const selectedDeviceType = legoinoDeviceInformation.fromDeviceID(\n        Number(deviceId),\n      );\n      return DEVICE_KINDS_OPTIONS.filter(\n        (element) => element.id === selectedDeviceType.id,\n      )[0];\n    }\n  } catch (e) {\n    console.log(e);\n    return undefined;\n  }\n};\n","import mqtt from 'mqtt';\nimport { isFunction } from 'lodash';\nimport { parseCurrentSettings } from 'legoino-util';\n\n// Private Functions\nlet client;\n\nconst getClientInstance = (\n  url,\n  protocol,\n  port,\n  username,\n  password,\n  onSuccess,\n  onError,\n) => {\n  // if client is already connected\n  if (client && client.connected && client.options.hostname === url)\n    isFunction(onSuccess) && onSuccess(client);\n\n  const brokerUrl = `${protocol}://${url}:${port}`;\n  client = mqtt.connect(brokerUrl, {\n    keepalive: 300,\n    reconnectPeriod: 5000,\n  });\n\n  client.on('connect', () => {\n    console.log(`connected to ${brokerUrl} : ${client.connected}`);\n    isFunction(onSuccess) && onSuccess(client);\n  });\n\n  client.stream.on('error', (err) => {\n    console.log(err);\n    const error = new Error(`Couldn't connect to BROKER \"${brokerUrl}\"`);\n    error.name = 'Mqtt Error';\n    client.end();\n    isFunction(onError) && onError(error);\n  });\n};\n\nconst parseToJson = (data) => {\n  return parseCurrentSettings(data.toString(), {});\n};\n\n// Public Functions\n\nexport const connect = (url, protocol, port, username, password) => {\n  const clientPromise = new Promise((resolve, reject) => {\n    getClientInstance(\n      url,\n      protocol,\n      port,\n      username,\n      password,\n      (client) => resolve(client),\n      (error) => reject(error),\n    );\n  });\n  return clientPromise;\n};\n\n// TO DO: update function\n\nexport const subscribe = (client, topic, onMessageReceived, onError) => {\n  client.subscribe(topic, { qos: 2 }, (err) => {\n    err\n      ? isFunction(onError) && onError(err)\n      : client.on('message', (topic, payload) => {\n          isFunction(onMessageReceived) &&\n            onMessageReceived(parseToJson(payload));\n        });\n  });\n\n  const unsubscribe = (onError) => client.unsubscribe(topic, {}, onError);\n\n  return unsubscribe;\n};\n\nexport const disconnect = (client, callback) =>\n  client.end(() => {\n    console.log(`mqtt broker \"${client.options.hostname}\" disconnected`);\n    isFunction(callback) && callback();\n  });\n","import PouchDB from 'pouchdb';\n\n// Wrap Db interface in case of switching to another Db other than \"PouchDb\"\n\nconst DB = (dbName) => {\n  const connect = () => new PouchDB(dbName);\n\n  // DB operations to return\n\n  const getInfo = () =>\n    new Promise((resolve, reject) => {\n      const db = connect();\n      db.info()\n        .then((res) => db.close(() => resolve(res)))\n        .catch((err) => db.close(() => reject(err)));\n    });\n\n  const getAll = async (options) =>\n    new Promise((resolve, reject) => {\n      const db = connect();\n      db.allDocs({\n        include_docs: true,\n        ...options,\n      })\n        .then((res) => db.close(() => resolve(res)))\n        .catch((err) => db.close(() => reject(err)));\n    });\n\n  const get = (docId) =>\n    new Promise((resolve, reject) => {\n      const db = connect();\n      docId\n        ? db\n            .get(docId)\n            .then((res) => db.close(() => resolve(res)))\n            .catch((err) => db.close(() => reject(err)))\n        : reject(new Error('Doc fetch : docId is required'));\n    });\n\n  const put = (doc) =>\n    new Promise((resolve, reject) => {\n      const db = connect();\n      !('_id' in doc)\n        ? reject(new Error('Doc create : _id is required in doc'))\n        : db\n            .put(doc)\n            .then((res) => db.close(() => resolve(res)))\n            .catch((err) => db.close(() => reject(err)));\n    });\n\n  const update = (doc) =>\n    new Promise((resolve, reject) => {\n      const db = connect();\n      !('_id' in doc)\n        ? reject(new Error('Doc update : _id is required in doc'))\n        : db\n            .get(doc._id)\n            .then((resGet) =>\n              db\n                .put({ ...doc, _rev: resGet._rev })\n                .then((resPut) => db.close(() => resolve(resPut)))\n                .catch((errPut) => reject(errPut)),\n            )\n            .catch((err) => db.close(() => reject(err)));\n    });\n\n  const remove = (docId) =>\n    new Promise((resolve, reject) => {\n      const db = connect();\n      docId\n        ? db\n            .get(docId)\n            .then((resGet) =>\n              db\n                .remove({ _id: docId, _rev: resGet._rev })\n                .then((resRm) => db.close(() => resolve(resRm)))\n                .catch((errRm) => reject(errRm)),\n            )\n            .catch((err) => db.close(() => reject(err)))\n        : reject(new Error('Doc remove : docId is required'));\n    });\n\n  return {\n    getInfo,\n    getAll,\n    get,\n    put,\n    update,\n    remove,\n  };\n};\n\nexport default DB;\n","import DB from './db';\nimport { isFunction } from 'lodash';\nimport { connect, subscribe, disconnect } from './mqttService';\nimport { DEVICES_DB, DEFAULT_PORT, DEFAULT_PROTOCOL } from './devicesOptions';\n\n// Private Functions\n\nconst throwDbError = (error, additionalMsg) => {\n  console.log(error);\n  const err = new Error(`${additionalMsg} \\n${error?.message}`);\n  err.name = 'DATABASE_ERROR';\n  throw err;\n};\n\n// Public Functions\n\n// export const getSavedDevices = async () => {\n//   const dbClient = DB(DEVICES_DB);\n//   const list = await dbClient.getAll();\n//   return list.map((item) => item.doc);\n// };\nexport const getSavedDevices = async () =>\n  DB(DEVICES_DB)\n    .getAll()\n    .then((res) => res.rows.map((i) => i.doc))\n    .catch((e) => throwDbError(e, `Get locally saved devices error`));\n\n// export const getDevice = async (deviceId) => {\n//   const dbClient = db.connect(DEVICES_DB);\n//   const device = await dbClient.get(deviceId);\n//   return device;\n// };\nexport const getDevice = async (deviceId) =>\n  DB(DEVICES_DB)\n    .get(deviceId)\n    .catch((e) => throwDbError(e, `Get device error`));\n\n// export const updateDevice = async (deviceData) => {\n//   const dbClient = db.connect(DEVICES_DB);\n//   return dbClient.update(deviceData);\n// };\nexport const updateDevice = async (deviceData) =>\n  DB(DEVICES_DB)\n    .update(deviceData)\n    .catch((e) => throwDbError(e, `Update device error`));\n\n// export const deleteDevice = (deviceID) => {\n//   const dbClient = db.connect(DEVICES_DB);\n//   return dbClient.remove(deviceID).catch((e) => {\n//     const err = new Error(`Couldn't remove record: ${e.message}`);\n//     err.name = 'Database Error';\n//     throw err;\n//   });\n// };\nexport const deleteDevice = (deviceID) =>\n  DB(DEVICES_DB)\n    .remove(deviceID)\n    .catch((e) => throwDbError(e, `Delete device error`));\n\n// add device to devices DB\n\nexport const addDevice = ({\n  kind,\n  name,\n  url,\n  protocol = DEFAULT_PROTOCOL,\n  port = DEFAULT_PORT,\n  topic,\n  username,\n  password,\n}) =>\n  DB(DEVICES_DB)\n    .put({\n      _id: `${kind}_${name}`,\n      name,\n      url,\n      protocol,\n      port,\n      topic,\n      kind,\n      username,\n      password,\n    })\n    .catch((e) =>\n      e.name === 'conflict'\n        ? throwDbError(e, `Device name must be unique`)\n        : throwDbError(e, `Insert device error`),\n    );\n\n// export const addDevice2 = (props) => {\n//   const dbClient = db.connect(DEVICES_DB);\n//   const { kind, name, url, protocol, port, topic, username, password } = props;\n\n//   // make sure all props are defined\n//   for (let key in props)\n//     if (!props[key]) throw new Error(`Field missing [${key}]`);\n\n//   const id = `${kind}_${name}`;\n\n//   return dbClient\n//     .get(id)\n//     .then((r) => {\n//       // the device already exists in DB\n//       const err = new Error('Another device exists with the same name');\n//       err.payload = { exist: true, payload: r };\n//       throw err;\n//     })\n//     .catch((e) => {\n//       // if the device exists in DB\n//       if (e.payload && e.payload.exist) throw e;\n//       // the device does not exist in DB\n//       return dbClient\n//         .put({\n//           _id: id,\n//           name,\n//           url,\n//           protocol,\n//           port,\n//           topic,\n//           kind,\n//           username,\n//           password,\n//         })\n//         .then((r) => {\n//           // inserted successfully\n//           return { exist: false, inserted: true, payload: r };\n//         })\n//         .catch((e) => {\n//           // DB error\n//           const err = new Error(e.toString());\n//           err.payload = {\n//             exist: false,\n//             inserted: false,\n//             payload: e.toString(),\n//           };\n//           throw err;\n//         });\n//     });\n// };\n\n//\n// connect to broadcast device & return a client instance with {subscribe, disconnect, getAllData, getLastData}\nexport const connectDevice = ({\n  _id,\n  name,\n  kind,\n  deviceId = _id || `${kind}_${name}`,\n  url,\n  protocol = DEFAULT_PROTOCOL,\n  port = DEFAULT_PORT,\n  topic,\n  username,\n  password,\n}) => {\n  const clientPromise = new Promise(async (resolve, reject) => {\n    try {\n      const mqttClient = await connect(url, protocol, port, username, password);\n      const dbClient = DB(deviceId);\n\n      const _subscribe = (onSubscribe, onError) => {\n        const unsubscribe = subscribe(\n          mqttClient,\n          topic,\n          (payload) => {\n            dbClient.put({ _id: Date.now().toString(), ...payload });\n            isFunction(onSubscribe) && onSubscribe(payload);\n          },\n          onError,\n        );\n        return unsubscribe;\n      };\n\n      const _disconnect = () => disconnect(mqttClient);\n\n      const getAllData = () =>\n        dbClient.getAll().then((res) => res.rows.map((i) => i.doc));\n\n      const getLastData = () =>\n        dbClient\n          .getAll({ descending: true, limit: 1 })\n          .then((res) => res.rows.map((i) => i.doc));\n\n      const getPageData = (skip, limit) =>\n        dbClient\n          .getAll({ descending: true, skip: skip, limit: limit })\n          .then((res) => res.rows.map((i) => i.doc));\n\n      const getAllDataCount = () =>\n        dbClient.getAll().then((res) => res.total_rows);\n\n      resolve({\n        subscribe: _subscribe,\n        disconnect: _disconnect,\n        getAllData,\n        getLastData,\n        getPageData,\n        getAllDataCount,\n      });\n    } catch (e) {\n      // connection error\n      reject(e);\n    }\n  });\n\n  return clientPromise;\n};\n\nexport const testDeviceConnection = ({\n  url,\n  protocol = DEFAULT_PROTOCOL,\n  port = DEFAULT_PORT,\n  topic,\n  username,\n  password,\n}) => {\n  const clientPromise = new Promise(async (resolve, reject) => {\n    try {\n      const mqttClient = await connect(url, protocol, port, username, password);\n      const unsubscribe = subscribe(\n        mqttClient,\n        topic,\n        (payload) => {\n          unsubscribe();\n          disconnect(mqttClient, () => resolve(payload));\n        },\n        reject,\n      );\n    } catch (e) {\n      // connection error\n      reject(e);\n    }\n  });\n\n  return clientPromise;\n};\n","export const DEVICES_PARAMETERS = [\n    {\n        label:'Temperature',\n        parameters:[\n            {\n                label: 'Date',\n                variable: 'date',\n                name: 'Date',\n                description: '',\n                factor: 1,\n                unit: '',\n                writable: false,\n                series:false\n            },\n            {\n                label: 'A',\n                variable: 'cpuTemperature',\n                name: 'CPU Temperature',\n                description: '',\n                factor: 1,\n                unit: 'Â°C',\n                writable: false,\n                series:true,\n                color:'red'\n            }\n        ]\n    },\n    {\n        label:'Load',\n        parameters:[\n            {\n                label: 'Date',\n                variable: 'cpuTemperature',\n                name: 'Date',\n                description: '',\n                factor: 1,\n                unit: '',\n                writable: false,\n            },\n            {\n                label: 'H',\n                variable: 'load',\n                name: 'Load',\n                description: 'Total load',\n                factor: 1,\n                unit: '%',\n                writable: false,\n                series:true,\n                color:'red'\n              },\n          \n              {\n                label: 'I',\n                variable: 'userLoad',\n                name: 'User load',\n                description: 'Load from user',\n                factor: 1,\n                unit: '%',\n                writable: false,\n                series:true,\n                color:'blue'\n              },\n          \n              {\n                label: 'J',\n                variable: 'systemLoad',\n                name: 'System load',\n                description: 'Load from system',\n                factor: 1,\n                unit: '%',\n                writable: false,\n                series:true,\n                color:'green'\n              },\n          \n              {\n                label: 'K',\n                variable: 'niceLoad',\n                name: 'Nice load',\n                description: 'Load for Nice',\n                factor: 1,\n                unit: '%',\n                writable: false,\n                series:false,\n                color:'red'\n              },\n          \n              {\n                label: 'L',\n                variable: 'idleLoad',\n                name: 'Idle load',\n                description: 'Idle percent of time',\n                factor: 1,\n                unit: '%',\n                writable: false,\n                series:false,\n                color:'red'\n              },\n          \n              {\n                label: 'M',\n                variable: 'irqLoad',\n                name: 'IRQ load',\n                description: 'Load due to IRQ',\n                factor: 1,\n                unit: '%',\n                writable: false,\n                series:false,\n                color:'red'\n              },\n        ]\n    },\n    {\n        label:'FS',\n        parameters:[\n            {\n                label: 'Date',\n                variable: 'cpuTemperature',\n                name: 'Date',\n                description: '',\n                factor: 1,\n                unit: '',\n                writable: false,\n                series:false,\n                color:'red'\n            },\n            {\n                label: 'N',\n                variable: 'fsMinimalUse',\n                name: 'FS minimal use',\n                description: 'Minimal percent spaced used in a filesystem',\n                factor: 1,\n                unit: '%',\n                writable: false,\n                series:true,\n                color:'green'\n              },\n              {\n                label: 'O',\n                variable: 'fsMaximalUse',\n                name: 'FS maximal use',\n                description: 'Maximal percent spaced used in a filesystem',\n                factor: 1,\n                unit: '%',\n                writable: false,\n                series:true,\n                color:'red'\n              }\n        ]\n    },\n    {\n        label:'I/O',\n        parameters:[\n            {\n                label: 'Date',\n                variable: 'cpuTemperature',\n                name: 'Date',\n                description: '',\n                factor: 1,\n                unit: '',\n                writable: false,\n                series:false,\n                color:'red'\n            },\n            {\n                label: 'D',\n                variable: 'fsRead',\n                name: 'FS Read',\n                description: 'File system read in kb',\n                factor: 1,\n                unit: 'kb',\n                writable: false,\n                series:true,\n                color:'blue'\n              },\n          \n              {\n                label: 'E',\n                variable: 'fsWrite',\n                name: 'FS Write',\n                description: 'File system read in kb',\n                factor: 1,\n                unit: 'kb',\n                writable: false,\n                series:true,\n                color:'black'\n              },\n          \n              {\n                label: 'F',\n                variable: 'networkRead',\n                name: 'Network Read',\n                description: 'File system read in kb',\n                factor: 1,\n                unit: 'kb',\n                writable: false,\n                series:true,\n                color:'red'\n              },\n          \n              {\n                label: 'G',\n                variable: 'networkWrite',\n                name: 'Network Write',\n                description: 'File system read in kb',\n                factor: 1,\n                unit: 'kb',\n                writable: false,\n                series:true,\n                color:'green'\n              },\n        ]\n    }\n];\n\nexport const getParams=(type)=>{\n    return DEVICES_PARAMETERS.filter(p=>p.label===type)[0]? DEVICES_PARAMETERS.filter(p=>p.label===type)[0].parameters:[]\n}\n\nexport const getSeries=(type)=>{\n    return DEVICES_PARAMETERS.filter(p=>p.label===type)[0]? DEVICES_PARAMETERS.filter(p=>p.label===type)[0].parameters.filter(pr=>pr.series===true):[]\n}","import { useState, useEffect } from 'react';\n\nimport { Table } from '../../components/tailwind-ui';\nimport { getParams } from './deviceParameters';\n\nconst DataTable = (props) => {\n  // const [currentPage, setCurrentPage] = useState(1);\n  // const [count, setCount] = useState(50);\n  const [parameters, setParameters] = useState([]);\n\n  useEffect(() => {\n    if (props.DetailType) {\n      const params = getParams(props.DetailType);\n      setParameters(params);\n    }\n    // setCount(props.previousData.length);\n  }, [props]);\n\n  const EpochToDate = (epoch) => {\n    if (epoch < 10000000000) epoch *= 1000; // convert to milliseconds (Epoch is usually expressed in seconds, but Javascript uses Milliseconds)\n    let _epoch = epoch + new Date().getTimezoneOffset() * -1; //for timeZone\n    return new Date(_epoch);\n  };\n\n  return (\n    <div className=\"my-1 overflow-scroll w-24 min-w-full md:min-w-0  bg-white w-full rounded-lg \">\n      <div className=\"flex space-x-100 m-4\">\n        <div className=\"flex-1\">\n          <h2 className=\"text-2xl \">Previous Details</h2>\n          <p className=\"text-sm text-gray-500\">\n            Previous details of the device.\n          </p>\n        </div>\n      </div>\n      <Table\n        className=\"min-w-full table-auto \"\n        Header={() =>\n          parameters.length !== 0 ? (\n            <tr className=\"bg-primary-900\">\n              {parameters.map((p, key) => (\n                <th key={key} className=\"px-4 py-2\">\n                  <span className=\"text-white\">{p.name + ' ' + p.unit}</span>\n                </th>\n              ))}\n            </tr>\n          ) : null\n        }\n        Tr={({ value }) =>\n          value && value.parameters ? (\n            <tr className=\"bg-white border-4 border-gray-200 text-center\">\n              {parameters.map((p, key) => {\n                return p.name === 'Date' ? (\n                  <td className=\"px-4 py-2\" key={key}>\n                    <span>{EpochToDate(value.epoch).toLocaleString()}</span>\n                  </td>\n                ) : (\n                  <td className=\"px-4 py-2\" key={key}>\n                    <span>{value.parameters[p.label]}</span>\n                  </td>\n                );\n              })}\n            </tr>\n          ) : null\n        }\n        data={props.previousData}\n        pagination={{\n          itemsPerPage: 100,\n          onPageChange: (page) => {\n            props.setCurrentPage(page);\n          },\n          page: props.currentPage,\n          totalCount: props.count,\n          withText: true,\n        }}\n      />\n    </div>\n  );\n};\n\nexport default DataTable;\n","import { useState, useEffect } from 'react';\n\nimport { getParams } from './deviceParameters';\nimport { CardValue } from '../../components';\n\nconst ActualDetails = (props) => {\n  const [parameters, setParameters] = useState([]);\n\n  useEffect(() => {\n    if (props.DetailType) {\n      //   console.log(props.data);\n      const params = getParams(props.DetailType);\n      setParameters(params);\n    }\n  }, [props]);\n\n  return (\n    <div>\n      {parameters.length !== 0 ? (\n        <div className=\"flex flex-row justify-start flex-wrap\">\n          {parameters.map((p, index) =>\n            p.name !== 'Date' && props.data[0] ? (\n              <CardValue\n                key={index}\n                title={p.name}\n                value={props.data[0].parameters[p.label]}\n                unit={p.unit}\n                info={p.description}\n                className=\"w-full flex sm:w-1/3 md:w-1/4 lg:w-1/5 \"\n              />\n            ) : null,\n          )}\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default ActualDetails;\n","/* eslint-disable no-unused-vars */\nimport { useState, useEffect } from 'react';\nimport { Axis, LineSeries, Plot, Heading, Legend } from 'react-plot';\nimport { xBoxPlot } from 'ml-spectra-processing';\n\nimport { Dropdown } from '../../components/tailwind-ui';\nimport { getSeries } from './deviceParameters';\n\nconst DetailsPlot = (props) => {\n  const [series, setSeries] = useState([]);\n  const [data, setData] = useState([]);\n  const [allData, setAllData] = useState([]);\n  const [lines, setLines] = useState();\n  const [type, setType] = useState();\n  const [groupedBy, setGroupedBy] = useState('');\n\n  useEffect(() => {\n    setType(props.DetailType);\n  }, [props.DetailType]);\n\n  useEffect(() => {\n    /*var x = xBoxPlot([1,2,3,4,5,6])\n      console.log(x)\n      console.log(type)*/\n    if (type) {\n      setSeries([]);\n      setSeries(getSeries(type));\n    }\n  }, [type]);\n\n  useEffect(() => {\n    if (props.allData.length !== 0) {\n      setAllData(props.allData);\n    }\n  }, [props]);\n\n  const sameHour = (d1, d2) => {\n    console.log(d1.toLocaleString());\n    console.log(d2.toLocaleString());\n    console.log(\n      d1.getFullYear() === d2.getFullYear() &&\n        d1.getMonth() === d2.getMonth() &&\n        d1.getDate() === d2.getDate() &&\n        d1.getHours() === d2.getHours(),\n    );\n    return (\n      d1.getFullYear() === d2.getFullYear() &&\n      d1.getMonth() === d2.getMonth() &&\n      d1.getDate() === d2.getDate() &&\n      d1.getHours() === d2.getHours()\n    );\n  };\n\n  const sameDay = (d1, d2) => {\n    return (\n      d1.getFullYear() === d2.getFullYear() &&\n      d1.getMonth() === d2.getMonth() &&\n      d1.getDate() === d2.getDate()\n    );\n  };\n\n  const sameMonth = (d1, d2) => {\n    return (\n      d1.getFullYear() === d2.getFullYear() && d1.getMonth() === d2.getMonth()\n    );\n  };\n\n  const sameYear = (d1, d2) => {\n    return d1.getFullYear() === d2.getFullYear();\n  };\n\n  const EpochToDate = (epoch) => {\n    if (epoch < 10000000000) epoch *= 1000; // convert to milliseconds (Epoch is usually expressed in seconds, but Javascript uses Milliseconds)\n    let _epoch = epoch + new Date().getTimezoneOffset() * -1; //for timeZone\n    return new Date(_epoch);\n  };\n\n  useEffect(() => {\n    console.log(series);\n    var t = [];\n    if (series && series.length !== 0)\n      series.forEach((s) => {\n        var table = [];\n        allData.forEach((d, key) => {\n          console.log(key /*EpochToDate(d.epoch).toLocaleString()*/);\n          if (d.parameters)\n            table.push({\n              x: key /*EpochToDate(d.epoch)*/,\n              y: d.parameters[s.label],\n            });\n        });\n\n        console.log(table);\n        return t.push({ label: s.name, data: table });\n      });\n    setData(t);\n    console.log(t[0]);\n  }, [series, allData]);\n\n  useEffect(() => {\n    setLines(getSeriesLines());\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data, type]);\n\n  const getDataOfSeries = (label) => {\n    var seriesData = data.filter((d) => d.label === label)[0]\n      ? data.filter((d) => d.label === label)[0].data\n      : null;\n\n    /*if(seriesData.length!==0){\n        var groupedDataTable=[]\n        var minimalDate = /*EpochToDate(*/ //seriesData[0].x//)\n    /*var maximalDate = /*EpochToDate(*/ //seriesData[seriesData.length-1].x//)\n\n    //if(groupedBy==='Hour'){\n    /*var lastDate = minimalDate\n          var stop = false\n          while( lastDate.getTime()!==maximalDate.getTime() && !stop){\n            console.log('')\n            \n            var dataTable = []\n            seriesData.map(\n              d=>{\n                console.log(sameHour(d.x,lastDate))\n                if(sameHour(d.x,lastDate)) {\n                  dataTable.push(d)\n                }\n              })\n            console.log(dataTable)\n            if(dataTable.length >= 5){\n              var t = dataTable.map(d=>d.y)\n              groupedDataTable.push(xBoxPlot(t))\n            } \n            if(dataTable.length===0){\n              stop=true\n            }\n            console.log(lastDate)\n            var next = seriesData.filter(\n              (d)=>{\n                 return !sameHour(d.x,lastDate) && sameDay(d.x,lastDate)\n              })[0]\n\n              var xd= new Date()\n            if(next){\n              console.log(next.x)\n              lastDate = seriesData.filter(d=>\n                (d.x.getHours()>lastDate.getHours()) && (sameDay(d.x,lastDate) )\n              )[0]?seriesData.filter(d=>\n                (d.x.getHours()>lastDate.getHours()) && (sameDay(d.x,lastDate) )\n              )[0].x:xd\n              console.log(lastDate)\n            }\n              if(lastDate instanceof Date && lastDate===xd){\n                stop=true\n              }\n            //lastDate=new Date(lastDate.getFullYear(),lastDate.getMonth(),lastDate.getDate(),lastDate.getHours()+1)\n          }\n\n          console.log(groupedDataTable)\n          \n        //}\n      }*/\n\n    if (groupedBy === 'Day') {\n    }\n    if (groupedBy === 'Month') {\n    }\n    if (groupedBy === 'Year') {\n    }\n\n    var fullSeries = [\n      {\n        x: '',\n        min: '',\n        max: '',\n        Q1: '',\n        Q2: '',\n        Q3: '',\n      },\n    ];\n    return seriesData;\n  };\n\n  const getSeriesLines = () => {\n    var lines = [];\n\n    if (series && series.length !== 0) {\n      series.forEach((s, key) => {\n        var dataItems = getDataOfSeries(s.name);\n\n        lines.push(\n          <LineSeries\n            key={key}\n            data={dataItems}\n            xAxis=\"x\"\n            yAxis=\"y\"\n            lineStyle={{ stroke: s.color, strokeWidth: 2 }}\n            label={s.name}\n            displayMarker\n            markerShape=\"circle\"\n          />,\n        );\n      });\n    }\n    return lines;\n  };\n\n  //console.log(lines)\n\n  const data1 = [\n    { x: 0, y: 0 },\n    { x: 1, y: 2 },\n    { x: 2, y: 5 },\n    { x: 3, y: 9 },\n    { x: 4, y: 16 },\n    { x: 5, y: 22 },\n    { x: 6, y: 26 },\n    { x: 7, y: 28 },\n    { x: 10, y: 28 },\n  ];\n\n  return (\n    <div>\n      <div className=\"flex space-x-100 m-4\">\n        <div className=\"flex-1\">\n          <h2 className=\"text-2xl \">Variations Chart</h2>\n          <p className=\"text-sm text-gray-500\">\n            Chart of variations of the device.\n          </p>\n        </div>\n        <div className=\"flex-2 object-right\">\n          <Dropdown\n            onSelect={function noRefCheck() {}}\n            options={[\n              [\n                {\n                  label: '1 hour',\n                  type: 'option',\n                },\n                {\n                  label: '1 day',\n                  type: 'option',\n                },\n                {\n                  label: '1 month',\n                  type: 'option',\n                },\n                {\n                  label: '1 year',\n                  type: 'option',\n                },\n              ],\n            ]}\n            title=\"Display per\"\n          />\n        </div>\n      </div>\n\n      <div className=\"h-max flex justify-center items-center rounded-md bg-white shadow\">\n        <Plot\n          width={900}\n          height={500}\n          //margin={{ bottom: 45, left: 90, top: 40, right: 20 }}\n          margin={{ bottom: 50, left: 55, top: 20, right: 20 }}\n          seriesViewportStyle={{\n            stroke: 'black',\n            strokeWidth: 0.4,\n          }}\n        >\n          <Heading title={props.Header} />\n\n          <Axis\n            id=\"x\"\n            position=\"bottom\"\n            label=\"Time\"\n            labelSpace={25}\n            paddingEnd={0.1}\n            paddingStart={0.1}\n          />\n          <Axis\n            id=\"y\"\n            position=\"left\"\n            label=\"%\"\n            scale=\"log\"\n            labelSpace={65}\n            paddingStart={0.1}\n            paddingEnd={0.1}\n          />\n\n          {lines}\n\n          <Legend position=\"embedded\" bottom=\"80\" left=\"0\"></Legend>\n        </Plot>\n      </div>\n    </div>\n  );\n};\n\nexport default DetailsPlot;\n","import { useEffect } from 'react';\nimport DataTable from './DataTable';\nimport ActualDetails from './ActualDetails';\nimport DetailsPlot from './DetailsPlot';\n\nconst Details = (props) => {\n  useEffect(() => {\n    //console.log(props.data)\n  }, [props]);\n\n  return (\n    <div className=\"m-2 \">\n      <ActualDetails DetailType={props.DetailType} data={props.data} />\n\n      <DetailsPlot\n        allData={props.allData}\n        previousData={props.previousData}\n        DetailType={props.DetailType}\n        Header={props.DetailType + ' Variation Chart'}\n      />\n\n      <DataTable\n        currentPage={props.currentPage}\n        setCurrentPage={(p) => props.setCurrentPage(p)}\n        count={props.count}\n        previousData={props.previousData}\n        DetailType={props.DetailType}\n      />\n    </div>\n  );\n};\n\nexport default Details;\n","import { useState, useEffect } from 'react';\nimport { HorizontalNavigation } from '../../components/tailwind-ui';\n\nimport {\n  connectDevice,\n  getDevice,\n} from '../../services/broadCastDeviceService';\nimport Details from './Details';\n\nconst DeviceDetails = ({ match }) => {\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const [count, setCount] = useState(0);\n\n  const [selected, setSelected] = useState({ value: 'Load', label: 'Load' });\n\n  const [data, setData] = useState([]);\n  // const [allData, setAllData] = useState([]);\n  const [previousData, setPreviousData] = useState([]);\n\n  const [deviceClient, setDeviceClient] = useState();\n  const [deviceInfos, setDeviceInfos] = useState();\n  const deviceId = `${match.params.id}`;\n\n  useEffect(() => {\n    if (deviceId) {\n      getDevice(deviceId).then((deviceInfo) => {\n        console.log(deviceInfo);\n        setDeviceInfos(deviceInfo);\n        connectDevice(deviceInfo).then((deviceClient) =>\n          setDeviceClient(deviceClient),\n        );\n      });\n    }\n    return () => deviceClient?.disconnect();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [deviceId]);\n\n  useEffect(() => {\n    if (deviceClient) {\n      //getAllDataCount\n      deviceClient.getAllDataCount().then((result) => {\n        console.log('data count');\n        console.log(result);\n        setCount(result);\n      });\n      deviceClient.subscribe(\n        (message) => setData([message, ...data]),\n        (error) => console.log(error),\n      );\n      //console.log(data);\n      deviceClient.getPageData(currentPage * 10, 10).then((result) => {\n        //console.log(result);\n        setPreviousData(result);\n      });\n      // deviceClient.getAllData().then((result) => {\n      //   //console.log(result);\n      //   setAllData(result);\n      // });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [deviceClient]);\n\n  useEffect(() => {\n    if (deviceClient) {\n      deviceClient.getPageData(currentPage * 10, 10).then((result) => {\n        //console.log(result);\n        setPreviousData(result);\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentPage]);\n\n  return (\n    <div\n      className=\"m-4 p-2 shadow-lg \"\n      style={{ backgroundColor: 'white', borderRadius: '10px' }}\n    >\n      <div className=\"m-4\">\n        <div className=\"p-4 border-b\">\n          <h2 className=\"text-2xl \">Device Information</h2>\n          <p className=\"text-sm text-gray-500\">Device connection details.</p>\n        </div>\n\n        <div>\n          <div className=\"md:grid md:grid-cols-2 hover:bg-gray-50 md:space-y-0 space-y-1 p-4 border-b\">\n            <p className=\"text-gray-600\">Device Name</p>\n            <p>{deviceInfos ? deviceInfos.name : ''}</p>\n          </div>\n        </div>\n        <div>\n          <div className=\"md:grid md:grid-cols-2 hover:bg-gray-50 md:space-y-0 space-y-1 p-4 border-b\">\n            <p className=\"text-gray-600\">Url</p>\n            <p>{deviceInfos ? deviceInfos.url : ''}</p>\n          </div>\n        </div>\n        <div>\n          <div className=\"md:grid md:grid-cols-2 hover:bg-gray-50 md:space-y-0 space-y-1 p-4 border-b\">\n            <p className=\"text-gray-600\">Device kind</p>\n            <p>{deviceInfos ? deviceInfos.kind : ''}</p>\n          </div>\n        </div>\n        <div>\n          <div className=\"md:grid md:grid-cols-2 hover:bg-gray-50 md:space-y-0 space-y-1 p-4 border-b\">\n            <p className=\"text-gray-600\">Topic</p>\n            <p>{deviceInfos ? deviceInfos.topic : ''}</p>\n          </div>\n        </div>\n      </div>\n\n      <HorizontalNavigation\n        onSelect={(option) => {\n          setSelected(option);\n          setCurrentPage(1);\n        }}\n        selected={selected}\n        options={['Load', 'I/O', 'FS', 'Temperature'].map((value) => ({\n          value: String(value),\n          label: String(value) + ' Details',\n        }))}\n      />\n\n      <Details\n        allData={previousData}\n        currentPage={currentPage}\n        count={count}\n        data={data}\n        previousData={previousData}\n        DetailType={selected.value}\n        setCurrentPage={(p) => setCurrentPage(p)}\n      />\n    </div>\n  );\n};\n\nexport default DeviceDetails;\n"],"sourceRoot":""}