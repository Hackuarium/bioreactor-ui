{"version":3,"sources":["services/devicesOptions.js","hooks/useNotification.js","../node_modules/delay/index.js","../node_modules/legoino-navigator-serial/src/Action.js","../node_modules/legoino-navigator-serial/src/Device.js","../node_modules/legoino-navigator-serial/src/util/checkSerial.js","../node_modules/legoino-navigator-serial/src/DevicesManager.js","assets/icons/treeDots.svg","services/localDeviceService.js","../node_modules/legoino-navigator-serial/src/util/EventEmitter.js","pages/LocalDevices/SelectDeviceComponent.jsx","pages/LocalDevices/GeneralTab.jsx","pages/LocalDevices/HistoryTab.jsx","pages/LocalDevices/ConfigTab.jsx","pages/LocalDevices/AdvancedTab.jsx","pages/LocalDevices/index.jsx"],"names":["DEVICES_DB","DEFAULT_PORT","window","location","protocol","DEFAULT_PROTOCOL","DEVICE_PROTOCOLS","COMMANDS","help","settings","compactSettings","runExperiment","kinetic","reset","sleep","setParameter","label","value","DEVICE_KINDS_OPTIONS","Object","keys","legoinoDeviceInformation","map","key","kind","filter","type","getDeviceType","deviceId","selectedDeviceType","fromDeviceID","Number","element","id","e","console","log","useNotification","notificationContext","useNotificationCenter","addNotification","title","message","textColor","Icon","timeout","className","clsx","content","icon","addErrorNotification","SvgSolidExclamation","addWarningNotification","addInfoNotification","SvgOutlineExclamationCircle","createAbortError","error","Error","name","createDelay","defaultClear","clearTimeout","set","setTimeout","willResolve","ms","timeoutId","settle","rejectFn","signal","aborted","Promise","reject","clear","signalListener","cleanup","removeEventListener","delayPromise","resolve","addEventListener","once","delay","range","minimum","maximum","options","Math","floor","random","randomInteger","createWithTimers","module","exports","default","Action","command","this","currentTimeout","undefined","answer","status","creationTimestamp","Date","now","promise","finishedPromise","finished","startTimestamp","buffer","string","TextDecoder","decode","replace","endsWith","lines","split","length","line","join","Device","serialPort","baudRate","queue","action","interCommandDelay","defaultCommandExpirationDelay","encoder","TextEncoder","decoder","a","currentProcessQueue","runProcessQueue","shift","start","write","read","open","reader","readable","getReader","writer","writable","getWriter","get","commandExpirationDelay","push","ensureProcessQueue","port","path","emit","event","data","dataArrayBuffer","encode","isFinished","appendAnswer","checkSerial","serial","_path","devicesManager","devices","portFilter","usbProductId","usbVendorId","requestPort","filters","updateDevices","getPorts","serialPorts","missingDevicesSerialPort","device","includes","close","ensureOpen","newDevice","scanInterval","callback","ready","isReady","queueLength","findDevice","callbacks","cb","cbs","forEach","navigator","requestDevices","getConnectedDevices","getDevicesList","connectedDevices","continuousUpdateDevices","interval","setInterval","isFunction","sendCommand","SelectDeviceComponent","deviceType","onSelectDevice","onSelectType","useState","setDevices","useEffect","updateConnectedDevices","cleanUp","newList","handleDevicesListChange","then","intervalId","clearInterval","renderOptions","onRequest","document","activeElement","blur","list","onSelect","onClick","GeneralTab","onSendCommand","resultMsg","epoch","parametersArray","param","index","factor","unit","info","description","HistoryTab","headers","setHeaders","heads","h","Row","useCallback","val","classnames","compact","p","headerValues","useTable","itemsPerPage","withText","pagination","sliceData","d","Header","Tr","intervals","v","ConfigTab","refreshInterval","setRefreshInterval","refreshData","writableParams","setWritableParams","_refreshInterval","_setRefreshInterval","parameters","values","onSaveValue","onReset","onSleep","option","variant","initialValue","placeholder","onSave","_excluded","_extends","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgTreeDots","_ref","svgRef","titleId","props","viewBox","ref","ForwardRef","AdvancedTab","setDeviceId","setCommand","results","setResults","onSend","onHelp","onSettings","style","fontFamily","onChange","onKeyDown","size","fill","disabled","tabs","LocalDevices","currentData","setCurrentData","allData","setAllData","selectedDevice","setSelectedDevice","selectedType","setSelectedType","selectedTab","setSelectedTab","getData","compressedResults","parseCurrentSettings","parameterInfo","selected","tab","renderTabContent"],"mappings":"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","file":"static/js/10.945f4581.chunk.js","sourcesContent":["import legoinoDeviceInformation from 'legoino-device-information';\n\n// Default Values\n\nexport const DEVICES_DB = 'BIOREACTOR_devices';\nexport const DEFAULT_PORT =\n  window.location.protocol === 'https:' ? '443' : '80'; // old '8080'\nexport const DEFAULT_PROTOCOL =\n  window.location.protocol === 'https:' ? 'wss' : 'http'; // old tcp\n\n// Static Values\n\nexport const DEVICE_PROTOCOLS = ['http', 'tcp', 'wss'];\n\nexport const COMMANDS = {\n  help: 'h',\n  settings: 'u',\n  compactSettings: 'uc',\n  runExperiment: 'r',\n  kinetic: 'k',\n  reset: 'ur1234',\n  sleep: 'l',\n  setParameter: (label, value) => `${label}${value}`,\n};\n\nexport const DEVICE_KINDS = Object.keys(legoinoDeviceInformation).map(\n  (key) => legoinoDeviceInformation[key].kind,\n);\n\nexport const DEVICE_KINDS_OPTIONS = Object.keys(legoinoDeviceInformation)\n  .filter((key) => legoinoDeviceInformation[key].kind)\n  .map((key) => ({\n    ...legoinoDeviceInformation[key],\n    label: legoinoDeviceInformation[key].kind,\n    type: 'option',\n  }));\n\nexport const DEVICE_STATUS = {\n  opening: 1,\n  opened: 2,\n  closed: 3,\n  missing: 9,\n  error: 10,\n};\n\nexport const DEVICE_TYPE = {\n  broadcast: 'broadcast',\n  interactive: 'interactive',\n  local: 'local',\n};\n\nexport const getDeviceType = (deviceId) => {\n  try {\n    if (deviceId) {\n      const selectedDeviceType = legoinoDeviceInformation.fromDeviceID(\n        Number(deviceId),\n      );\n      return DEVICE_KINDS_OPTIONS.filter(\n        (element) => element.id === selectedDeviceType.id,\n      )[0];\n    }\n  } catch (e) {\n    console.log(e);\n    return undefined;\n  }\n};\n","import clsx from 'clsx';\nimport {\n  SvgOutlineExclamationCircle,\n  SvgSolidExclamation,\n  useNotificationCenter,\n} from '../components/tailwind-ui';\n\nexport default function useNotification() {\n  const notificationContext = useNotificationCenter();\n\n  const addNotification = (title, message, { textColor, Icon, timeout }) => {\n    notificationContext.addNotification(\n      {\n        title: (\n          <span className={clsx('text-base font-semibold', textColor + '500')}>\n            {title}\n          </span>\n        ),\n        content: <span className=\"text-sm text-neutral-500\">{message}</span>,\n        icon: <Icon className={clsx('w-8 h-8', textColor + '600')} />,\n      },\n      timeout,\n    );\n  };\n\n  const addInfoNotification = (title, message, timeout = 1000) => {\n    addNotification(title, message, {\n      textColor: 'text-primary-',\n      Icon: SvgOutlineExclamationCircle,\n      timeout: timeout,\n    });\n  };\n\n  const addWarningNotification = (title, message, timeout = 2500) => {\n    addNotification(title, message, {\n      textColor: 'text-warning-',\n      Icon: SvgSolidExclamation,\n      timeout: timeout,\n    });\n  };\n\n  const addErrorNotification = (title, message, timeout = 5000) => {\n    addNotification(title, message, {\n      textColor: 'text-danger-',\n      Icon: SvgSolidExclamation,\n      timeout: timeout,\n    });\n  };\n\n  return { addErrorNotification, addWarningNotification, addInfoNotification };\n}\n","'use strict';\n\n// From https://github.com/sindresorhus/random-int/blob/c37741b56f76b9160b0b63dae4e9c64875128146/index.js#L13-L15\nconst randomInteger = (minimum, maximum) => Math.floor((Math.random() * (maximum - minimum + 1)) + minimum);\n\nconst createAbortError = () => {\n\tconst error = new Error('Delay aborted');\n\terror.name = 'AbortError';\n\treturn error;\n};\n\nconst createDelay = ({clearTimeout: defaultClear, setTimeout: set, willResolve}) => (ms, {value, signal} = {}) => {\n\tif (signal && signal.aborted) {\n\t\treturn Promise.reject(createAbortError());\n\t}\n\n\tlet timeoutId;\n\tlet settle;\n\tlet rejectFn;\n\tconst clear = defaultClear || clearTimeout;\n\n\tconst signalListener = () => {\n\t\tclear(timeoutId);\n\t\trejectFn(createAbortError());\n\t};\n\n\tconst cleanup = () => {\n\t\tif (signal) {\n\t\t\tsignal.removeEventListener('abort', signalListener);\n\t\t}\n\t};\n\n\tconst delayPromise = new Promise((resolve, reject) => {\n\t\tsettle = () => {\n\t\t\tcleanup();\n\t\t\tif (willResolve) {\n\t\t\t\tresolve(value);\n\t\t\t} else {\n\t\t\t\treject(value);\n\t\t\t}\n\t\t};\n\n\t\trejectFn = reject;\n\t\ttimeoutId = (set || setTimeout)(settle, ms);\n\t});\n\n\tif (signal) {\n\t\tsignal.addEventListener('abort', signalListener, {once: true});\n\t}\n\n\tdelayPromise.clear = () => {\n\t\tclear(timeoutId);\n\t\ttimeoutId = null;\n\t\tsettle();\n\t};\n\n\treturn delayPromise;\n};\n\nconst delay = createDelay({willResolve: true});\ndelay.reject = createDelay({willResolve: false});\ndelay.range = (minimum, maximum, options) => delay(randomInteger(minimum, maximum), options);\ndelay.createWithTimers = ({clearTimeout, setTimeout}) => {\n\tconst delay = createDelay({clearTimeout, setTimeout, willResolve: true});\n\tdelay.reject = createDelay({clearTimeout, setTimeout, willResolve: false});\n\treturn delay;\n};\n\nmodule.exports = delay;\n// TODO: Remove this for the next major release\nmodule.exports.default = delay;\n","const STATUS_CREATED = 0;\nconst STATUS_COMMAND_SENT = 1;\nconst STATUS_ANSWER_PARTIALLY_RECEIVED = 2;\nconst STATUS_ANSWER_RECEIVED = 3;\nconst STATUS_RESOLVED = 4;\nconst STATUS_ERROR = 5;\n\nexport class Action {\n  constructor(command, options = {}) {\n    this.currentTimeout = undefined;\n    this.command = command;\n    this.timeout = options.timeout === undefined ? 1000 : options.timeout;\n    this.answer = '';\n    this.status = STATUS_CREATED;\n    this.creationTimestamp = Date.now();\n    this.promise = new Promise((resolve, reject) => {\n      this.reject = reject;\n      this.resolve = resolve;\n    });\n    this.finishedPromise = new Promise((resolve) => {\n      this.finished = resolve;\n    });\n  }\n\n  isFinished() {\n    return this.status === STATUS_RESOLVED || this.status === STATUS_ERROR;\n  }\n\n  setTimeout() {\n    if (this.currentTimeout) {\n      clearTimeout(this.currentTimeout);\n    }\n    this.currentTimeout = setTimeout(() => {\n      if (this.status === STATUS_RESOLVED || this.status === STATUS_ERROR) {\n        return;\n      }\n      this.status = STATUS_ERROR;\n      this.reject('Timeout');\n      this.finished();\n    }, this.timeout);\n  }\n\n  start() {\n    this.startTimestamp = Date.now();\n    this.status = STATUS_COMMAND_SENT;\n    this.setTimeout();\n  }\n\n  appendAnswer(buffer) {\n    let string = new TextDecoder().decode(buffer);\n    this.status = STATUS_ANSWER_PARTIALLY_RECEIVED;\n    this.answer += string;\n    if (!this.answer.replace(/\\r/g, '').endsWith('\\n\\n')) return;\n    let lines = this.answer.split(/\\r?\\n/);\n    if (lines.length > 0 && lines[lines.length - 1] === '') {\n      lines = lines.filter((line) => line);\n      this.status = STATUS_ANSWER_RECEIVED;\n      this.resolve(lines.join('\\n'));\n      this.finished();\n      this.status = STATUS_RESOLVED;\n    }\n  }\n}\n","/* eslint-disable no-await-in-loop */\n\nimport delay from 'delay';\n\nimport { Action } from './Action';\n\nconst debug = () => {};\n\nexport const STATUS_OPENING = 1;\nexport const STATUS_OPENED = 2;\nexport const STATUS_CLOSED = 3;\nexport const STATUS_MISSING = 9;\nexport const STATUS_ERROR = 10;\n\nexport class Device {\n  constructor(serialPort, options = {}) {\n    this.status = STATUS_OPENING;\n    this.id = undefined;\n    this.serialPort = serialPort;\n    this.baudRate = options.baudRate || 115200;\n    this.queue = [];\n    this.action = undefined;\n    this.interCommandDelay = options.interCommandDelay;\n    this.defaultCommandExpirationDelay = 2000;\n    this.encoder = new TextEncoder();\n    this.decoder = new TextDecoder();\n  }\n\n  isReady() {\n    return this.status === STATUS_OPENED;\n  }\n\n  /** restart process queue if the previous one was finished */\n  async ensureProcessQueue() {\n    debug('ensureProcessQueue');\n    if (!this.currentProcessQueue) {\n      this.currentProcessQueue = this.runProcessQueue();\n    }\n    return this.currentProcessQueue;\n  }\n\n  async runProcessQueue() {\n    while (this.queue.length > 0) {\n      this.action = this.queue.shift();\n\n      if (this.action) {\n        this.action.start();\n        await this.write(`${this.action.command}\\n`);\n        await this.read(this.action);\n        await this.action.finishedPromise;\n        this.action = undefined;\n        await delay(this.interCommandDelay);\n      }\n    }\n    this.currentProcessQueue = undefined;\n  }\n\n  async getStatus() {\n    return {\n      value: this.status,\n    };\n  }\n\n  async ensureOpen() {\n    debug(`Ensure open`);\n    if (this.status !== STATUS_OPENED) {\n      return this.open();\n    }\n  }\n\n  async open() {\n    debug(`Opening`);\n    await this.serialPort.open({\n      baudRate: this.baudRate,\n    });\n    this.reader = this.serialPort.readable.getReader();\n    this.writer = this.serialPort.writable.getWriter();\n    this.id = await this.get('uq');\n    this.status = STATUS_OPENED;\n  }\n\n  /*\n   We need to add this command in the queue and wait it resolves or rejects\n  */\n  async get(command, options = {}) {\n    const {\n      commandExpirationDelay = this.defaultCommandExpirationDelay,\n    } = options;\n\n    const action = new Action(command, {\n      timeout: commandExpirationDelay,\n    });\n\n    this.queue.push(action);\n    this.ensureProcessQueue();\n    return action.promise;\n  }\n\n  error(error) {\n    debug(`Error ${this.port.path}`);\n    debug(error);\n    this.status = STATUS_ERROR;\n    this.emit('adapter', {\n      event: 'Error',\n      value: error,\n    });\n  }\n\n  close() {\n    debug(`Close`);\n    this.status = STATUS_CLOSED;\n  }\n\n  async write(data) {\n    const dataArrayBuffer = this.encoder.encode(`${data}\\n`);\n    return this.writer.write(dataArrayBuffer);\n  }\n\n  async read(action) {\n    while (!action.isFinished()) {\n      action.appendAnswer((await this.reader.read()).value);\n      delay(10);\n    }\n  }\n}\n","/* eslint-disable no-console */\nexport default function checkSerial(serial) {\n  if (!serial) {\n    console.error(\n      \"Web serial doesn't seem to be enabled in your browser. Try enabling it by visiting:\",\n    );\n    console.error('chrome://flags/#enable-experimental-web-platform-features');\n    console.error('opera://flags/#enable-experimental-web-platform-features');\n    console.error('edge://flags/#enable-experimental-web-platform-features');\n  }\n}\n","/* eslint-disable no-await-in-loop */\nimport delay from 'delay';\n\nimport { Device, STATUS_MISSING, STATUS_OPENED, STATUS_CLOSED } from './Device';\nimport EventEmitter from './util/EventEmitter';\nimport checkSerial from './util/checkSerial';\n\nconst debug = () => {};\n\n/**\n * Class creating a new serial bridge to manage serial ports.\n * @param {object} [options={}]\n * @param {function} [options.portFilter=[{usbProductId:37384, usbVendorId:6991}]] Filter the serial ports to address.\n * @param {number} [options.baudRate=57200] Baud rate\n * @param {number} [options.interCommandDelay=100] Time to wait between commands in [ms]\n * @param {number} [options.defaultCommandExpirationDelay=100] Time to wait for answer before timeout\n */\nexport class DevicesManager extends EventEmitter {\n  constructor(serial, options = {}) {\n    super();\n    checkSerial(serial);\n    this.serial = serial;\n    this.devices = [];\n    this.portFilter =\n      options.portFilter === undefined\n        ? [{ usbProductId: 37384, usbVendorId: 6991 }]\n        : options.portFilter;\n    this.baudRate = options.baudRate || 115200;\n    this.interCommandDelay =\n      options.interCommandDelay === undefined ? 100 : options.interCommandDelay;\n    this.defaultCommandExpirationDelay =\n      options.defaultCommandExpirationDelay === undefined\n        ? 100\n        : options.defaultCommandExpirationDelay;\n  }\n\n  /**\n   * By calling this method from a click you give users the possibility to allow access to some devices\n   */\n  async requestDevices() {\n    await this.serial.requestPort({\n      filters: this.portFilter,\n    });\n    return this.updateDevices();\n  }\n\n  /**\n   * Update this.devices\n   */\n  async updateDevices() {\n    const serialPorts = await this.serial.getPorts();\n\n    debug('updateDevices');\n\n    const missingDevicesSerialPort = this.devices.filter(\n      (device) => !serialPorts.includes(device.serialPort),\n    );\n    for (let device of missingDevicesSerialPort) {\n      if (device.status !== STATUS_MISSING && device.status !== STATUS_CLOSED) {\n        device.close();\n      }\n      device.status = STATUS_MISSING;\n    }\n\n    for (let serialPort of serialPorts) {\n      let device = this.devices.filter(\n        (device) => device.serialPort === serialPort,\n      )[0];\n      if (device) {\n        await device.ensureOpen();\n      } else {\n        let newDevice = new Device(serialPort, {\n          baudRate: this.baudRate,\n          interCommandDelay: this.interCommandDelay,\n          defaultCommandExpirationDelay: this.defaultCommandExpirationDelay,\n        });\n        this.devices.push(newDevice);\n        await newDevice.open();\n      }\n    }\n    // check if there are any new ports\n  }\n\n  /**\n   * Update this.devices every `scanInterval` [ms].\n   * @param {object} [options={}]\n   * @param {number} [options.scanInterval=1000] Delay between `updateDevices()` calls\n   * @param {number} [options.callback] Callback to execute on each update\n   */\n  async continuousUpdateDevices(options = {}) {\n    const { scanInterval = 1000, callback } = options;\n    while (true) {\n      await this.updateDevices();\n      if (callback) {\n        callback(this.devices);\n      }\n      await delay(scanInterval);\n    }\n  }\n\n  /**\n   * Returns this.devices\n   * @param {object} [options={}]\n   * @param {bool} [options.ready=false] If `true` returns only currently connected device. If `false` returns all devices ever connected.\n   * @returns {Array<object>}\n   */\n  getDevicesList(options = {}) {\n    let { ready = false } = options;\n    return this.devices\n      .filter((device) => !ready || device.isReady())\n      .map((device) => ({\n        status: device.status,\n        id: device.id,\n        queueLength: device.queue.length,\n      }));\n  }\n\n  // private function\n  findDevice(id) {\n    if (id === undefined) return undefined;\n    let devices = this.devices.filter(\n      (device) => device.id === id && device.status === STATUS_OPENED,\n    );\n    if (devices.length === 0) return undefined;\n    if (devices.length > 1) {\n      throw new Error(`Many devices have the same id: ${id}`);\n    }\n    return devices[0];\n  }\n\n  /**\n   * Send a serial command to a device.\n   * @param {number} id ID of the device\n   * @param {string} command Command to send\n   */\n  async sendCommand(id, command) {\n    const device = this.findDevice(id);\n    if (!device) {\n      throw Error(`Device ${id} not found`);\n    }\n    if (device && device.isReady()) return device.get(command);\n    throw Error(`Device ${id} not ready: ${device.port.path}`);\n  }\n}\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTreeDots(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 20 20\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTreeDots);\nexport default __webpack_public_path__ + \"static/media/treeDots.68360f32.svg\";\nexport { ForwardRef as ReactComponent };","import { isFunction } from 'lodash';\nimport { DevicesManager } from 'legoino-navigator-serial';\n\nconst SCAN_INTERVAL = 3000;\n\nconst devicesManager = new DevicesManager(navigator.serial);\n\n/**\n * By calling this method from a click you give users the possibility to allow access to some devices\n */\nconst requestDevices = async () => {\n  await devicesManager.requestDevices();\n};\n\n/**\n * @returns {Array<object>}\n */\nconst getConnectedDevices = async () => {\n  await devicesManager.updateDevices();\n  const connectedDevices = await devicesManager.getDevicesList({\n    ready: true, // If ready==`true` returns only currently connected device, else returns all devices ever connected.\n  });\n  return connectedDevices;\n};\n\n/**\n * Update updated devices list every `scanInterval` [ms].\n * @param {Function} callback(devicesList): Callback to execute on each update\n * @param {number} scanInterval Delay between calls\n */\nconst continuousUpdateDevices = async (\n  callback,\n  scanInterval = SCAN_INTERVAL,\n) => {\n  const interval = setInterval(async () => {\n    const connectedDevices = await getConnectedDevices();\n    isFunction(callback) && callback(connectedDevices);\n  }, scanInterval);\n  return interval;\n};\n\n/**\n * Send a serial command to a device.\n * @param {number} id ID of the device\n * @param {string} command Command to send\n * @returns ??????\n */\nconst sendCommand = async (deviceId, command) => {\n  return await devicesManager.sendCommand(deviceId, command);\n};\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default {\n  requestDevices,\n  getConnectedDevices,\n  continuousUpdateDevices,\n  sendCommand,\n};\n","export default class EventEmitter {\n  constructor() {\n    this.callbacks = {};\n  }\n\n  on(event, cb) {\n    if (!this.callbacks[event]) this.callbacks[event] = [];\n    this.callbacks[event].push(cb);\n  }\n\n  emit(event, data) {\n    let cbs = this.callbacks[event];\n    if (cbs) {\n      cbs.forEach((cb) => cb(data));\n    }\n  }\n}\n","import { useEffect, useState } from 'react';\n\nimport { Dropdown, Button } from '../../components/tailwind-ui';\nimport useNotification from '../../hooks/useNotification';\nimport devicesManager from '../../services/localDeviceService';\nimport {\n  DEVICE_KINDS_OPTIONS,\n  getDeviceType,\n} from '../../services/devicesOptions';\n\nconst SCAN_INTERVAL = 1000;\n\nconst SelectDeviceComponent = ({\n  device = { label: '--' },\n  deviceType = DEVICE_KINDS_OPTIONS[0],\n  onSelectDevice,\n  onSelectType,\n}) => {\n  const { addInfoNotification, addWarningNotification } = useNotification();\n  const [devices, setDevices] = useState([]);\n\n  useEffect(() => {\n    onSelectType(deviceType);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // continuous update of devices list\n  useEffect(() => {\n    updateConnectedDevices();\n    const cleanUp = devicesManager.continuousUpdateDevices((newList) => {\n      handleDevicesListChange(newList);\n    }, SCAN_INTERVAL);\n\n    return () => cleanUp.then((intervalId) => clearInterval(intervalId));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [devices.length]);\n\n  const updateConnectedDevices = async () => {\n    const newList = await devicesManager.getConnectedDevices();\n    if (newList.length > 0) {\n      if (!device?.id) onSelectDevice(renderOptions(newList)[0]);\n      setDevices(newList);\n    }\n  };\n\n  // When connected devices are changed : show notification + set selected + set devicesList\n  const handleDevicesListChange = (newList) => {\n    if (newList.length > devices.length) {\n      addInfoNotification('New device connected');\n      if (!device?.id) onSelectDevice(renderOptions(newList)[0]);\n    } else if (newList.length < devices.length) {\n      addWarningNotification('Device disconnected');\n      if (newList.length === 0) onSelectDevice({ label: '--' });\n    }\n    setDevices(newList);\n  };\n\n  const onRequest = async () => {\n    document.activeElement.blur();\n    await devicesManager.requestDevices();\n    const newList = await devicesManager.getConnectedDevices();\n    handleDevicesListChange(newList);\n  };\n\n  const renderOptions = (list) =>\n    list.map((device) => ({\n      id: device.id,\n      label: 'Device-' + device.id + ` (${getDeviceType(device.id).kind})`,\n      type: 'option',\n    }));\n\n  return (\n    <div className=\"m-4 py-3 px-4 flex flex-col-reverse sm:flex-row sm:justify-between sm:items-center rounded-md bg-white shadow \">\n      <div className=\"flex flex-row flex-wrap justify-between\">\n        <div className=\"my-1 mx-2 w-full sm:w-max flex items-center justify-end flex-nowrap\">\n          <h3 className=\"mr-2 text-base font-medium text-neutral-800 \">\n            Device Type :\n          </h3>\n          <Dropdown\n            title={deviceType.label}\n            options={[DEVICE_KINDS_OPTIONS]}\n            onSelect={onSelectType}\n          />\n        </div>\n        <div className=\"my-1 mx-2 w-full sm:w-max flex items-center justify-end flex-nowrap\">\n          <h3 className=\"mr-2 text-base font-medium text-neutral-800\">\n            Select device :\n          </h3>\n          <Dropdown\n            title={device.label}\n            options={[renderOptions(devices)]}\n            onSelect={onSelectDevice}\n          />\n        </div>\n      </div>\n      <Button className=\"mb-3 sm:mb-0\" onClick={onRequest}>\n        Request device\n      </Button>\n    </div>\n  );\n};\n\nexport default SelectDeviceComponent;\n","import useNotification from '../../hooks/useNotification';\nimport devicesManager from '../../services/localDeviceService';\nimport { COMMANDS } from './../../services/devicesOptions';\n\nimport { DividerCustom, CardValue } from '../../components';\nimport { Button } from '../../components/tailwind-ui';\n\nconst GeneralTab = ({ data, device }) => {\n  const { addInfoNotification, addErrorNotification } = useNotification();\n\n  const onSendCommand = async (command) => {\n    try {\n      const resultMsg = await devicesManager.sendCommand(device.id, command);\n      console.log('runExperiment');\n      console.log(resultMsg);\n      addInfoNotification(resultMsg);\n    } catch (e) {\n      console.log('runExperiment error');\n      console.log(e);\n      addErrorNotification(e);\n    }\n    document.activeElement.blur();\n  };\n\n  return (\n    <div className=\"flex flex-col mt-2\">\n      <div className=\"flex flex-row justify-end\">\n        <Button\n          className=\"mx-2\"\n          onClick={() => onSendCommand(COMMANDS.runExperiment)}\n        >\n          Run experiment\n        </Button>\n        <Button\n          className=\"mx-2\"\n          onClick={() => onSendCommand(COMMANDS.kinetic)}\n        >\n          Run Kinetic\n        </Button>\n      </div>\n      {data?.epoch && (\n        <DividerCustom\n          title={\n            <p className=\" text-base font-medium text-black self-start\">\n              Awake time:\n              <span className=\"mx-1 text-sm text-neutral-500\">\n                {data?.epoch / 1000 + 's'}\n              </span>\n            </p>\n          }\n        />\n      )}\n      <div className=\" flex flex-row justify-around flex-wrap\">\n        {data?.parametersArray?.map((param, index) => (\n          <CardValue\n            key={index}\n            title={param.name || param.label}\n            value={param.value * param.factor}\n            unit={param.unit}\n            info={param.description}\n            className=\"w-full sm:w-1/2  md:w-1/3 lg:w-1/4 flex\"\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default GeneralTab;\n","import { useCallback, useState, useEffect } from 'react';\nimport { Table, Td, Th, useTable } from '../../components/tailwind-ui';\n\nconst HistoryTab = ({ data, deviceType }) => {\n  const [headers, setHeaders] = useState([]);\n\n  // extract headers from the first element on data (just one time whenever deviceType is changed)\n  useEffect(() => {\n    const heads =\n      data && data.length > 0\n        ? data[0].parametersArray?.map((h) => h.name || h.label)\n        : [];\n    setHeaders(['Epoch', ...heads]);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [deviceType]);\n\n  const Row = useCallback((val) => {\n    const classnames = 'text-xs text-center p-2';\n    return (\n      <tr>\n        <Td compact={true} className={classnames + ' font-medium'}>\n          {val.value.epoch}\n        </Td>\n        {val.value.parametersArray?.map((p, index) => (\n          <Td key={index} compact={true} className={classnames}>\n            {p.value}\n          </Td>\n        ))}\n      </tr>\n    );\n  }, []);\n\n  const headerValues = useCallback(() => {\n    return (\n      <tr>\n        {headers?.map((h) => (\n          <Th\n            key={h}\n            className=\"p-2 text-center font-normal normal-case\"\n            compact={true}\n          >\n            {h}\n          </Th>\n        ))}\n      </tr>\n    );\n  }, [headers]);\n\n  const { pagination, data: sliceData } = useTable(data, {\n    itemsPerPage: 10,\n    withText: true,\n  });\n\n  return (\n    <div className=\"w-full p-1 overflow-x-auto\">\n      <Table\n        pagination={pagination}\n        data={sliceData.map((d) => ({ ...d, id: d.epoch }))}\n        Header={headerValues}\n        Tr={Row}\n      />\n    </div>\n  );\n};\n\nexport default HistoryTab;\n","import { useState, useEffect } from 'react';\n\nimport { Button, Dropdown } from '../../components/tailwind-ui';\nimport { CardInput, DividerCustom } from '../../components';\nimport useNotification from '../../hooks/useNotification';\nimport devicesManager from '../../services/localDeviceService';\nimport { COMMANDS } from '../../services/devicesOptions';\n\nconst intervals = [1, 2, 5, 10, 30, 60, 120, 300].map((v) => ({\n  label: v > 59 ? `${v / 60} m` : `${v} s`,\n  value: v * 1000,\n  type: 'option',\n}));\n\n/**\n *\n * @param {Object} device\n * @param {number} refreshInterval\n * @param {function} setRefreshInterval\n * @param {Object} data\n * @param {function} refreshData\n */\n\nconst ConfigTab = ({\n  device,\n  refreshInterval,\n  setRefreshInterval,\n  data,\n  refreshData,\n}) => {\n  const [writableParams, setWritableParams] = useState([]);\n  const [_refreshInterval, _setRefreshInterval] = useState({\n    label: refreshInterval / 1000 + ' s',\n    value: refreshInterval,\n    type: 'option',\n  });\n\n  const { addInfoNotification, addErrorNotification } = useNotification();\n\n  // get Writable params from data\n  useEffect(() => {\n    const parameters = data?.parameters;\n    const values =\n      parameters &&\n      Object.keys(parameters)\n        .filter((key) => parameters[key].writable)\n        .map((key) => ({ ...parameters[key], key })); // the key is used to send the update command\n    setWritableParams(values);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data]);\n\n  const onSaveValue = async (key, value) => {\n    try {\n      console.log(key + ' is set to: ' + value);\n      await devicesManager.sendCommand(\n        device.id,\n        COMMANDS.setParameter(key, value),\n      );\n      refreshData();\n      addInfoNotification('saved', '', 1000);\n    } catch (e) {\n      addErrorNotification(e.message);\n    }\n  };\n\n  const OnRefreshIntervalChanged = (option) => {\n    _setRefreshInterval(option);\n    setRefreshInterval(option.value);\n    document.activeElement.blur();\n  };\n\n  const onReset = async () => {\n    try {\n      const resultMsg = await devicesManager.sendCommand(\n        device.id,\n        COMMANDS.reset,\n      );\n      addInfoNotification(resultMsg);\n      refreshData();\n    } catch (e) {\n      addErrorNotification(e.message);\n    }\n    document.activeElement.blur();\n  };\n\n  const onSleep = async () => {\n    try {\n      await devicesManager.sendCommand(device.id, COMMANDS.sleep);\n    } catch (e) {\n      addErrorNotification(e.message);\n    }\n    document.activeElement.blur();\n  };\n\n  return (\n    <div className=\"w-full flex flex-col \">\n      <div className=\"mt-2 flex flex-col sm:flex-row justify-between\">\n        <div className=\"my-1 mx-2 flex flex-row items-center justify-end\">\n          <p className=\"mx-1 text-sm font-medium text-neutral-700\">\n            Refresh interval :\n          </p>\n          <Dropdown\n            title={_refreshInterval.label}\n            options={[intervals]}\n            onSelect={OnRefreshIntervalChanged}\n          />\n        </div>\n        <div className=\"my-1 flex flex-row justify-end\">\n          <Button className=\"mx-2\" variant=\"white\" onClick={onSleep}>\n            Sleep\n          </Button>\n          <Button className=\"mx-2 \" variant=\"white\" onClick={onReset}>\n            Reset Device\n          </Button>\n        </div>\n      </div>\n\n      {writableParams?.length > 0 && (\n        <>\n          <DividerCustom title=\"Edit parameters\" />\n          <div className=\"flex flex-row justify-start flex-wrap\">\n            {writableParams.map((p, index) => (\n              <CardInput\n                key={index}\n                id={p.key}\n                title={p.name || p.label}\n                initialValue={p.value * p.factor}\n                placeholder={p.name}\n                unit={p.unit}\n                info={p.description}\n                onSave={onSaveValue}\n                className=\"w-full sm:w-1/2  md:w-1/3 lg:w-1/4 flex\"\n              />\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ConfigTab;\n","import React, { useEffect, useState } from 'react';\nimport { Button, Dropdown } from '../../components/tailwind-ui';\nimport { ReactComponent as TreeDotsIcon } from '../../assets/icons/treeDots.svg';\nimport devicesManager from '../../services/localDeviceService';\nimport { COMMANDS } from '../../services/devicesOptions';\n\nconst AdvancedTab = ({ device }) => {\n  const [deviceId, setDeviceId] = useState();\n  const [command, setCommand] = useState(COMMANDS.help);\n  const [results, setResults] = useState('');\n\n  useEffect(() => setDeviceId(device?.id), [device?.id]);\n\n  const onSend = async () => {\n    if (command) {\n      const data = await devicesManager.sendCommand(deviceId, command);\n      setResults(data);\n    }\n  };\n\n  const handleKeyDown = (event) => {\n    if (event.key === 'Enter') {\n      onSend();\n    }\n  };\n\n  const onHelp = async () => {\n    setCommand(COMMANDS.help);\n    const data = await devicesManager.sendCommand(deviceId, COMMANDS.help);\n    setResults(data);\n    setTimeout(() => document.activeElement.blur(), 100);\n  };\n\n  const onSettings = async () => {\n    setCommand(COMMANDS.settings);\n    const data = await devicesManager.sendCommand(deviceId, COMMANDS.settings);\n    setResults(data);\n    setTimeout(() => document.activeElement.blur(), 100);\n  };\n\n  const handleDropdownSelect = (option) =>\n    option.label === 'Help'\n      ? onHelp()\n      : option.label === 'Settings'\n      ? onSettings()\n      : null;\n\n  return (\n    <div className=\"w-full   \">\n      <div className=\"flex flex-col\">\n        <div className=\"w-full my-1 md:max-w-md flex flex-row\">\n          <input\n            className=\"w-full py-1 px-2 border rounded-md text-base\"\n            placeholder=\"h (for help)\"\n            style={{ fontFamily: 'monospace' }}\n            value={command}\n            onChange={(event) => setCommand(event.target.value)}\n            onKeyDown={handleKeyDown}\n          />\n          <Button\n            className=\"mx-2 md:mr-0\"\n            variant=\"primary\"\n            size=\"small\"\n            onClick={onSend}\n          >\n            Send\n          </Button>\n          {/* display just in small screens */}\n          <div className=\"flex ml-4 self-center md:hidden\">\n            <Dropdown\n              options={[\n                [\n                  { label: 'Help', type: 'option' },\n                  { label: 'Settings', type: 'option' },\n                ],\n              ]}\n              onSelect={handleDropdownSelect}\n            >\n              <TreeDotsIcon className=\"w-5 h-5\" fill=\"currentColor\" />\n            </Dropdown>\n          </div>\n        </div>\n        <div className=\"w-full mt-2 flex flex-col md:flex-row md:max-w-2xl\">\n          <div className=\"w-full h-96 md:mr-2 flex md:flex-1 border rounded-md overflow-auto overflow-x-auto\">\n            <textarea\n              className=\"w-full text-sm font-semibold text-success-400 bg-neutral-900\"\n              style={{ fontFamily: 'monospace' }}\n              value={results}\n              onChange={(event) => console.log(event.target.value)}\n              disabled\n            />\n          </div>\n          <div className=\"hidden flex-col md:flex\">\n            <Button\n              className=\"m-1\"\n              variant=\"white\"\n              size=\"xSmall\"\n              onClick={onHelp}\n            >\n              Help\n            </Button>\n            <Button\n              className=\"m-1\"\n              variant=\"white\"\n              size=\"xSmall\"\n              onClick={onSettings}\n            >\n              Settings\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdvancedTab;\n","import { useState, useEffect, useCallback } from 'react';\nimport { parseCurrentSettings } from 'legoino-util';\n\nimport { HorizontalNavigation } from '../../components/tailwind-ui';\nimport useNotification from '../../hooks/useNotification';\nimport devicesManager from '../../services/localDeviceService';\nimport { COMMANDS, getDeviceType } from './../../services/devicesOptions';\nimport SelectDeviceComponent from './SelectDeviceComponent';\nimport GeneralTab from './GeneralTab';\nimport HistoryTab from './HistoryTab';\nimport ConfigTab from './ConfigTab';\nimport AdvancedTab from './AdvancedTab';\n\nconst tabs = ['General', 'History', 'Advanced', 'Configuration'].map((v) => ({\n  value: v,\n  label: v,\n}));\n\nconst LocalDevices = () => {\n  const [currentData, setCurrentData] = useState({}); // data to display\n  const [allData, setAllData] = useState([]); // data history\n  const [refreshInterval, setRefreshInterval] = useState(10000);\n\n  const [selectedDevice, setSelectedDevice] = useState();\n  const [selectedType, setSelectedType] = useState();\n  const [selectedTab, setSelectedTab] = useState(tabs[0]);\n\n  const { addErrorNotification } = useNotification();\n\n  // get data from device\n  const getData = useCallback(\n    async (deviceId) => {\n      if (deviceId) {\n        try {\n          const compressedResults = await devicesManager.sendCommand(\n            deviceId,\n            COMMANDS.compactSettings,\n          );\n          const results = parseCurrentSettings(compressedResults, {\n            kind: selectedType?.label,\n            parameterInfo: true,\n            parametersArray: true,\n          });\n          setCurrentData(results);\n          setAllData([results, ...allData]);\n        } catch (e) {\n          addErrorNotification(e.message);\n        }\n      } else {\n        setCurrentData({}); // Hide tabs (no data to display)\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [allData, selectedType?.label],\n  );\n\n  // Listen to data from device every {refreshInterval}\n  useEffect(() => {\n    if (selectedDevice?.id) {\n      const timeout = setInterval(\n        () => getData(selectedDevice?.id),\n        refreshInterval,\n      );\n      return () => {\n        clearInterval(timeout);\n      };\n    }\n  }, [selectedDevice?.id, refreshInterval, getData]);\n\n  // if selectedType or selectedDevice changed: delete HistoryData + get the new data\n  useEffect(() => {\n    setAllData([]);\n    getData(selectedDevice?.id);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedType?.label, selectedDevice?.id]);\n\n  const onSelectDevice = (device) => {\n    const type = getDeviceType(device?.id);\n    type && setSelectedType(type);\n    setSelectedDevice(device);\n  };\n\n  const renderTabContent = (tab) => {\n    switch (tab.value) {\n      case 'General':\n        return <GeneralTab data={currentData} device={selectedDevice} />;\n      case 'History':\n        return <HistoryTab data={allData} deviceType={selectedType?.label} />;\n      case 'Advanced':\n        return <AdvancedTab device={selectedDevice} />;\n      case 'Configuration':\n        return (\n          <ConfigTab\n            device={selectedDevice}\n            refreshInterval={refreshInterval}\n            setRefreshInterval={setRefreshInterval}\n            data={currentData}\n            refreshData={() => getData(selectedDevice?.id)}\n          />\n        );\n      default:\n        return <div />;\n    }\n  };\n\n  return (\n    <>\n      <SelectDeviceComponent\n        deviceType={selectedType}\n        onSelectType={setSelectedType}\n        device={selectedDevice}\n        onSelectDevice={onSelectDevice}\n      />\n      {selectedDevice?.id ? (\n        <div className=\"mx-4 pb-4\">\n          <HorizontalNavigation\n            onSelect={setSelectedTab}\n            selected={selectedTab}\n            options={tabs}\n          />\n          <div className=\"p-3 mt-4 sm:m-0 flex flex-col items-center rounded-md sm:rounded-t-none bg-white shadow \">\n            {renderTabContent(selectedTab)}\n          </div>\n        </div>\n      ) : (\n        <div className=\"mx-5 mt-16 flex flex-col items-center\">\n          <h3 className=\"text-base font-bold text-gray-300 leading-loose\">\n            No connected Device\n          </h3>\n          <h3 className=\"text-sm font-base text-gray-300\">\n            Please plug your device into the computer\n          </h3>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default LocalDevices;\n"],"sourceRoot":""}