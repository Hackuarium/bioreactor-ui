"use strict";(self.webpackChunkbioreactor_ui=self.webpackChunkbioreactor_ui||[]).push([[182],{1182:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var i=t(1413),l=t(9439),o=t(2791),a=t(763),c=t(5749),r=t(3433),s=t(8808),u=t(5963),d=t(184),v=function(e){var n,t=e.device,v=(0,o.useState)([]),f=(0,l.Z)(v,2),m=f[0],x=f[1],h=(0,o.useState)([]),p=(0,l.Z)(h,2),j=p[0],g=p[1],b=(0,o.useState)(1),w=(0,l.Z)(b,2),N=w[0],k=w[1],_=(0,o.useState)(0),C=(0,l.Z)(_,2),Z=C[0],y=C[1],S=(0,o.useState)(!1),A=(0,l.Z)(S,2),E=A[0],T=A[1],M=(0,o.useCallback)((function(e){if(0===m.length&&e&&e.length>0){var n,t,i=null===(n=e[0])||void 0===n||null===(t=n.parametersArray)||void 0===t?void 0:t.map((function(e){return e.name||e.label}));x(["Time"].concat((0,r.Z)(i)))}}),[m.length]),P=(0,o.useCallback)((0,a.throttle)((function(e){null!==t&&void 0!==t&&t._id&&(0,s.D4)(null===t||void 0===t?void 0:t._id,e,10).then((function(e){var n=e.map((function(e){var n;return{epoch:(0,u.E)(null===e||void 0===e?void 0:e.epoch),parametersArray:(0,s.Aj)(null===t||void 0===t||null===(n=t.kind)||void 0===n?void 0:n.kind,null===e||void 0===e?void 0:e.parameters)}}));M(n),g(n),(0,s._A)(null===t||void 0===t?void 0:t._id).then(y)}))}),1e3,{trailing:!0}),[null===t||void 0===t?void 0:t._id,null===t||void 0===t||null===(n=t.kind)||void 0===n?void 0:n.kind,M]);(0,o.useEffect)((function(){var e;return null!==t&&void 0!==t&&t._id&&(e=(0,s.xs)(null===t||void 0===t?void 0:t._id,(function(e){P(N)}),(function(e){return console.log(e)}))),function(){return e&&e.cancel()}}),[null===t||void 0===t?void 0:t._id,P,N,E]),(0,o.useEffect)((function(){P(N)}),[P,N]);var z=(0,o.useCallback)((function(){return(0,d.jsx)("tr",{children:null===m||void 0===m?void 0:m.map((function(e){return(0,d.jsx)(c.Th,{className:"p-2 text-center font-normal normal-case",compact:!0,children:e},e)}))})}),[m]),D=(0,o.useCallback)((function(e){var n,t="text-xs text-center p-2";return(0,d.jsxs)("tr",{children:[(0,d.jsx)(c.Td,{compact:!0,className:t+" font-medium",children:e.value.epoch}),null===(n=e.value.parametersArray)||void 0===n?void 0:n.map((function(e,n){return(0,d.jsx)(c.Td,{compact:!0,className:t,children:e.value},n)}))]})}),[]);return(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("div",{className:"w-full p-2 flex flex-row justify-end",children:(0,d.jsx)(c.zxk,{size:"small",variant:"white",onClick:function(){(0,s.h1)(null===t||void 0===t?void 0:t._id).then((function(){(0,s._A)(null===t||void 0===t?void 0:t._id).then((function(){T(!E),g([]),k(1),y(0),document.activeElement.blur()}))}))},children:"Clear"})}),(0,d.jsx)("div",{className:"w-full p-1 pb-4 overflow-x-auto",children:(0,d.jsx)(c.iA_,{pagination:{totalCount:Z,page:N,onPageChange:k,withText:!0,itemsPerPage:10,maxVisiblePages:1},data:j.map((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},{id:e.epoch+n})})),Header:z,Tr:D,itemsPerPage:10,Empty:function(){return(0,d.jsx)("div",{className:"mx-5 mt-4 flex flex-col items-center",children:(0,d.jsx)("h3",{className:"text-md font-semibold text-gray-300 leading-loose",children:"No saved data"})})}})})]})},f=t(8441),m=function(e){var n,t=e.data;return(0,d.jsx)("div",{className:" flex flex-row justify-around flex-wrap",children:null===t||void 0===t||null===(n=t.parameters)||void 0===n?void 0:n.map((function(e,n){return(0,d.jsx)(f.g4,{title:e.name||e.label,value:String(e.value*e.factor),unit:e.unit,info:e.description,className:"w-full sm:w-1/2  md:w-1/4 lg:w-1/5 flex"},n)}))})},x=function(e){var n,t,i=e.device,l=e.isConnected,o=e.goBack,a=e.onOpenModel;return(0,d.jsxs)("div",{className:"my-2 p-2 flex flex-row items-start rounded-md bg-white shadow ",children:[(0,d.jsx)(c.v4_,{className:"my-3 mr-2 h-6 w-6 text-neutral-300 cursor-pointer",onClick:o}),(0,d.jsxs)("div",{className:"w-full my-2 flex flex-col",children:[(0,d.jsxs)("div",{className:"flex flex-row items-center",children:[(0,d.jsx)("h1",{className:"mr-4 text-lg font-semibold truncate text-primary-800",children:null===i||void 0===i?void 0:i.name}),(0,d.jsx)(c.Cts,{dot:!0,rounded:!0,label:l?"Active":"Inactive",size:c.ODk.SMALL,color:l?"success":"neutral",className:"w-min h-min"})]}),(0,d.jsxs)("div",{className:"flex flex-row flex-wrap justify-between items-end",children:[(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsxs)("h3",{className:"mt-2 text-xs font-italic text-neutral-600 font-base truncate",children:[(0,d.jsx)("span",{className:"font-semibold",children:"Kind: "}),"".concat(null===i||void 0===i||null===(n=i.kind)||void 0===n?void 0:n.name," (").concat(null===i||void 0===i||null===(t=i.kind)||void 0===t?void 0:t.kind,")")]}),(0,d.jsxs)("h3",{className:"mt-2 text-xs font-italic text-neutral-600 font-base truncate",children:[(0,d.jsx)("span",{className:"font-semibold",children:"URL: "}),"".concat(null===i||void 0===i?void 0:i.protocol,"://").concat(null===i||void 0===i?void 0:i.url,":").concat(null===i||void 0===i?void 0:i.port)]}),(0,d.jsxs)("h3",{className:"mt-2 text-xs font-italic text-neutral-600 font-base truncate",children:[(0,d.jsx)("span",{className:"font-semibold",children:"Topic: "}),"".concat(null===i||void 0===i?void 0:i.topic)]})]}),(0,d.jsx)("div",{className:"flex flex-row mt-2 ",children:(0,d.jsx)(c.zxk,{size:"small",variant:"white",className:"mr-2 ",onClick:function(){return a(!0)},children:(0,d.jsx)(c.uf3,{className:"text-gray-700"})})})]})]})]})},h=t(9783),p=t(5155),j=["General","Data"].map((function(e){return{value:e,label:e}})),g=function(e){var n,t=e.match,r=e.history,u=(0,o.useState)(),f=(0,l.Z)(u,2),g=f[0],b=f[1],w=(0,o.useState)(j[0]),N=(0,l.Z)(w,2),k=N[0],_=N[1],C=(0,o.useState)({}),Z=(0,l.Z)(C,2),y=Z[0],S=Z[1],A=(0,o.useState)(!1),E=(0,l.Z)(A,2),T=E[0],M=E[1],P=(0,o.useState)(!1),z=(0,l.Z)(P,2),D=z[0],O=z[1],B=(0,o.useState)(!1),G=(0,l.Z)(B,2),L=G[0],U=G[1],V="".concat(t.params.id);(0,o.useEffect)((function(){V&&(console.log("getDevice"),(0,s._v)(V).then(b).catch(console.log))}),[]);var X=(0,o.useCallback)((0,a.throttle)((function(e){var n,t=(0,s.Aj)(null===(n=g.kind)||void 0===n?void 0:n.kind,null===e||void 0===e?void 0:e.parameters);S((0,i.Z)((0,i.Z)({},e),{},{parameters:t}))}),1e3,{trailing:!0}),[null===g||void 0===g||null===(n=g.kind)||void 0===n?void 0:n.kind]);(0,o.useEffect)((function(){return null!==g&&void 0!==g&&g._id&&(0,s.Gu)(null===g||void 0===g?void 0:g._id).then((function(e){e.length>0&&X(e[0])})),function(){return(null===g||void 0===g?void 0:g._id)&&(0,s.$n)(null===g||void 0===g?void 0:g._id)}}),[null===g||void 0===g?void 0:g._id,X]),(0,o.useEffect)((function(){var e;return null!==g&&void 0!==g&&g._id&&(0,p.Xq)(g).then((function(n){e=null===n||void 0===n?void 0:n.subscribe((function(e){!D&&O(!0),X(e)}),(function(e){console.log(e),D&&O(!1)}))})).catch((function(e){console.log(e),D&&O(!1)})),function(){e&&e((function(){console.log("unsubscribe")}))}}),[null===g||void 0===g?void 0:g._id,D,L]);return(0,d.jsxs)("div",{className:"mx-4 pb-4",children:[(0,d.jsx)(x,{device:g,isConnected:!0,goBack:function(){return r.goBack()},onOpenModel:M}),(0,d.jsx)(c.X9i,{onSelect:_,selected:k,options:j}),(0,d.jsx)("div",{className:"p-3 mt-4 sm:m-0 flex flex-col items-center rounded-md sm:rounded-t-none bg-white shadow ",children:function(e){switch(e.value){case"General":return(0,d.jsx)(m,{data:y,device:g});case"Data":return(0,d.jsx)(v,{device:g});default:return(0,d.jsx)("div",{})}}(k)}),(0,d.jsx)(h.Z,{isOpen:T,initialValues:g,onClose:function(){return M(!1)},onUpdate:function(e){return(0,s.xl)(e).then((function(){b(e),U(!L)}))}})]})}},5963:function(e,n,t){t.d(n,{E:function(){return l},e:function(){return i}});var i=function(e,n){var t;return e.filter((t=n,function(e){return 0===t.filter((function(n){return n.id===e.id})).length}))},l=function(e){var n=Math.floor(e/1e3%60),t=Math.floor(e/6e4%60),i=Math.floor(e/36e5%24),l="".concat(n,"s");return i?l="".concat(i,"h ").concat(t,"m ")+l:t&&(l="".concat(t,"m ")+l),l}}}]);
//# sourceMappingURL=182.23278297.chunk.js.map