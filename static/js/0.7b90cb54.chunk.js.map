{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/process/browser.js","../node_modules/inherits/inherits_browser.js","../node_modules/legoino-device-information/src/index.js","../node_modules/events/events.js","../node_modules/webpack/buildin/module.js","../node_modules/lodash/lodash.js","../node_modules/pouchdb/lib/index-browser.es.js","../node_modules/immediate/lib/index.js","../node_modules/immediate/lib/queueMicrotask.js","../node_modules/immediate/lib/mutation.js","../node_modules/immediate/lib/messageChannel.js","../node_modules/immediate/lib/stateChange.js","../node_modules/immediate/lib/timeout.js","../node_modules/spark-md5/spark-md5.js","../node_modules/vuvuzela/index.js","../node_modules/argsarray/index.js","../node_modules/legoino-device-information/src/devices/OpenBio.js","../node_modules/legoino-device-information/src/devices/OpenBio6.js","../node_modules/legoino-device-information/src/devices/OpenSpectro.js","../node_modules/legoino-device-information/src/devices/SimpleSpectro.js","../node_modules/legoino-device-information/src/devices/Solar2015.js","../node_modules/legoino-device-information/src/devices/Beemos.js","../node_modules/legoino-device-information/src/devices/Computer.js","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/bytesToUuid.js","../node_modules/uuid/dist/esm-browser/v4.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","length","i","F","s","n","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","cachedSetTimeout","cachedClearTimeout","process","module","exports","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","call","this","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","args","arguments","push","prototype","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","Object","create","ctor","superCtor","super_","constructor","enumerable","writable","configurable","TempCtor","devices","OpenBio","require","OpenBio6","OpenSpectro","SimpleSpectro","Solar2015","Beemos","Computer","fromDeviceID","id","String","fromCharCode","ldength","firstCharacter","substring","key","ReflectOwnKeys","R","Reflect","ReflectApply","target","receiver","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","Number","isNaN","EventEmitter","init","emitter","Promise","resolve","reject","errorListener","resolver","slice","eventTargetAgnosticAddListener","handler","flags","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","newListener","unshift","warned","w","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","copy","addEventListener","wrapListener","arg","removeEventListener","defineProperty","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","list","position","originalListener","shift","index","pop","spliceOne","keys","rawListeners","eventNames","webpackPolyfill","deprecate","paths","children","l","FUNC_ERROR_TEXT","HASH_UNDEFINED","PLACEHOLDER","WRAP_CURRY_RIGHT_FLAG","WRAP_PARTIAL_FLAG","WRAP_PARTIAL_RIGHT_FLAG","WRAP_ARY_FLAG","WRAP_REARG_FLAG","INFINITY","MAX_SAFE_INTEGER","NAN","MAX_ARRAY_LENGTH","wrapFlags","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reEmptyStringLeading","reEmptyStringMiddle","reEmptyStringTrailing","reEscapedHtml","reUnescapedHtml","reHasEscapedHtml","RegExp","source","reHasUnescapedHtml","reEscape","reEvaluate","reInterpolate","reIsDeepProp","reIsPlainProp","rePropName","reRegExpChar","reHasRegExpChar","reTrimStart","reWhitespace","reWrapComment","reWrapDetails","reSplitDetails","reAsciiWord","reForbiddenIdentifierChars","reEscapeChar","reEsTemplate","reFlags","reIsBadHex","reIsBinary","reIsHostCtor","reIsOctal","reIsUint","reLatin","reNoMatch","reUnescapedString","rsComboRange","rsComboMarksRange","rsDingbatRange","rsLowerRange","rsUpperRange","rsVarRange","rsBreakRange","rsMathOpRange","rsApos","rsAstral","rsBreak","rsCombo","rsDigits","rsDingbat","rsLower","rsMisc","rsFitz","rsNonAstral","rsRegional","rsSurrPair","rsUpper","rsMiscLower","rsMiscUpper","rsOptContrLower","rsOptContrUpper","reOptMod","rsOptVar","rsSeq","join","rsEmoji","rsSymbol","reApos","reComboMark","reUnicode","reUnicodeWord","reHasUnicode","reHasUnicodeWord","contextProps","templateCounter","typedArrayTags","cloneableTags","stringEscapes","freeParseFloat","parseFloat","freeParseInt","parseInt","freeGlobal","global","freeSelf","self","root","freeExports","nodeType","freeModule","moduleExports","freeProcess","nodeUtil","types","nodeIsArrayBuffer","isArrayBuffer","nodeIsDate","isDate","nodeIsMap","isMap","nodeIsRegExp","isRegExp","nodeIsSet","isSet","nodeIsTypedArray","isTypedArray","func","thisArg","arrayAggregator","setter","iteratee","accumulator","arrayEach","arrayEachRight","arrayEvery","predicate","arrayFilter","resIndex","result","arrayIncludes","baseIndexOf","arrayIncludesWith","comparator","arrayMap","arrayPush","values","offset","arrayReduce","initAccum","arrayReduceRight","arraySome","asciiSize","baseProperty","baseFindKey","collection","eachFunc","baseFindIndex","fromIndex","fromRight","strictIndexOf","baseIsNaN","baseIndexOfWith","baseMean","baseSum","object","basePropertyOf","baseReduce","current","baseTimes","baseTrim","string","trimmedEndIndex","replace","baseUnary","baseValues","props","cacheHas","cache","has","charsStartIndex","strSymbols","chrSymbols","charsEndIndex","countHolders","placeholder","deburrLetter","escapeHtmlChar","escapeStringChar","chr","hasUnicode","test","mapToArray","map","size","forEach","overArg","transform","replaceHolders","setToArray","setToPairs","stringSize","lastIndex","unicodeSize","stringToArray","match","unicodeToArray","split","asciiToArray","charAt","unescapeHtmlChar","_","runInContext","defaults","pick","Date","Math","arrayProto","funcProto","objectProto","coreJsData","funcToString","toString","hasOwnProperty","idCounter","maskSrcKey","uid","exec","IE_PROTO","nativeObjectToString","objectCtorString","oldDash","reIsNative","Buffer","Uint8Array","allocUnsafe","getPrototype","objectCreate","propertyIsEnumerable","splice","spreadableSymbol","isConcatSpreadable","symIterator","symToStringTag","toStringTag","getNative","ctxClearTimeout","ctxNow","now","ctxSetTimeout","nativeCeil","ceil","nativeFloor","floor","nativeGetSymbols","nativeIsBuffer","isBuffer","nativeIsFinite","isFinite","nativeJoin","nativeKeys","nativeMax","max","nativeMin","min","nativeNow","nativeParseInt","nativeRandom","random","nativeReverse","reverse","DataView","Map","Set","WeakMap","nativeCreate","metaMap","realNames","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","symbolToString","lodash","isObjectLike","LazyWrapper","LodashWrapper","wrapperClone","baseCreate","proto","isObject","baseLodash","chainAll","__wrapped__","__actions__","__chain__","__index__","__values__","__dir__","__filtered__","__iteratees__","__takeCount__","__views__","Hash","entries","clear","entry","ListCache","MapCache","SetCache","__data__","add","Stack","data","arrayLikeKeys","inherited","isArr","isArg","isArguments","isBuff","isType","skipIndexes","isIndex","arraySample","baseRandom","arraySampleSize","shuffleSelf","copyArray","baseClamp","arrayShuffle","assignMergeValue","eq","baseAssignValue","assignValue","objValue","assocIndexOf","baseAggregator","baseEach","baseAssign","copyObject","baseAt","skip","number","lower","upper","baseClone","bitmask","customizer","stack","isDeep","isFlat","isFull","input","initCloneArray","tag","getTag","isFunc","cloneBuffer","initCloneObject","getSymbolsIn","copySymbolsIn","keysIn","baseAssignIn","getSymbols","copySymbols","Ctor","cloneArrayBuffer","dataView","buffer","byteOffset","byteLength","cloneDataView","cloneTypedArray","regexp","cloneRegExp","symbol","initCloneByTag","stacked","subValue","getAllKeysIn","getAllKeys","baseConformsTo","baseDelay","wait","baseDifference","includes","isCommon","valuesLength","outer","computed","valuesIndex","templateSettings","getMapData","pairs","LARGE_ARRAY_SIZE","createBaseEach","baseForOwn","baseEachRight","baseForOwnRight","baseEvery","baseExtremum","isSymbol","baseFilter","baseFlatten","depth","isStrict","isFlattenable","baseFor","createBaseFor","baseForRight","baseFunctions","isFunction","baseGet","path","castPath","toKey","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","isOwn","unmasked","getRawTag","objectToString","baseGt","other","baseHas","baseHasIn","baseIntersection","arrays","othLength","othIndex","caches","maxLength","Infinity","seen","baseInvoke","parent","last","baseIsArguments","baseIsEqual","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","convert","isPartial","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","objLength","objStacked","othStacked","skipCtor","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","baseIsMatch","matchData","noCustomizer","srcValue","COMPARE_PARTIAL_FLAG","baseIsNative","baseIteratee","identity","baseMatchesProperty","baseMatches","property","baseKeys","isPrototype","baseKeysIn","nativeKeysIn","isProto","baseLt","baseMap","isArrayLike","getMatchData","matchesStrictComparable","isKey","isStrictComparable","hasIn","baseMerge","srcIndex","mergeFunc","safeGet","newValue","isTyped","isArrayLikeObject","isPlainObject","toPlainObject","baseMergeDeep","baseNth","baseOrderBy","iteratees","orders","getIteratee","comparer","sort","baseSortBy","objCriteria","criteria","othCriteria","ordersLength","compareAscending","compareMultiple","basePickBy","baseSet","basePullAll","indexOf","basePullAt","indexes","previous","baseUnset","baseRepeat","baseRest","start","setToString","overRest","baseSample","baseSampleSize","nested","baseSetData","baseSetToString","constant","baseShuffle","baseSlice","end","baseSome","baseSortedIndex","retHighest","low","high","mid","baseSortedIndexBy","valIsNaN","valIsNull","valIsSymbol","valIsUndefined","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","setLow","baseSortedUniq","baseToNumber","baseToString","baseUniq","createSet","seenIndex","baseUpdate","updater","baseWhile","isDrop","baseWrapperValue","actions","action","baseXor","baseZipObject","assignFunc","valsLength","castArrayLikeObject","castFunction","stringToPath","castRest","castSlice","arrayBuffer","typedArray","valIsDefined","valIsReflexive","composeArgs","partials","holders","isCurried","argsIndex","argsLength","holdersLength","leftIndex","leftLength","rangeLength","isUncurried","composeArgsRight","holdersIndex","rightIndex","rightLength","isNew","createAggregator","initializer","createAssigner","assigner","sources","guard","isIterateeCall","iterable","createCaseFirst","methodName","trailing","createCompounder","callback","words","deburr","createCtor","thisBinding","createFind","findIndexFunc","createFlow","flatRest","funcs","prereq","thru","wrapper","getFuncName","funcName","getData","isLaziable","plant","createHybrid","partialsRight","holdersRight","argPos","ary","arity","isAry","isBind","isBindKey","isFlip","getHolder","holdersCount","newHolders","createRecurry","fn","reorder","createInverter","toIteratee","baseInverter","createMathOperation","operator","defaultValue","createOver","arrayFunc","createPadding","chars","charsLength","createRange","toFinite","baseRange","createRelationalOperation","toNumber","wrapFunc","isCurry","newData","setData","setWrapToString","createRound","precision","toInteger","pair","createToPairs","baseToPairs","createWrap","srcBitmask","newBitmask","isCombo","mergeData","createCurry","createPartial","createBind","customDefaultsAssignIn","customDefaultsMerge","customOmitClone","arrLength","arrStacked","arrValue","flatten","otherFunc","isKeyable","getValue","stubArray","hasPath","hasFunc","isLength","ArrayBuffer","ctorString","isMaskable","stubFalse","otherArgs","oldArray","shortOut","reference","details","insertWrapDetails","updateWrapDetails","getWrapDetails","lastCalled","stamp","remaining","rand","memoize","memoizeCapped","charCodeAt","quote","subString","clone","difference","differenceBy","differenceWith","findIndex","findLastIndex","head","intersection","mapped","intersectionBy","intersectionWith","pull","pullAll","pullAt","union","unionBy","unionWith","unzip","group","unzipWith","without","xor","xorBy","xorWith","zip","zipWith","chain","interceptor","wrapperAt","countBy","find","findLast","forEachRight","groupBy","invokeMap","keyBy","partition","sortBy","before","bindKey","WRAP_BIND_FLAG","debounce","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","invokeFunc","time","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","cancel","flush","defer","delay","memoized","Cache","negate","overArgs","transforms","funcsLength","partial","partialRight","rearg","gt","gte","isError","isInteger","isNumber","isString","lt","lte","toArray","iteratorToArray","remainder","toLength","isBinary","assign","assignIn","assignInWith","assignWith","at","propsIndex","propsLength","defaultsDeep","mergeWith","invert","invertBy","invoke","merge","omit","CLONE_DEEP_FLAG","basePick","pickBy","prop","toPairs","toPairsIn","camelCase","word","toLowerCase","capitalize","upperFirst","kebabCase","lowerCase","lowerFirst","snakeCase","startCase","upperCase","toUpperCase","pattern","hasUnicodeWord","unicodeWords","asciiWords","attempt","bindAll","methodNames","flow","flowRight","method","methodOf","mixin","over","overEvery","overSome","basePropertyDeep","range","rangeRight","augend","addend","divide","dividend","divisor","multiply","multiplier","multiplicand","round","subtract","minuend","subtrahend","after","castArray","chunk","compact","cond","conforms","baseConforms","properties","curry","curryRight","drop","dropRight","dropRightWhile","dropWhile","fill","baseFill","filter","flatMap","flatMapDeep","flatMapDepth","flattenDeep","flattenDepth","flip","fromPairs","functions","functionsIn","initial","mapKeys","mapValues","matches","matchesProperty","nthArg","omitBy","orderBy","propertyOf","pullAllBy","pullAllWith","remove","rest","sampleSize","setWith","shuffle","sortedUniq","sortedUniqBy","separator","limit","spread","tail","take","takeRight","takeRightWhile","takeWhile","tap","throttle","toPath","isArrLike","unary","uniq","uniqBy","uniqWith","unset","update","updateWith","valuesIn","wrap","zipObject","zipObjectDeep","entriesIn","extend","extendWith","clamp","cloneDeep","cloneDeepWith","cloneWith","conformsTo","defaultTo","endsWith","escape","escapeRegExp","every","findKey","findLastKey","forIn","forInRight","forOwn","forOwnRight","inRange","baseInRange","isBoolean","isElement","isEmpty","isEqual","isEqualWith","isMatch","isMatchWith","isNative","isNil","isNull","isSafeInteger","isUndefined","isWeakMap","isWeakSet","lastIndexOf","strictLastIndexOf","maxBy","mean","meanBy","minBy","stubObject","stubString","stubTrue","nth","noConflict","pad","strLength","padEnd","padStart","radix","floating","temp","reduce","reduceRight","repeat","sample","some","sortedIndex","sortedIndexBy","sortedIndexOf","sortedLastIndex","sortedLastIndexBy","sortedLastIndexOf","startsWith","sum","sumBy","template","settings","isEscaping","isEvaluating","imports","importsKeys","importsValues","interpolate","reDelimiters","evaluate","sourceURL","escapeValue","interpolateValue","esTemplateValue","evaluateValue","variable","times","toLower","toSafeInteger","toUpper","trim","trimEnd","trimStart","truncate","omission","search","newEnd","unescape","uniqueId","prefix","each","eachRight","first","VERSION","isFilter","takeName","dropName","checkIteratee","isTaker","lodashFunc","retUnwrapped","isLazy","useLazy","isHybrid","isUnwrapped","onlyLazy","chainName","isRight","view","getView","iterLength","takeCount","iterIndex","commit","toJSON","define","ExportedSet","ExportedMap","mangle","unmangle","Map$1","_store","Set$1","cloneBinaryObject","buff","targetArray","sourceArray","webkitSlice","mangled","delete","res","cb","getOwnPropertyDescriptor","species","supportsMapAndSet","newObject","toISOString","Blob","isBinaryObject","called","getArguments","toPromise","usedCB","promise","fulfill","resp","mesg","then","adapterFun","_closed","_destroyed","logArgs","origCallback","responseArgs","logApiCall","taskqueue","isReady","addTask","failed","obj","hasLocal","identityFunction","x","formatResultForOpenRevsGet","ok","bulkGet","db","opts","requests","docs","requestsById","request","numDocs","numDone","perDocResults","checkDone","results","info","collapseResultsAndFinish","allRequests","nextBatch","upTo","batch","docId","j","docIdx","docRequests","docOpts","open_revs","rev","formatResult","param","processBatch","localStorage","setItem","getItem","hasLocalStorage","Changes","EE","attachBrowserEvents","guardedConsole","defaultBackOff","maxTimeout","randomNumber","explainError","status","str","inherits","dbName","inprogress","eventFunction","changesOpts","changes","c","seq","since","cancelled","onChange","immediate","notifyLocalWindows","notify","$inject_Object_assign","to","nextSource","nextKey","PouchError","reason","JSON","stringify","MISSING_BULK_DOCS","MISSING_DOC","REV_CONFLICT","INVALID_ID","MISSING_ID","RESERVED_ID","UNKNOWN_ERROR","BAD_ARG","QUERY_PARSE_ERROR","DOC_VALIDATION","BAD_REQUEST","NOT_AN_OBJECT","IDB_ERROR","INVALID_REV","MISSING_STUB","createError","CustomPouchError","names","generateErrorFromResponse","filterChange","req","hasFilter","query","query_params","change","doc","filterReturn","msg","tryFilter","include_docs","attachments","att","_attachments","stub","arrs","invalidIdError","isRemote","_remote","parseDesignDocFunctionName","parts","normalizeDesignDocFunctionName","normalized","qName","qParser","parser","parseUri","uri","encoded","decodeURIComponent","$0","$1","$2","scopeEval","scope","upsert","diffFun","docRev","_rev","newDoc","updated","_id","put","tryAndPut","thisAtob","atob","thisBtoa","btoa","createBlob","builder","BlobBuilder","MSBlobBuilder","MozBlobBuilder","WebKitBlobBuilder","append","getBlob","binaryStringToArrayBuffer","bin","buf","binStringToBluffer","binString","b64ToBluffer","b64","readAsBinaryString","blob","reader","FileReader","hasBinaryString","onloadend","binary","bytes","arrayBufferToBinaryString","readAsArrayBuffer","blobToBinaryString","blobOrBuffer","blobToBase64","base64","setImmediateShim","setImmediate","appendBlob","sliceBlob","appendString","appendBinary","binaryMd5","inputIsString","chunkSize","chunks","currentChunk","Md5","loadNextChunk","raw","rawToBase64","destroy","stringMd5","hash","deterministic_revs","clonedDoc","_rev_tree","v4","uuid","winningRev","metadata","winningId","winningPos","winningDeleted","node","toVisit","rev_tree","tree","ids","branches","pos","deleted","traverseRevTree","revs","newCtx","ctx","sortByPos","a","b","collectLeaves","leaves","isLeaf","acc","collectConflicts","win","conflicts","leaf","rootToLeaf","history","sortByPos$1","insertSorted","item","idx","binarySearch","pathToTree","numStemmed","currentLeaf","compareTree","mergeTree","in_tree1","in_tree2","tree1","tree2","merged","doMerge","dontExpand","restree","branch","t1","t2","diff","candidateParents","trees","parentIdx","elements","elementsLen","el","newTree","stemmed","stemmedRevs","revHash","stem","getTrees","isDeleted","isLocalId","Changes$1","complete","ee","onDestroy","pending","lastSeq","isCancelled","tryCatchInChangeListener","validateChanges","processChange","changeList","style","_conflicts","compare","left","right","yankError","compareByIdThenRev","idCompare","_revisions","doNextCompaction","task","_compactionQueue","catch","last_seq","_compact","AbstractPouchDB","p","TaskQueue","PouchDB","__opts","auto_compaction","backend","adapter","adapters","preferredAdapters","adapterName","use_prefix","parseAdapter","_adapter","valid","fail","onDestroyed","from_constructor","onClosed","prepareForDestruction","ready","_changesFilterPlugin","validate","doChanges","continuous","live","normalize","shouldFilter","descending","newPromise","_changes","update_seq","post","bulkDocs","_putLocal","_deleted","_removeLocal","putDoc","_put","new_edits","force","oldRevId","newRevNum","newRevId","transformForceOptionToNewEditsOption","putAttachment","attachmentId","rev$$1","api","createAttachment","prevrevpos","content_type","revpos","removeAttachment","docOrId","optsOrRev","was_delete","revsDiff","missing","addToMissing","revId","_getRevisionTree","missingForId","processDoc","missingObj","compactDocument","maxHeight","revTree","height","edges","prnt","from","edge","computeHeight","candidates","_doCompaction","return_docs","promises","row","all","_getLocal","finishOpenRevs","latest","_get","revs_info","splittedRev","revNo","currentPath","hashIndex","indexOfRev","howMany","_revs_info","_getAttachment","getAttachment","allDocs","start_key","startkey","end_key","endkey","incompatibleOpt","allDocsKeysParse","_allDocs","close","_close","_info","db_name","_type","attachmentError","attachmentNameError","atts","cleanDocs","_bulkDocs","registerDependentDatabase","dependentDb","depDB","dependentDbs","usePrefix","destroyDb","_destroy","localDoc","deletedMap","trueName","execute","AbortController","abort","f$1","fetch","h","Headers","eventEmitter","Pouch","destructListeners","_destructionListeners","dbList","setUpEventEmitter","addToPreferredAdapters","plugin","__defaults","defaultOpts","PouchAlt","url","getFieldFromDoc","parsedField","parseField","fieldName","fields","ch","combinationFields","isCombinationalField","field","getKey","mergeAndedSelectors","selectors","selector","matcher","$eq","fieldMatchers","$gte","$gt","mergeGtGte","$lte","$lt","mergeLtLte","$ne","mergeNe","mergeEq","mergeAndedSelectorsNested","isAndInSelector","isAnd","massageSelector","wasAnded","orOrNor","subSelector","MIN_MAGNITUDE","collate","normalizeKey","ai","collationIndex","bi","stringCollate","arrayCollate","ak","bk","objectCollate","origKey","k","val","indexify","num","expFormat","toExponential","magnitude","neg","magString","padWith","upToLength","padding","targetLength","factor","abs","factorStr","toFixed","numToIndexableString","toIndexableString","objKey","parseNumber","originalIdx","numAsString","magAsString","metaStack","lastMetaElement","element","lastElementIndex","filterInMemoryFields","rows","requestDef","inMemoryFields","rowFilter","fieldSorter","getFieldValuesAsArray","sorting","aRow","bRow","collation","createFieldSorter","docFieldValue","orMatchers","matchCominationalSelector","matchSelector","userOperator","userValue","matchers","fieldExists","fieldIsNotUndefined","arrayContainsValue","mod","modField","neValue","arraySize","arrayContainsAllValues","regexMatch","typeMatch","filterName","changesHandler","doc_ids","viewName","ddoc","mapFun","views","rowsMatched","matchesSelector","filterFun","filters","toObject","reservedWords","dataWords","parseRevisionInfo","parseDoc","newEdits","dbOpts","nRevNum","revInfo","revisions","revisionIds","makeRevTreeFromRevisions","specialKey","preprocessString","blobType","asBinary","parseBase64","digest","preprocessAttachment","md5","preprocessBlob","updateDoc","revLimit","prev","docInfo","writeDoc","splitRev","targetPos","targetId","revExists","previousWinningRev","previouslyDeleted","isRoot","newRev","rev_map","winningRev$$1","winningRevIsDeleted","delta","processDocs","docInfos","fetchedDocs","tx","overallCallback","idsToDocs","docsDone","docsToDo","checkAllDocsDone","currentDoc","resultsIdx","docWritten","nextDoc","rootIsMissing","insertDoc","DOC_STORE","BY_SEQ_STORE","ATTACH_STORE","ATTACH_AND_SEQ_STORE","META_STORE","LOCAL_STORE","DETECT_BLOB_SUPPORT_STORE","safeJsonStringify","json","vuvuzela","idbError","evt","encodeMetadata","deletedOrLocal","decodeMetadata","storedObject","parse","safeJsonParse","decodeDoc","_doc_id_rev","readBlobData","body","asBlob","fetchAttachmentsIfNecessary","txn","attObj","objectStore","onsuccess","fetchAttachment","postProcessAttachments","attNames","compactRevs","possiblyOrphanedDigests","seqStore","attStore","attAndSeqStore","IDBKeyRange","bound","deleteOrphanedAttachments","openCursor","only","event","cursor","digestSeq","primaryKey","continue","openTransactionSafely","idb","stores","mode","transaction","idbBulkDocs","docStore","bySeqStore","attachStore","attachAndSeqStore","metaStore","docInfoError","metaDoc","allDocsProcessed","docCountDelta","preconditionErrored","_meta","blobSupport","onAllDocsProcessed","updateDocCountIfReady","docCount","newRevIsDeleted","isUpdate","collectResults","finishDoc","attachmentSaved","newAtt","saveAttachment","writeAttachments","afterPutDoc","revsToDelete","compactTree","metadataToStore","afterPutMetadata","attsAdded","attsToAdd","onerror","preventDefault","stopPropagation","insertAttachmentMappings","putReq","overallErr","docv","recv","processedAttachment","preprocessAttachments","txnResult","onabort","ontimeout","oncomplete","finish","digests","filename","verifyAttachment","attErr","verifyAttachments","numFetched","revs_limit","readMetadata","fetchExistingDocs","startTransaction","runBatchedCursor","keyRange","batchSize","onBatch","keysBatch","valuesBatch","pseudoCursor","onGetAll","onGetAllKeys","onCursor","getAll","newKeyRange","lastKey","upperOpen","code","lowerBound","idbAllDocs","keyRangeError","inclusiveEnd","inclusive_end","upperBound","createKeyRange","onResultsReady","updateSeq","docIdRevIndex","allDocsInner","fetchDocAsynchronously","batchValues","batchValue","batchKeys","returnVal","total_rows","onSuccess","maxKey","getMaxUpdateSeq","allDocsKeys","running","applyNext","docIds","numResults","docIdsToMetadata","onGetMetadata","docIdRev","objectStores","winningDocs","metadatas","fetchWinningDocAndMetadata","winningDoc","processMetadataAndWinningDoc","onBatchDone","filtered","blobSupportPromise","cachedDBs","openReqList","IdbPouch","tryCode","enqueueTask","thisCallback","createSchema","createObjectStore","keyPath","autoIncrement","createIndex","unique","addDeletedOrLocalIndex","createLocalStoreSchema","migrateLocalStore","localStore","local","seqCursor","addAttachAndSeqStore","migrateAttsAndSeqs","digestMap","migrateMetadata","decodeMetadataCompat","onGetMetadataSeq","fetchMetadataSeq","metadataSeq","instanceId","reqOpts","historyNode","attachId","attachment","blobData","doc_count","idb_attachment_format","oldRev","oStore","oldDoc","openReq","indexedDB","deleteDatabase","cached","open","onupgradeneeded","oldVersion","currentTarget","migrations","migration","onversionchange","storedMetaDoc","completeSetup","storeMetaDocIfReady","instanceKey","countDocs","blob$$1","matchedChrome","navigator","userAgent","matchedEdge","checkBlobSupport","CHANGES_TIMEOUT_BUFFER","supportsBulkGetMap","readAttachmentsAsBlobOrBuffer","encodeDocId","encodeURIComponent","preprocessAttachments$1","getHost","protocol","hasUrlPrefix","substr","user","password","auth","username","genDBUrl","genUrl","pathDel","host","port","paramsToStr","params","HttpPouch","dbUrl","setupPromise","ourFetch","headers","credentials","nAuth","token","ua","isIE","isTrident","isEdge","isGET","shouldCacheBust","adapterFun$$1","setup","fetchJSON","response","v","skip_setup","encodeAttachmentId","uuid$$1","ping","compact_running","interval","doBulkGet","doBulkGetShim","numBatches","onResult","batchNum","subOpts","supportsBulkGet","fetchAttachments","filenames","promiseFactories","doNext","runNextBatch","onError","thisErr","pool","typeFieldDescriptor","__proto__","fetchData","docOrDocs","contentType","paramStr","batch_size","heartbeat","requestTimeout","leftToFetch","feed","seq_interval","param_name","lastFetchedSeq","controller","aborted","fetchOpts","signal","fetched","raw_results_length","finished","QueryParseError","captureStackTrace","NotFoundError","BuiltInError","promisedCallback","sequentialize","promiseFactory","theSet","mapToKeysArray","createBuiltInError","jLen","jNum","log","evalFunctionWithEval","TaskQueue$1","createView","sourceDB","reduceFun","temporary","localDocName","cachedViews","viewSignature","createViewSignature","_cachedViews","promiseForView","depDbName","fullViewName","depDbs","lastSeqDoc","persistentQueues","tempViewQueue","parseViewName","emitError","builtInReduce","sumsqr","_sumsqr","abstract","mapper","reducer","ddocValidator","tryMap","tryReduce","rereduce","output","sortByKeyThenValue","y","keyCompare","sliceResults","rowToDocId","postprocessAttachments","addHttpParam","paramName","asJson","coerceInteger","integerCandidate","asNumber","checkQueryParseError","startkeyName","endkeyName","group_level","optionName","checkPositiveInteger","defaultsTo","getDocsToPersist","docIdsToChangesAndEmits","metaDocId","defaultMetaDoc","docData","indexableKeysToKeyValues","isGenOne","getKeyValueDocs","kvDocsRes","kvDocs","oldKeys","keyValue","newKeys","kvDoc","processKeyValueDocs","getQueue","updateView","mapResults","currentSeq","seqDocId","listOfDocsToPersist","docsToPersist","saveKeyValues","processNextBatch","createDocIdsToChangesAndEmits","createIndexableKeysToKeyValues","emittedKeyValue","complexKey","updateViewInQueue","queryView","totalRows","shouldReduce","fetchFromView","viewOpts","expectedKeys","parsedKeyAndDocId","parsedNum","parsedStr","arrayElement","objElement","parseIndexableString","onMapResultsReady","finalResults","shouldGroup","groups","lvl","POSITIVE_INFINITY","groupKey","reduceTry","reduceView","allDocsRes","docIdsToDocs","fetchPromises","keyStart","keyEnd","queryViewInQueue","queryPromised","_query","customQuery","keysAsString","httpQuery","finalPromiseFactory","designDocName","stale","coerceOptions","viewCleanup","_viewCleanup","customViewCleanup","httpViewCleanup","docsToViews","viewsToStatus","ddocName","viewDBNames","statusIsGood","viewDBName","destroyPromises","localViewCleanup","createAbstractMapReduce","origMap","reduceFunString","builtIn","getBuiltIn","mapreduce","isGenOne$1","getDocAttachments","getDocs","src","diffs","resultDocs","fetchRevisionOneDocs","hasConflicts","bulkGetOpts","missingRev","createBulkGetOpts","bulkGetResponse","bulkGetInfo","remoteDoc","doCheckForLocalAttachments","fileHasChanged","getDocAttachmentsFromTargetOrSource","Boolean","REPLICATOR","updateCheckpoint","checkpoint","session","returnValue","session_id","replicator","Checkpointer","writeCheckpoint","updateTarget","updateSource","writeTargetCheckpoint","writeSourceCheckpoint","isForbiddenError","comparisons","targetDoc","sourceDoc","srcDoc","tgtDoc","compareReplicationHistory","compareReplicationLogs","sourceHistory","targetHistory","S","sourceRest","T","targetRest","hasSessionId","sessionId","getCheckpoint","generateReplicationId","queryParams","filterViewName","sortObjectPropertiesByKey","queryData","md5sum","replicate","currentBatch","repId","checkpointer","batches","pendingBatch","writingCheckpoint","changesCompleted","replicationCompleted","batches_limit","changesPending","changedDocs","start_time","docs_read","docs_written","doc_write_failures","errors","initCheckpointer","checkpointOpts","writeDocs","bulkOpts","completeReplication","errorsById","errorsNo","errorName","finishBatch","outResult","getChanges","onCheckpointError","getBatchDocs","got","startNextBatch","getDiffs","abortReplication","processPendingBatch","immediate$$1","fatalError","end_time","retry","back_off_function","backOffSet","current_back_off","backOff","onChangesComplete","onChangesError","_abortChanges","abortChanges","startChanges","_addedListeners","Replication","toPouch","PouchConstructor","replicateWrapper","replicateRet","sync","Sync","canceled","optsPush","optsPull","pullChange","direction","pushChange","pushDenied","pullDenied","pushPaused","pullPaused","pushActive","pullActive","removed","removeAll","addOneListener","out","success","_readyCalled","replicateMethods","scheduleDrain","scheduled","install","queueMicrotask","Mutation","MutationObserver","WebKitMutationObserver","handle","observer","document","createTextNode","observe","characterData","MessageChannel","channel","port1","onmessage","port2","postMessage","createElement","scriptEl","onreadystatechange","parentNode","removeChild","documentElement","appendChild","t","hex_chr","md5cycle","d","md5blk","md5blks","md5blk_array","md51","tmp","lo","hi","md51_array","subarray","rhex","hex","toUtf8","utf8Str2ArrayBuffer","returnUInt8Array","arrayBuffer2Utf8Str","concatenateArrayBuffers","second","hexToBinaryString","SparkMD5","reset","begin","contents","_buff","_length","_hash","_finish","getState","setState","hashBinary","content","factory","arrayPrefix","objPrefix","numChar","parsedString","lastCh","numConsecutiveSlashes","kind","description","numberParameters","numberLogParameters","parameters","label","unit","pcbProbe","bit","liquidProbe","pcbTemperature","liquidTemperature","targetTemperature","weight","stepper","food","pid","sedimentation","filling","emptying","getRandomValues","crypto","msCrypto","rnds8","rng","byteToHex","bytesToUuid","bth","rnds"],"mappings":"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","file":"static/js/0.7b90cb54.chunk.js","sourcesContent":["import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","'use strict';\n\nlet devices = {\n  OpenBio: require('./devices/OpenBio'),\n  OpenBio6: require('./devices/OpenBio6'),\n  OpenSpectro: require('./devices/OpenSpectro'),\n  SimpleSpectro: require('./devices/SimpleSpectro'),\n  Solar2015: require('./devices/Solar2015'),\n  Beemos: require('./devices/Beemos'),\n  Computer: require('./devices/Computer'),\n  fromDeviceID,\n};\n\n/**\n * Return a device information from the deviceID\n * @param {string|number} id\n * @returns\n */\nfunction fromDeviceID(id) {\n  if (typeof id === 'number') {\n    id = String.fromCharCode((id / 256) >> 0) + String.fromCharCode(id % 256);\n  }\n  if (typeof id !== 'string') {\n    throw Error('Device ID not a string or number');\n  }\n  if (id.length !== 2) {\n    throw Error(\n      `Device ID should be 2 character long and found: ${id.ldength}`,\n    );\n  }\n  const firstCharacter = id.substring(0, 1);\n  for (let key in devices) {\n    if (devices[key].id === firstCharacter) {\n      return devices[key];\n    }\n  }\n  return undefined;\n}\n\nmodule.exports = devices;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre-ES5 environments. */\n  var undefined;\n\n  /** Used as the semantic version number. */\n  var VERSION = '4.17.21';\n\n  /** Used as the size to enable large array optimizations. */\n  var LARGE_ARRAY_SIZE = 200;\n\n  /** Error message constants. */\n  var CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',\n      FUNC_ERROR_TEXT = 'Expected a function',\n      INVALID_TEMPL_VAR_ERROR_TEXT = 'Invalid `variable` option passed into `_.template`';\n\n  /** Used to stand-in for `undefined` hash values. */\n  var HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n  /** Used as the maximum memoize cache size. */\n  var MAX_MEMOIZE_SIZE = 500;\n\n  /** Used as the internal argument placeholder. */\n  var PLACEHOLDER = '__lodash_placeholder__';\n\n  /** Used to compose bitmasks for cloning. */\n  var CLONE_DEEP_FLAG = 1,\n      CLONE_FLAT_FLAG = 2,\n      CLONE_SYMBOLS_FLAG = 4;\n\n  /** Used to compose bitmasks for value comparisons. */\n  var COMPARE_PARTIAL_FLAG = 1,\n      COMPARE_UNORDERED_FLAG = 2;\n\n  /** Used to compose bitmasks for function metadata. */\n  var WRAP_BIND_FLAG = 1,\n      WRAP_BIND_KEY_FLAG = 2,\n      WRAP_CURRY_BOUND_FLAG = 4,\n      WRAP_CURRY_FLAG = 8,\n      WRAP_CURRY_RIGHT_FLAG = 16,\n      WRAP_PARTIAL_FLAG = 32,\n      WRAP_PARTIAL_RIGHT_FLAG = 64,\n      WRAP_ARY_FLAG = 128,\n      WRAP_REARG_FLAG = 256,\n      WRAP_FLIP_FLAG = 512;\n\n  /** Used as default options for `_.truncate`. */\n  var DEFAULT_TRUNC_LENGTH = 30,\n      DEFAULT_TRUNC_OMISSION = '...';\n\n  /** Used to detect hot functions by number of calls within a span of milliseconds. */\n  var HOT_COUNT = 800,\n      HOT_SPAN = 16;\n\n  /** Used to indicate the type of lazy iteratees. */\n  var LAZY_FILTER_FLAG = 1,\n      LAZY_MAP_FLAG = 2,\n      LAZY_WHILE_FLAG = 3;\n\n  /** Used as references for various `Number` constants. */\n  var INFINITY = 1 / 0,\n      MAX_SAFE_INTEGER = 9007199254740991,\n      MAX_INTEGER = 1.7976931348623157e+308,\n      NAN = 0 / 0;\n\n  /** Used as references for the maximum length and index of an array. */\n  var MAX_ARRAY_LENGTH = 4294967295,\n      MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,\n      HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n  /** Used to associate wrap methods with their bit flags. */\n  var wrapFlags = [\n    ['ary', WRAP_ARY_FLAG],\n    ['bind', WRAP_BIND_FLAG],\n    ['bindKey', WRAP_BIND_KEY_FLAG],\n    ['curry', WRAP_CURRY_FLAG],\n    ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n    ['flip', WRAP_FLIP_FLAG],\n    ['partial', WRAP_PARTIAL_FLAG],\n    ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n    ['rearg', WRAP_REARG_FLAG]\n  ];\n\n  /** `Object#toString` result references. */\n  var argsTag = '[object Arguments]',\n      arrayTag = '[object Array]',\n      asyncTag = '[object AsyncFunction]',\n      boolTag = '[object Boolean]',\n      dateTag = '[object Date]',\n      domExcTag = '[object DOMException]',\n      errorTag = '[object Error]',\n      funcTag = '[object Function]',\n      genTag = '[object GeneratorFunction]',\n      mapTag = '[object Map]',\n      numberTag = '[object Number]',\n      nullTag = '[object Null]',\n      objectTag = '[object Object]',\n      promiseTag = '[object Promise]',\n      proxyTag = '[object Proxy]',\n      regexpTag = '[object RegExp]',\n      setTag = '[object Set]',\n      stringTag = '[object String]',\n      symbolTag = '[object Symbol]',\n      undefinedTag = '[object Undefined]',\n      weakMapTag = '[object WeakMap]',\n      weakSetTag = '[object WeakSet]';\n\n  var arrayBufferTag = '[object ArrayBuffer]',\n      dataViewTag = '[object DataView]',\n      float32Tag = '[object Float32Array]',\n      float64Tag = '[object Float64Array]',\n      int8Tag = '[object Int8Array]',\n      int16Tag = '[object Int16Array]',\n      int32Tag = '[object Int32Array]',\n      uint8Tag = '[object Uint8Array]',\n      uint8ClampedTag = '[object Uint8ClampedArray]',\n      uint16Tag = '[object Uint16Array]',\n      uint32Tag = '[object Uint32Array]';\n\n  /** Used to match empty string literals in compiled template source. */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match HTML entities and HTML characters. */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n      reUnescapedHtml = /[&<>\"']/g,\n      reHasEscapedHtml = RegExp(reEscapedHtml.source),\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n  /** Used to match template delimiters. */\n  var reEscape = /<%-([\\s\\S]+?)%>/g,\n      reEvaluate = /<%([\\s\\S]+?)%>/g,\n      reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match property names within property paths. */\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n      reIsPlainProp = /^\\w*$/,\n      rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n  /**\n   * Used to match `RegExp`\n   * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n   */\n  var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n      reHasRegExpChar = RegExp(reRegExpChar.source);\n\n  /** Used to match leading whitespace. */\n  var reTrimStart = /^\\s+/;\n\n  /** Used to match a single whitespace character. */\n  var reWhitespace = /\\s/;\n\n  /** Used to match wrap detail comments. */\n  var reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,\n      reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n      reSplitDetails = /,? & /;\n\n  /** Used to match words composed of alphanumeric characters. */\n  var reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n  /**\n   * Used to validate the `validate` option in `_.template` variable.\n   *\n   * Forbids characters which could potentially change the meaning of the function argument definition:\n   * - \"(),\" (modification of function parameters)\n   * - \"=\" (default value)\n   * - \"[]{}\" (destructuring of function parameters)\n   * - \"/\" (beginning of a comment)\n   * - whitespace\n   */\n  var reForbiddenIdentifierChars = /[()=,{}\\[\\]\\/\\s]/;\n\n  /** Used to match backslashes in property paths. */\n  var reEscapeChar = /\\\\(\\\\)?/g;\n\n  /**\n   * Used to match\n   * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).\n   */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match `RegExp` flags from their coerced string values. */\n  var reFlags = /\\w*$/;\n\n  /** Used to detect bad signed hexadecimal string values. */\n  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n  /** Used to detect binary string values. */\n  var reIsBinary = /^0b[01]+$/i;\n\n  /** Used to detect host constructors (Safari). */\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n  /** Used to detect octal string values. */\n  var reIsOctal = /^0o[0-7]+$/i;\n\n  /** Used to detect unsigned integer values. */\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n  /** Used to ensure capturing order of template delimiters. */\n  var reNoMatch = /($^)/;\n\n  /** Used to match unescaped characters in compiled string literals. */\n  var reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n  /** Used to compose unicode character classes. */\n  var rsAstralRange = '\\\\ud800-\\\\udfff',\n      rsComboMarksRange = '\\\\u0300-\\\\u036f',\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n      rsDingbatRange = '\\\\u2700-\\\\u27bf',\n      rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n      rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n      rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n      rsPunctuationRange = '\\\\u2000-\\\\u206f',\n      rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n      rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n      rsVarRange = '\\\\ufe0e\\\\ufe0f',\n      rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n  /** Used to compose unicode capture groups. */\n  var rsApos = \"['\\u2019]\",\n      rsAstral = '[' + rsAstralRange + ']',\n      rsBreak = '[' + rsBreakRange + ']',\n      rsCombo = '[' + rsComboRange + ']',\n      rsDigits = '\\\\d+',\n      rsDingbat = '[' + rsDingbatRange + ']',\n      rsLower = '[' + rsLowerRange + ']',\n      rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n      rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n      rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n      rsNonAstral = '[^' + rsAstralRange + ']',\n      rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n      rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n      rsUpper = '[' + rsUpperRange + ']',\n      rsZWJ = '\\\\u200d';\n\n  /** Used to compose unicode regexes. */\n  var rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n      rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n      rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n      rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n      reOptMod = rsModifier + '?',\n      rsOptVar = '[' + rsVarRange + ']?',\n      rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n      rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n      rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n      rsSeq = rsOptVar + reOptMod + rsOptJoin,\n      rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,\n      rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n  /** Used to match apostrophes. */\n  var reApos = RegExp(rsApos, 'g');\n\n  /**\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n   */\n  var reComboMark = RegExp(rsCombo, 'g');\n\n  /** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\n  var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n  /** Used to match complex or compound words. */\n  var reUnicodeWord = RegExp([\n    rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n    rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n    rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n    rsUpper + '+' + rsOptContrUpper,\n    rsOrdUpper,\n    rsOrdLower,\n    rsDigits,\n    rsEmoji\n  ].join('|'), 'g');\n\n  /** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\n  var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n  /** Used to detect strings that need a more robust regexp to match words. */\n  var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n  /** Used to assign default `context` object properties. */\n  var contextProps = [\n    'Array', 'Buffer', 'DataView', 'Date', 'Error', 'Float32Array', 'Float64Array',\n    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Math', 'Object',\n    'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'TypeError', 'Uint8Array',\n    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap',\n    '_', 'clearTimeout', 'isFinite', 'parseInt', 'setTimeout'\n  ];\n\n  /** Used to make template sourceURLs easier to identify. */\n  var templateCounter = -1;\n\n  /** Used to identify `toStringTag` values of typed arrays. */\n  var typedArrayTags = {};\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n  typedArrayTags[uint32Tag] = true;\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n  typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\n  typedArrayTags[errorTag] = typedArrayTags[funcTag] =\n  typedArrayTags[mapTag] = typedArrayTags[numberTag] =\n  typedArrayTags[objectTag] = typedArrayTags[regexpTag] =\n  typedArrayTags[setTag] = typedArrayTags[stringTag] =\n  typedArrayTags[weakMapTag] = false;\n\n  /** Used to identify `toStringTag` values supported by `_.clone`. */\n  var cloneableTags = {};\n  cloneableTags[argsTag] = cloneableTags[arrayTag] =\n  cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n  cloneableTags[boolTag] = cloneableTags[dateTag] =\n  cloneableTags[float32Tag] = cloneableTags[float64Tag] =\n  cloneableTags[int8Tag] = cloneableTags[int16Tag] =\n  cloneableTags[int32Tag] = cloneableTags[mapTag] =\n  cloneableTags[numberTag] = cloneableTags[objectTag] =\n  cloneableTags[regexpTag] = cloneableTags[setTag] =\n  cloneableTags[stringTag] = cloneableTags[symbolTag] =\n  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n  cloneableTags[errorTag] = cloneableTags[funcTag] =\n  cloneableTags[weakMapTag] = false;\n\n  /** Used to map Latin Unicode letters to basic Latin letters. */\n  var deburredLetters = {\n    // Latin-1 Supplement block.\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    '\\xc6': 'Ae', '\\xe6': 'ae',\n    '\\xde': 'Th', '\\xfe': 'th',\n    '\\xdf': 'ss',\n    // Latin Extended-A block.\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n    '\\u0134': 'J',  '\\u0135': 'j',\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n    '\\u0174': 'W',  '\\u0175': 'w',\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n    '\\u0132': 'IJ', '\\u0133': 'ij',\n    '\\u0152': 'Oe', '\\u0153': 'oe',\n    '\\u0149': \"'n\", '\\u017f': 's'\n  };\n\n  /** Used to map characters to HTML entities. */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  /** Used to map HTML entities to characters. */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\"\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals. */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Built-in method references without a dependency on `root`. */\n  var freeParseFloat = parseFloat,\n      freeParseInt = parseInt;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n  /** Detect free variable `self`. */\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n  /** Used as a reference to the global object. */\n  var root = freeGlobal || freeSelf || Function('return this')();\n\n  /** Detect free variable `exports`. */\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n  /** Detect the popular CommonJS extension `module.exports`. */\n  var moduleExports = freeModule && freeModule.exports === freeExports;\n\n  /** Detect free variable `process` from Node.js. */\n  var freeProcess = moduleExports && freeGlobal.process;\n\n  /** Used to access faster Node.js helpers. */\n  var nodeUtil = (function() {\n    try {\n      // Use `util.types` for Node.js 10+.\n      var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n      if (types) {\n        return types;\n      }\n\n      // Legacy `process.binding('util')` for Node.js < 10.\n      return freeProcess && freeProcess.binding && freeProcess.binding('util');\n    } catch (e) {}\n  }());\n\n  /* Node.js helper references. */\n  var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer,\n      nodeIsDate = nodeUtil && nodeUtil.isDate,\n      nodeIsMap = nodeUtil && nodeUtil.isMap,\n      nodeIsRegExp = nodeUtil && nodeUtil.isRegExp,\n      nodeIsSet = nodeUtil && nodeUtil.isSet,\n      nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * A faster alternative to `Function#apply`, this function invokes `func`\n   * with the `this` binding of `thisArg` and the arguments of `args`.\n   *\n   * @private\n   * @param {Function} func The function to invoke.\n   * @param {*} thisArg The `this` binding of `func`.\n   * @param {Array} args The arguments to invoke `func` with.\n   * @returns {*} Returns the result of `func`.\n   */\n  function apply(func, thisArg, args) {\n    switch (args.length) {\n      case 0: return func.call(thisArg);\n      case 1: return func.call(thisArg, args[0]);\n      case 2: return func.call(thisArg, args[0], args[1]);\n      case 3: return func.call(thisArg, args[0], args[1], args[2]);\n    }\n    return func.apply(thisArg, args);\n  }\n\n  /**\n   * A specialized version of `baseAggregator` for arrays.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} setter The function to set `accumulator` values.\n   * @param {Function} iteratee The iteratee to transform keys.\n   * @param {Object} accumulator The initial aggregated object.\n   * @returns {Function} Returns `accumulator`.\n   */\n  function arrayAggregator(array, setter, iteratee, accumulator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      var value = array[index];\n      setter(accumulator, value, iteratee(value), array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.forEach` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEach(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (iteratee(array[index], index, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.forEachRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEachRight(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n\n    while (length--) {\n      if (iteratee(array[length], length, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.every` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if all elements pass the predicate check,\n   *  else `false`.\n   */\n  function arrayEvery(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (!predicate(array[index], index, array)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * A specialized version of `_.filter` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {Array} Returns the new filtered array.\n   */\n  function arrayFilter(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (predicate(value, index, array)) {\n        result[resIndex++] = value;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.includes` for arrays without support for\n   * specifying an index to search from.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludes(array, value) {\n    var length = array == null ? 0 : array.length;\n    return !!length && baseIndexOf(array, value, 0) > -1;\n  }\n\n  /**\n   * This function is like `arrayIncludes` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludesWith(array, value, comparator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (comparator(value, array[index])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * A specialized version of `_.map` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the new mapped array.\n   */\n  function arrayMap(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    return result;\n  }\n\n  /**\n   * Appends the elements of `values` to `array`.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {Array} values The values to append.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayPush(array, values) {\n    var index = -1,\n        length = values.length,\n        offset = array.length;\n\n    while (++index < length) {\n      array[offset + index] = values[index];\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.reduce` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the first element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduce(array, iteratee, accumulator, initAccum) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    if (initAccum && length) {\n      accumulator = array[++index];\n    }\n    while (++index < length) {\n      accumulator = iteratee(accumulator, array[index], index, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.reduceRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the last element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduceRight(array, iteratee, accumulator, initAccum) {\n    var length = array == null ? 0 : array.length;\n    if (initAccum && length) {\n      accumulator = array[--length];\n    }\n    while (length--) {\n      accumulator = iteratee(accumulator, array[length], length, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.some` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if any element passes the predicate check,\n   *  else `false`.\n   */\n  function arraySome(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (predicate(array[index], index, array)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Gets the size of an ASCII `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  var asciiSize = baseProperty('length');\n\n  /**\n   * Converts an ASCII `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function asciiToArray(string) {\n    return string.split('');\n  }\n\n  /**\n   * Splits an ASCII `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function asciiWords(string) {\n    return string.match(reAsciiWord) || [];\n  }\n\n  /**\n   * The base implementation of methods like `_.findKey` and `_.findLastKey`,\n   * without support for iteratee shorthands, which iterates over `collection`\n   * using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the found element or its key, else `undefined`.\n   */\n  function baseFindKey(collection, predicate, eachFunc) {\n    var result;\n    eachFunc(collection, function(value, key, collection) {\n      if (predicate(value, key, collection)) {\n        result = key;\n        return false;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.findIndex` and `_.findLastIndex` without\n   * support for iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {number} fromIndex The index to search from.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseFindIndex(array, predicate, fromIndex, fromRight) {\n    var length = array.length,\n        index = fromIndex + (fromRight ? 1 : -1);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (predicate(array[index], index, array)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    return value === value\n      ? strictIndexOf(array, value, fromIndex)\n      : baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n\n  /**\n   * This function is like `baseIndexOf` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOfWith(array, value, fromIndex, comparator) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (comparator(array[index], value)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.isNaN` without support for number objects.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n   */\n  function baseIsNaN(value) {\n    return value !== value;\n  }\n\n  /**\n   * The base implementation of `_.mean` and `_.meanBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the mean.\n   */\n  function baseMean(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n    return length ? (baseSum(array, iteratee) / length) : NAN;\n  }\n\n  /**\n   * The base implementation of `_.property` without support for deep paths.\n   *\n   * @private\n   * @param {string} key The key of the property to get.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function baseProperty(key) {\n    return function(object) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.propertyOf` without support for deep paths.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function basePropertyOf(object) {\n    return function(key) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.reduce` and `_.reduceRight`, without support\n   * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} accumulator The initial value.\n   * @param {boolean} initAccum Specify using the first or last element of\n   *  `collection` as the initial value.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the accumulated value.\n   */\n  function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n    eachFunc(collection, function(value, index, collection) {\n      accumulator = initAccum\n        ? (initAccum = false, value)\n        : iteratee(accumulator, value, index, collection);\n    });\n    return accumulator;\n  }\n\n  /**\n   * The base implementation of `_.sortBy` which uses `comparer` to define the\n   * sort order of `array` and replaces criteria objects with their corresponding\n   * values.\n   *\n   * @private\n   * @param {Array} array The array to sort.\n   * @param {Function} comparer The function to define sort order.\n   * @returns {Array} Returns `array`.\n   */\n  function baseSortBy(array, comparer) {\n    var length = array.length;\n\n    array.sort(comparer);\n    while (length--) {\n      array[length] = array[length].value;\n    }\n    return array;\n  }\n\n  /**\n   * The base implementation of `_.sum` and `_.sumBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the sum.\n   */\n  function baseSum(array, iteratee) {\n    var result,\n        index = -1,\n        length = array.length;\n\n    while (++index < length) {\n      var current = iteratee(array[index]);\n      if (current !== undefined) {\n        result = result === undefined ? current : (result + current);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.times` without support for iteratee shorthands\n   * or max array length checks.\n   *\n   * @private\n   * @param {number} n The number of times to invoke `iteratee`.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the array of results.\n   */\n  function baseTimes(n, iteratee) {\n    var index = -1,\n        result = Array(n);\n\n    while (++index < n) {\n      result[index] = iteratee(index);\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n   * of key-value pairs for `object` corresponding to the property names of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the key-value pairs.\n   */\n  function baseToPairs(object, props) {\n    return arrayMap(props, function(key) {\n      return [key, object[key]];\n    });\n  }\n\n  /**\n   * The base implementation of `_.trim`.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} Returns the trimmed string.\n   */\n  function baseTrim(string) {\n    return string\n      ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n      : string;\n  }\n\n  /**\n   * The base implementation of `_.unary` without support for storing metadata.\n   *\n   * @private\n   * @param {Function} func The function to cap arguments for.\n   * @returns {Function} Returns the new capped function.\n   */\n  function baseUnary(func) {\n    return function(value) {\n      return func(value);\n    };\n  }\n\n  /**\n   * The base implementation of `_.values` and `_.valuesIn` which creates an\n   * array of `object` property values corresponding to the property names\n   * of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the array of property values.\n   */\n  function baseValues(object, props) {\n    return arrayMap(props, function(key) {\n      return object[key];\n    });\n  }\n\n  /**\n   * Checks if a `cache` value for `key` exists.\n   *\n   * @private\n   * @param {Object} cache The cache to query.\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n  function cacheHas(cache, key) {\n    return cache.has(key);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the first unmatched string symbol.\n   */\n  function charsStartIndex(strSymbols, chrSymbols) {\n    var index = -1,\n        length = strSymbols.length;\n\n    while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the last unmatched string symbol.\n   */\n  function charsEndIndex(strSymbols, chrSymbols) {\n    var index = strSymbols.length;\n\n    while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Gets the number of `placeholder` occurrences in `array`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} placeholder The placeholder to search for.\n   * @returns {number} Returns the placeholder count.\n   */\n  function countHolders(array, placeholder) {\n    var length = array.length,\n        result = 0;\n\n    while (length--) {\n      if (array[length] === placeholder) {\n        ++result;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n   * letters to basic Latin letters.\n   *\n   * @private\n   * @param {string} letter The matched letter to deburr.\n   * @returns {string} Returns the deburred letter.\n   */\n  var deburrLetter = basePropertyOf(deburredLetters);\n\n  /**\n   * Used by `_.escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  var escapeHtmlChar = basePropertyOf(htmlEscapes);\n\n  /**\n   * Used by `_.template` to escape characters for inclusion in compiled string literals.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(chr) {\n    return '\\\\' + stringEscapes[chr];\n  }\n\n  /**\n   * Gets the value at `key` of `object`.\n   *\n   * @private\n   * @param {Object} [object] The object to query.\n   * @param {string} key The key of the property to get.\n   * @returns {*} Returns the property value.\n   */\n  function getValue(object, key) {\n    return object == null ? undefined : object[key];\n  }\n\n  /**\n   * Checks if `string` contains Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n   */\n  function hasUnicode(string) {\n    return reHasUnicode.test(string);\n  }\n\n  /**\n   * Checks if `string` contains a word composed of Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a word is found, else `false`.\n   */\n  function hasUnicodeWord(string) {\n    return reHasUnicodeWord.test(string);\n  }\n\n  /**\n   * Converts `iterator` to an array.\n   *\n   * @private\n   * @param {Object} iterator The iterator to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function iteratorToArray(iterator) {\n    var data,\n        result = [];\n\n    while (!(data = iterator.next()).done) {\n      result.push(data.value);\n    }\n    return result;\n  }\n\n  /**\n   * Converts `map` to its key-value pairs.\n   *\n   * @private\n   * @param {Object} map The map to convert.\n   * @returns {Array} Returns the key-value pairs.\n   */\n  function mapToArray(map) {\n    var index = -1,\n        result = Array(map.size);\n\n    map.forEach(function(value, key) {\n      result[++index] = [key, value];\n    });\n    return result;\n  }\n\n  /**\n   * Creates a unary function that invokes `func` with its argument transformed.\n   *\n   * @private\n   * @param {Function} func The function to wrap.\n   * @param {Function} transform The argument transform.\n   * @returns {Function} Returns the new function.\n   */\n  function overArg(func, transform) {\n    return function(arg) {\n      return func(transform(arg));\n    };\n  }\n\n  /**\n   * Replaces all `placeholder` elements in `array` with an internal placeholder\n   * and returns an array of their indexes.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {*} placeholder The placeholder to replace.\n   * @returns {Array} Returns the new array of placeholder indexes.\n   */\n  function replaceHolders(array, placeholder) {\n    var index = -1,\n        length = array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (value === placeholder || value === PLACEHOLDER) {\n        array[index] = PLACEHOLDER;\n        result[resIndex++] = index;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Converts `set` to an array of its values.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the values.\n   */\n  function setToArray(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = value;\n    });\n    return result;\n  }\n\n  /**\n   * Converts `set` to its value-value pairs.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the value-value pairs.\n   */\n  function setToPairs(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = [value, value];\n    });\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.indexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictIndexOf(array, value, fromIndex) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * A specialized version of `_.lastIndexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictLastIndexOf(array, value, fromIndex) {\n    var index = fromIndex + 1;\n    while (index--) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return index;\n  }\n\n  /**\n   * Gets the number of symbols in `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the string size.\n   */\n  function stringSize(string) {\n    return hasUnicode(string)\n      ? unicodeSize(string)\n      : asciiSize(string);\n  }\n\n  /**\n   * Converts `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function stringToArray(string) {\n    return hasUnicode(string)\n      ? unicodeToArray(string)\n      : asciiToArray(string);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n   * character of `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the index of the last non-whitespace character.\n   */\n  function trimmedEndIndex(string) {\n    var index = string.length;\n\n    while (index-- && reWhitespace.test(string.charAt(index))) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} chr The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  var unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\n  /**\n   * Gets the size of a Unicode `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  function unicodeSize(string) {\n    var result = reUnicode.lastIndex = 0;\n    while (reUnicode.test(string)) {\n      ++result;\n    }\n    return result;\n  }\n\n  /**\n   * Converts a Unicode `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function unicodeToArray(string) {\n    return string.match(reUnicode) || [];\n  }\n\n  /**\n   * Splits a Unicode `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function unicodeWords(string) {\n    return string.match(reUnicodeWord) || [];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new pristine `lodash` function using the `context` object.\n   *\n   * @static\n   * @memberOf _\n   * @since 1.1.0\n   * @category Util\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns a new `lodash` function.\n   * @example\n   *\n   * _.mixin({ 'foo': _.constant('foo') });\n   *\n   * var lodash = _.runInContext();\n   * lodash.mixin({ 'bar': lodash.constant('bar') });\n   *\n   * _.isFunction(_.foo);\n   * // => true\n   * _.isFunction(_.bar);\n   * // => false\n   *\n   * lodash.isFunction(lodash.foo);\n   * // => false\n   * lodash.isFunction(lodash.bar);\n   * // => true\n   *\n   * // Create a suped-up `defer` in Node.js.\n   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;\n   */\n  var runInContext = (function runInContext(context) {\n    context = context == null ? root : _.defaults(root.Object(), context, _.pick(root, contextProps));\n\n    /** Built-in constructor references. */\n    var Array = context.Array,\n        Date = context.Date,\n        Error = context.Error,\n        Function = context.Function,\n        Math = context.Math,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /** Used for built-in method references. */\n    var arrayProto = Array.prototype,\n        funcProto = Function.prototype,\n        objectProto = Object.prototype;\n\n    /** Used to detect overreaching core-js shims. */\n    var coreJsData = context['__core-js_shared__'];\n\n    /** Used to resolve the decompiled source of functions. */\n    var funcToString = funcProto.toString;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty = objectProto.hasOwnProperty;\n\n    /** Used to generate unique IDs. */\n    var idCounter = 0;\n\n    /** Used to detect methods masquerading as native. */\n    var maskSrcKey = (function() {\n      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n      return uid ? ('Symbol(src)_1.' + uid) : '';\n    }());\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var nativeObjectToString = objectProto.toString;\n\n    /** Used to infer the `Object` constructor. */\n    var objectCtorString = funcToString.call(Object);\n\n    /** Used to restore the original `_` reference in `_.noConflict`. */\n    var oldDash = root._;\n\n    /** Used to detect if a method is native. */\n    var reIsNative = RegExp('^' +\n      funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n      .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n    );\n\n    /** Built-in value references. */\n    var Buffer = moduleExports ? context.Buffer : undefined,\n        Symbol = context.Symbol,\n        Uint8Array = context.Uint8Array,\n        allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n        getPrototype = overArg(Object.getPrototypeOf, Object),\n        objectCreate = Object.create,\n        propertyIsEnumerable = objectProto.propertyIsEnumerable,\n        splice = arrayProto.splice,\n        spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined,\n        symIterator = Symbol ? Symbol.iterator : undefined,\n        symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n    var defineProperty = (function() {\n      try {\n        var func = getNative(Object, 'defineProperty');\n        func({}, '', {});\n        return func;\n      } catch (e) {}\n    }());\n\n    /** Mocked built-ins. */\n    var ctxClearTimeout = context.clearTimeout !== root.clearTimeout && context.clearTimeout,\n        ctxNow = Date && Date.now !== root.Date.now && Date.now,\n        ctxSetTimeout = context.setTimeout !== root.setTimeout && context.setTimeout;\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeCeil = Math.ceil,\n        nativeFloor = Math.floor,\n        nativeGetSymbols = Object.getOwnPropertySymbols,\n        nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n        nativeIsFinite = context.isFinite,\n        nativeJoin = arrayProto.join,\n        nativeKeys = overArg(Object.keys, Object),\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeNow = Date.now,\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random,\n        nativeReverse = arrayProto.reverse;\n\n    /* Built-in method references that are verified to be native. */\n    var DataView = getNative(context, 'DataView'),\n        Map = getNative(context, 'Map'),\n        Promise = getNative(context, 'Promise'),\n        Set = getNative(context, 'Set'),\n        WeakMap = getNative(context, 'WeakMap'),\n        nativeCreate = getNative(Object, 'create');\n\n    /** Used to store function metadata. */\n    var metaMap = WeakMap && new WeakMap;\n\n    /** Used to lookup unminified function names. */\n    var realNames = {};\n\n    /** Used to detect maps, sets, and weakmaps. */\n    var dataViewCtorString = toSource(DataView),\n        mapCtorString = toSource(Map),\n        promiseCtorString = toSource(Promise),\n        setCtorString = toSource(Set),\n        weakMapCtorString = toSource(WeakMap);\n\n    /** Used to convert symbols to primitives and strings. */\n    var symbolProto = Symbol ? Symbol.prototype : undefined,\n        symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n        symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps `value` to enable implicit method\n     * chain sequences. Methods that operate on and return arrays, collections,\n     * and functions can be chained together. Methods that retrieve a single value\n     * or may return a primitive value will automatically end the chain sequence\n     * and return the unwrapped value. Otherwise, the value must be unwrapped\n     * with `_#value`.\n     *\n     * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n     * enabled using `_.chain`.\n     *\n     * The execution of chained methods is lazy, that is, it's deferred until\n     * `_#value` is implicitly or explicitly called.\n     *\n     * Lazy evaluation allows several methods to support shortcut fusion.\n     * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n     * the creation of intermediate arrays and can greatly reduce the number of\n     * iteratee executions. Sections of a chain sequence qualify for shortcut\n     * fusion if the section is applied to an array and iteratees accept only\n     * one argument. The heuristic for whether a section qualifies for shortcut\n     * fusion is subject to change.\n     *\n     * Chaining is supported in custom builds as long as the `_#value` method is\n     * directly or indirectly included in the build.\n     *\n     * In addition to lodash methods, wrappers have `Array` and `String` methods.\n     *\n     * The wrapper `Array` methods are:\n     * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n     *\n     * The wrapper `String` methods are:\n     * `replace` and `split`\n     *\n     * The wrapper methods that support shortcut fusion are:\n     * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n     * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n     * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n     *\n     * The chainable wrapper methods are:\n     * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n     * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n     * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n     * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n     * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n     * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n     * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n     * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n     * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n     * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n     * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n     * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n     * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n     * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n     * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n     * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n     * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n     * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n     * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n     * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n     * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n     * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n     * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n     * `zipObject`, `zipObjectDeep`, and `zipWith`\n     *\n     * The wrapper methods that are **not** chainable by default are:\n     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n     * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n     * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n     * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n     * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n     * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n     * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n     * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n     * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n     * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n     * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n     * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n     * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n     * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n     * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n     * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n     * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n     * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n     * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n     * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n     * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n     * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n     * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n     * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n     * `upperFirst`, `value`, and `words`\n     *\n     * @name _\n     * @constructor\n     * @category Seq\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // Returns an unwrapped value.\n     * wrapped.reduce(_.add);\n     * // => 6\n     *\n     * // Returns a wrapped value.\n     * var squares = wrapped.map(square);\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n        if (value instanceof LodashWrapper) {\n          return value;\n        }\n        if (hasOwnProperty.call(value, '__wrapped__')) {\n          return wrapperClone(value);\n        }\n      }\n      return new LodashWrapper(value);\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} proto The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    var baseCreate = (function() {\n      function object() {}\n      return function(proto) {\n        if (!isObject(proto)) {\n          return {};\n        }\n        if (objectCreate) {\n          return objectCreate(proto);\n        }\n        object.prototype = proto;\n        var result = new object;\n        object.prototype = undefined;\n        return result;\n      };\n    }());\n\n    /**\n     * The function whose prototype chain sequence wrappers inherit from.\n     *\n     * @private\n     */\n    function baseLodash() {\n      // No operation performed.\n    }\n\n    /**\n     * The base constructor for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     * @param {boolean} [chainAll] Enable explicit method chain sequences.\n     */\n    function LodashWrapper(value, chainAll) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__chain__ = !!chainAll;\n      this.__index__ = 0;\n      this.__values__ = undefined;\n    }\n\n    /**\n     * By default, the template delimiters used by lodash are like those in\n     * embedded Ruby (ERB) as well as ES2015 template strings. Change the\n     * following template settings to use alternative delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type {Object}\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'escape': reEscape,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'evaluate': reEvaluate,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type {string}\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type {Object}\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type {Function}\n         */\n        '_': lodash\n      }\n    };\n\n    // Ensure wrappers are instances of `baseLodash`.\n    lodash.prototype = baseLodash.prototype;\n    lodash.prototype.constructor = lodash;\n\n    LodashWrapper.prototype = baseCreate(baseLodash.prototype);\n    LodashWrapper.prototype.constructor = LodashWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n     *\n     * @private\n     * @constructor\n     * @param {*} value The value to wrap.\n     */\n    function LazyWrapper(value) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__dir__ = 1;\n      this.__filtered__ = false;\n      this.__iteratees__ = [];\n      this.__takeCount__ = MAX_ARRAY_LENGTH;\n      this.__views__ = [];\n    }\n\n    /**\n     * Creates a clone of the lazy wrapper object.\n     *\n     * @private\n     * @name clone\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the cloned `LazyWrapper` object.\n     */\n    function lazyClone() {\n      var result = new LazyWrapper(this.__wrapped__);\n      result.__actions__ = copyArray(this.__actions__);\n      result.__dir__ = this.__dir__;\n      result.__filtered__ = this.__filtered__;\n      result.__iteratees__ = copyArray(this.__iteratees__);\n      result.__takeCount__ = this.__takeCount__;\n      result.__views__ = copyArray(this.__views__);\n      return result;\n    }\n\n    /**\n     * Reverses the direction of lazy iteration.\n     *\n     * @private\n     * @name reverse\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the new reversed `LazyWrapper` object.\n     */\n    function lazyReverse() {\n      if (this.__filtered__) {\n        var result = new LazyWrapper(this);\n        result.__dir__ = -1;\n        result.__filtered__ = true;\n      } else {\n        result = this.clone();\n        result.__dir__ *= -1;\n      }\n      return result;\n    }\n\n    /**\n     * Extracts the unwrapped value from its lazy wrapper.\n     *\n     * @private\n     * @name value\n     * @memberOf LazyWrapper\n     * @returns {*} Returns the unwrapped value.\n     */\n    function lazyValue() {\n      var array = this.__wrapped__.value(),\n          dir = this.__dir__,\n          isArr = isArray(array),\n          isRight = dir < 0,\n          arrLength = isArr ? array.length : 0,\n          view = getView(0, arrLength, this.__views__),\n          start = view.start,\n          end = view.end,\n          length = end - start,\n          index = isRight ? end : (start - 1),\n          iteratees = this.__iteratees__,\n          iterLength = iteratees.length,\n          resIndex = 0,\n          takeCount = nativeMin(length, this.__takeCount__);\n\n      if (!isArr || (!isRight && arrLength == length && takeCount == length)) {\n        return baseWrapperValue(array, this.__actions__);\n      }\n      var result = [];\n\n      outer:\n      while (length-- && resIndex < takeCount) {\n        index += dir;\n\n        var iterIndex = -1,\n            value = array[index];\n\n        while (++iterIndex < iterLength) {\n          var data = iteratees[iterIndex],\n              iteratee = data.iteratee,\n              type = data.type,\n              computed = iteratee(value);\n\n          if (type == LAZY_MAP_FLAG) {\n            value = computed;\n          } else if (!computed) {\n            if (type == LAZY_FILTER_FLAG) {\n              continue outer;\n            } else {\n              break outer;\n            }\n          }\n        }\n        result[resIndex++] = value;\n      }\n      return result;\n    }\n\n    // Ensure `LazyWrapper` is an instance of `baseLodash`.\n    LazyWrapper.prototype = baseCreate(baseLodash.prototype);\n    LazyWrapper.prototype.constructor = LazyWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a hash object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Hash(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the hash.\n     *\n     * @private\n     * @name clear\n     * @memberOf Hash\n     */\n    function hashClear() {\n      this.__data__ = nativeCreate ? nativeCreate(null) : {};\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the hash.\n     *\n     * @private\n     * @name delete\n     * @memberOf Hash\n     * @param {Object} hash The hash to modify.\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function hashDelete(key) {\n      var result = this.has(key) && delete this.__data__[key];\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the hash value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Hash\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function hashGet(key) {\n      var data = this.__data__;\n      if (nativeCreate) {\n        var result = data[key];\n        return result === HASH_UNDEFINED ? undefined : result;\n      }\n      return hasOwnProperty.call(data, key) ? data[key] : undefined;\n    }\n\n    /**\n     * Checks if a hash value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Hash\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function hashHas(key) {\n      var data = this.__data__;\n      return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n    }\n\n    /**\n     * Sets the hash `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Hash\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the hash instance.\n     */\n    function hashSet(key, value) {\n      var data = this.__data__;\n      this.size += this.has(key) ? 0 : 1;\n      data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n      return this;\n    }\n\n    // Add methods to `Hash`.\n    Hash.prototype.clear = hashClear;\n    Hash.prototype['delete'] = hashDelete;\n    Hash.prototype.get = hashGet;\n    Hash.prototype.has = hashHas;\n    Hash.prototype.set = hashSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an list cache object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function ListCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the list cache.\n     *\n     * @private\n     * @name clear\n     * @memberOf ListCache\n     */\n    function listCacheClear() {\n      this.__data__ = [];\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the list cache.\n     *\n     * @private\n     * @name delete\n     * @memberOf ListCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function listCacheDelete(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        return false;\n      }\n      var lastIndex = data.length - 1;\n      if (index == lastIndex) {\n        data.pop();\n      } else {\n        splice.call(data, index, 1);\n      }\n      --this.size;\n      return true;\n    }\n\n    /**\n     * Gets the list cache value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf ListCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function listCacheGet(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      return index < 0 ? undefined : data[index][1];\n    }\n\n    /**\n     * Checks if a list cache value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf ListCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function listCacheHas(key) {\n      return assocIndexOf(this.__data__, key) > -1;\n    }\n\n    /**\n     * Sets the list cache `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf ListCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the list cache instance.\n     */\n    function listCacheSet(key, value) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        ++this.size;\n        data.push([key, value]);\n      } else {\n        data[index][1] = value;\n      }\n      return this;\n    }\n\n    // Add methods to `ListCache`.\n    ListCache.prototype.clear = listCacheClear;\n    ListCache.prototype['delete'] = listCacheDelete;\n    ListCache.prototype.get = listCacheGet;\n    ListCache.prototype.has = listCacheHas;\n    ListCache.prototype.set = listCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a map cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function MapCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the map.\n     *\n     * @private\n     * @name clear\n     * @memberOf MapCache\n     */\n    function mapCacheClear() {\n      this.size = 0;\n      this.__data__ = {\n        'hash': new Hash,\n        'map': new (Map || ListCache),\n        'string': new Hash\n      };\n    }\n\n    /**\n     * Removes `key` and its value from the map.\n     *\n     * @private\n     * @name delete\n     * @memberOf MapCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function mapCacheDelete(key) {\n      var result = getMapData(this, key)['delete'](key);\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the map value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf MapCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function mapCacheGet(key) {\n      return getMapData(this, key).get(key);\n    }\n\n    /**\n     * Checks if a map value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf MapCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function mapCacheHas(key) {\n      return getMapData(this, key).has(key);\n    }\n\n    /**\n     * Sets the map `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf MapCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the map cache instance.\n     */\n    function mapCacheSet(key, value) {\n      var data = getMapData(this, key),\n          size = data.size;\n\n      data.set(key, value);\n      this.size += data.size == size ? 0 : 1;\n      return this;\n    }\n\n    // Add methods to `MapCache`.\n    MapCache.prototype.clear = mapCacheClear;\n    MapCache.prototype['delete'] = mapCacheDelete;\n    MapCache.prototype.get = mapCacheGet;\n    MapCache.prototype.has = mapCacheHas;\n    MapCache.prototype.set = mapCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     *\n     * Creates an array cache object to store unique values.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [values] The values to cache.\n     */\n    function SetCache(values) {\n      var index = -1,\n          length = values == null ? 0 : values.length;\n\n      this.__data__ = new MapCache;\n      while (++index < length) {\n        this.add(values[index]);\n      }\n    }\n\n    /**\n     * Adds `value` to the array cache.\n     *\n     * @private\n     * @name add\n     * @memberOf SetCache\n     * @alias push\n     * @param {*} value The value to cache.\n     * @returns {Object} Returns the cache instance.\n     */\n    function setCacheAdd(value) {\n      this.__data__.set(value, HASH_UNDEFINED);\n      return this;\n    }\n\n    /**\n     * Checks if `value` is in the array cache.\n     *\n     * @private\n     * @name has\n     * @memberOf SetCache\n     * @param {*} value The value to search for.\n     * @returns {number} Returns `true` if `value` is found, else `false`.\n     */\n    function setCacheHas(value) {\n      return this.__data__.has(value);\n    }\n\n    // Add methods to `SetCache`.\n    SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n    SetCache.prototype.has = setCacheHas;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a stack cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Stack(entries) {\n      var data = this.__data__ = new ListCache(entries);\n      this.size = data.size;\n    }\n\n    /**\n     * Removes all key-value entries from the stack.\n     *\n     * @private\n     * @name clear\n     * @memberOf Stack\n     */\n    function stackClear() {\n      this.__data__ = new ListCache;\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the stack.\n     *\n     * @private\n     * @name delete\n     * @memberOf Stack\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function stackDelete(key) {\n      var data = this.__data__,\n          result = data['delete'](key);\n\n      this.size = data.size;\n      return result;\n    }\n\n    /**\n     * Gets the stack value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Stack\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function stackGet(key) {\n      return this.__data__.get(key);\n    }\n\n    /**\n     * Checks if a stack value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Stack\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function stackHas(key) {\n      return this.__data__.has(key);\n    }\n\n    /**\n     * Sets the stack `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Stack\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the stack cache instance.\n     */\n    function stackSet(key, value) {\n      var data = this.__data__;\n      if (data instanceof ListCache) {\n        var pairs = data.__data__;\n        if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n          pairs.push([key, value]);\n          this.size = ++data.size;\n          return this;\n        }\n        data = this.__data__ = new MapCache(pairs);\n      }\n      data.set(key, value);\n      this.size = data.size;\n      return this;\n    }\n\n    // Add methods to `Stack`.\n    Stack.prototype.clear = stackClear;\n    Stack.prototype['delete'] = stackDelete;\n    Stack.prototype.get = stackGet;\n    Stack.prototype.has = stackHas;\n    Stack.prototype.set = stackSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of the enumerable property names of the array-like `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @param {boolean} inherited Specify returning inherited property names.\n     * @returns {Array} Returns the array of property names.\n     */\n    function arrayLikeKeys(value, inherited) {\n      var isArr = isArray(value),\n          isArg = !isArr && isArguments(value),\n          isBuff = !isArr && !isArg && isBuffer(value),\n          isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n          skipIndexes = isArr || isArg || isBuff || isType,\n          result = skipIndexes ? baseTimes(value.length, String) : [],\n          length = result.length;\n\n      for (var key in value) {\n        if ((inherited || hasOwnProperty.call(value, key)) &&\n            !(skipIndexes && (\n               // Safari 9 has enumerable `arguments.length` in strict mode.\n               key == 'length' ||\n               // Node.js 0.10 has enumerable non-index properties on buffers.\n               (isBuff && (key == 'offset' || key == 'parent')) ||\n               // PhantomJS 2 has enumerable non-index properties on typed arrays.\n               (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n               // Skip index properties.\n               isIndex(key, length)\n            ))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.sample` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @returns {*} Returns the random element.\n     */\n    function arraySample(array) {\n      var length = array.length;\n      return length ? array[baseRandom(0, length - 1)] : undefined;\n    }\n\n    /**\n     * A specialized version of `_.sampleSize` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function arraySampleSize(array, n) {\n      return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * A specialized version of `_.shuffle` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function arrayShuffle(array) {\n      return shuffleSelf(copyArray(array));\n    }\n\n    /**\n     * This function is like `assignValue` except that it doesn't assign\n     * `undefined` values.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignMergeValue(object, key, value) {\n      if ((value !== undefined && !eq(object[key], value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Assigns `value` to `key` of `object` if the existing value is not equivalent\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignValue(object, key, value) {\n      var objValue = object[key];\n      if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Gets the index at which the `key` is found in `array` of key-value pairs.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {*} key The key to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     */\n    function assocIndexOf(array, key) {\n      var length = array.length;\n      while (length--) {\n        if (eq(array[length][0], key)) {\n          return length;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Aggregates elements of `collection` on `accumulator` with keys transformed\n     * by `iteratee` and values set by `setter`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform keys.\n     * @param {Object} accumulator The initial aggregated object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseAggregator(collection, setter, iteratee, accumulator) {\n      baseEach(collection, function(value, key, collection) {\n        setter(accumulator, value, iteratee(value), collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.assign` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssign(object, source) {\n      return object && copyObject(source, keys(source), object);\n    }\n\n    /**\n     * The base implementation of `_.assignIn` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssignIn(object, source) {\n      return object && copyObject(source, keysIn(source), object);\n    }\n\n    /**\n     * The base implementation of `assignValue` and `assignMergeValue` without\n     * value checks.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function baseAssignValue(object, key, value) {\n      if (key == '__proto__' && defineProperty) {\n        defineProperty(object, key, {\n          'configurable': true,\n          'enumerable': true,\n          'value': value,\n          'writable': true\n        });\n      } else {\n        object[key] = value;\n      }\n    }\n\n    /**\n     * The base implementation of `_.at` without support for individual paths.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Array} Returns the picked elements.\n     */\n    function baseAt(object, paths) {\n      var index = -1,\n          length = paths.length,\n          result = Array(length),\n          skip = object == null;\n\n      while (++index < length) {\n        result[index] = skip ? undefined : get(object, paths[index]);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.clamp` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     */\n    function baseClamp(number, lower, upper) {\n      if (number === number) {\n        if (upper !== undefined) {\n          number = number <= upper ? number : upper;\n        }\n        if (lower !== undefined) {\n          number = number >= lower ? number : lower;\n        }\n      }\n      return number;\n    }\n\n    /**\n     * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n     * traversed objects.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Deep clone\n     *  2 - Flatten inherited properties\n     *  4 - Clone symbols\n     * @param {Function} [customizer] The function to customize cloning.\n     * @param {string} [key] The key of `value`.\n     * @param {Object} [object] The parent object of `value`.\n     * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, bitmask, customizer, key, object, stack) {\n      var result,\n          isDeep = bitmask & CLONE_DEEP_FLAG,\n          isFlat = bitmask & CLONE_FLAT_FLAG,\n          isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n      if (customizer) {\n        result = object ? customizer(value, key, object, stack) : customizer(value);\n      }\n      if (result !== undefined) {\n        return result;\n      }\n      if (!isObject(value)) {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isArr) {\n        result = initCloneArray(value);\n        if (!isDeep) {\n          return copyArray(value, result);\n        }\n      } else {\n        var tag = getTag(value),\n            isFunc = tag == funcTag || tag == genTag;\n\n        if (isBuffer(value)) {\n          return cloneBuffer(value, isDeep);\n        }\n        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n          result = (isFlat || isFunc) ? {} : initCloneObject(value);\n          if (!isDeep) {\n            return isFlat\n              ? copySymbolsIn(value, baseAssignIn(result, value))\n              : copySymbols(value, baseAssign(result, value));\n          }\n        } else {\n          if (!cloneableTags[tag]) {\n            return object ? value : {};\n          }\n          result = initCloneByTag(value, tag, isDeep);\n        }\n      }\n      // Check for circular references and return its corresponding clone.\n      stack || (stack = new Stack);\n      var stacked = stack.get(value);\n      if (stacked) {\n        return stacked;\n      }\n      stack.set(value, result);\n\n      if (isSet(value)) {\n        value.forEach(function(subValue) {\n          result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n        });\n      } else if (isMap(value)) {\n        value.forEach(function(subValue, key) {\n          result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n        });\n      }\n\n      var keysFunc = isFull\n        ? (isFlat ? getAllKeysIn : getAllKeys)\n        : (isFlat ? keysIn : keys);\n\n      var props = isArr ? undefined : keysFunc(value);\n      arrayEach(props || value, function(subValue, key) {\n        if (props) {\n          key = subValue;\n          subValue = value[key];\n        }\n        // Recursively populate clone (susceptible to call stack limits).\n        assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.conforms` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseConforms(source) {\n      var props = keys(source);\n      return function(object) {\n        return baseConformsTo(object, source, props);\n      };\n    }\n\n    /**\n     * The base implementation of `_.conformsTo` which accepts `props` to check.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     */\n    function baseConformsTo(object, source, props) {\n      var length = props.length;\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (length--) {\n        var key = props[length],\n            predicate = source[key],\n            value = object[key];\n\n        if ((value === undefined && !(key in object)) || !predicate(value)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.delay` and `_.defer` which accepts `args`\n     * to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {Array} args The arguments to provide to `func`.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    function baseDelay(func, wait, args) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * The base implementation of methods like `_.difference` without support\n     * for excluding multiple arrays or iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Array} values The values to exclude.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     */\n    function baseDifference(array, values, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          isCommon = true,\n          length = array.length,\n          result = [],\n          valuesLength = values.length;\n\n      if (!length) {\n        return result;\n      }\n      if (iteratee) {\n        values = arrayMap(values, baseUnary(iteratee));\n      }\n      if (comparator) {\n        includes = arrayIncludesWith;\n        isCommon = false;\n      }\n      else if (values.length >= LARGE_ARRAY_SIZE) {\n        includes = cacheHas;\n        isCommon = false;\n        values = new SetCache(values);\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee == null ? value : iteratee(value);\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var valuesIndex = valuesLength;\n          while (valuesIndex--) {\n            if (values[valuesIndex] === computed) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n        else if (!includes(values, computed, comparator)) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.forEach` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEach = createBaseEach(baseForOwn);\n\n    /**\n     * The base implementation of `_.forEachRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEachRight = createBaseEach(baseForOwnRight, true);\n\n    /**\n     * The base implementation of `_.every` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`\n     */\n    function baseEvery(collection, predicate) {\n      var result = true;\n      baseEach(collection, function(value, index, collection) {\n        result = !!predicate(value, index, collection);\n        return result;\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of methods like `_.max` and `_.min` which accepts a\n     * `comparator` to determine the extremum value.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The iteratee invoked per iteration.\n     * @param {Function} comparator The comparator used to compare values.\n     * @returns {*} Returns the extremum value.\n     */\n    function baseExtremum(array, iteratee, comparator) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        var value = array[index],\n            current = iteratee(value);\n\n        if (current != null && (computed === undefined\n              ? (current === current && !isSymbol(current))\n              : comparator(current, computed)\n            )) {\n          var computed = current,\n              result = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.fill` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     */\n    function baseFill(array, value, start, end) {\n      var length = array.length;\n\n      start = toInteger(start);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : toInteger(end);\n      if (end < 0) {\n        end += length;\n      }\n      end = start > end ? 0 : toLength(end);\n      while (start < end) {\n        array[start++] = value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.filter` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function baseFilter(collection, predicate) {\n      var result = [];\n      baseEach(collection, function(value, index, collection) {\n        if (predicate(value, index, collection)) {\n          result.push(value);\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` with support for restricting flattening.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {number} depth The maximum recursion depth.\n     * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n     * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n     * @param {Array} [result=[]] The initial result value.\n     * @returns {Array} Returns the new flattened array.\n     */\n    function baseFlatten(array, depth, predicate, isStrict, result) {\n      var index = -1,\n          length = array.length;\n\n      predicate || (predicate = isFlattenable);\n      result || (result = []);\n\n      while (++index < length) {\n        var value = array[index];\n        if (depth > 0 && predicate(value)) {\n          if (depth > 1) {\n            // Recursively flatten arrays (susceptible to call stack limits).\n            baseFlatten(value, depth - 1, predicate, isStrict, result);\n          } else {\n            arrayPush(result, value);\n          }\n        } else if (!isStrict) {\n          result[result.length] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `baseForOwn` which iterates over `object`\n     * properties returned by `keysFunc` and invokes `iteratee` for each property.\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseFor = createBaseFor();\n\n    /**\n     * This function is like `baseFor` except that it iterates over properties\n     * in the opposite order.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseForRight = createBaseFor(true);\n\n    /**\n     * The base implementation of `_.forOwn` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwn(object, iteratee) {\n      return object && baseFor(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.forOwnRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwnRight(object, iteratee) {\n      return object && baseForRight(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.functions` which creates an array of\n     * `object` function property names filtered from `props`.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} props The property names to filter.\n     * @returns {Array} Returns the function names.\n     */\n    function baseFunctions(object, props) {\n      return arrayFilter(props, function(key) {\n        return isFunction(object[key]);\n      });\n    }\n\n    /**\n     * The base implementation of `_.get` without support for default values.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseGet(object, path) {\n      path = castPath(path, object);\n\n      var index = 0,\n          length = path.length;\n\n      while (object != null && index < length) {\n        object = object[toKey(path[index++])];\n      }\n      return (index && index == length) ? object : undefined;\n    }\n\n    /**\n     * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n     * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @param {Function} symbolsFunc The function to get the symbols of `object`.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function baseGetAllKeys(object, keysFunc, symbolsFunc) {\n      var result = keysFunc(object);\n      return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n    }\n\n    /**\n     * The base implementation of `getTag` without fallbacks for buggy environments.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    function baseGetTag(value) {\n      if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n      }\n      return (symToStringTag && symToStringTag in Object(value))\n        ? getRawTag(value)\n        : objectToString(value);\n    }\n\n    /**\n     * The base implementation of `_.gt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     */\n    function baseGt(value, other) {\n      return value > other;\n    }\n\n    /**\n     * The base implementation of `_.has` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHas(object, key) {\n      return object != null && hasOwnProperty.call(object, key);\n    }\n\n    /**\n     * The base implementation of `_.hasIn` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHasIn(object, key) {\n      return object != null && key in Object(object);\n    }\n\n    /**\n     * The base implementation of `_.inRange` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to check.\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     */\n    function baseInRange(number, start, end) {\n      return number >= nativeMin(start, end) && number < nativeMax(start, end);\n    }\n\n    /**\n     * The base implementation of methods like `_.intersection`, without support\n     * for iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of shared values.\n     */\n    function baseIntersection(arrays, iteratee, comparator) {\n      var includes = comparator ? arrayIncludesWith : arrayIncludes,\n          length = arrays[0].length,\n          othLength = arrays.length,\n          othIndex = othLength,\n          caches = Array(othLength),\n          maxLength = Infinity,\n          result = [];\n\n      while (othIndex--) {\n        var array = arrays[othIndex];\n        if (othIndex && iteratee) {\n          array = arrayMap(array, baseUnary(iteratee));\n        }\n        maxLength = nativeMin(array.length, maxLength);\n        caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n          ? new SetCache(othIndex && array)\n          : undefined;\n      }\n      array = arrays[0];\n\n      var index = -1,\n          seen = caches[0];\n\n      outer:\n      while (++index < length && result.length < maxLength) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (!(seen\n              ? cacheHas(seen, computed)\n              : includes(result, computed, comparator)\n            )) {\n          othIndex = othLength;\n          while (--othIndex) {\n            var cache = caches[othIndex];\n            if (!(cache\n                  ? cacheHas(cache, computed)\n                  : includes(arrays[othIndex], computed, comparator))\n                ) {\n              continue outer;\n            }\n          }\n          if (seen) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.invert` and `_.invertBy` which inverts\n     * `object` with values transformed by `iteratee` and set by `setter`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform values.\n     * @param {Object} accumulator The initial inverted object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseInverter(object, setter, iteratee, accumulator) {\n      baseForOwn(object, function(value, key, object) {\n        setter(accumulator, iteratee(value), key, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.invoke` without support for individual\n     * method arguments.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {Array} args The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     */\n    function baseInvoke(object, path, args) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      var func = object == null ? object : object[toKey(last(path))];\n      return func == null ? undefined : apply(func, object, args);\n    }\n\n    /**\n     * The base implementation of `_.isArguments`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     */\n    function baseIsArguments(value) {\n      return isObjectLike(value) && baseGetTag(value) == argsTag;\n    }\n\n    /**\n     * The base implementation of `_.isArrayBuffer` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     */\n    function baseIsArrayBuffer(value) {\n      return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;\n    }\n\n    /**\n     * The base implementation of `_.isDate` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     */\n    function baseIsDate(value) {\n      return isObjectLike(value) && baseGetTag(value) == dateTag;\n    }\n\n    /**\n     * The base implementation of `_.isEqual` which supports partial comparisons\n     * and tracks traversed objects.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Unordered comparison\n     *  2 - Partial comparison\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(value, other, bitmask, customizer, stack) {\n      if (value === other) {\n        return true;\n      }\n      if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n        return value !== value && other !== other;\n      }\n      return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n    }\n\n    /**\n     * A specialized version of `baseIsEqual` for arrays and objects which performs\n     * deep comparisons and tracks traversed objects enabling objects with circular\n     * references to be compared.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n      var objIsArr = isArray(object),\n          othIsArr = isArray(other),\n          objTag = objIsArr ? arrayTag : getTag(object),\n          othTag = othIsArr ? arrayTag : getTag(other);\n\n      objTag = objTag == argsTag ? objectTag : objTag;\n      othTag = othTag == argsTag ? objectTag : othTag;\n\n      var objIsObj = objTag == objectTag,\n          othIsObj = othTag == objectTag,\n          isSameTag = objTag == othTag;\n\n      if (isSameTag && isBuffer(object)) {\n        if (!isBuffer(other)) {\n          return false;\n        }\n        objIsArr = true;\n        objIsObj = false;\n      }\n      if (isSameTag && !objIsObj) {\n        stack || (stack = new Stack);\n        return (objIsArr || isTypedArray(object))\n          ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n          : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n      }\n      if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n        if (objIsWrapped || othIsWrapped) {\n          var objUnwrapped = objIsWrapped ? object.value() : object,\n              othUnwrapped = othIsWrapped ? other.value() : other;\n\n          stack || (stack = new Stack);\n          return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n        }\n      }\n      if (!isSameTag) {\n        return false;\n      }\n      stack || (stack = new Stack);\n      return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n    }\n\n    /**\n     * The base implementation of `_.isMap` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     */\n    function baseIsMap(value) {\n      return isObjectLike(value) && getTag(value) == mapTag;\n    }\n\n    /**\n     * The base implementation of `_.isMatch` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Array} matchData The property names, values, and compare flags to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     */\n    function baseIsMatch(object, source, matchData, customizer) {\n      var index = matchData.length,\n          length = index,\n          noCustomizer = !customizer;\n\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (index--) {\n        var data = matchData[index];\n        if ((noCustomizer && data[2])\n              ? data[1] !== object[data[0]]\n              : !(data[0] in object)\n            ) {\n          return false;\n        }\n      }\n      while (++index < length) {\n        data = matchData[index];\n        var key = data[0],\n            objValue = object[key],\n            srcValue = data[1];\n\n        if (noCustomizer && data[2]) {\n          if (objValue === undefined && !(key in object)) {\n            return false;\n          }\n        } else {\n          var stack = new Stack;\n          if (customizer) {\n            var result = customizer(objValue, srcValue, key, object, source, stack);\n          }\n          if (!(result === undefined\n                ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n                : result\n              )) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.isNative` without bad shim checks.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     */\n    function baseIsNative(value) {\n      if (!isObject(value) || isMasked(value)) {\n        return false;\n      }\n      var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n      return pattern.test(toSource(value));\n    }\n\n    /**\n     * The base implementation of `_.isRegExp` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     */\n    function baseIsRegExp(value) {\n      return isObjectLike(value) && baseGetTag(value) == regexpTag;\n    }\n\n    /**\n     * The base implementation of `_.isSet` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     */\n    function baseIsSet(value) {\n      return isObjectLike(value) && getTag(value) == setTag;\n    }\n\n    /**\n     * The base implementation of `_.isTypedArray` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     */\n    function baseIsTypedArray(value) {\n      return isObjectLike(value) &&\n        isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n    }\n\n    /**\n     * The base implementation of `_.iteratee`.\n     *\n     * @private\n     * @param {*} [value=_.identity] The value to convert to an iteratee.\n     * @returns {Function} Returns the iteratee.\n     */\n    function baseIteratee(value) {\n      // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n      // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n      if (typeof value == 'function') {\n        return value;\n      }\n      if (value == null) {\n        return identity;\n      }\n      if (typeof value == 'object') {\n        return isArray(value)\n          ? baseMatchesProperty(value[0], value[1])\n          : baseMatches(value);\n      }\n      return property(value);\n    }\n\n    /**\n     * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeys(object) {\n      if (!isPrototype(object)) {\n        return nativeKeys(object);\n      }\n      var result = [];\n      for (var key in Object(object)) {\n        if (hasOwnProperty.call(object, key) && key != 'constructor') {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeysIn(object) {\n      if (!isObject(object)) {\n        return nativeKeysIn(object);\n      }\n      var isProto = isPrototype(object),\n          result = [];\n\n      for (var key in object) {\n        if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.lt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     */\n    function baseLt(value, other) {\n      return value < other;\n    }\n\n    /**\n     * The base implementation of `_.map` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function baseMap(collection, iteratee) {\n      var index = -1,\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value, key, collection) {\n        result[++index] = iteratee(value, key, collection);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.matches` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatches(source) {\n      var matchData = getMatchData(source);\n      if (matchData.length == 1 && matchData[0][2]) {\n        return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n      }\n      return function(object) {\n        return object === source || baseIsMatch(object, source, matchData);\n      };\n    }\n\n    /**\n     * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n     *\n     * @private\n     * @param {string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatchesProperty(path, srcValue) {\n      if (isKey(path) && isStrictComparable(srcValue)) {\n        return matchesStrictComparable(toKey(path), srcValue);\n      }\n      return function(object) {\n        var objValue = get(object, path);\n        return (objValue === undefined && objValue === srcValue)\n          ? hasIn(object, path)\n          : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n      };\n    }\n\n    /**\n     * The base implementation of `_.merge` without support for multiple sources.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMerge(object, source, srcIndex, customizer, stack) {\n      if (object === source) {\n        return;\n      }\n      baseFor(source, function(srcValue, key) {\n        stack || (stack = new Stack);\n        if (isObject(srcValue)) {\n          baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n        }\n        else {\n          var newValue = customizer\n            ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n            : undefined;\n\n          if (newValue === undefined) {\n            newValue = srcValue;\n          }\n          assignMergeValue(object, key, newValue);\n        }\n      }, keysIn);\n    }\n\n    /**\n     * A specialized version of `baseMerge` for arrays and objects which performs\n     * deep merges and tracks traversed objects enabling objects with circular\n     * references to be merged.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {string} key The key of the value to merge.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} mergeFunc The function to merge values.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n      var objValue = safeGet(object, key),\n          srcValue = safeGet(source, key),\n          stacked = stack.get(srcValue);\n\n      if (stacked) {\n        assignMergeValue(object, key, stacked);\n        return;\n      }\n      var newValue = customizer\n        ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      var isCommon = newValue === undefined;\n\n      if (isCommon) {\n        var isArr = isArray(srcValue),\n            isBuff = !isArr && isBuffer(srcValue),\n            isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n        newValue = srcValue;\n        if (isArr || isBuff || isTyped) {\n          if (isArray(objValue)) {\n            newValue = objValue;\n          }\n          else if (isArrayLikeObject(objValue)) {\n            newValue = copyArray(objValue);\n          }\n          else if (isBuff) {\n            isCommon = false;\n            newValue = cloneBuffer(srcValue, true);\n          }\n          else if (isTyped) {\n            isCommon = false;\n            newValue = cloneTypedArray(srcValue, true);\n          }\n          else {\n            newValue = [];\n          }\n        }\n        else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n          newValue = objValue;\n          if (isArguments(objValue)) {\n            newValue = toPlainObject(objValue);\n          }\n          else if (!isObject(objValue) || isFunction(objValue)) {\n            newValue = initCloneObject(srcValue);\n          }\n        }\n        else {\n          isCommon = false;\n        }\n      }\n      if (isCommon) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, newValue);\n        mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n        stack['delete'](srcValue);\n      }\n      assignMergeValue(object, key, newValue);\n    }\n\n    /**\n     * The base implementation of `_.nth` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {number} n The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     */\n    function baseNth(array, n) {\n      var length = array.length;\n      if (!length) {\n        return;\n      }\n      n += n < 0 ? length : 0;\n      return isIndex(n, length) ? array[n] : undefined;\n    }\n\n    /**\n     * The base implementation of `_.orderBy` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {string[]} orders The sort orders of `iteratees`.\n     * @returns {Array} Returns the new sorted array.\n     */\n    function baseOrderBy(collection, iteratees, orders) {\n      if (iteratees.length) {\n        iteratees = arrayMap(iteratees, function(iteratee) {\n          if (isArray(iteratee)) {\n            return function(value) {\n              return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n            }\n          }\n          return iteratee;\n        });\n      } else {\n        iteratees = [identity];\n      }\n\n      var index = -1;\n      iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n\n      var result = baseMap(collection, function(value, key, collection) {\n        var criteria = arrayMap(iteratees, function(iteratee) {\n          return iteratee(value);\n        });\n        return { 'criteria': criteria, 'index': ++index, 'value': value };\n      });\n\n      return baseSortBy(result, function(object, other) {\n        return compareMultiple(object, other, orders);\n      });\n    }\n\n    /**\n     * The base implementation of `_.pick` without support for individual\n     * property identifiers.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Object} Returns the new object.\n     */\n    function basePick(object, paths) {\n      return basePickBy(object, paths, function(value, path) {\n        return hasIn(object, path);\n      });\n    }\n\n    /**\n     * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @param {Function} predicate The function invoked per property.\n     * @returns {Object} Returns the new object.\n     */\n    function basePickBy(object, paths, predicate) {\n      var index = -1,\n          length = paths.length,\n          result = {};\n\n      while (++index < length) {\n        var path = paths[index],\n            value = baseGet(object, path);\n\n        if (predicate(value, path)) {\n          baseSet(result, castPath(path, object), value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseProperty` which supports deep paths.\n     *\n     * @private\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     */\n    function basePropertyDeep(path) {\n      return function(object) {\n        return baseGet(object, path);\n      };\n    }\n\n    /**\n     * The base implementation of `_.pullAllBy` without support for iteratee\n     * shorthands.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAll(array, values, iteratee, comparator) {\n      var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n          index = -1,\n          length = values.length,\n          seen = array;\n\n      if (array === values) {\n        values = copyArray(values);\n      }\n      if (iteratee) {\n        seen = arrayMap(array, baseUnary(iteratee));\n      }\n      while (++index < length) {\n        var fromIndex = 0,\n            value = values[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n          if (seen !== array) {\n            splice.call(seen, fromIndex, 1);\n          }\n          splice.call(array, fromIndex, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.pullAt` without support for individual\n     * indexes or capturing the removed elements.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {number[]} indexes The indexes of elements to remove.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAt(array, indexes) {\n      var length = array ? indexes.length : 0,\n          lastIndex = length - 1;\n\n      while (length--) {\n        var index = indexes[length];\n        if (length == lastIndex || index !== previous) {\n          var previous = index;\n          if (isIndex(index)) {\n            splice.call(array, index, 1);\n          } else {\n            baseUnset(array, index);\n          }\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.random` without support for returning\n     * floating-point numbers.\n     *\n     * @private\n     * @param {number} lower The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the random number.\n     */\n    function baseRandom(lower, upper) {\n      return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n    }\n\n    /**\n     * The base implementation of `_.range` and `_.rangeRight` which doesn't\n     * coerce arguments.\n     *\n     * @private\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} step The value to increment or decrement by.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the range of numbers.\n     */\n    function baseRange(start, end, step, fromRight) {\n      var index = -1,\n          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n          result = Array(length);\n\n      while (length--) {\n        result[fromRight ? length : ++index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.repeat` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {string} string The string to repeat.\n     * @param {number} n The number of times to repeat the string.\n     * @returns {string} Returns the repeated string.\n     */\n    function baseRepeat(string, n) {\n      var result = '';\n      if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n        return result;\n      }\n      // Leverage the exponentiation by squaring algorithm for a faster repeat.\n      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n      do {\n        if (n % 2) {\n          result += string;\n        }\n        n = nativeFloor(n / 2);\n        if (n) {\n          string += string;\n        }\n      } while (n);\n\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     */\n    function baseRest(func, start) {\n      return setToString(overRest(func, start, identity), func + '');\n    }\n\n    /**\n     * The base implementation of `_.sample`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     */\n    function baseSample(collection) {\n      return arraySample(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.sampleSize` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function baseSampleSize(collection, n) {\n      var array = values(collection);\n      return shuffleSelf(array, baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * The base implementation of `_.set`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseSet(object, path, value, customizer) {\n      if (!isObject(object)) {\n        return object;\n      }\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          lastIndex = length - 1,\n          nested = object;\n\n      while (nested != null && ++index < length) {\n        var key = toKey(path[index]),\n            newValue = value;\n\n        if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n          return object;\n        }\n\n        if (index != lastIndex) {\n          var objValue = nested[key];\n          newValue = customizer ? customizer(objValue, key, nested) : undefined;\n          if (newValue === undefined) {\n            newValue = isObject(objValue)\n              ? objValue\n              : (isIndex(path[index + 1]) ? [] : {});\n          }\n        }\n        assignValue(nested, key, newValue);\n        nested = nested[key];\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `setData` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetData = !metaMap ? identity : function(func, data) {\n      metaMap.set(func, data);\n      return func;\n    };\n\n    /**\n     * The base implementation of `setToString` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetToString = !defineProperty ? identity : function(func, string) {\n      return defineProperty(func, 'toString', {\n        'configurable': true,\n        'enumerable': false,\n        'value': constant(string),\n        'writable': true\n      });\n    };\n\n    /**\n     * The base implementation of `_.shuffle`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function baseShuffle(collection) {\n      return shuffleSelf(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.slice` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseSlice(array, start, end) {\n      var index = -1,\n          length = array.length;\n\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = end > length ? length : end;\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : ((end - start) >>> 0);\n      start >>>= 0;\n\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = array[index + start];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.some` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function baseSome(collection, predicate) {\n      var result;\n\n      baseEach(collection, function(value, index, collection) {\n        result = predicate(value, index, collection);\n        return !result;\n      });\n      return !!result;\n    }\n\n    /**\n     * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n     * performs a binary search of `array` to determine the index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndex(array, value, retHighest) {\n      var low = 0,\n          high = array == null ? low : array.length;\n\n      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n        while (low < high) {\n          var mid = (low + high) >>> 1,\n              computed = array[mid];\n\n          if (computed !== null && !isSymbol(computed) &&\n              (retHighest ? (computed <= value) : (computed < value))) {\n            low = mid + 1;\n          } else {\n            high = mid;\n          }\n        }\n        return high;\n      }\n      return baseSortedIndexBy(array, value, identity, retHighest);\n    }\n\n    /**\n     * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n     * which invokes `iteratee` for `value` and each element of `array` to compute\n     * their sort ranking. The iteratee is invoked with one argument; (value).\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} iteratee The iteratee invoked per element.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndexBy(array, value, iteratee, retHighest) {\n      var low = 0,\n          high = array == null ? 0 : array.length;\n      if (high === 0) {\n        return 0;\n      }\n\n      value = iteratee(value);\n      var valIsNaN = value !== value,\n          valIsNull = value === null,\n          valIsSymbol = isSymbol(value),\n          valIsUndefined = value === undefined;\n\n      while (low < high) {\n        var mid = nativeFloor((low + high) / 2),\n            computed = iteratee(array[mid]),\n            othIsDefined = computed !== undefined,\n            othIsNull = computed === null,\n            othIsReflexive = computed === computed,\n            othIsSymbol = isSymbol(computed);\n\n        if (valIsNaN) {\n          var setLow = retHighest || othIsReflexive;\n        } else if (valIsUndefined) {\n          setLow = othIsReflexive && (retHighest || othIsDefined);\n        } else if (valIsNull) {\n          setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n        } else if (valIsSymbol) {\n          setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n        } else if (othIsNull || othIsSymbol) {\n          setLow = false;\n        } else {\n          setLow = retHighest ? (computed <= value) : (computed < value);\n        }\n        if (setLow) {\n          low = mid + 1;\n        } else {\n          high = mid;\n        }\n      }\n      return nativeMin(high, MAX_ARRAY_INDEX);\n    }\n\n    /**\n     * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without\n     * support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseSortedUniq(array, iteratee) {\n      var index = -1,\n          length = array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        if (!index || !eq(computed, seen)) {\n          var seen = computed;\n          result[resIndex++] = value === 0 ? 0 : value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.toNumber` which doesn't ensure correct\n     * conversions of binary, hexadecimal, or octal string values.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     */\n    function baseToNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      return +value;\n    }\n\n    /**\n     * The base implementation of `_.toString` which doesn't convert nullish\n     * values to empty strings.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {string} Returns the string.\n     */\n    function baseToString(value) {\n      // Exit early for strings to avoid a performance hit in some environments.\n      if (typeof value == 'string') {\n        return value;\n      }\n      if (isArray(value)) {\n        // Recursively convert values (susceptible to call stack limits).\n        return arrayMap(value, baseToString) + '';\n      }\n      if (isSymbol(value)) {\n        return symbolToString ? symbolToString.call(value) : '';\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseUniq(array, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          length = array.length,\n          isCommon = true,\n          result = [],\n          seen = result;\n\n      if (comparator) {\n        isCommon = false;\n        includes = arrayIncludesWith;\n      }\n      else if (length >= LARGE_ARRAY_SIZE) {\n        var set = iteratee ? null : createSet(array);\n        if (set) {\n          return setToArray(set);\n        }\n        isCommon = false;\n        includes = cacheHas;\n        seen = new SetCache;\n      }\n      else {\n        seen = iteratee ? [] : result;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var seenIndex = seen.length;\n          while (seenIndex--) {\n            if (seen[seenIndex] === computed) {\n              continue outer;\n            }\n          }\n          if (iteratee) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n        else if (!includes(seen, computed, comparator)) {\n          if (seen !== result) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.unset`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The property path to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     */\n    function baseUnset(object, path) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      return object == null || delete object[toKey(last(path))];\n    }\n\n    /**\n     * The base implementation of `_.update`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to update.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseUpdate(object, path, updater, customizer) {\n      return baseSet(object, path, updater(baseGet(object, path)), customizer);\n    }\n\n    /**\n     * The base implementation of methods like `_.dropWhile` and `_.takeWhile`\n     * without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseWhile(array, predicate, isDrop, fromRight) {\n      var length = array.length,\n          index = fromRight ? length : -1;\n\n      while ((fromRight ? index-- : ++index < length) &&\n        predicate(array[index], index, array)) {}\n\n      return isDrop\n        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n    }\n\n    /**\n     * The base implementation of `wrapperValue` which returns the result of\n     * performing a sequence of actions on the unwrapped `value`, where each\n     * successive action is supplied the return value of the previous.\n     *\n     * @private\n     * @param {*} value The unwrapped value.\n     * @param {Array} actions Actions to perform to resolve the unwrapped value.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseWrapperValue(value, actions) {\n      var result = value;\n      if (result instanceof LazyWrapper) {\n        result = result.value();\n      }\n      return arrayReduce(actions, function(result, action) {\n        return action.func.apply(action.thisArg, arrayPush([result], action.args));\n      }, result);\n    }\n\n    /**\n     * The base implementation of methods like `_.xor`, without support for\n     * iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of values.\n     */\n    function baseXor(arrays, iteratee, comparator) {\n      var length = arrays.length;\n      if (length < 2) {\n        return length ? baseUniq(arrays[0]) : [];\n      }\n      var index = -1,\n          result = Array(length);\n\n      while (++index < length) {\n        var array = arrays[index],\n            othIndex = -1;\n\n        while (++othIndex < length) {\n          if (othIndex != index) {\n            result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n          }\n        }\n      }\n      return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n    }\n\n    /**\n     * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n     *\n     * @private\n     * @param {Array} props The property identifiers.\n     * @param {Array} values The property values.\n     * @param {Function} assignFunc The function to assign values.\n     * @returns {Object} Returns the new object.\n     */\n    function baseZipObject(props, values, assignFunc) {\n      var index = -1,\n          length = props.length,\n          valsLength = values.length,\n          result = {};\n\n      while (++index < length) {\n        var value = index < valsLength ? values[index] : undefined;\n        assignFunc(result, props[index], value);\n      }\n      return result;\n    }\n\n    /**\n     * Casts `value` to an empty array if it's not an array like object.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Array|Object} Returns the cast array-like object.\n     */\n    function castArrayLikeObject(value) {\n      return isArrayLikeObject(value) ? value : [];\n    }\n\n    /**\n     * Casts `value` to `identity` if it's not a function.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Function} Returns cast function.\n     */\n    function castFunction(value) {\n      return typeof value == 'function' ? value : identity;\n    }\n\n    /**\n     * Casts `value` to a path array if it's not one.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {Array} Returns the cast property path array.\n     */\n    function castPath(value, object) {\n      if (isArray(value)) {\n        return value;\n      }\n      return isKey(value, object) ? [value] : stringToPath(toString(value));\n    }\n\n    /**\n     * A `baseRest` alias which can be replaced with `identity` by module\n     * replacement plugins.\n     *\n     * @private\n     * @type {Function}\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    var castRest = baseRest;\n\n    /**\n     * Casts `array` to a slice if it's needed.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {number} start The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the cast slice.\n     */\n    function castSlice(array, start, end) {\n      var length = array.length;\n      end = end === undefined ? length : end;\n      return (!start && end >= length) ? array : baseSlice(array, start, end);\n    }\n\n    /**\n     * A simple wrapper around the global [`clearTimeout`](https://mdn.io/clearTimeout).\n     *\n     * @private\n     * @param {number|Object} id The timer id or timeout object of the timer to clear.\n     */\n    var clearTimeout = ctxClearTimeout || function(id) {\n      return root.clearTimeout(id);\n    };\n\n    /**\n     * Creates a clone of  `buffer`.\n     *\n     * @private\n     * @param {Buffer} buffer The buffer to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Buffer} Returns the cloned buffer.\n     */\n    function cloneBuffer(buffer, isDeep) {\n      if (isDeep) {\n        return buffer.slice();\n      }\n      var length = buffer.length,\n          result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n      buffer.copy(result);\n      return result;\n    }\n\n    /**\n     * Creates a clone of `arrayBuffer`.\n     *\n     * @private\n     * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n     * @returns {ArrayBuffer} Returns the cloned array buffer.\n     */\n    function cloneArrayBuffer(arrayBuffer) {\n      var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n      new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n      return result;\n    }\n\n    /**\n     * Creates a clone of `dataView`.\n     *\n     * @private\n     * @param {Object} dataView The data view to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned data view.\n     */\n    function cloneDataView(dataView, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n      return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n    }\n\n    /**\n     * Creates a clone of `regexp`.\n     *\n     * @private\n     * @param {Object} regexp The regexp to clone.\n     * @returns {Object} Returns the cloned regexp.\n     */\n    function cloneRegExp(regexp) {\n      var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n      result.lastIndex = regexp.lastIndex;\n      return result;\n    }\n\n    /**\n     * Creates a clone of the `symbol` object.\n     *\n     * @private\n     * @param {Object} symbol The symbol object to clone.\n     * @returns {Object} Returns the cloned symbol object.\n     */\n    function cloneSymbol(symbol) {\n      return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n    }\n\n    /**\n     * Creates a clone of `typedArray`.\n     *\n     * @private\n     * @param {Object} typedArray The typed array to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned typed array.\n     */\n    function cloneTypedArray(typedArray, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n      return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n    }\n\n    /**\n     * Compares values to sort them in ascending order.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {number} Returns the sort order indicator for `value`.\n     */\n    function compareAscending(value, other) {\n      if (value !== other) {\n        var valIsDefined = value !== undefined,\n            valIsNull = value === null,\n            valIsReflexive = value === value,\n            valIsSymbol = isSymbol(value);\n\n        var othIsDefined = other !== undefined,\n            othIsNull = other === null,\n            othIsReflexive = other === other,\n            othIsSymbol = isSymbol(other);\n\n        if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n            (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n            (valIsNull && othIsDefined && othIsReflexive) ||\n            (!valIsDefined && othIsReflexive) ||\n            !valIsReflexive) {\n          return 1;\n        }\n        if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n            (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n            (othIsNull && valIsDefined && valIsReflexive) ||\n            (!othIsDefined && valIsReflexive) ||\n            !othIsReflexive) {\n          return -1;\n        }\n      }\n      return 0;\n    }\n\n    /**\n     * Used by `_.orderBy` to compare multiple properties of a value to another\n     * and stable sort them.\n     *\n     * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n     * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n     * of corresponding values.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {boolean[]|string[]} orders The order to sort by for each property.\n     * @returns {number} Returns the sort order indicator for `object`.\n     */\n    function compareMultiple(object, other, orders) {\n      var index = -1,\n          objCriteria = object.criteria,\n          othCriteria = other.criteria,\n          length = objCriteria.length,\n          ordersLength = orders.length;\n\n      while (++index < length) {\n        var result = compareAscending(objCriteria[index], othCriteria[index]);\n        if (result) {\n          if (index >= ordersLength) {\n            return result;\n          }\n          var order = orders[index];\n          return result * (order == 'desc' ? -1 : 1);\n        }\n      }\n      // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n      // that causes it, under certain circumstances, to provide the same value for\n      // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n      // for more details.\n      //\n      // This also ensures a stable sort in V8 and other engines.\n      // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n      return object.index - other.index;\n    }\n\n    /**\n     * Creates an array that is the composition of partially applied arguments,\n     * placeholders, and provided arguments into a single array of arguments.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to prepend to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgs(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersLength = holders.length,\n          leftIndex = -1,\n          leftLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(leftLength + rangeLength),\n          isUncurried = !isCurried;\n\n      while (++leftIndex < leftLength) {\n        result[leftIndex] = partials[leftIndex];\n      }\n      while (++argsIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[holders[argsIndex]] = args[argsIndex];\n        }\n      }\n      while (rangeLength--) {\n        result[leftIndex++] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * This function is like `composeArgs` except that the arguments composition\n     * is tailored for `_.partialRight`.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to append to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgsRight(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersIndex = -1,\n          holdersLength = holders.length,\n          rightIndex = -1,\n          rightLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(rangeLength + rightLength),\n          isUncurried = !isCurried;\n\n      while (++argsIndex < rangeLength) {\n        result[argsIndex] = args[argsIndex];\n      }\n      var offset = argsIndex;\n      while (++rightIndex < rightLength) {\n        result[offset + rightIndex] = partials[rightIndex];\n      }\n      while (++holdersIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[offset + holders[holdersIndex]] = args[argsIndex++];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Copies the values of `source` to `array`.\n     *\n     * @private\n     * @param {Array} source The array to copy values from.\n     * @param {Array} [array=[]] The array to copy values to.\n     * @returns {Array} Returns `array`.\n     */\n    function copyArray(source, array) {\n      var index = -1,\n          length = source.length;\n\n      array || (array = Array(length));\n      while (++index < length) {\n        array[index] = source[index];\n      }\n      return array;\n    }\n\n    /**\n     * Copies properties of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy properties from.\n     * @param {Array} props The property identifiers to copy.\n     * @param {Object} [object={}] The object to copy properties to.\n     * @param {Function} [customizer] The function to customize copied values.\n     * @returns {Object} Returns `object`.\n     */\n    function copyObject(source, props, object, customizer) {\n      var isNew = !object;\n      object || (object = {});\n\n      var index = -1,\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index];\n\n        var newValue = customizer\n          ? customizer(object[key], source[key], key, object, source)\n          : undefined;\n\n        if (newValue === undefined) {\n          newValue = source[key];\n        }\n        if (isNew) {\n          baseAssignValue(object, key, newValue);\n        } else {\n          assignValue(object, key, newValue);\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Copies own symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbols(source, object) {\n      return copyObject(source, getSymbols(source), object);\n    }\n\n    /**\n     * Copies own and inherited symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbolsIn(source, object) {\n      return copyObject(source, getSymbolsIn(source), object);\n    }\n\n    /**\n     * Creates a function like `_.groupBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} [initializer] The accumulator object initializer.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter, initializer) {\n      return function(collection, iteratee) {\n        var func = isArray(collection) ? arrayAggregator : baseAggregator,\n            accumulator = initializer ? initializer() : {};\n\n        return func(collection, setter, getIteratee(iteratee, 2), accumulator);\n      };\n    }\n\n    /**\n     * Creates a function like `_.assign`.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @returns {Function} Returns the new assigner function.\n     */\n    function createAssigner(assigner) {\n      return baseRest(function(object, sources) {\n        var index = -1,\n            length = sources.length,\n            customizer = length > 1 ? sources[length - 1] : undefined,\n            guard = length > 2 ? sources[2] : undefined;\n\n        customizer = (assigner.length > 3 && typeof customizer == 'function')\n          ? (length--, customizer)\n          : undefined;\n\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n          customizer = length < 3 ? undefined : customizer;\n          length = 1;\n        }\n        object = Object(object);\n        while (++index < length) {\n          var source = sources[index];\n          if (source) {\n            assigner(object, source, index, customizer);\n          }\n        }\n        return object;\n      });\n    }\n\n    /**\n     * Creates a `baseEach` or `baseEachRight` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseEach(eachFunc, fromRight) {\n      return function(collection, iteratee) {\n        if (collection == null) {\n          return collection;\n        }\n        if (!isArrayLike(collection)) {\n          return eachFunc(collection, iteratee);\n        }\n        var length = collection.length,\n            index = fromRight ? length : -1,\n            iterable = Object(collection);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          if (iteratee(iterable[index], index, iterable) === false) {\n            break;\n          }\n        }\n        return collection;\n      };\n    }\n\n    /**\n     * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseFor(fromRight) {\n      return function(object, iteratee, keysFunc) {\n        var index = -1,\n            iterable = Object(object),\n            props = keysFunc(object),\n            length = props.length;\n\n        while (length--) {\n          var key = props[fromRight ? length : ++index];\n          if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n          }\n        }\n        return object;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the optional `this`\n     * binding of `thisArg`.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createBind(func, bitmask, thisArg) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(isBind ? thisArg : this, arguments);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.lowerFirst`.\n     *\n     * @private\n     * @param {string} methodName The name of the `String` case method to use.\n     * @returns {Function} Returns the new case function.\n     */\n    function createCaseFirst(methodName) {\n      return function(string) {\n        string = toString(string);\n\n        var strSymbols = hasUnicode(string)\n          ? stringToArray(string)\n          : undefined;\n\n        var chr = strSymbols\n          ? strSymbols[0]\n          : string.charAt(0);\n\n        var trailing = strSymbols\n          ? castSlice(strSymbols, 1).join('')\n          : string.slice(1);\n\n        return chr[methodName]() + trailing;\n      };\n    }\n\n    /**\n     * Creates a function like `_.camelCase`.\n     *\n     * @private\n     * @param {Function} callback The function to combine each word.\n     * @returns {Function} Returns the new compounder function.\n     */\n    function createCompounder(callback) {\n      return function(string) {\n        return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n      };\n    }\n\n    /**\n     * Creates a function that produces an instance of `Ctor` regardless of\n     * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n     *\n     * @private\n     * @param {Function} Ctor The constructor to wrap.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCtor(Ctor) {\n      return function() {\n        // Use a `switch` statement to work with class constructors. See\n        // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n        // for more details.\n        var args = arguments;\n        switch (args.length) {\n          case 0: return new Ctor;\n          case 1: return new Ctor(args[0]);\n          case 2: return new Ctor(args[0], args[1]);\n          case 3: return new Ctor(args[0], args[1], args[2]);\n          case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n        }\n        var thisBinding = baseCreate(Ctor.prototype),\n            result = Ctor.apply(thisBinding, args);\n\n        // Mimic the constructor's `return` behavior.\n        // See https://es5.github.io/#x13.2.2 for more details.\n        return isObject(result) ? result : thisBinding;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to enable currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {number} arity The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCurry(func, bitmask, arity) {\n      var Ctor = createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length,\n            placeholder = getHolder(wrapper);\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n          ? []\n          : replaceHolders(args, placeholder);\n\n        length -= holders.length;\n        if (length < arity) {\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, undefined,\n            args, holders, undefined, undefined, arity - length);\n        }\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return apply(fn, this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.find` or `_.findLast` function.\n     *\n     * @private\n     * @param {Function} findIndexFunc The function to find the collection index.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFind(findIndexFunc) {\n      return function(collection, predicate, fromIndex) {\n        var iterable = Object(collection);\n        if (!isArrayLike(collection)) {\n          var iteratee = getIteratee(predicate, 3);\n          collection = keys(collection);\n          predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n        }\n        var index = findIndexFunc(collection, predicate, fromIndex);\n        return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n      };\n    }\n\n    /**\n     * Creates a `_.flow` or `_.flowRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new flow function.\n     */\n    function createFlow(fromRight) {\n      return flatRest(function(funcs) {\n        var length = funcs.length,\n            index = length,\n            prereq = LodashWrapper.prototype.thru;\n\n        if (fromRight) {\n          funcs.reverse();\n        }\n        while (index--) {\n          var func = funcs[index];\n          if (typeof func != 'function') {\n            throw new TypeError(FUNC_ERROR_TEXT);\n          }\n          if (prereq && !wrapper && getFuncName(func) == 'wrapper') {\n            var wrapper = new LodashWrapper([], true);\n          }\n        }\n        index = wrapper ? index : length;\n        while (++index < length) {\n          func = funcs[index];\n\n          var funcName = getFuncName(func),\n              data = funcName == 'wrapper' ? getData(func) : undefined;\n\n          if (data && isLaziable(data[0]) &&\n                data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) &&\n                !data[4].length && data[9] == 1\n              ) {\n            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);\n          } else {\n            wrapper = (func.length == 1 && isLaziable(func))\n              ? wrapper[funcName]()\n              : wrapper.thru(func);\n          }\n        }\n        return function() {\n          var args = arguments,\n              value = args[0];\n\n          if (wrapper && args.length == 1 && isArray(value)) {\n            return wrapper.plant(value).value();\n          }\n          var index = 0,\n              result = length ? funcs[index].apply(this, args) : value;\n\n          while (++index < length) {\n            result = funcs[index].call(this, result);\n          }\n          return result;\n        };\n      });\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with optional `this`\n     * binding of `thisArg`, partial application, and currying.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [partialsRight] The arguments to append to those provided\n     *  to the new function.\n     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = bitmask & WRAP_ARY_FLAG,\n          isBind = bitmask & WRAP_BIND_FLAG,\n          isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n          isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n          isFlip = bitmask & WRAP_FLIP_FLAG,\n          Ctor = isBindKey ? undefined : createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length;\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        if (isCurried) {\n          var placeholder = getHolder(wrapper),\n              holdersCount = countHolders(args, placeholder);\n        }\n        if (partials) {\n          args = composeArgs(args, partials, holders, isCurried);\n        }\n        if (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n        }\n        length -= holdersCount;\n        if (isCurried && length < arity) {\n          var newHolders = replaceHolders(args, placeholder);\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n            args, newHolders, argPos, ary, arity - length\n          );\n        }\n        var thisBinding = isBind ? thisArg : this,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        length = args.length;\n        if (argPos) {\n          args = reorder(args, argPos);\n        } else if (isFlip && length > 1) {\n          args.reverse();\n        }\n        if (isAry && ary < length) {\n          args.length = ary;\n        }\n        if (this && this !== root && this instanceof wrapper) {\n          fn = Ctor || createCtor(fn);\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.invertBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} toIteratee The function to resolve iteratees.\n     * @returns {Function} Returns the new inverter function.\n     */\n    function createInverter(setter, toIteratee) {\n      return function(object, iteratee) {\n        return baseInverter(object, setter, toIteratee(iteratee), {});\n      };\n    }\n\n    /**\n     * Creates a function that performs a mathematical operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @param {number} [defaultValue] The value used for `undefined` arguments.\n     * @returns {Function} Returns the new mathematical operation function.\n     */\n    function createMathOperation(operator, defaultValue) {\n      return function(value, other) {\n        var result;\n        if (value === undefined && other === undefined) {\n          return defaultValue;\n        }\n        if (value !== undefined) {\n          result = value;\n        }\n        if (other !== undefined) {\n          if (result === undefined) {\n            return other;\n          }\n          if (typeof value == 'string' || typeof other == 'string') {\n            value = baseToString(value);\n            other = baseToString(other);\n          } else {\n            value = baseToNumber(value);\n            other = baseToNumber(other);\n          }\n          result = operator(value, other);\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function like `_.over`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over iteratees.\n     * @returns {Function} Returns the new over function.\n     */\n    function createOver(arrayFunc) {\n      return flatRest(function(iteratees) {\n        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n        return baseRest(function(args) {\n          var thisArg = this;\n          return arrayFunc(iteratees, function(iteratee) {\n            return apply(iteratee, thisArg, args);\n          });\n        });\n      });\n    }\n\n    /**\n     * Creates the padding for `string` based on `length`. The `chars` string\n     * is truncated if the number of characters exceeds `length`.\n     *\n     * @private\n     * @param {number} length The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padding for `string`.\n     */\n    function createPadding(length, chars) {\n      chars = chars === undefined ? ' ' : baseToString(chars);\n\n      var charsLength = chars.length;\n      if (charsLength < 2) {\n        return charsLength ? baseRepeat(chars, length) : chars;\n      }\n      var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n      return hasUnicode(chars)\n        ? castSlice(stringToArray(result), 0, length).join('')\n        : result.slice(0, length);\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the `this` binding\n     * of `thisArg` and `partials` prepended to the arguments it receives.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {Array} partials The arguments to prepend to those provided to\n     *  the new function.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createPartial(func, bitmask, thisArg, partials) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var argsIndex = -1,\n            argsLength = arguments.length,\n            leftIndex = -1,\n            leftLength = partials.length,\n            args = Array(leftLength + argsLength),\n            fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n        while (++leftIndex < leftLength) {\n          args[leftIndex] = partials[leftIndex];\n        }\n        while (argsLength--) {\n          args[leftIndex++] = arguments[++argsIndex];\n        }\n        return apply(fn, isBind ? thisArg : this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.range` or `_.rangeRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new range function.\n     */\n    function createRange(fromRight) {\n      return function(start, end, step) {\n        if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n          end = step = undefined;\n        }\n        // Ensure the sign of `-0` is preserved.\n        start = toFinite(start);\n        if (end === undefined) {\n          end = start;\n          start = 0;\n        } else {\n          end = toFinite(end);\n        }\n        step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n        return baseRange(start, end, step, fromRight);\n      };\n    }\n\n    /**\n     * Creates a function that performs a relational operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @returns {Function} Returns the new relational operation function.\n     */\n    function createRelationalOperation(operator) {\n      return function(value, other) {\n        if (!(typeof value == 'string' && typeof other == 'string')) {\n          value = toNumber(value);\n          other = toNumber(other);\n        }\n        return operator(value, other);\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to continue currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {Function} wrapFunc The function to create the `func` wrapper.\n     * @param {*} placeholder The placeholder value.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n      var isCurry = bitmask & WRAP_CURRY_FLAG,\n          newHolders = isCurry ? holders : undefined,\n          newHoldersRight = isCurry ? undefined : holders,\n          newPartials = isCurry ? partials : undefined,\n          newPartialsRight = isCurry ? undefined : partials;\n\n      bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n      bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n      if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n        bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n      }\n      var newData = [\n        func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n        newHoldersRight, argPos, ary, arity\n      ];\n\n      var result = wrapFunc.apply(undefined, newData);\n      if (isLaziable(func)) {\n        setData(result, newData);\n      }\n      result.placeholder = placeholder;\n      return setWrapToString(result, func, bitmask);\n    }\n\n    /**\n     * Creates a function like `_.round`.\n     *\n     * @private\n     * @param {string} methodName The name of the `Math` method to use when rounding.\n     * @returns {Function} Returns the new round function.\n     */\n    function createRound(methodName) {\n      var func = Math[methodName];\n      return function(number, precision) {\n        number = toNumber(number);\n        precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n        if (precision && nativeIsFinite(number)) {\n          // Shift with exponential notation to avoid floating-point issues.\n          // See [MDN](https://mdn.io/round#Examples) for more details.\n          var pair = (toString(number) + 'e').split('e'),\n              value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n          pair = (toString(value) + 'e').split('e');\n          return +(pair[0] + 'e' + (+pair[1] - precision));\n        }\n        return func(number);\n      };\n    }\n\n    /**\n     * Creates a set object of `values`.\n     *\n     * @private\n     * @param {Array} values The values to add to the set.\n     * @returns {Object} Returns the new set.\n     */\n    var createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n      return new Set(values);\n    };\n\n    /**\n     * Creates a `_.toPairs` or `_.toPairsIn` function.\n     *\n     * @private\n     * @param {Function} keysFunc The function to get the keys of a given object.\n     * @returns {Function} Returns the new pairs function.\n     */\n    function createToPairs(keysFunc) {\n      return function(object) {\n        var tag = getTag(object);\n        if (tag == mapTag) {\n          return mapToArray(object);\n        }\n        if (tag == setTag) {\n          return setToPairs(object);\n        }\n        return baseToPairs(object, keysFunc(object));\n      };\n    }\n\n    /**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags.\n     *    1 - `_.bind`\n     *    2 - `_.bindKey`\n     *    4 - `_.curry` or `_.curryRight` of a bound function\n     *    8 - `_.curry`\n     *   16 - `_.curryRight`\n     *   32 - `_.partial`\n     *   64 - `_.partialRight`\n     *  128 - `_.rearg`\n     *  256 - `_.ary`\n     *  512 - `_.flip`\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n      if (!isBindKey && typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = partials ? partials.length : 0;\n      if (!length) {\n        bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n      }\n      ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n      arity = arity === undefined ? arity : toInteger(arity);\n      length -= holders ? holders.length : 0;\n\n      if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = undefined;\n      }\n      var data = isBindKey ? undefined : getData(func);\n\n      var newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n\n      if (data) {\n        mergeData(newData, data);\n      }\n      func = newData[0];\n      bitmask = newData[1];\n      thisArg = newData[2];\n      partials = newData[3];\n      holders = newData[4];\n      arity = newData[9] = newData[9] === undefined\n        ? (isBindKey ? 0 : func.length)\n        : nativeMax(newData[9] - length, 0);\n\n      if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n        bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n      }\n      if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n        var result = createBind(func, bitmask, thisArg);\n      } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n        result = createCurry(func, bitmask, arity);\n      } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n        result = createPartial(func, bitmask, thisArg, partials);\n      } else {\n        result = createHybrid.apply(undefined, newData);\n      }\n      var setter = data ? baseSetData : setData;\n      return setWrapToString(setter(result, newData), func, bitmask);\n    }\n\n    /**\n     * Used by `_.defaults` to customize its `_.assignIn` use to assign properties\n     * of source objects to the destination object for all destination properties\n     * that resolve to `undefined`.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to assign.\n     * @param {Object} object The parent object of `objValue`.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsAssignIn(objValue, srcValue, key, object) {\n      if (objValue === undefined ||\n          (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        return srcValue;\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n     * objects into destination objects that are passed thru.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to merge.\n     * @param {Object} object The parent object of `objValue`.\n     * @param {Object} source The parent object of `srcValue`.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n      if (isObject(objValue) && isObject(srcValue)) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, objValue);\n        baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n        stack['delete'](srcValue);\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n     * objects.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {string} key The key of the property to inspect.\n     * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n     */\n    function customOmitClone(value) {\n      return isPlainObject(value) ? undefined : value;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for arrays with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Array} array The array to compare.\n     * @param {Array} other The other array to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `array` and `other` objects.\n     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n     */\n    function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          arrLength = array.length,\n          othLength = other.length;\n\n      if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n        return false;\n      }\n      // Check that cyclic values are equal.\n      var arrStacked = stack.get(array);\n      var othStacked = stack.get(other);\n      if (arrStacked && othStacked) {\n        return arrStacked == other && othStacked == array;\n      }\n      var index = -1,\n          result = true,\n          seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n      stack.set(array, other);\n      stack.set(other, array);\n\n      // Ignore non-index properties.\n      while (++index < arrLength) {\n        var arrValue = array[index],\n            othValue = other[index];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, arrValue, index, other, array, stack)\n            : customizer(arrValue, othValue, index, array, other, stack);\n        }\n        if (compared !== undefined) {\n          if (compared) {\n            continue;\n          }\n          result = false;\n          break;\n        }\n        // Recursively compare arrays (susceptible to call stack limits).\n        if (seen) {\n          if (!arraySome(other, function(othValue, othIndex) {\n                if (!cacheHas(seen, othIndex) &&\n                    (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n                  return seen.push(othIndex);\n                }\n              })) {\n            result = false;\n            break;\n          }\n        } else if (!(\n              arrValue === othValue ||\n                equalFunc(arrValue, othValue, bitmask, customizer, stack)\n            )) {\n          result = false;\n          break;\n        }\n      }\n      stack['delete'](array);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for comparing objects of\n     * the same `toStringTag`.\n     *\n     * **Note:** This function only supports comparing values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {string} tag The `toStringTag` of the objects to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n      switch (tag) {\n        case dataViewTag:\n          if ((object.byteLength != other.byteLength) ||\n              (object.byteOffset != other.byteOffset)) {\n            return false;\n          }\n          object = object.buffer;\n          other = other.buffer;\n\n        case arrayBufferTag:\n          if ((object.byteLength != other.byteLength) ||\n              !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n            return false;\n          }\n          return true;\n\n        case boolTag:\n        case dateTag:\n        case numberTag:\n          // Coerce booleans to `1` or `0` and dates to milliseconds.\n          // Invalid dates are coerced to `NaN`.\n          return eq(+object, +other);\n\n        case errorTag:\n          return object.name == other.name && object.message == other.message;\n\n        case regexpTag:\n        case stringTag:\n          // Coerce regexes to strings and treat strings, primitives and objects,\n          // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n          // for more details.\n          return object == (other + '');\n\n        case mapTag:\n          var convert = mapToArray;\n\n        case setTag:\n          var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n          convert || (convert = setToArray);\n\n          if (object.size != other.size && !isPartial) {\n            return false;\n          }\n          // Assume cyclic values are equal.\n          var stacked = stack.get(object);\n          if (stacked) {\n            return stacked == other;\n          }\n          bitmask |= COMPARE_UNORDERED_FLAG;\n\n          // Recursively compare objects (susceptible to call stack limits).\n          stack.set(object, other);\n          var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n          stack['delete'](object);\n          return result;\n\n        case symbolTag:\n          if (symbolValueOf) {\n            return symbolValueOf.call(object) == symbolValueOf.call(other);\n          }\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for objects with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          objProps = getAllKeys(object),\n          objLength = objProps.length,\n          othProps = getAllKeys(other),\n          othLength = othProps.length;\n\n      if (objLength != othLength && !isPartial) {\n        return false;\n      }\n      var index = objLength;\n      while (index--) {\n        var key = objProps[index];\n        if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n          return false;\n        }\n      }\n      // Check that cyclic values are equal.\n      var objStacked = stack.get(object);\n      var othStacked = stack.get(other);\n      if (objStacked && othStacked) {\n        return objStacked == other && othStacked == object;\n      }\n      var result = true;\n      stack.set(object, other);\n      stack.set(other, object);\n\n      var skipCtor = isPartial;\n      while (++index < objLength) {\n        key = objProps[index];\n        var objValue = object[key],\n            othValue = other[key];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, objValue, key, other, object, stack)\n            : customizer(objValue, othValue, key, object, other, stack);\n        }\n        // Recursively compare objects (susceptible to call stack limits).\n        if (!(compared === undefined\n              ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n              : compared\n            )) {\n          result = false;\n          break;\n        }\n        skipCtor || (skipCtor = key == 'constructor');\n      }\n      if (result && !skipCtor) {\n        var objCtor = object.constructor,\n            othCtor = other.constructor;\n\n        // Non `Object` object instances with different constructors are not equal.\n        if (objCtor != othCtor &&\n            ('constructor' in object && 'constructor' in other) &&\n            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n              typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n          result = false;\n        }\n      }\n      stack['delete'](object);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseRest` which flattens the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    function flatRest(func) {\n      return setToString(overRest(func, undefined, flatten), func + '');\n    }\n\n    /**\n     * Creates an array of own enumerable property names and symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeys(object) {\n      return baseGetAllKeys(object, keys, getSymbols);\n    }\n\n    /**\n     * Creates an array of own and inherited enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeysIn(object) {\n      return baseGetAllKeys(object, keysIn, getSymbolsIn);\n    }\n\n    /**\n     * Gets metadata for `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {*} Returns the metadata for `func`.\n     */\n    var getData = !metaMap ? noop : function(func) {\n      return metaMap.get(func);\n    };\n\n    /**\n     * Gets the name of `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {string} Returns the function name.\n     */\n    function getFuncName(func) {\n      var result = (func.name + ''),\n          array = realNames[result],\n          length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n      while (length--) {\n        var data = array[length],\n            otherFunc = data.func;\n        if (otherFunc == null || otherFunc == func) {\n          return data.name;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Gets the argument placeholder value for `func`.\n     *\n     * @private\n     * @param {Function} func The function to inspect.\n     * @returns {*} Returns the placeholder value.\n     */\n    function getHolder(func) {\n      var object = hasOwnProperty.call(lodash, 'placeholder') ? lodash : func;\n      return object.placeholder;\n    }\n\n    /**\n     * Gets the appropriate \"iteratee\" function. If `_.iteratee` is customized,\n     * this function returns the custom method, otherwise it returns `baseIteratee`.\n     * If arguments are provided, the chosen function is invoked with them and\n     * its result is returned.\n     *\n     * @private\n     * @param {*} [value] The value to convert to an iteratee.\n     * @param {number} [arity] The arity of the created iteratee.\n     * @returns {Function} Returns the chosen function or its result.\n     */\n    function getIteratee() {\n      var result = lodash.iteratee || iteratee;\n      result = result === iteratee ? baseIteratee : result;\n      return arguments.length ? result(arguments[0], arguments[1]) : result;\n    }\n\n    /**\n     * Gets the data for `map`.\n     *\n     * @private\n     * @param {Object} map The map to query.\n     * @param {string} key The reference key.\n     * @returns {*} Returns the map data.\n     */\n    function getMapData(map, key) {\n      var data = map.__data__;\n      return isKeyable(key)\n        ? data[typeof key == 'string' ? 'string' : 'hash']\n        : data.map;\n    }\n\n    /**\n     * Gets the property names, values, and compare flags of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the match data of `object`.\n     */\n    function getMatchData(object) {\n      var result = keys(object),\n          length = result.length;\n\n      while (length--) {\n        var key = result[length],\n            value = object[key];\n\n        result[length] = [key, value, isStrictComparable(value)];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the native function at `key` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the method to get.\n     * @returns {*} Returns the function if it's native, else `undefined`.\n     */\n    function getNative(object, key) {\n      var value = getValue(object, key);\n      return baseIsNative(value) ? value : undefined;\n    }\n\n    /**\n     * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the raw `toStringTag`.\n     */\n    function getRawTag(value) {\n      var isOwn = hasOwnProperty.call(value, symToStringTag),\n          tag = value[symToStringTag];\n\n      try {\n        value[symToStringTag] = undefined;\n        var unmasked = true;\n      } catch (e) {}\n\n      var result = nativeObjectToString.call(value);\n      if (unmasked) {\n        if (isOwn) {\n          value[symToStringTag] = tag;\n        } else {\n          delete value[symToStringTag];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of the own enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n      if (object == null) {\n        return [];\n      }\n      object = Object(object);\n      return arrayFilter(nativeGetSymbols(object), function(symbol) {\n        return propertyIsEnumerable.call(object, symbol);\n      });\n    };\n\n    /**\n     * Creates an array of the own and inherited enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n      var result = [];\n      while (object) {\n        arrayPush(result, getSymbols(object));\n        object = getPrototype(object);\n      }\n      return result;\n    };\n\n    /**\n     * Gets the `toStringTag` of `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    var getTag = baseGetTag;\n\n    // Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\n    if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n        (Map && getTag(new Map) != mapTag) ||\n        (Promise && getTag(Promise.resolve()) != promiseTag) ||\n        (Set && getTag(new Set) != setTag) ||\n        (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n      getTag = function(value) {\n        var result = baseGetTag(value),\n            Ctor = result == objectTag ? value.constructor : undefined,\n            ctorString = Ctor ? toSource(Ctor) : '';\n\n        if (ctorString) {\n          switch (ctorString) {\n            case dataViewCtorString: return dataViewTag;\n            case mapCtorString: return mapTag;\n            case promiseCtorString: return promiseTag;\n            case setCtorString: return setTag;\n            case weakMapCtorString: return weakMapTag;\n          }\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Gets the view, applying any `transforms` to the `start` and `end` positions.\n     *\n     * @private\n     * @param {number} start The start of the view.\n     * @param {number} end The end of the view.\n     * @param {Array} transforms The transformations to apply to the view.\n     * @returns {Object} Returns an object containing the `start` and `end`\n     *  positions of the view.\n     */\n    function getView(start, end, transforms) {\n      var index = -1,\n          length = transforms.length;\n\n      while (++index < length) {\n        var data = transforms[index],\n            size = data.size;\n\n        switch (data.type) {\n          case 'drop':      start += size; break;\n          case 'dropRight': end -= size; break;\n          case 'take':      end = nativeMin(end, start + size); break;\n          case 'takeRight': start = nativeMax(start, end - size); break;\n        }\n      }\n      return { 'start': start, 'end': end };\n    }\n\n    /**\n     * Extracts wrapper details from the `source` body comment.\n     *\n     * @private\n     * @param {string} source The source to inspect.\n     * @returns {Array} Returns the wrapper details.\n     */\n    function getWrapDetails(source) {\n      var match = source.match(reWrapDetails);\n      return match ? match[1].split(reSplitDetails) : [];\n    }\n\n    /**\n     * Checks if `path` exists on `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @param {Function} hasFunc The function to check properties.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     */\n    function hasPath(object, path, hasFunc) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          result = false;\n\n      while (++index < length) {\n        var key = toKey(path[index]);\n        if (!(result = object != null && hasFunc(object, key))) {\n          break;\n        }\n        object = object[key];\n      }\n      if (result || ++index != length) {\n        return result;\n      }\n      length = object == null ? 0 : object.length;\n      return !!length && isLength(length) && isIndex(key, length) &&\n        (isArray(object) || isArguments(object));\n    }\n\n    /**\n     * Initializes an array clone.\n     *\n     * @private\n     * @param {Array} array The array to clone.\n     * @returns {Array} Returns the initialized clone.\n     */\n    function initCloneArray(array) {\n      var length = array.length,\n          result = new array.constructor(length);\n\n      // Add properties assigned by `RegExp#exec`.\n      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n        result.index = array.index;\n        result.input = array.input;\n      }\n      return result;\n    }\n\n    /**\n     * Initializes an object clone.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneObject(object) {\n      return (typeof object.constructor == 'function' && !isPrototype(object))\n        ? baseCreate(getPrototype(object))\n        : {};\n    }\n\n    /**\n     * Initializes an object clone based on its `toStringTag`.\n     *\n     * **Note:** This function only supports cloning values with tags of\n     * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @param {string} tag The `toStringTag` of the object to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneByTag(object, tag, isDeep) {\n      var Ctor = object.constructor;\n      switch (tag) {\n        case arrayBufferTag:\n          return cloneArrayBuffer(object);\n\n        case boolTag:\n        case dateTag:\n          return new Ctor(+object);\n\n        case dataViewTag:\n          return cloneDataView(object, isDeep);\n\n        case float32Tag: case float64Tag:\n        case int8Tag: case int16Tag: case int32Tag:\n        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n          return cloneTypedArray(object, isDeep);\n\n        case mapTag:\n          return new Ctor;\n\n        case numberTag:\n        case stringTag:\n          return new Ctor(object);\n\n        case regexpTag:\n          return cloneRegExp(object);\n\n        case setTag:\n          return new Ctor;\n\n        case symbolTag:\n          return cloneSymbol(object);\n      }\n    }\n\n    /**\n     * Inserts wrapper `details` in a comment at the top of the `source` body.\n     *\n     * @private\n     * @param {string} source The source to modify.\n     * @returns {Array} details The details to insert.\n     * @returns {string} Returns the modified source.\n     */\n    function insertWrapDetails(source, details) {\n      var length = details.length;\n      if (!length) {\n        return source;\n      }\n      var lastIndex = length - 1;\n      details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n      details = details.join(length > 2 ? ', ' : ' ');\n      return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n    }\n\n    /**\n     * Checks if `value` is a flattenable `arguments` object or array.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n     */\n    function isFlattenable(value) {\n      return isArray(value) || isArguments(value) ||\n        !!(spreadableSymbol && value && value[spreadableSymbol]);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like index.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n     */\n    function isIndex(value, length) {\n      var type = typeof value;\n      length = length == null ? MAX_SAFE_INTEGER : length;\n\n      return !!length &&\n        (type == 'number' ||\n          (type != 'symbol' && reIsUint.test(value))) &&\n            (value > -1 && value % 1 == 0 && value < length);\n    }\n\n    /**\n     * Checks if the given arguments are from an iteratee call.\n     *\n     * @private\n     * @param {*} value The potential iteratee value argument.\n     * @param {*} index The potential iteratee index or key argument.\n     * @param {*} object The potential iteratee object argument.\n     * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n     *  else `false`.\n     */\n    function isIterateeCall(value, index, object) {\n      if (!isObject(object)) {\n        return false;\n      }\n      var type = typeof index;\n      if (type == 'number'\n            ? (isArrayLike(object) && isIndex(index, object.length))\n            : (type == 'string' && index in object)\n          ) {\n        return eq(object[index], value);\n      }\n      return false;\n    }\n\n    /**\n     * Checks if `value` is a property name and not a property path.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n     */\n    function isKey(value, object) {\n      if (isArray(value)) {\n        return false;\n      }\n      var type = typeof value;\n      if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n          value == null || isSymbol(value)) {\n        return true;\n      }\n      return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n        (object != null && value in Object(object));\n    }\n\n    /**\n     * Checks if `value` is suitable for use as unique object key.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n     */\n    function isKeyable(value) {\n      var type = typeof value;\n      return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n        ? (value !== '__proto__')\n        : (value === null);\n    }\n\n    /**\n     * Checks if `func` has a lazy counterpart.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n     *  else `false`.\n     */\n    function isLaziable(func) {\n      var funcName = getFuncName(func),\n          other = lodash[funcName];\n\n      if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n        return false;\n      }\n      if (func === other) {\n        return true;\n      }\n      var data = getData(other);\n      return !!data && func === data[0];\n    }\n\n    /**\n     * Checks if `func` has its source masked.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n     */\n    function isMasked(func) {\n      return !!maskSrcKey && (maskSrcKey in func);\n    }\n\n    /**\n     * Checks if `func` is capable of being masked.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `func` is maskable, else `false`.\n     */\n    var isMaskable = coreJsData ? isFunction : stubFalse;\n\n    /**\n     * Checks if `value` is likely a prototype object.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n     */\n    function isPrototype(value) {\n      var Ctor = value && value.constructor,\n          proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n      return value === proto;\n    }\n\n    /**\n     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` if suitable for strict\n     *  equality comparisons, else `false`.\n     */\n    function isStrictComparable(value) {\n      return value === value && !isObject(value);\n    }\n\n    /**\n     * A specialized version of `matchesProperty` for source values suitable\n     * for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {string} key The key of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function matchesStrictComparable(key, srcValue) {\n      return function(object) {\n        if (object == null) {\n          return false;\n        }\n        return object[key] === srcValue &&\n          (srcValue !== undefined || (key in Object(object)));\n      };\n    }\n\n    /**\n     * A specialized version of `_.memoize` which clears the memoized function's\n     * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n     *\n     * @private\n     * @param {Function} func The function to have its output memoized.\n     * @returns {Function} Returns the new memoized function.\n     */\n    function memoizeCapped(func) {\n      var result = memoize(func, function(key) {\n        if (cache.size === MAX_MEMOIZE_SIZE) {\n          cache.clear();\n        }\n        return key;\n      });\n\n      var cache = result.cache;\n      return result;\n    }\n\n    /**\n     * Merges the function metadata of `source` into `data`.\n     *\n     * Merging metadata reduces the number of wrappers used to invoke a function.\n     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n     * may be applied regardless of execution order. Methods like `_.ary` and\n     * `_.rearg` modify function arguments, making the order in which they are\n     * executed important, preventing the merging of metadata. However, we make\n     * an exception for a safe combined case where curried functions have `_.ary`\n     * and or `_.rearg` applied.\n     *\n     * @private\n     * @param {Array} data The destination metadata.\n     * @param {Array} source The source metadata.\n     * @returns {Array} Returns `data`.\n     */\n    function mergeData(data, source) {\n      var bitmask = data[1],\n          srcBitmask = source[1],\n          newBitmask = bitmask | srcBitmask,\n          isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n      var isCombo =\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n        ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n      // Exit early if metadata can't be merged.\n      if (!(isCommon || isCombo)) {\n        return data;\n      }\n      // Use source `thisArg` if available.\n      if (srcBitmask & WRAP_BIND_FLAG) {\n        data[2] = source[2];\n        // Set when currying a bound function.\n        newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n      }\n      // Compose partial arguments.\n      var value = source[3];\n      if (value) {\n        var partials = data[3];\n        data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n      }\n      // Compose partial right arguments.\n      value = source[5];\n      if (value) {\n        partials = data[5];\n        data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n      }\n      // Use source `argPos` if available.\n      value = source[7];\n      if (value) {\n        data[7] = value;\n      }\n      // Use source `ary` if it's smaller.\n      if (srcBitmask & WRAP_ARY_FLAG) {\n        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n      }\n      // Use source `arity` if one is not provided.\n      if (data[9] == null) {\n        data[9] = source[9];\n      }\n      // Use source `func` and merge bitmasks.\n      data[0] = source[0];\n      data[1] = newBitmask;\n\n      return data;\n    }\n\n    /**\n     * This function is like\n     * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * except that it includes inherited enumerable properties.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function nativeKeysIn(object) {\n      var result = [];\n      if (object != null) {\n        for (var key in Object(object)) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a string using `Object.prototype.toString`.\n     *\n     * @private\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     */\n    function objectToString(value) {\n      return nativeObjectToString.call(value);\n    }\n\n    /**\n     * A specialized version of `baseRest` which transforms the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @param {Function} transform The rest array transform.\n     * @returns {Function} Returns the new function.\n     */\n    function overRest(func, start, transform) {\n      start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n      return function() {\n        var args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            array = Array(length);\n\n        while (++index < length) {\n          array[index] = args[start + index];\n        }\n        index = -1;\n        var otherArgs = Array(start + 1);\n        while (++index < start) {\n          otherArgs[index] = args[index];\n        }\n        otherArgs[start] = transform(array);\n        return apply(func, this, otherArgs);\n      };\n    }\n\n    /**\n     * Gets the parent value at `path` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} path The path to get the parent value of.\n     * @returns {*} Returns the parent value.\n     */\n    function parent(object, path) {\n      return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n    }\n\n    /**\n     * Reorder `array` according to the specified indexes where the element at\n     * the first index is assigned as the first element, the element at\n     * the second index is assigned as the second element, and so on.\n     *\n     * @private\n     * @param {Array} array The array to reorder.\n     * @param {Array} indexes The arranged array indexes.\n     * @returns {Array} Returns `array`.\n     */\n    function reorder(array, indexes) {\n      var arrLength = array.length,\n          length = nativeMin(indexes.length, arrLength),\n          oldArray = copyArray(array);\n\n      while (length--) {\n        var index = indexes[length];\n        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n      }\n      return array;\n    }\n\n    /**\n     * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the property to get.\n     * @returns {*} Returns the property value.\n     */\n    function safeGet(object, key) {\n      if (key === 'constructor' && typeof object[key] === 'function') {\n        return;\n      }\n\n      if (key == '__proto__') {\n        return;\n      }\n\n      return object[key];\n    }\n\n    /**\n     * Sets metadata for `func`.\n     *\n     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n     * period of time, it will trip its breaker and transition to an identity\n     * function to avoid garbage collection pauses in V8. See\n     * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n     * for more details.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var setData = shortOut(baseSetData);\n\n    /**\n     * A simple wrapper around the global [`setTimeout`](https://mdn.io/setTimeout).\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    var setTimeout = ctxSetTimeout || function(func, wait) {\n      return root.setTimeout(func, wait);\n    };\n\n    /**\n     * Sets the `toString` method of `func` to return `string`.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var setToString = shortOut(baseSetToString);\n\n    /**\n     * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n     * with wrapper details in a comment at the top of the source body.\n     *\n     * @private\n     * @param {Function} wrapper The function to modify.\n     * @param {Function} reference The reference function.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Function} Returns `wrapper`.\n     */\n    function setWrapToString(wrapper, reference, bitmask) {\n      var source = (reference + '');\n      return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n    }\n\n    /**\n     * Creates a function that'll short out and invoke `identity` instead\n     * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n     * milliseconds.\n     *\n     * @private\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new shortable function.\n     */\n    function shortOut(func) {\n      var count = 0,\n          lastCalled = 0;\n\n      return function() {\n        var stamp = nativeNow(),\n            remaining = HOT_SPAN - (stamp - lastCalled);\n\n        lastCalled = stamp;\n        if (remaining > 0) {\n          if (++count >= HOT_COUNT) {\n            return arguments[0];\n          }\n        } else {\n          count = 0;\n        }\n        return func.apply(undefined, arguments);\n      };\n    }\n\n    /**\n     * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @param {number} [size=array.length] The size of `array`.\n     * @returns {Array} Returns `array`.\n     */\n    function shuffleSelf(array, size) {\n      var index = -1,\n          length = array.length,\n          lastIndex = length - 1;\n\n      size = size === undefined ? length : size;\n      while (++index < size) {\n        var rand = baseRandom(index, lastIndex),\n            value = array[rand];\n\n        array[rand] = array[index];\n        array[index] = value;\n      }\n      array.length = size;\n      return array;\n    }\n\n    /**\n     * Converts `string` to a property path array.\n     *\n     * @private\n     * @param {string} string The string to convert.\n     * @returns {Array} Returns the property path array.\n     */\n    var stringToPath = memoizeCapped(function(string) {\n      var result = [];\n      if (string.charCodeAt(0) === 46 /* . */) {\n        result.push('');\n      }\n      string.replace(rePropName, function(match, number, quote, subString) {\n        result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n      });\n      return result;\n    });\n\n    /**\n     * Converts `value` to a string key if it's not a string or symbol.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {string|symbol} Returns the key.\n     */\n    function toKey(value) {\n      if (typeof value == 'string' || isSymbol(value)) {\n        return value;\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * Converts `func` to its source code.\n     *\n     * @private\n     * @param {Function} func The function to convert.\n     * @returns {string} Returns the source code.\n     */\n    function toSource(func) {\n      if (func != null) {\n        try {\n          return funcToString.call(func);\n        } catch (e) {}\n        try {\n          return (func + '');\n        } catch (e) {}\n      }\n      return '';\n    }\n\n    /**\n     * Updates wrapper `details` based on `bitmask` flags.\n     *\n     * @private\n     * @returns {Array} details The details to modify.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Array} Returns `details`.\n     */\n    function updateWrapDetails(details, bitmask) {\n      arrayEach(wrapFlags, function(pair) {\n        var value = '_.' + pair[0];\n        if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n          details.push(value);\n        }\n      });\n      return details.sort();\n    }\n\n    /**\n     * Creates a clone of `wrapper`.\n     *\n     * @private\n     * @param {Object} wrapper The wrapper to clone.\n     * @returns {Object} Returns the cloned wrapper.\n     */\n    function wrapperClone(wrapper) {\n      if (wrapper instanceof LazyWrapper) {\n        return wrapper.clone();\n      }\n      var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n      result.__actions__ = copyArray(wrapper.__actions__);\n      result.__index__  = wrapper.__index__;\n      result.__values__ = wrapper.__values__;\n      return result;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements split into groups the length of `size`.\n     * If `array` can't be split evenly, the final chunk will be the remaining\n     * elements.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to process.\n     * @param {number} [size=1] The length of each chunk\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the new array of chunks.\n     * @example\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 2);\n     * // => [['a', 'b'], ['c', 'd']]\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 3);\n     * // => [['a', 'b', 'c'], ['d']]\n     */\n    function chunk(array, size, guard) {\n      if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n        size = 1;\n      } else {\n        size = nativeMax(toInteger(size), 0);\n      }\n      var length = array == null ? 0 : array.length;\n      if (!length || size < 1) {\n        return [];\n      }\n      var index = 0,\n          resIndex = 0,\n          result = Array(nativeCeil(length / size));\n\n      while (index < length) {\n        result[resIndex++] = baseSlice(array, index, (index += size));\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array == null ? 0 : array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result[resIndex++] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates a new array concatenating `array` with any additional arrays\n     * and/or values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to concatenate.\n     * @param {...*} [values] The values to concatenate.\n     * @returns {Array} Returns the new concatenated array.\n     * @example\n     *\n     * var array = [1];\n     * var other = _.concat(array, 2, [3], [[4]]);\n     *\n     * console.log(other);\n     * // => [1, 2, 3, [4]]\n     *\n     * console.log(array);\n     * // => [1]\n     */\n    function concat() {\n      var length = arguments.length;\n      if (!length) {\n        return [];\n      }\n      var args = Array(length - 1),\n          array = arguments[0],\n          index = length;\n\n      while (index--) {\n        args[index - 1] = arguments[index];\n      }\n      return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n    }\n\n    /**\n     * Creates an array of `array` values not included in the other given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * **Note:** Unlike `_.pullAll`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.without, _.xor\n     * @example\n     *\n     * _.difference([2, 1], [2, 3]);\n     * // => [1]\n     */\n    var difference = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `iteratee` which\n     * is invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * **Note:** Unlike `_.pullAllBy`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var differenceBy = baseRest(function(array, values) {\n      var iteratee = last(values);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `comparator`\n     * which is invoked to compare elements of `array` to `values`. The order and\n     * references of result values are determined by the first array. The comparator\n     * is invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.pullAllWith`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     *\n     * _.differenceWith(objects, [{ 'x': 1, 'y': 2 }], _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }]\n     */\n    var differenceWith = baseRest(function(array, values) {\n      var comparator = last(values);\n      if (isArrayLikeObject(comparator)) {\n        comparator = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.drop([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.drop([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.drop([1, 2, 3], 5);\n     * // => []\n     *\n     * _.drop([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function drop(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRight([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.dropRight([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.dropRight([1, 2, 3], 5);\n     * // => []\n     *\n     * _.dropRight([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function dropRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the end.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.dropRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropRightWhile(users, ['active', false]);\n     * // => objects for ['barney']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropRightWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the beginning.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.dropWhile(users, function(o) { return !o.active; });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropWhile(users, ['active', false]);\n     * // => objects for ['pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true)\n        : [];\n    }\n\n    /**\n     * Fills elements of `array` with `value` from `start` up to, but not\n     * including, `end`.\n     *\n     * **Note:** This method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Array\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.fill(array, 'a');\n     * console.log(array);\n     * // => ['a', 'a', 'a']\n     *\n     * _.fill(Array(3), 2);\n     * // => [2, 2, 2]\n     *\n     * _.fill([4, 6, 8, 10], '*', 1, 3);\n     * // => [4, '*', '*', 10]\n     */\n    function fill(array, value, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n        start = 0;\n        end = length;\n      }\n      return baseFill(array, value, start, end);\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.findIndex(users, function(o) { return o.user == 'barney'; });\n     * // => 0\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findIndex(users, { 'user': 'fred', 'active': false });\n     * // => 1\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findIndex(users, ['active', false]);\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findIndex(users, 'active');\n     * // => 2\n     */\n    function findIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index);\n    }\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n     * // => 2\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n     * // => 0\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastIndex(users, ['active', false]);\n     * // => 2\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastIndex(users, 'active');\n     * // => 0\n     */\n    function findLastIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length - 1;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = fromIndex < 0\n          ? nativeMax(length + index, 0)\n          : nativeMin(index, length - 1);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index, true);\n    }\n\n    /**\n     * Flattens `array` a single level deep.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, [3, [4]], 5]\n     */\n    function flatten(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, 1) : [];\n    }\n\n    /**\n     * Recursively flattens `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flattenDeep([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, 3, 4, 5]\n     */\n    function flattenDeep(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, INFINITY) : [];\n    }\n\n    /**\n     * Recursively flatten `array` up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * var array = [1, [2, [3, [4]], 5]];\n     *\n     * _.flattenDepth(array, 1);\n     * // => [1, 2, [3, [4]], 5]\n     *\n     * _.flattenDepth(array, 2);\n     * // => [1, 2, 3, [4], 5]\n     */\n    function flattenDepth(array, depth) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(array, depth);\n    }\n\n    /**\n     * The inverse of `_.toPairs`; this method returns an object composed\n     * from key-value `pairs`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} pairs The key-value pairs.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.fromPairs([['a', 1], ['b', 2]]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function fromPairs(pairs) {\n      var index = -1,\n          length = pairs == null ? 0 : pairs.length,\n          result = {};\n\n      while (++index < length) {\n        var pair = pairs[index];\n        result[pair[0]] = pair[1];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias first\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the first element of `array`.\n     * @example\n     *\n     * _.head([1, 2, 3]);\n     * // => 1\n     *\n     * _.head([]);\n     * // => undefined\n     */\n    function head(array) {\n      return (array && array.length) ? array[0] : undefined;\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found in `array`\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it's used as the\n     * offset from the end of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 1, 2], 2);\n     * // => 1\n     *\n     * // Search from the `fromIndex`.\n     * _.indexOf([1, 2, 1, 2], 2, 2);\n     * // => 3\n     */\n    function indexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseIndexOf(array, value, index);\n    }\n\n    /**\n     * Gets all but the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     */\n    function initial(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 0, -1) : [];\n    }\n\n    /**\n     * Creates an array of unique values that are included in all given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersection([2, 1], [2, 3]);\n     * // => [2]\n     */\n    var intersection = baseRest(function(arrays) {\n      var mapped = arrayMap(arrays, castArrayLikeObject);\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped)\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `iteratee`\n     * which is invoked for each element of each `arrays` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [2.1]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }]\n     */\n    var intersectionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      if (iteratee === last(mapped)) {\n        iteratee = undefined;\n      } else {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `comparator`\n     * which is invoked to compare elements of `arrays`. The order and references\n     * of result values are determined by the first array. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.intersectionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }]\n     */\n    var intersectionWith = baseRest(function(arrays) {\n      var comparator = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      if (comparator) {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Converts all elements in `array` into a string separated by `separator`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to convert.\n     * @param {string} [separator=','] The element separator.\n     * @returns {string} Returns the joined string.\n     * @example\n     *\n     * _.join(['a', 'b', 'c'], '~');\n     * // => 'a~b~c'\n     */\n    function join(array, separator) {\n      return array == null ? '' : nativeJoin.call(array, separator);\n    }\n\n    /**\n     * Gets the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the last element of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     */\n    function last(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? array[length - 1] : undefined;\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it iterates over elements of\n     * `array` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 1, 2], 2);\n     * // => 3\n     *\n     * // Search from the `fromIndex`.\n     * _.lastIndexOf([1, 2, 1, 2], 2, 2);\n     * // => 1\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);\n      }\n      return value === value\n        ? strictLastIndexOf(array, value, index)\n        : baseFindIndex(array, baseIsNaN, index, true);\n    }\n\n    /**\n     * Gets the element at index `n` of `array`. If `n` is negative, the nth\n     * element from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.11.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=0] The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     *\n     * _.nth(array, 1);\n     * // => 'b'\n     *\n     * _.nth(array, -2);\n     * // => 'c';\n     */\n    function nth(array, n) {\n      return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;\n    }\n\n    /**\n     * Removes all given values from `array` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n     * to remove elements from an array by predicate.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...*} [values] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pull(array, 'a', 'c');\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    var pull = baseRest(pullAll);\n\n    /**\n     * This method is like `_.pull` except that it accepts an array of values to remove.\n     *\n     * **Note:** Unlike `_.difference`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pullAll(array, ['a', 'c']);\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    function pullAll(array, values) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values)\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `iteratee` which is\n     * invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The iteratee is invoked with one argument: (value).\n     *\n     * **Note:** Unlike `_.differenceBy`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];\n     *\n     * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');\n     * console.log(array);\n     * // => [{ 'x': 2 }]\n     */\n    function pullAllBy(array, values, iteratee) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, getIteratee(iteratee, 2))\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `comparator` which\n     * is invoked to compare elements of `array` to `values`. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.differenceWith`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];\n     *\n     * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);\n     * console.log(array);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]\n     */\n    function pullAllWith(array, values, comparator) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, undefined, comparator)\n        : array;\n    }\n\n    /**\n     * Removes elements from `array` corresponding to `indexes` and returns an\n     * array of removed elements.\n     *\n     * **Note:** Unlike `_.at`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...(number|number[])} [indexes] The indexes of elements to remove.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     * var pulled = _.pullAt(array, [1, 3]);\n     *\n     * console.log(array);\n     * // => ['a', 'c']\n     *\n     * console.log(pulled);\n     * // => ['b', 'd']\n     */\n    var pullAt = flatRest(function(array, indexes) {\n      var length = array == null ? 0 : array.length,\n          result = baseAt(array, indexes);\n\n      basePullAt(array, arrayMap(indexes, function(index) {\n        return isIndex(index, length) ? +index : index;\n      }).sort(compareAscending));\n\n      return result;\n    });\n\n    /**\n     * Removes all elements from `array` that `predicate` returns truthy for\n     * and returns an array of the removed elements. The predicate is invoked\n     * with three arguments: (value, index, array).\n     *\n     * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n     * to pull elements from an array by value.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4];\n     * var evens = _.remove(array, function(n) {\n     *   return n % 2 == 0;\n     * });\n     *\n     * console.log(array);\n     * // => [1, 3]\n     *\n     * console.log(evens);\n     * // => [2, 4]\n     */\n    function remove(array, predicate) {\n      var result = [];\n      if (!(array && array.length)) {\n        return result;\n      }\n      var index = -1,\n          indexes = [],\n          length = array.length;\n\n      predicate = getIteratee(predicate, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result.push(value);\n          indexes.push(index);\n        }\n      }\n      basePullAt(array, indexes);\n      return result;\n    }\n\n    /**\n     * Reverses `array` so that the first element becomes the last, the second\n     * element becomes the second to last, and so on.\n     *\n     * **Note:** This method mutates `array` and is based on\n     * [`Array#reverse`](https://mdn.io/Array/reverse).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.reverse(array);\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function reverse(array) {\n      return array == null ? array : nativeReverse.call(array);\n    }\n\n    /**\n     * Creates a slice of `array` from `start` up to, but not including, `end`.\n     *\n     * **Note:** This method is used instead of\n     * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are\n     * returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function slice(array, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n        start = 0;\n        end = length;\n      }\n      else {\n        start = start == null ? 0 : toInteger(start);\n        end = end === undefined ? length : toInteger(end);\n      }\n      return baseSlice(array, start, end);\n    }\n\n    /**\n     * Uses a binary search to determine the lowest index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([30, 50], 40);\n     * // => 1\n     */\n    function sortedIndex(array, value) {\n      return baseSortedIndex(array, value);\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 0\n     */\n    function sortedIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 1\n     */\n    function sortedIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value);\n        if (index < length && eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it returns the highest\n     * index at which `value` should be inserted into `array` in order to\n     * maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedLastIndex([4, 5, 5, 5, 6], 5);\n     * // => 4\n     */\n    function sortedLastIndex(array, value) {\n      return baseSortedIndex(array, value, true);\n    }\n\n    /**\n     * This method is like `_.sortedLastIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 1\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 1\n     */\n    function sortedLastIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2), true);\n    }\n\n    /**\n     * This method is like `_.lastIndexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 3\n     */\n    function sortedLastIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value, true) - 1;\n        if (eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.uniq` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniq([1, 1, 2]);\n     * // => [1, 2]\n     */\n    function sortedUniq(array) {\n      return (array && array.length)\n        ? baseSortedUniq(array)\n        : [];\n    }\n\n    /**\n     * This method is like `_.uniqBy` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);\n     * // => [1.1, 2.3]\n     */\n    function sortedUniqBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSortedUniq(array, getIteratee(iteratee, 2))\n        : [];\n    }\n\n    /**\n     * Gets all but the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.tail([1, 2, 3]);\n     * // => [2, 3]\n     */\n    function tail(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 1, length) : [];\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.take([1, 2, 3]);\n     * // => [1]\n     *\n     * _.take([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.take([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.take([1, 2, 3], 0);\n     * // => []\n     */\n    function take(array, n, guard) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRight([1, 2, 3]);\n     * // => [3]\n     *\n     * _.takeRight([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.takeRight([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.takeRight([1, 2, 3], 0);\n     * // => []\n     */\n    function takeRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the end. Elements are\n     * taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.takeRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeRightWhile(users, ['active', false]);\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeRightWhile(users, 'active');\n     * // => []\n     */\n    function takeRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), false, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the beginning. Elements\n     * are taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.takeWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeWhile(users, ['active', false]);\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeWhile(users, 'active');\n     * // => []\n     */\n    function takeWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3))\n        : [];\n    }\n\n    /**\n     * Creates an array of unique values, in order, from all given arrays using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.union([2], [1, 2]);\n     * // => [2, 1]\n     */\n    var union = baseRest(function(arrays) {\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which uniqueness is computed. Result values are chosen from the first\n     * array in which the value occurs. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    var unionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `comparator` which\n     * is invoked to compare elements of `arrays`. Result values are chosen from\n     * the first array in which the value occurs. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.unionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var unionWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined, comparator);\n    });\n\n    /**\n     * Creates a duplicate-free version of an array, using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons, in which only the first occurrence of each element\n     * is kept. The order of result values is determined by the order they occur\n     * in the array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniq([2, 1, 2]);\n     * // => [2, 1]\n     */\n    function uniq(array) {\n      return (array && array.length) ? baseUniq(array) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * uniqueness is computed. The order of result values is determined by the\n     * order they occur in the array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniqBy(array, iteratee) {\n      return (array && array.length) ? baseUniq(array, getIteratee(iteratee, 2)) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `comparator` which\n     * is invoked to compare elements of `array`. The order of result values is\n     * determined by the order they occur in the array.The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.uniqWith(objects, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n     */\n    function uniqWith(array, comparator) {\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an array of grouped\n     * elements and creates an array regrouping the elements to their pre-zip\n     * configuration.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.2.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     *\n     * _.unzip(zipped);\n     * // => [['a', 'b'], [1, 2], [true, false]]\n     */\n    function unzip(array) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var length = 0;\n      array = arrayFilter(array, function(group) {\n        if (isArrayLikeObject(group)) {\n          length = nativeMax(group.length, length);\n          return true;\n        }\n      });\n      return baseTimes(length, function(index) {\n        return arrayMap(array, baseProperty(index));\n      });\n    }\n\n    /**\n     * This method is like `_.unzip` except that it accepts `iteratee` to specify\n     * how regrouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  regrouped values.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n     * // => [[1, 10, 100], [2, 20, 200]]\n     *\n     * _.unzipWith(zipped, _.add);\n     * // => [3, 30, 300]\n     */\n    function unzipWith(array, iteratee) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var result = unzip(array);\n      if (iteratee == null) {\n        return result;\n      }\n      return arrayMap(result, function(group) {\n        return apply(iteratee, undefined, group);\n      });\n    }\n\n    /**\n     * Creates an array excluding all given values using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.pull`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...*} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.xor\n     * @example\n     *\n     * _.without([2, 1, 2, 3], 1, 2);\n     * // => [3]\n     */\n    var without = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, values)\n        : [];\n    });\n\n    /**\n     * Creates an array of unique values that is the\n     * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n     * of the given arrays. The order of result values is determined by the order\n     * they occur in the arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.without\n     * @example\n     *\n     * _.xor([2, 1], [2, 3]);\n     * // => [1, 3]\n     */\n    var xor = baseRest(function(arrays) {\n      return baseXor(arrayFilter(arrays, isArrayLikeObject));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which by which they're compared. The order of result values is determined\n     * by the order they occur in the arrays. The iteratee is invoked with one\n     * argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.xorBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2, 3.4]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.xorBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var xorBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `comparator` which is\n     * invoked to compare elements of `arrays`. The order of result values is\n     * determined by the order they occur in the arrays. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.xorWith(objects, others, _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var xorWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined, comparator);\n    });\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the\n     * first elements of the given arrays, the second of which contains the\n     * second elements of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     */\n    var zip = baseRest(unzip);\n\n    /**\n     * This method is like `_.fromPairs` except that it accepts two arrays,\n     * one of property identifiers and one of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.4.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObject(['a', 'b'], [1, 2]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function zipObject(props, values) {\n      return baseZipObject(props || [], values || [], assignValue);\n    }\n\n    /**\n     * This method is like `_.zipObject` except that it supports property paths.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);\n     * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }\n     */\n    function zipObjectDeep(props, values) {\n      return baseZipObject(props || [], values || [], baseSet);\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts `iteratee` to specify\n     * how grouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  grouped values.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {\n     *   return a + b + c;\n     * });\n     * // => [111, 222]\n     */\n    var zipWith = baseRest(function(arrays) {\n      var length = arrays.length,\n          iteratee = length > 1 ? arrays[length - 1] : undefined;\n\n      iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;\n      return unzipWith(arrays, iteratee);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` wrapper instance that wraps `value` with explicit method\n     * chain sequences enabled. The result of such sequences must be unwrapped\n     * with `_#value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Seq\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36 },\n     *   { 'user': 'fred',    'age': 40 },\n     *   { 'user': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _\n     *   .chain(users)\n     *   .sortBy('age')\n     *   .map(function(o) {\n     *     return o.user + ' is ' + o.age;\n     *   })\n     *   .head()\n     *   .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      var result = lodash(value);\n      result.__chain__ = true;\n      return result;\n    }\n\n    /**\n     * This method invokes `interceptor` and returns `value`. The interceptor\n     * is invoked with one argument; (value). The purpose of this method is to\n     * \"tap into\" a method chain sequence in order to modify intermediate results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3])\n     *  .tap(function(array) {\n     *    // Mutate input array.\n     *    array.pop();\n     *  })\n     *  .reverse()\n     *  .value();\n     * // => [2, 1]\n     */\n    function tap(value, interceptor) {\n      interceptor(value);\n      return value;\n    }\n\n    /**\n     * This method is like `_.tap` except that it returns the result of `interceptor`.\n     * The purpose of this method is to \"pass thru\" values replacing intermediate\n     * results in a method chain sequence.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns the result of `interceptor`.\n     * @example\n     *\n     * _('  abc  ')\n     *  .chain()\n     *  .trim()\n     *  .thru(function(value) {\n     *    return [value];\n     *  })\n     *  .value();\n     * // => ['abc']\n     */\n    function thru(value, interceptor) {\n      return interceptor(value);\n    }\n\n    /**\n     * This method is the wrapper version of `_.at`.\n     *\n     * @name at\n     * @memberOf _\n     * @since 1.0.0\n     * @category Seq\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _(object).at(['a[0].b.c', 'a[1]']).value();\n     * // => [3, 4]\n     */\n    var wrapperAt = flatRest(function(paths) {\n      var length = paths.length,\n          start = length ? paths[0] : 0,\n          value = this.__wrapped__,\n          interceptor = function(object) { return baseAt(object, paths); };\n\n      if (length > 1 || this.__actions__.length ||\n          !(value instanceof LazyWrapper) || !isIndex(start)) {\n        return this.thru(interceptor);\n      }\n      value = value.slice(start, +start + (length ? 1 : 0));\n      value.__actions__.push({\n        'func': thru,\n        'args': [interceptor],\n        'thisArg': undefined\n      });\n      return new LodashWrapper(value, this.__chain__).thru(function(array) {\n        if (length && !array.length) {\n          array.push(undefined);\n        }\n        return array;\n      });\n    });\n\n    /**\n     * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.\n     *\n     * @name chain\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // A sequence without explicit chaining.\n     * _(users).head();\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // A sequence with explicit chaining.\n     * _(users)\n     *   .chain()\n     *   .head()\n     *   .pick('user')\n     *   .value();\n     * // => { 'user': 'barney' }\n     */\n    function wrapperChain() {\n      return chain(this);\n    }\n\n    /**\n     * Executes the chain sequence and returns the wrapped result.\n     *\n     * @name commit\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).push(3);\n     *\n     * console.log(array);\n     * // => [1, 2]\n     *\n     * wrapped = wrapped.commit();\n     * console.log(array);\n     * // => [1, 2, 3]\n     *\n     * wrapped.last();\n     * // => 3\n     *\n     * console.log(array);\n     * // => [1, 2, 3]\n     */\n    function wrapperCommit() {\n      return new LodashWrapper(this.value(), this.__chain__);\n    }\n\n    /**\n     * Gets the next value on a wrapped object following the\n     * [iterator protocol](https://mdn.io/iteration_protocols#iterator).\n     *\n     * @name next\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the next iterator value.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 1 }\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 2 }\n     *\n     * wrapped.next();\n     * // => { 'done': true, 'value': undefined }\n     */\n    function wrapperNext() {\n      if (this.__values__ === undefined) {\n        this.__values__ = toArray(this.value());\n      }\n      var done = this.__index__ >= this.__values__.length,\n          value = done ? undefined : this.__values__[this.__index__++];\n\n      return { 'done': done, 'value': value };\n    }\n\n    /**\n     * Enables the wrapper to be iterable.\n     *\n     * @name Symbol.iterator\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the wrapper object.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped[Symbol.iterator]() === wrapped;\n     * // => true\n     *\n     * Array.from(wrapped);\n     * // => [1, 2]\n     */\n    function wrapperToIterator() {\n      return this;\n    }\n\n    /**\n     * Creates a clone of the chain sequence planting `value` as the wrapped value.\n     *\n     * @name plant\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @param {*} value The value to plant.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2]).map(square);\n     * var other = wrapped.plant([3, 4]);\n     *\n     * other.value();\n     * // => [9, 16]\n     *\n     * wrapped.value();\n     * // => [1, 4]\n     */\n    function wrapperPlant(value) {\n      var result,\n          parent = this;\n\n      while (parent instanceof baseLodash) {\n        var clone = wrapperClone(parent);\n        clone.__index__ = 0;\n        clone.__values__ = undefined;\n        if (result) {\n          previous.__wrapped__ = clone;\n        } else {\n          result = clone;\n        }\n        var previous = clone;\n        parent = parent.__wrapped__;\n      }\n      previous.__wrapped__ = value;\n      return result;\n    }\n\n    /**\n     * This method is the wrapper version of `_.reverse`.\n     *\n     * **Note:** This method mutates the wrapped array.\n     *\n     * @name reverse\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _(array).reverse().value()\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function wrapperReverse() {\n      var value = this.__wrapped__;\n      if (value instanceof LazyWrapper) {\n        var wrapped = value;\n        if (this.__actions__.length) {\n          wrapped = new LazyWrapper(this);\n        }\n        wrapped = wrapped.reverse();\n        wrapped.__actions__.push({\n          'func': thru,\n          'args': [reverse],\n          'thisArg': undefined\n        });\n        return new LodashWrapper(wrapped, this.__chain__);\n      }\n      return this.thru(reverse);\n    }\n\n    /**\n     * Executes the chain sequence to resolve the unwrapped value.\n     *\n     * @name value\n     * @memberOf _\n     * @since 0.1.0\n     * @alias toJSON, valueOf\n     * @category Seq\n     * @returns {*} Returns the resolved unwrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).value();\n     * // => [1, 2, 3]\n     */\n    function wrapperValue() {\n      return baseWrapperValue(this.__wrapped__, this.__actions__);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the number of times the key was returned by `iteratee`. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': 1, '6': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        ++result[key];\n      } else {\n        baseAssignValue(result, key, 1);\n      }\n    });\n\n    /**\n     * Checks if `predicate` returns truthy for **all** elements of `collection`.\n     * Iteration is stopped once `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * **Note:** This method returns `true` for\n     * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n     * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n     * elements of empty collections.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes'], Boolean);\n     * // => false\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.every(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.every(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.every(users, 'active');\n     * // => false\n     */\n    function every(collection, predicate, guard) {\n      var func = isArray(collection) ? arrayEvery : baseEvery;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning an array of all elements\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * **Note:** Unlike `_.remove`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.reject\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.filter(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, { 'age': 36, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.filter(users, 'active');\n     * // => objects for ['barney']\n     *\n     * // Combining several predicates using `_.overEvery` or `_.overSome`.\n     * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\n     * // => objects for ['fred', 'barney']\n     */\n    function filter(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning the first element\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': true },\n     *   { 'user': 'fred',    'age': 40, 'active': false },\n     *   { 'user': 'pebbles', 'age': 1,  'active': true }\n     * ];\n     *\n     * _.find(users, function(o) { return o.age < 40; });\n     * // => object for 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.find(users, { 'age': 1, 'active': true });\n     * // => object for 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.find(users, ['active', false]);\n     * // => object for 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.find(users, 'active');\n     * // => object for 'barney'\n     */\n    var find = createFind(findIndex);\n\n    /**\n     * This method is like `_.find` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=collection.length-1] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 1;\n     * });\n     * // => 3\n     */\n    var findLast = createFind(findLastIndex);\n\n    /**\n     * Creates a flattened array of values by running each element in `collection`\n     * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n     * with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [n, n];\n     * }\n     *\n     * _.flatMap([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMap(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), 1);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDeep([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMapDeep(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), INFINITY);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDepth([1, 2], duplicate, 2);\n     * // => [[1, 1], [2, 2]]\n     */\n    function flatMapDepth(collection, iteratee, depth) {\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(map(collection, iteratee), depth);\n    }\n\n    /**\n     * Iterates over elements of `collection` and invokes `iteratee` for each element.\n     * The iteratee is invoked with three arguments: (value, index|key, collection).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n     * property are iterated like arrays. To avoid this behavior use `_.forIn`\n     * or `_.forOwn` for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias each\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEachRight\n     * @example\n     *\n     * _.forEach([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `1` then `2`.\n     *\n     * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forEach(collection, iteratee) {\n      var func = isArray(collection) ? arrayEach : baseEach;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @alias eachRight\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEach\n     * @example\n     *\n     * _.forEachRight([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `2` then `1`.\n     */\n    function forEachRight(collection, iteratee) {\n      var func = isArray(collection) ? arrayEachRight : baseEachRight;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The order of grouped values\n     * is determined by the order they occur in `collection`. The corresponding\n     * value of each key is an array of elements responsible for generating the\n     * key. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': [4.2], '6': [6.1, 6.3] }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        result[key].push(value);\n      } else {\n        baseAssignValue(result, key, [value]);\n      }\n    });\n\n    /**\n     * Checks if `value` is in `collection`. If `collection` is a string, it's\n     * checked for a substring of `value`, otherwise\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * is used for equality comparisons. If `fromIndex` is negative, it's used as\n     * the offset from the end of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {boolean} Returns `true` if `value` is found, else `false`.\n     * @example\n     *\n     * _.includes([1, 2, 3], 1);\n     * // => true\n     *\n     * _.includes([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.includes({ 'a': 1, 'b': 2 }, 1);\n     * // => true\n     *\n     * _.includes('abcd', 'bc');\n     * // => true\n     */\n    function includes(collection, value, fromIndex, guard) {\n      collection = isArrayLike(collection) ? collection : values(collection);\n      fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n      var length = collection.length;\n      if (fromIndex < 0) {\n        fromIndex = nativeMax(length + fromIndex, 0);\n      }\n      return isString(collection)\n        ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n        : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n    }\n\n    /**\n     * Invokes the method at `path` of each element in `collection`, returning\n     * an array of the results of each invoked method. Any additional arguments\n     * are provided to each invoked method. If `path` is a function, it's invoked\n     * for, and `this` bound to, each element in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array|Function|string} path The path of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [args] The arguments to invoke each method with.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.invokeMap([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invokeMap([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    var invokeMap = baseRest(function(collection, path, args) {\n      var index = -1,\n          isFunc = typeof path == 'function',\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value) {\n        result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);\n      });\n      return result;\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the last element responsible for generating the key. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var array = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.keyBy(array, function(o) {\n     *   return String.fromCharCode(o.code);\n     * });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.keyBy(array, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     */\n    var keyBy = createAggregator(function(result, value, key) {\n      baseAssignValue(result, key, value);\n    });\n\n    /**\n     * Creates an array of values by running each element in `collection` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n     *\n     * The guarded methods are:\n     * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n     * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n     * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n     * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * _.map([4, 8], square);\n     * // => [16, 64]\n     *\n     * _.map({ 'a': 4, 'b': 8 }, square);\n     * // => [16, 64] (iteration order is not guaranteed)\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, 'user');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, iteratee) {\n      var func = isArray(collection) ? arrayMap : baseMap;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.sortBy` except that it allows specifying the sort\n     * orders of the iteratees to sort by. If `orders` is unspecified, all values\n     * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n     * descending or \"asc\" for ascending sort order of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @param {string[]} [orders] The sort orders of `iteratees`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 34 },\n     *   { 'user': 'fred',   'age': 40 },\n     *   { 'user': 'barney', 'age': 36 }\n     * ];\n     *\n     * // Sort by `user` in ascending order and by `age` in descending order.\n     * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n     */\n    function orderBy(collection, iteratees, orders, guard) {\n      if (collection == null) {\n        return [];\n      }\n      if (!isArray(iteratees)) {\n        iteratees = iteratees == null ? [] : [iteratees];\n      }\n      orders = guard ? undefined : orders;\n      if (!isArray(orders)) {\n        orders = orders == null ? [] : [orders];\n      }\n      return baseOrderBy(collection, iteratees, orders);\n    }\n\n    /**\n     * Creates an array of elements split into two groups, the first of which\n     * contains elements `predicate` returns truthy for, the second of which\n     * contains elements `predicate` returns falsey for. The predicate is\n     * invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of grouped elements.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': false },\n     *   { 'user': 'fred',    'age': 40, 'active': true },\n     *   { 'user': 'pebbles', 'age': 1,  'active': false }\n     * ];\n     *\n     * _.partition(users, function(o) { return o.active; });\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.partition(users, { 'age': 1, 'active': false });\n     * // => objects for [['pebbles'], ['barney', 'fred']]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.partition(users, ['active', false]);\n     * // => objects for [['barney', 'pebbles'], ['fred']]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.partition(users, 'active');\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     */\n    var partition = createAggregator(function(result, value, key) {\n      result[key ? 0 : 1].push(value);\n    }, function() { return [[], []]; });\n\n    /**\n     * Reduces `collection` to a value which is the accumulated result of running\n     * each element in `collection` thru `iteratee`, where each successive\n     * invocation is supplied the return value of the previous. If `accumulator`\n     * is not given, the first element of `collection` is used as the initial\n     * value. The iteratee is invoked with four arguments:\n     * (accumulator, value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.reduce`, `_.reduceRight`, and `_.transform`.\n     *\n     * The guarded methods are:\n     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n     * and `sortBy`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduceRight\n     * @example\n     *\n     * _.reduce([1, 2], function(sum, n) {\n     *   return sum + n;\n     * }, 0);\n     * // => 3\n     *\n     * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     *   return result;\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n     */\n    function reduce(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduce : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n    }\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduce\n     * @example\n     *\n     * var array = [[0, 1], [2, 3], [4, 5]];\n     *\n     * _.reduceRight(array, function(flattened, other) {\n     *   return flattened.concat(other);\n     * }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    function reduceRight(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduceRight : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);\n    }\n\n    /**\n     * The opposite of `_.filter`; this method returns the elements of `collection`\n     * that `predicate` does **not** return truthy for.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.filter\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': true }\n     * ];\n     *\n     * _.reject(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.reject(users, { 'age': 40, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.reject(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.reject(users, 'active');\n     * // => objects for ['barney']\n     */\n    function reject(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, negate(getIteratee(predicate, 3)));\n    }\n\n    /**\n     * Gets a random element from `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     */\n    function sample(collection) {\n      var func = isArray(collection) ? arraySample : baseSample;\n      return func(collection);\n    }\n\n    /**\n     * Gets `n` random elements at unique keys from `collection` up to the\n     * size of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} [n=1] The number of elements to sample.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the random elements.\n     * @example\n     *\n     * _.sampleSize([1, 2, 3], 2);\n     * // => [3, 1]\n     *\n     * _.sampleSize([1, 2, 3], 4);\n     * // => [2, 3, 1]\n     */\n    function sampleSize(collection, n, guard) {\n      if ((guard ? isIterateeCall(collection, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      var func = isArray(collection) ? arraySampleSize : baseSampleSize;\n      return func(collection, n);\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the\n     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4]);\n     * // => [4, 1, 3, 2]\n     */\n    function shuffle(collection) {\n      var func = isArray(collection) ? arrayShuffle : baseShuffle;\n      return func(collection);\n    }\n\n    /**\n     * Gets the size of `collection` by returning its length for array-like\n     * values or the number of own enumerable string keyed properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns the collection size.\n     * @example\n     *\n     * _.size([1, 2, 3]);\n     * // => 3\n     *\n     * _.size({ 'a': 1, 'b': 2 });\n     * // => 2\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      if (collection == null) {\n        return 0;\n      }\n      if (isArrayLike(collection)) {\n        return isString(collection) ? stringSize(collection) : collection.length;\n      }\n      var tag = getTag(collection);\n      if (tag == mapTag || tag == setTag) {\n        return collection.size;\n      }\n      return baseKeys(collection).length;\n    }\n\n    /**\n     * Checks if `predicate` returns truthy for **any** element of `collection`.\n     * Iteration is stopped once `predicate` returns truthy. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': true },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.some(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.some(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.some(users, 'active');\n     * // => true\n     */\n    function some(collection, predicate, guard) {\n      var func = isArray(collection) ? arraySome : baseSome;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection thru each iteratee. This method\n     * performs a stable sort, that is, it preserves the original sort order of\n     * equal elements. The iteratees are invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 30 },\n     *   { 'user': 'barney', 'age': 34 }\n     * ];\n     *\n     * _.sortBy(users, [function(o) { return o.user; }]);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n     *\n     * _.sortBy(users, ['user', 'age']);\n     * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n     */\n    var sortBy = baseRest(function(collection, iteratees) {\n      if (collection == null) {\n        return [];\n      }\n      var length = iteratees.length;\n      if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n        iteratees = [];\n      } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n        iteratees = [iteratees[0]];\n      }\n      return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Gets the timestamp of the number of milliseconds that have elapsed since\n     * the Unix epoch (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Date\n     * @returns {number} Returns the timestamp.\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => Logs the number of milliseconds it took for the deferred invocation.\n     */\n    var now = ctxNow || function() {\n      return root.Date.now();\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The opposite of `_.before`; this method creates a function that invokes\n     * `func` once it's called `n` or more times.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {number} n The number of calls before `func` is invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => Logs 'done saving!' after the two async saves have completed.\n     */\n    function after(n, func) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func`, with up to `n` arguments,\n     * ignoring any additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @param {number} [n=func.length] The arity cap.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.ary(parseInt, 1));\n     * // => [6, 8, 10]\n     */\n    function ary(func, n, guard) {\n      n = guard ? undefined : n;\n      n = (func && n == null) ? func.length : n;\n      return createWrap(func, WRAP_ARY_FLAG, undefined, undefined, undefined, undefined, n);\n    }\n\n    /**\n     * Creates a function that invokes `func`, with the `this` binding and arguments\n     * of the created function, while it's called less than `n` times. Subsequent\n     * calls to the created function return the result of the last `func` invocation.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {number} n The number of calls at which `func` is no longer invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * jQuery(element).on('click', _.before(5, addContactToList));\n     * // => Allows adding up to 4 contacts to the list.\n     */\n    function before(n, func) {\n      var result;\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n > 0) {\n          result = func.apply(this, arguments);\n        }\n        if (n <= 1) {\n          func = undefined;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and `partials` prepended to the arguments it receives.\n     *\n     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n     * property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * function greet(greeting, punctuation) {\n     *   return greeting + ' ' + this.user + punctuation;\n     * }\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * var bound = _.bind(greet, object, 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bind(greet, object, _, '!');\n     * bound('hi');\n     * // => 'hi fred!'\n     */\n    var bind = baseRest(function(func, thisArg, partials) {\n      var bitmask = WRAP_BIND_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bind));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(func, bitmask, thisArg, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes the method at `object[key]` with `partials`\n     * prepended to the arguments it receives.\n     *\n     * This method differs from `_.bind` by allowing bound functions to reference\n     * methods that may be redefined or don't yet exist. See\n     * [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)\n     * for more details.\n     *\n     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Function\n     * @param {Object} object The object to invoke the method on.\n     * @param {string} key The key of the method.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'user': 'fred',\n     *   'greet': function(greeting, punctuation) {\n     *     return greeting + ' ' + this.user + punctuation;\n     *   }\n     * };\n     *\n     * var bound = _.bindKey(object, 'greet', 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * object.greet = function(greeting, punctuation) {\n     *   return greeting + 'ya ' + this.user + punctuation;\n     * };\n     *\n     * bound('!');\n     * // => 'hiya fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bindKey(object, 'greet', _, '!');\n     * bound('hi');\n     * // => 'hiya fred!'\n     */\n    var bindKey = baseRest(function(object, key, partials) {\n      var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bindKey));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(key, bitmask, object, partials, holders);\n    });\n\n    /**\n     * Creates a function that accepts arguments of `func` and either invokes\n     * `func` returning its result, if at least `arity` number of arguments have\n     * been provided, or returns a function that accepts the remaining `func`\n     * arguments, and so on. The arity of `func` may be specified if `func.length`\n     * is not sufficient.\n     *\n     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curry(abc);\n     *\n     * curried(1)(2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(1)(_, 3)(2);\n     * // => [1, 2, 3]\n     */\n    function curry(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curry.placeholder;\n      return result;\n    }\n\n    /**\n     * This method is like `_.curry` except that arguments are applied to `func`\n     * in the manner of `_.partialRight` instead of `_.partial`.\n     *\n     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curryRight(abc);\n     *\n     * curried(3)(2)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(2, 3)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(3)(1, _)(2);\n     * // => [1, 2, 3]\n     */\n    function curryRight(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curryRight.placeholder;\n      return result;\n    }\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed `func` invocations and a `flush` method to immediately invoke them.\n     * Provide `options` to indicate whether `func` should be invoked on the\n     * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n     * with the last arguments provided to the debounced function. Subsequent\n     * calls to the debounced function return the result of the last `func`\n     * invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the debounced function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=false]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {number} [options.maxWait]\n     *  The maximum time `func` is allowed to be delayed before it's invoked.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // Avoid costly calculations while the window size is in flux.\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n     * jQuery(element).on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n     * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', debounced);\n     *\n     * // Cancel the trailing debounced invocation.\n     * jQuery(window).on('popstate', debounced.cancel);\n     */\n    function debounce(func, wait, options) {\n      var lastArgs,\n          lastThis,\n          maxWait,\n          result,\n          timerId,\n          lastCallTime,\n          lastInvokeTime = 0,\n          leading = false,\n          maxing = false,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = 'maxWait' in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n\n      function invokeFunc(time) {\n        var args = lastArgs,\n            thisArg = lastThis;\n\n        lastArgs = lastThis = undefined;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n\n      function leadingEdge(time) {\n        // Reset any `maxWait` timer.\n        lastInvokeTime = time;\n        // Start the timer for the trailing edge.\n        timerId = setTimeout(timerExpired, wait);\n        // Invoke the leading edge.\n        return leading ? invokeFunc(time) : result;\n      }\n\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime,\n            timeWaiting = wait - timeSinceLastCall;\n\n        return maxing\n          ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n          : timeWaiting;\n      }\n\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime;\n\n        // Either this is the first call, activity has stopped and we're at the\n        // trailing edge, the system time has gone backwards and we're treating\n        // it as the trailing edge, or we've hit the `maxWait` limit.\n        return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n          (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n      }\n\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        // Restart the timer.\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n\n      function trailingEdge(time) {\n        timerId = undefined;\n\n        // Only invoke if we have `lastArgs` which means `func` has been\n        // debounced at least once.\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = undefined;\n        return result;\n      }\n\n      function cancel() {\n        if (timerId !== undefined) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = undefined;\n      }\n\n      function flush() {\n        return timerId === undefined ? result : trailingEdge(now());\n      }\n\n      function debounced() {\n        var time = now(),\n            isInvoking = shouldInvoke(time);\n\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n\n        if (isInvoking) {\n          if (timerId === undefined) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            // Handle invocations in a tight loop.\n            clearTimeout(timerId);\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === undefined) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n\n    /**\n     * Defers invoking the `func` until the current call stack has cleared. Any\n     * additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to defer.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) {\n     *   console.log(text);\n     * }, 'deferred');\n     * // => Logs 'deferred' after one millisecond.\n     */\n    var defer = baseRest(function(func, args) {\n      return baseDelay(func, 1, args);\n    });\n\n    /**\n     * Invokes `func` after `wait` milliseconds. Any additional arguments are\n     * provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) {\n     *   console.log(text);\n     * }, 1000, 'later');\n     * // => Logs 'later' after one second.\n     */\n    var delay = baseRest(function(func, wait, args) {\n      return baseDelay(func, toNumber(wait) || 0, args);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments reversed.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to flip arguments for.\n     * @returns {Function} Returns the new flipped function.\n     * @example\n     *\n     * var flipped = _.flip(function() {\n     *   return _.toArray(arguments);\n     * });\n     *\n     * flipped('a', 'b', 'c', 'd');\n     * // => ['d', 'c', 'b', 'a']\n     */\n    function flip(func) {\n      return createWrap(func, WRAP_FLIP_FLAG);\n    }\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided, it determines the cache key for storing the result based on the\n     * arguments provided to the memoized function. By default, the first argument\n     * provided to the memoized function is used as the map cache key. The `func`\n     * is invoked with the `this` binding of the memoized function.\n     *\n     * **Note:** The cache is exposed as the `cache` property on the memoized\n     * function. Its creation may be customized by replacing the `_.memoize.Cache`\n     * constructor with one whose instances implement the\n     * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n     * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] The function to resolve the cache key.\n     * @returns {Function} Returns the new memoized function.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     * var other = { 'c': 3, 'd': 4 };\n     *\n     * var values = _.memoize(_.values);\n     * values(object);\n     * // => [1, 2]\n     *\n     * values(other);\n     * // => [3, 4]\n     *\n     * object.a = 2;\n     * values(object);\n     * // => [1, 2]\n     *\n     * // Modify the result cache.\n     * values.cache.set(object, ['a', 'b']);\n     * values(object);\n     * // => ['a', 'b']\n     *\n     * // Replace `_.memoize.Cache`.\n     * _.memoize.Cache = WeakMap;\n     */\n    function memoize(func, resolver) {\n      if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var memoized = function() {\n        var args = arguments,\n            key = resolver ? resolver.apply(this, args) : args[0],\n            cache = memoized.cache;\n\n        if (cache.has(key)) {\n          return cache.get(key);\n        }\n        var result = func.apply(this, args);\n        memoized.cache = cache.set(key, result) || cache;\n        return result;\n      };\n      memoized.cache = new (memoize.Cache || MapCache);\n      return memoized;\n    }\n\n    // Expose `MapCache`.\n    memoize.Cache = MapCache;\n\n    /**\n     * Creates a function that negates the result of the predicate `func`. The\n     * `func` predicate is invoked with the `this` binding and arguments of the\n     * created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} predicate The predicate to negate.\n     * @returns {Function} Returns the new negated function.\n     * @example\n     *\n     * function isEven(n) {\n     *   return n % 2 == 0;\n     * }\n     *\n     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n     * // => [1, 3, 5]\n     */\n    function negate(predicate) {\n      if (typeof predicate != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function() {\n        var args = arguments;\n        switch (args.length) {\n          case 0: return !predicate.call(this);\n          case 1: return !predicate.call(this, args[0]);\n          case 2: return !predicate.call(this, args[0], args[1]);\n          case 3: return !predicate.call(this, args[0], args[1], args[2]);\n        }\n        return !predicate.apply(this, args);\n      };\n    }\n\n    /**\n     * Creates a function that is restricted to invoking `func` once. Repeat calls\n     * to the function return the value of the first invocation. The `func` is\n     * invoked with the `this` binding and arguments of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // => `createApplication` is invoked once\n     */\n    function once(func) {\n      return before(2, func);\n    }\n\n    /**\n     * Creates a function that invokes `func` with its arguments transformed.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to wrap.\n     * @param {...(Function|Function[])} [transforms=[_.identity]]\n     *  The argument transforms.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function doubled(n) {\n     *   return n * 2;\n     * }\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var func = _.overArgs(function(x, y) {\n     *   return [x, y];\n     * }, [square, doubled]);\n     *\n     * func(9, 3);\n     * // => [81, 6]\n     *\n     * func(10, 5);\n     * // => [100, 10]\n     */\n    var overArgs = castRest(function(func, transforms) {\n      transforms = (transforms.length == 1 && isArray(transforms[0]))\n        ? arrayMap(transforms[0], baseUnary(getIteratee()))\n        : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));\n\n      var funcsLength = transforms.length;\n      return baseRest(function(args) {\n        var index = -1,\n            length = nativeMin(args.length, funcsLength);\n\n        while (++index < length) {\n          args[index] = transforms[index].call(this, args[index]);\n        }\n        return apply(func, this, args);\n      });\n    });\n\n    /**\n     * Creates a function that invokes `func` with `partials` prepended to the\n     * arguments it receives. This method is like `_.bind` except it does **not**\n     * alter the `this` binding.\n     *\n     * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.2.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var sayHelloTo = _.partial(greet, 'hello');\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     *\n     * // Partially applied with placeholders.\n     * var greetFred = _.partial(greet, _, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     */\n    var partial = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partial));\n      return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * This method is like `_.partial` except that partially applied arguments\n     * are appended to the arguments it receives.\n     *\n     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var greetFred = _.partialRight(greet, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     *\n     * // Partially applied with placeholders.\n     * var sayHelloTo = _.partialRight(greet, 'hello', _);\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     */\n    var partialRight = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partialRight));\n      return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments arranged according\n     * to the specified `indexes` where the argument value at the first index is\n     * provided as the first argument, the argument value at the second index is\n     * provided as the second argument, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to rearrange arguments for.\n     * @param {...(number|number[])} indexes The arranged argument indexes.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var rearged = _.rearg(function(a, b, c) {\n     *   return [a, b, c];\n     * }, [2, 0, 1]);\n     *\n     * rearged('b', 'c', 'a')\n     * // => ['a', 'b', 'c']\n     */\n    var rearg = flatRest(function(func, indexes) {\n      return createWrap(func, WRAP_REARG_FLAG, undefined, undefined, undefined, indexes);\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * created function and arguments from `start` and beyond provided as\n     * an array.\n     *\n     * **Note:** This method is based on the\n     * [rest parameter](https://mdn.io/rest_parameters).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.rest(function(what, names) {\n     *   return what + ' ' + _.initial(names).join(', ') +\n     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n     * });\n     *\n     * say('hello', 'fred', 'barney', 'pebbles');\n     * // => 'hello fred, barney, & pebbles'\n     */\n    function rest(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start === undefined ? start : toInteger(start);\n      return baseRest(func, start);\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * create function and an array of arguments much like\n     * [`Function#apply`](http://www.ecma-international.org/ecma-262/7.0/#sec-function.prototype.apply).\n     *\n     * **Note:** This method is based on the\n     * [spread operator](https://mdn.io/spread_operator).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Function\n     * @param {Function} func The function to spread arguments over.\n     * @param {number} [start=0] The start position of the spread.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.spread(function(who, what) {\n     *   return who + ' says ' + what;\n     * });\n     *\n     * say(['fred', 'hello']);\n     * // => 'fred says hello'\n     *\n     * var numbers = Promise.all([\n     *   Promise.resolve(40),\n     *   Promise.resolve(36)\n     * ]);\n     *\n     * numbers.then(_.spread(function(x, y) {\n     *   return x + y;\n     * }));\n     * // => a Promise of 76\n     */\n    function spread(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start == null ? 0 : nativeMax(toInteger(start), 0);\n      return baseRest(function(args) {\n        var array = args[start],\n            otherArgs = castSlice(args, 0, start);\n\n        if (array) {\n          arrayPush(otherArgs, array);\n        }\n        return apply(func, this, otherArgs);\n      });\n    }\n\n    /**\n     * Creates a throttled function that only invokes `func` at most once per\n     * every `wait` milliseconds. The throttled function comes with a `cancel`\n     * method to cancel delayed `func` invocations and a `flush` method to\n     * immediately invoke them. Provide `options` to indicate whether `func`\n     * should be invoked on the leading and/or trailing edge of the `wait`\n     * timeout. The `func` is invoked with the last arguments provided to the\n     * throttled function. Subsequent calls to the throttled function return the\n     * result of the last `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the throttled function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.throttle` and `_.debounce`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to throttle.\n     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=true]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // Avoid excessively updating the position while scrolling.\n     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n     *\n     * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n     * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n     * jQuery(element).on('click', throttled);\n     *\n     * // Cancel the trailing throttled invocation.\n     * jQuery(window).on('popstate', throttled.cancel);\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = 'leading' in options ? !!options.leading : leading;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        'leading': leading,\n        'maxWait': wait,\n        'trailing': trailing\n      });\n    }\n\n    /**\n     * Creates a function that accepts up to one argument, ignoring any\n     * additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.unary(parseInt));\n     * // => [6, 8, 10]\n     */\n    function unary(func) {\n      return ary(func, 1);\n    }\n\n    /**\n     * Creates a function that provides `value` to `wrapper` as its first\n     * argument. Any additional arguments provided to the function are appended\n     * to those provided to the `wrapper`. The wrapper is invoked with the `this`\n     * binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {*} value The value to wrap.\n     * @param {Function} [wrapper=identity] The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('fred, barney, & pebbles');\n     * // => '<p>fred, barney, &amp; pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      return partial(castFunction(wrapper), value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Casts `value` as an array if it's not one.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Lang\n     * @param {*} value The value to inspect.\n     * @returns {Array} Returns the cast array.\n     * @example\n     *\n     * _.castArray(1);\n     * // => [1]\n     *\n     * _.castArray({ 'a': 1 });\n     * // => [{ 'a': 1 }]\n     *\n     * _.castArray('abc');\n     * // => ['abc']\n     *\n     * _.castArray(null);\n     * // => [null]\n     *\n     * _.castArray(undefined);\n     * // => [undefined]\n     *\n     * _.castArray();\n     * // => []\n     *\n     * var array = [1, 2, 3];\n     * console.log(_.castArray(array) === array);\n     * // => true\n     */\n    function castArray() {\n      if (!arguments.length) {\n        return [];\n      }\n      var value = arguments[0];\n      return isArray(value) ? value : [value];\n    }\n\n    /**\n     * Creates a shallow clone of `value`.\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n     * and supports cloning arrays, array buffers, booleans, date objects, maps,\n     * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n     * arrays. The own enumerable properties of `arguments` objects are cloned\n     * as plain objects. An empty object is returned for uncloneable values such\n     * as error objects, functions, DOM nodes, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeep\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var shallow = _.clone(objects);\n     * console.log(shallow[0] === objects[0]);\n     * // => true\n     */\n    function clone(value) {\n      return baseClone(value, CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.clone` except that it accepts `customizer` which\n     * is invoked to produce the cloned value. If `customizer` returns `undefined`,\n     * cloning is handled by the method instead. The `customizer` is invoked with\n     * up to four arguments; (value [, index|key, object, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeepWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(false);\n     *   }\n     * }\n     *\n     * var el = _.cloneWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 0\n     */\n    function cloneWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * This method is like `_.clone` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.clone\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var deep = _.cloneDeep(objects);\n     * console.log(deep[0] === objects[0]);\n     * // => false\n     */\n    function cloneDeep(value) {\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.cloneWith` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.cloneWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(true);\n     *   }\n     * }\n     *\n     * var el = _.cloneDeepWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 20\n     */\n    function cloneDeepWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * Checks if `object` conforms to `source` by invoking the predicate\n     * properties of `source` with the corresponding property values of `object`.\n     *\n     * **Note:** This method is equivalent to `_.conforms` when `source` is\n     * partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 1; } });\n     * // => true\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 2; } });\n     * // => false\n     */\n    function conformsTo(object, source) {\n      return source == null || baseConformsTo(object, source, keys(source));\n    }\n\n    /**\n     * Performs a\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * comparison between two values to determine if they are equivalent.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.eq(object, object);\n     * // => true\n     *\n     * _.eq(object, other);\n     * // => false\n     *\n     * _.eq('a', 'a');\n     * // => true\n     *\n     * _.eq('a', Object('a'));\n     * // => false\n     *\n     * _.eq(NaN, NaN);\n     * // => true\n     */\n    function eq(value, other) {\n      return value === other || (value !== value && other !== other);\n    }\n\n    /**\n     * Checks if `value` is greater than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     * @see _.lt\n     * @example\n     *\n     * _.gt(3, 1);\n     * // => true\n     *\n     * _.gt(3, 3);\n     * // => false\n     *\n     * _.gt(1, 3);\n     * // => false\n     */\n    var gt = createRelationalOperation(baseGt);\n\n    /**\n     * Checks if `value` is greater than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than or equal to\n     *  `other`, else `false`.\n     * @see _.lte\n     * @example\n     *\n     * _.gte(3, 1);\n     * // => true\n     *\n     * _.gte(3, 3);\n     * // => true\n     *\n     * _.gte(1, 3);\n     * // => false\n     */\n    var gte = createRelationalOperation(function(value, other) {\n      return value >= other;\n    });\n\n    /**\n     * Checks if `value` is likely an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArguments(function() { return arguments; }());\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n      return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n        !propertyIsEnumerable.call(value, 'callee');\n    };\n\n    /**\n     * Checks if `value` is classified as an `Array` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n     * @example\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     *\n     * _.isArray(document.body.children);\n     * // => false\n     *\n     * _.isArray('abc');\n     * // => false\n     *\n     * _.isArray(_.noop);\n     * // => false\n     */\n    var isArray = Array.isArray;\n\n    /**\n     * Checks if `value` is classified as an `ArrayBuffer` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     * @example\n     *\n     * _.isArrayBuffer(new ArrayBuffer(2));\n     * // => true\n     *\n     * _.isArrayBuffer(new Array(2));\n     * // => false\n     */\n    var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;\n\n    /**\n     * Checks if `value` is array-like. A value is considered array-like if it's\n     * not a function and has a `value.length` that's an integer greater than or\n     * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n     * @example\n     *\n     * _.isArrayLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLike(document.body.children);\n     * // => true\n     *\n     * _.isArrayLike('abc');\n     * // => true\n     *\n     * _.isArrayLike(_.noop);\n     * // => false\n     */\n    function isArrayLike(value) {\n      return value != null && isLength(value.length) && !isFunction(value);\n    }\n\n    /**\n     * This method is like `_.isArrayLike` except that it also checks if `value`\n     * is an object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array-like object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArrayLikeObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLikeObject(document.body.children);\n     * // => true\n     *\n     * _.isArrayLikeObject('abc');\n     * // => false\n     *\n     * _.isArrayLikeObject(_.noop);\n     * // => false\n     */\n    function isArrayLikeObject(value) {\n      return isObjectLike(value) && isArrayLike(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a boolean primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n     * @example\n     *\n     * _.isBoolean(false);\n     * // => true\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false ||\n        (isObjectLike(value) && baseGetTag(value) == boolTag);\n    }\n\n    /**\n     * Checks if `value` is a buffer.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n     * @example\n     *\n     * _.isBuffer(new Buffer(2));\n     * // => true\n     *\n     * _.isBuffer(new Uint8Array(2));\n     * // => false\n     */\n    var isBuffer = nativeIsBuffer || stubFalse;\n\n    /**\n     * Checks if `value` is classified as a `Date` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     *\n     * _.isDate('Mon April 23 2012');\n     * // => false\n     */\n    var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\n    /**\n     * Checks if `value` is likely a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     *\n     * _.isElement('<body>');\n     * // => false\n     */\n    function isElement(value) {\n      return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n    }\n\n    /**\n     * Checks if `value` is an empty object, collection, map, or set.\n     *\n     * Objects are considered empty if they have no own enumerable string keyed\n     * properties.\n     *\n     * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n     * jQuery-like collections are considered empty if they have a `length` of `0`.\n     * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty(null);\n     * // => true\n     *\n     * _.isEmpty(true);\n     * // => true\n     *\n     * _.isEmpty(1);\n     * // => true\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({ 'a': 1 });\n     * // => false\n     */\n    function isEmpty(value) {\n      if (value == null) {\n        return true;\n      }\n      if (isArrayLike(value) &&\n          (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n            isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n        return !value.length;\n      }\n      var tag = getTag(value);\n      if (tag == mapTag || tag == setTag) {\n        return !value.size;\n      }\n      if (isPrototype(value)) {\n        return !baseKeys(value).length;\n      }\n      for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent.\n     *\n     * **Note:** This method supports comparing arrays, array buffers, booleans,\n     * date objects, error objects, maps, numbers, `Object` objects, regexes,\n     * sets, strings, symbols, and typed arrays. `Object` objects are compared\n     * by their own, not inherited, enumerable properties. Functions and DOM\n     * nodes are compared by strict equality, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.isEqual(object, other);\n     * // => true\n     *\n     * object === other;\n     * // => false\n     */\n    function isEqual(value, other) {\n      return baseIsEqual(value, other);\n    }\n\n    /**\n     * This method is like `_.isEqual` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with up to\n     * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, othValue) {\n     *   if (isGreeting(objValue) && isGreeting(othValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var array = ['hello', 'goodbye'];\n     * var other = ['hi', 'goodbye'];\n     *\n     * _.isEqualWith(array, other, customizer);\n     * // => true\n     */\n    function isEqualWith(value, other, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      var result = customizer ? customizer(value, other) : undefined;\n      return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n    }\n\n    /**\n     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n     * `SyntaxError`, `TypeError`, or `URIError` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n     * @example\n     *\n     * _.isError(new Error);\n     * // => true\n     *\n     * _.isError(Error);\n     * // => false\n     */\n    function isError(value) {\n      if (!isObjectLike(value)) {\n        return false;\n      }\n      var tag = baseGetTag(value);\n      return tag == errorTag || tag == domExcTag ||\n        (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n    }\n\n    /**\n     * Checks if `value` is a finite primitive number.\n     *\n     * **Note:** This method is based on\n     * [`Number.isFinite`](https://mdn.io/Number/isFinite).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n     * @example\n     *\n     * _.isFinite(3);\n     * // => true\n     *\n     * _.isFinite(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     *\n     * _.isFinite('3');\n     * // => false\n     */\n    function isFinite(value) {\n      return typeof value == 'number' && nativeIsFinite(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Function` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     *\n     * _.isFunction(/abc/);\n     * // => false\n     */\n    function isFunction(value) {\n      if (!isObject(value)) {\n        return false;\n      }\n      // The use of `Object#toString` avoids issues with the `typeof` operator\n      // in Safari 9 which returns 'object' for typed arrays and other constructors.\n      var tag = baseGetTag(value);\n      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n    }\n\n    /**\n     * Checks if `value` is an integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n     * @example\n     *\n     * _.isInteger(3);\n     * // => true\n     *\n     * _.isInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isInteger(Infinity);\n     * // => false\n     *\n     * _.isInteger('3');\n     * // => false\n     */\n    function isInteger(value) {\n      return typeof value == 'number' && value == toInteger(value);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like length.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n     * @example\n     *\n     * _.isLength(3);\n     * // => true\n     *\n     * _.isLength(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isLength(Infinity);\n     * // => false\n     *\n     * _.isLength('3');\n     * // => false\n     */\n    function isLength(value) {\n      return typeof value == 'number' &&\n        value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is the\n     * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(_.noop);\n     * // => true\n     *\n     * _.isObject(null);\n     * // => false\n     */\n    function isObject(value) {\n      var type = typeof value;\n      return value != null && (type == 'object' || type == 'function');\n    }\n\n    /**\n     * Checks if `value` is object-like. A value is object-like if it's not `null`\n     * and has a `typeof` result of \"object\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n     * @example\n     *\n     * _.isObjectLike({});\n     * // => true\n     *\n     * _.isObjectLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isObjectLike(_.noop);\n     * // => false\n     *\n     * _.isObjectLike(null);\n     * // => false\n     */\n    function isObjectLike(value) {\n      return value != null && typeof value == 'object';\n    }\n\n    /**\n     * Checks if `value` is classified as a `Map` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     * @example\n     *\n     * _.isMap(new Map);\n     * // => true\n     *\n     * _.isMap(new WeakMap);\n     * // => false\n     */\n    var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\n    /**\n     * Performs a partial deep comparison between `object` and `source` to\n     * determine if `object` contains equivalent property values.\n     *\n     * **Note:** This method is equivalent to `_.matches` when `source` is\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.isMatch(object, { 'b': 2 });\n     * // => true\n     *\n     * _.isMatch(object, { 'b': 1 });\n     * // => false\n     */\n    function isMatch(object, source) {\n      return object === source || baseIsMatch(object, source, getMatchData(source));\n    }\n\n    /**\n     * This method is like `_.isMatch` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with five\n     * arguments: (objValue, srcValue, index|key, object, source).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (isGreeting(objValue) && isGreeting(srcValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var object = { 'greeting': 'hello' };\n     * var source = { 'greeting': 'hi' };\n     *\n     * _.isMatchWith(object, source, customizer);\n     * // => true\n     */\n    function isMatchWith(object, source, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseIsMatch(object, source, getMatchData(source), customizer);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * **Note:** This method is based on\n     * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\n     * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\n     * `undefined` and other non-number values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // An `NaN` primitive is the only value that is not equal to itself.\n      // Perform the `toStringTag` check first to avoid errors with some\n      // ActiveX objects in IE.\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is a pristine native function.\n     *\n     * **Note:** This method can't reliably detect native functions in the presence\n     * of the core-js package because core-js circumvents this kind of detection.\n     * Despite multiple requests, the core-js maintainer has made it clear: any\n     * attempt to fix the detection will be obstructed. As a result, we're left\n     * with little choice but to throw an error. Unfortunately, this also affects\n     * packages, like [babel-polyfill](https://www.npmjs.com/package/babel-polyfill),\n     * which rely on core-js.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     * @example\n     *\n     * _.isNative(Array.prototype.push);\n     * // => true\n     *\n     * _.isNative(_);\n     * // => false\n     */\n    function isNative(value) {\n      if (isMaskable(value)) {\n        throw new Error(CORE_ERROR_TEXT);\n      }\n      return baseIsNative(value);\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(void 0);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is `null` or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n     * @example\n     *\n     * _.isNil(null);\n     * // => true\n     *\n     * _.isNil(void 0);\n     * // => true\n     *\n     * _.isNil(NaN);\n     * // => false\n     */\n    function isNil(value) {\n      return value == null;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Number` primitive or object.\n     *\n     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n     * classified as numbers, use the `_.isFinite` method.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n     * @example\n     *\n     * _.isNumber(3);\n     * // => true\n     *\n     * _.isNumber(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isNumber(Infinity);\n     * // => true\n     *\n     * _.isNumber('3');\n     * // => false\n     */\n    function isNumber(value) {\n      return typeof value == 'number' ||\n        (isObjectLike(value) && baseGetTag(value) == numberTag);\n    }\n\n    /**\n     * Checks if `value` is a plain object, that is, an object created by the\n     * `Object` constructor or one with a `[[Prototype]]` of `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.8.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * _.isPlainObject(new Foo);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     *\n     * _.isPlainObject(Object.create(null));\n     * // => true\n     */\n    function isPlainObject(value) {\n      if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n        return false;\n      }\n      var proto = getPrototype(value);\n      if (proto === null) {\n        return true;\n      }\n      var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n      return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n        funcToString.call(Ctor) == objectCtorString;\n    }\n\n    /**\n     * Checks if `value` is classified as a `RegExp` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     * @example\n     *\n     * _.isRegExp(/abc/);\n     * // => true\n     *\n     * _.isRegExp('/abc/');\n     * // => false\n     */\n    var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n\n    /**\n     * Checks if `value` is a safe integer. An integer is safe if it's an IEEE-754\n     * double precision number which isn't the result of a rounded unsafe integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isSafeInteger`](https://mdn.io/Number/isSafeInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a safe integer, else `false`.\n     * @example\n     *\n     * _.isSafeInteger(3);\n     * // => true\n     *\n     * _.isSafeInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isSafeInteger(Infinity);\n     * // => false\n     *\n     * _.isSafeInteger('3');\n     * // => false\n     */\n    function isSafeInteger(value) {\n      return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Set` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     * @example\n     *\n     * _.isSet(new Set);\n     * // => true\n     *\n     * _.isSet(new WeakSet);\n     * // => false\n     */\n    var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\n    /**\n     * Checks if `value` is classified as a `String` primitive or object.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n     * @example\n     *\n     * _.isString('abc');\n     * // => true\n     *\n     * _.isString(1);\n     * // => false\n     */\n    function isString(value) {\n      return typeof value == 'string' ||\n        (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Symbol` primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n     * @example\n     *\n     * _.isSymbol(Symbol.iterator);\n     * // => true\n     *\n     * _.isSymbol('abc');\n     * // => false\n     */\n    function isSymbol(value) {\n      return typeof value == 'symbol' ||\n        (isObjectLike(value) && baseGetTag(value) == symbolTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a typed array.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     * @example\n     *\n     * _.isTypedArray(new Uint8Array);\n     * // => true\n     *\n     * _.isTypedArray([]);\n     * // => false\n     */\n    var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     *\n     * _.isUndefined(null);\n     * // => false\n     */\n    function isUndefined(value) {\n      return value === undefined;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakMap` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak map, else `false`.\n     * @example\n     *\n     * _.isWeakMap(new WeakMap);\n     * // => true\n     *\n     * _.isWeakMap(new Map);\n     * // => false\n     */\n    function isWeakMap(value) {\n      return isObjectLike(value) && getTag(value) == weakMapTag;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakSet` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak set, else `false`.\n     * @example\n     *\n     * _.isWeakSet(new WeakSet);\n     * // => true\n     *\n     * _.isWeakSet(new Set);\n     * // => false\n     */\n    function isWeakSet(value) {\n      return isObjectLike(value) && baseGetTag(value) == weakSetTag;\n    }\n\n    /**\n     * Checks if `value` is less than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     * @see _.gt\n     * @example\n     *\n     * _.lt(1, 3);\n     * // => true\n     *\n     * _.lt(3, 3);\n     * // => false\n     *\n     * _.lt(3, 1);\n     * // => false\n     */\n    var lt = createRelationalOperation(baseLt);\n\n    /**\n     * Checks if `value` is less than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than or equal to\n     *  `other`, else `false`.\n     * @see _.gte\n     * @example\n     *\n     * _.lte(1, 3);\n     * // => true\n     *\n     * _.lte(3, 3);\n     * // => true\n     *\n     * _.lte(3, 1);\n     * // => false\n     */\n    var lte = createRelationalOperation(function(value, other) {\n      return value <= other;\n    });\n\n    /**\n     * Converts `value` to an array.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the converted array.\n     * @example\n     *\n     * _.toArray({ 'a': 1, 'b': 2 });\n     * // => [1, 2]\n     *\n     * _.toArray('abc');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toArray(1);\n     * // => []\n     *\n     * _.toArray(null);\n     * // => []\n     */\n    function toArray(value) {\n      if (!value) {\n        return [];\n      }\n      if (isArrayLike(value)) {\n        return isString(value) ? stringToArray(value) : copyArray(value);\n      }\n      if (symIterator && value[symIterator]) {\n        return iteratorToArray(value[symIterator]());\n      }\n      var tag = getTag(value),\n          func = tag == mapTag ? mapToArray : (tag == setTag ? setToArray : values);\n\n      return func(value);\n    }\n\n    /**\n     * Converts `value` to a finite number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.12.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted number.\n     * @example\n     *\n     * _.toFinite(3.2);\n     * // => 3.2\n     *\n     * _.toFinite(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toFinite(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toFinite('3.2');\n     * // => 3.2\n     */\n    function toFinite(value) {\n      if (!value) {\n        return value === 0 ? value : 0;\n      }\n      value = toNumber(value);\n      if (value === INFINITY || value === -INFINITY) {\n        var sign = (value < 0 ? -1 : 1);\n        return sign * MAX_INTEGER;\n      }\n      return value === value ? value : 0;\n    }\n\n    /**\n     * Converts `value` to an integer.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toInteger(3.2);\n     * // => 3\n     *\n     * _.toInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toInteger(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toInteger('3.2');\n     * // => 3\n     */\n    function toInteger(value) {\n      var result = toFinite(value),\n          remainder = result % 1;\n\n      return result === result ? (remainder ? result - remainder : result) : 0;\n    }\n\n    /**\n     * Converts `value` to an integer suitable for use as the length of an\n     * array-like object.\n     *\n     * **Note:** This method is based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toLength(3.2);\n     * // => 3\n     *\n     * _.toLength(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toLength(Infinity);\n     * // => 4294967295\n     *\n     * _.toLength('3.2');\n     * // => 3\n     */\n    function toLength(value) {\n      return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n    }\n\n    /**\n     * Converts `value` to a number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     * @example\n     *\n     * _.toNumber(3.2);\n     * // => 3.2\n     *\n     * _.toNumber(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toNumber(Infinity);\n     * // => Infinity\n     *\n     * _.toNumber('3.2');\n     * // => 3.2\n     */\n    function toNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n        value = isObject(other) ? (other + '') : other;\n      }\n      if (typeof value != 'string') {\n        return value === 0 ? value : +value;\n      }\n      value = baseTrim(value);\n      var isBinary = reIsBinary.test(value);\n      return (isBinary || reIsOctal.test(value))\n        ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n        : (reIsBadHex.test(value) ? NAN : +value);\n    }\n\n    /**\n     * Converts `value` to a plain object flattening inherited enumerable string\n     * keyed properties of `value` to own properties of the plain object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Object} Returns the converted plain object.\n     * @example\n     *\n     * function Foo() {\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.assign({ 'a': 1 }, new Foo);\n     * // => { 'a': 1, 'b': 2 }\n     *\n     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n     * // => { 'a': 1, 'b': 2, 'c': 3 }\n     */\n    function toPlainObject(value) {\n      return copyObject(value, keysIn(value));\n    }\n\n    /**\n     * Converts `value` to a safe integer. A safe integer can be compared and\n     * represented correctly.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toSafeInteger(3.2);\n     * // => 3\n     *\n     * _.toSafeInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toSafeInteger(Infinity);\n     * // => 9007199254740991\n     *\n     * _.toSafeInteger('3.2');\n     * // => 3\n     */\n    function toSafeInteger(value) {\n      return value\n        ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER)\n        : (value === 0 ? value : 0);\n    }\n\n    /**\n     * Converts `value` to a string. An empty string is returned for `null`\n     * and `undefined` values. The sign of `-0` is preserved.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.toString(null);\n     * // => ''\n     *\n     * _.toString(-0);\n     * // => '-0'\n     *\n     * _.toString([1, 2, 3]);\n     * // => '1,2,3'\n     */\n    function toString(value) {\n      return value == null ? '' : baseToString(value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Assigns own enumerable string keyed properties of source objects to the\n     * destination object. Source objects are applied from left to right.\n     * Subsequent sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object` and is loosely based on\n     * [`Object.assign`](https://mdn.io/Object/assign).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assignIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assign({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var assign = createAssigner(function(object, source) {\n      if (isPrototype(source) || isArrayLike(source)) {\n        copyObject(source, keys(source), object);\n        return;\n      }\n      for (var key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          assignValue(object, key, source[key]);\n        }\n      }\n    });\n\n    /**\n     * This method is like `_.assign` except that it iterates over own and\n     * inherited source properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extend\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assign\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n     */\n    var assignIn = createAssigner(function(object, source) {\n      copyObject(source, keysIn(source), object);\n    });\n\n    /**\n     * This method is like `_.assignIn` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extendWith\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignInWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keysIn(source), object, customizer);\n    });\n\n    /**\n     * This method is like `_.assign` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignInWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keys(source), object, customizer);\n    });\n\n    /**\n     * Creates an array of values corresponding to `paths` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Array} Returns the picked values.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _.at(object, ['a[0].b.c', 'a[1]']);\n     * // => [3, 4]\n     */\n    var at = flatRest(baseAt);\n\n    /**\n     * Creates an object that inherits from the `prototype` object. If a\n     * `properties` object is given, its own enumerable string keyed properties\n     * are assigned to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Object\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, {\n     *   'constructor': Circle\n     * });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties) {\n      var result = baseCreate(prototype);\n      return properties == null ? result : baseAssign(result, properties);\n    }\n\n    /**\n     * Assigns own and inherited enumerable string keyed properties of source\n     * objects to the destination object for all destination properties that\n     * resolve to `undefined`. Source objects are applied from left to right.\n     * Once a property is set, additional values of the same property are ignored.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaultsDeep\n     * @example\n     *\n     * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var defaults = baseRest(function(object, sources) {\n      object = Object(object);\n\n      var index = -1;\n      var length = sources.length;\n      var guard = length > 2 ? sources[2] : undefined;\n\n      if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n        length = 1;\n      }\n\n      while (++index < length) {\n        var source = sources[index];\n        var props = keysIn(source);\n        var propsIndex = -1;\n        var propsLength = props.length;\n\n        while (++propsIndex < propsLength) {\n          var key = props[propsIndex];\n          var value = object[key];\n\n          if (value === undefined ||\n              (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n            object[key] = source[key];\n          }\n        }\n      }\n\n      return object;\n    });\n\n    /**\n     * This method is like `_.defaults` except that it recursively assigns\n     * default properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaults\n     * @example\n     *\n     * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n     * // => { 'a': { 'b': 2, 'c': 3 } }\n     */\n    var defaultsDeep = baseRest(function(args) {\n      args.push(undefined, customDefaultsMerge);\n      return apply(mergeWith, undefined, args);\n    });\n\n    /**\n     * This method is like `_.find` except that it returns the key of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findKey(users, function(o) { return o.age < 40; });\n     * // => 'barney' (iteration order is not guaranteed)\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findKey(users, { 'age': 1, 'active': true });\n     * // => 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findKey(users, 'active');\n     * // => 'barney'\n     */\n    function findKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);\n    }\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements of\n     * a collection in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findLastKey(users, function(o) { return o.age < 40; });\n     * // => returns 'pebbles' assuming `_.findKey` returns 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastKey(users, { 'age': 36, 'active': true });\n     * // => 'barney'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastKey(users, 'active');\n     * // => 'pebbles'\n     */\n    function findLastKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);\n    }\n\n    /**\n     * Iterates over own and inherited enumerable string keyed properties of an\n     * object and invokes `iteratee` for each property. The iteratee is invoked\n     * with three arguments: (value, key, object). Iteratee functions may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forInRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forIn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).\n     */\n    function forIn(object, iteratee) {\n      return object == null\n        ? object\n        : baseFor(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * This method is like `_.forIn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forInRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'c', 'b', then 'a' assuming `_.forIn` logs 'a', 'b', then 'c'.\n     */\n    function forInRight(object, iteratee) {\n      return object == null\n        ? object\n        : baseForRight(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * Iterates over own enumerable string keyed properties of an object and\n     * invokes `iteratee` for each property. The iteratee is invoked with three\n     * arguments: (value, key, object). Iteratee functions may exit iteration\n     * early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwnRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forOwn(object, iteratee) {\n      return object && baseForOwn(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwnRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'b' then 'a' assuming `_.forOwn` logs 'a' then 'b'.\n     */\n    function forOwnRight(object, iteratee) {\n      return object && baseForOwnRight(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an array of function property names from own enumerable properties\n     * of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functionsIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functions(new Foo);\n     * // => ['a', 'b']\n     */\n    function functions(object) {\n      return object == null ? [] : baseFunctions(object, keys(object));\n    }\n\n    /**\n     * Creates an array of function property names from own and inherited\n     * enumerable properties of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functions\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functionsIn(new Foo);\n     * // => ['a', 'b', 'c']\n     */\n    function functionsIn(object) {\n      return object == null ? [] : baseFunctions(object, keysIn(object));\n    }\n\n    /**\n     * Gets the value at `path` of `object`. If the resolved value is\n     * `undefined`, the `defaultValue` is returned in its place.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.get(object, 'a[0].b.c');\n     * // => 3\n     *\n     * _.get(object, ['a', '0', 'b', 'c']);\n     * // => 3\n     *\n     * _.get(object, 'a.b.c', 'default');\n     * // => 'default'\n     */\n    function get(object, path, defaultValue) {\n      var result = object == null ? undefined : baseGet(object, path);\n      return result === undefined ? defaultValue : result;\n    }\n\n    /**\n     * Checks if `path` is a direct property of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = { 'a': { 'b': 2 } };\n     * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.has(object, 'a');\n     * // => true\n     *\n     * _.has(object, 'a.b');\n     * // => true\n     *\n     * _.has(object, ['a', 'b']);\n     * // => true\n     *\n     * _.has(other, 'a');\n     * // => false\n     */\n    function has(object, path) {\n      return object != null && hasPath(object, path, baseHas);\n    }\n\n    /**\n     * Checks if `path` is a direct or inherited property of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.hasIn(object, 'a');\n     * // => true\n     *\n     * _.hasIn(object, 'a.b');\n     * // => true\n     *\n     * _.hasIn(object, ['a', 'b']);\n     * // => true\n     *\n     * _.hasIn(object, 'b');\n     * // => false\n     */\n    function hasIn(object, path) {\n      return object != null && hasPath(object, path, baseHasIn);\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of `object`.\n     * If `object` contains duplicate values, subsequent values overwrite\n     * property assignments of previous values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invert(object);\n     * // => { '1': 'c', '2': 'b' }\n     */\n    var invert = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      result[value] = key;\n    }, constant(identity));\n\n    /**\n     * This method is like `_.invert` except that the inverted object is generated\n     * from the results of running each element of `object` thru `iteratee`. The\n     * corresponding inverted value of each inverted key is an array of keys\n     * responsible for generating the inverted value. The iteratee is invoked\n     * with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invertBy(object);\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     *\n     * _.invertBy(object, function(value) {\n     *   return 'group' + value;\n     * });\n     * // => { 'group1': ['a', 'c'], 'group2': ['b'] }\n     */\n    var invertBy = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      if (hasOwnProperty.call(result, value)) {\n        result[value].push(key);\n      } else {\n        result[value] = [key];\n      }\n    }, getIteratee);\n\n    /**\n     * Invokes the method at `path` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': [1, 2, 3, 4] } }] };\n     *\n     * _.invoke(object, 'a[0].b.c.slice', 1, 3);\n     * // => [2, 3]\n     */\n    var invoke = baseRest(baseInvoke);\n\n    /**\n     * Creates an array of the own enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects. See the\n     * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * for more details.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keys(new Foo);\n     * // => ['a', 'b'] (iteration order is not guaranteed)\n     *\n     * _.keys('hi');\n     * // => ['0', '1']\n     */\n    function keys(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keysIn(new Foo);\n     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n     */\n    function keysIn(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n    }\n\n    /**\n     * The opposite of `_.mapValues`; this method creates an object with the\n     * same values as `object` and keys generated by running each own enumerable\n     * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n     * with three arguments: (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapValues\n     * @example\n     *\n     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   return key + value;\n     * });\n     * // => { 'a1': 1, 'b2': 2 }\n     */\n    function mapKeys(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, iteratee(value, key, object), value);\n      });\n      return result;\n    }\n\n    /**\n     * Creates an object with the same keys as `object` and values generated\n     * by running each own enumerable string keyed property of `object` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapKeys\n     * @example\n     *\n     * var users = {\n     *   'fred':    { 'user': 'fred',    'age': 40 },\n     *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n     * };\n     *\n     * _.mapValues(users, function(o) { return o.age; });\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.mapValues(users, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     */\n    function mapValues(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, key, iteratee(value, key, object));\n      });\n      return result;\n    }\n\n    /**\n     * This method is like `_.assign` except that it recursively merges own and\n     * inherited enumerable string keyed properties of source objects into the\n     * destination object. Source properties that resolve to `undefined` are\n     * skipped if a destination value exists. Array and plain object properties\n     * are merged recursively. Other objects and value types are overridden by\n     * assignment. Source objects are applied from left to right. Subsequent\n     * sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {\n     *   'a': [{ 'b': 2 }, { 'd': 4 }]\n     * };\n     *\n     * var other = {\n     *   'a': [{ 'c': 3 }, { 'e': 5 }]\n     * };\n     *\n     * _.merge(object, other);\n     * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n     */\n    var merge = createAssigner(function(object, source, srcIndex) {\n      baseMerge(object, source, srcIndex);\n    });\n\n    /**\n     * This method is like `_.merge` except that it accepts `customizer` which\n     * is invoked to produce the merged values of the destination and source\n     * properties. If `customizer` returns `undefined`, merging is handled by the\n     * method instead. The `customizer` is invoked with six arguments:\n     * (objValue, srcValue, key, object, source, stack).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (_.isArray(objValue)) {\n     *     return objValue.concat(srcValue);\n     *   }\n     * }\n     *\n     * var object = { 'a': [1], 'b': [2] };\n     * var other = { 'a': [3], 'b': [4] };\n     *\n     * _.mergeWith(object, other, customizer);\n     * // => { 'a': [1, 3], 'b': [2, 4] }\n     */\n    var mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n      baseMerge(object, source, srcIndex, customizer);\n    });\n\n    /**\n     * The opposite of `_.pick`; this method creates an object composed of the\n     * own and inherited enumerable property paths of `object` that are not omitted.\n     *\n     * **Note:** This method is considerably slower than `_.pick`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to omit.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omit(object, ['a', 'c']);\n     * // => { 'b': '2' }\n     */\n    var omit = flatRest(function(object, paths) {\n      var result = {};\n      if (object == null) {\n        return result;\n      }\n      var isDeep = false;\n      paths = arrayMap(paths, function(path) {\n        path = castPath(path, object);\n        isDeep || (isDeep = path.length > 1);\n        return path;\n      });\n      copyObject(object, getAllKeysIn(object), result);\n      if (isDeep) {\n        result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n      }\n      var length = paths.length;\n      while (length--) {\n        baseUnset(result, paths[length]);\n      }\n      return result;\n    });\n\n    /**\n     * The opposite of `_.pickBy`; this method creates an object composed of\n     * the own and inherited enumerable string keyed properties of `object` that\n     * `predicate` doesn't return truthy for. The predicate is invoked with two\n     * arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omitBy(object, _.isNumber);\n     * // => { 'b': '2' }\n     */\n    function omitBy(object, predicate) {\n      return pickBy(object, negate(getIteratee(predicate)));\n    }\n\n    /**\n     * Creates an object composed of the picked `object` properties.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pick(object, ['a', 'c']);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var pick = flatRest(function(object, paths) {\n      return object == null ? {} : basePick(object, paths);\n    });\n\n    /**\n     * Creates an object composed of the `object` properties `predicate` returns\n     * truthy for. The predicate is invoked with two arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pickBy(object, _.isNumber);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    function pickBy(object, predicate) {\n      if (object == null) {\n        return {};\n      }\n      var props = arrayMap(getAllKeysIn(object), function(prop) {\n        return [prop];\n      });\n      predicate = getIteratee(predicate);\n      return basePickBy(object, props, function(value, path) {\n        return predicate(value, path[0]);\n      });\n    }\n\n    /**\n     * This method is like `_.get` except that if the resolved value is a\n     * function it's invoked with the `this` binding of its parent object and\n     * its result is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to resolve.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n     *\n     * _.result(object, 'a[0].b.c1');\n     * // => 3\n     *\n     * _.result(object, 'a[0].b.c2');\n     * // => 4\n     *\n     * _.result(object, 'a[0].b.c3', 'default');\n     * // => 'default'\n     *\n     * _.result(object, 'a[0].b.c3', _.constant('default'));\n     * // => 'default'\n     */\n    function result(object, path, defaultValue) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length;\n\n      // Ensure the loop is entered when path is empty.\n      if (!length) {\n        length = 1;\n        object = undefined;\n      }\n      while (++index < length) {\n        var value = object == null ? undefined : object[toKey(path[index])];\n        if (value === undefined) {\n          index = length;\n          value = defaultValue;\n        }\n        object = isFunction(value) ? value.call(object) : value;\n      }\n      return object;\n    }\n\n    /**\n     * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n     * it's created. Arrays are created for missing index properties while objects\n     * are created for all other missing properties. Use `_.setWith` to customize\n     * `path` creation.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.set(object, 'a[0].b.c', 4);\n     * console.log(object.a[0].b.c);\n     * // => 4\n     *\n     * _.set(object, ['x', '0', 'y', 'z'], 5);\n     * console.log(object.x[0].y.z);\n     * // => 5\n     */\n    function set(object, path, value) {\n      return object == null ? object : baseSet(object, path, value);\n    }\n\n    /**\n     * This method is like `_.set` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.setWith(object, '[0][1]', 'a', Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function setWith(object, path, value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseSet(object, path, value, customizer);\n    }\n\n    /**\n     * Creates an array of own enumerable string keyed-value pairs for `object`\n     * which can be consumed by `_.fromPairs`. If `object` is a map or set, its\n     * entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entries\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairs(new Foo);\n     * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n     */\n    var toPairs = createToPairs(keys);\n\n    /**\n     * Creates an array of own and inherited enumerable string keyed-value pairs\n     * for `object` which can be consumed by `_.fromPairs`. If `object` is a map\n     * or set, its entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entriesIn\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairsIn(new Foo);\n     * // => [['a', 1], ['b', 2], ['c', 3]] (iteration order is not guaranteed)\n     */\n    var toPairsIn = createToPairs(keysIn);\n\n    /**\n     * An alternative to `_.reduce`; this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own\n     * enumerable string keyed properties thru `iteratee`, with each invocation\n     * potentially mutating the `accumulator` object. If `accumulator` is not\n     * provided, a new object with the same `[[Prototype]]` will be used. The\n     * iteratee is invoked with four arguments: (accumulator, value, key, object).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.transform([2, 3, 4], function(result, n) {\n     *   result.push(n *= n);\n     *   return n % 2 == 0;\n     * }, []);\n     * // => [4, 9]\n     *\n     * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     */\n    function transform(object, iteratee, accumulator) {\n      var isArr = isArray(object),\n          isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n      iteratee = getIteratee(iteratee, 4);\n      if (accumulator == null) {\n        var Ctor = object && object.constructor;\n        if (isArrLike) {\n          accumulator = isArr ? new Ctor : [];\n        }\n        else if (isObject(object)) {\n          accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n        }\n        else {\n          accumulator = {};\n        }\n      }\n      (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n        return iteratee(accumulator, value, index, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * Removes the property at `path` of `object`.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n     * _.unset(object, 'a[0].b.c');\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     *\n     * _.unset(object, ['a', '0', 'b', 'c']);\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     */\n    function unset(object, path) {\n      return object == null ? true : baseUnset(object, path);\n    }\n\n    /**\n     * This method is like `_.set` except that accepts `updater` to produce the\n     * value to set. Use `_.updateWith` to customize `path` creation. The `updater`\n     * is invoked with one argument: (value).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.update(object, 'a[0].b.c', function(n) { return n * n; });\n     * console.log(object.a[0].b.c);\n     * // => 9\n     *\n     * _.update(object, 'x[0].y.z', function(n) { return n ? n + 1 : 0; });\n     * console.log(object.x[0].y.z);\n     * // => 0\n     */\n    function update(object, path, updater) {\n      return object == null ? object : baseUpdate(object, path, castFunction(updater));\n    }\n\n    /**\n     * This method is like `_.update` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.updateWith(object, '[0][1]', _.constant('a'), Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function updateWith(object, path, updater, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);\n    }\n\n    /**\n     * Creates an array of the own enumerable string keyed property values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.values(new Foo);\n     * // => [1, 2] (iteration order is not guaranteed)\n     *\n     * _.values('hi');\n     * // => ['h', 'i']\n     */\n    function values(object) {\n      return object == null ? [] : baseValues(object, keys(object));\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable string keyed property\n     * values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.valuesIn(new Foo);\n     * // => [1, 2, 3] (iteration order is not guaranteed)\n     */\n    function valuesIn(object) {\n      return object == null ? [] : baseValues(object, keysIn(object));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Clamps `number` within the inclusive `lower` and `upper` bounds.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Number\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     * @example\n     *\n     * _.clamp(-10, -5, 5);\n     * // => -5\n     *\n     * _.clamp(10, -5, 5);\n     * // => 5\n     */\n    function clamp(number, lower, upper) {\n      if (upper === undefined) {\n        upper = lower;\n        lower = undefined;\n      }\n      if (upper !== undefined) {\n        upper = toNumber(upper);\n        upper = upper === upper ? upper : 0;\n      }\n      if (lower !== undefined) {\n        lower = toNumber(lower);\n        lower = lower === lower ? lower : 0;\n      }\n      return baseClamp(toNumber(number), lower, upper);\n    }\n\n    /**\n     * Checks if `n` is between `start` and up to, but not including, `end`. If\n     * `end` is not specified, it's set to `start` with `start` then set to `0`.\n     * If `start` is greater than `end` the params are swapped to support\n     * negative ranges.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.3.0\n     * @category Number\n     * @param {number} number The number to check.\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     * @see _.range, _.rangeRight\n     * @example\n     *\n     * _.inRange(3, 2, 4);\n     * // => true\n     *\n     * _.inRange(4, 8);\n     * // => true\n     *\n     * _.inRange(4, 2);\n     * // => false\n     *\n     * _.inRange(2, 2);\n     * // => false\n     *\n     * _.inRange(1.2, 2);\n     * // => true\n     *\n     * _.inRange(5.2, 4);\n     * // => false\n     *\n     * _.inRange(-3, -2, -6);\n     * // => true\n     */\n    function inRange(number, start, end) {\n      start = toFinite(start);\n      if (end === undefined) {\n        end = start;\n        start = 0;\n      } else {\n        end = toFinite(end);\n      }\n      number = toNumber(number);\n      return baseInRange(number, start, end);\n    }\n\n    /**\n     * Produces a random number between the inclusive `lower` and `upper` bounds.\n     * If only one argument is provided a number between `0` and the given number\n     * is returned. If `floating` is `true`, or either `lower` or `upper` are\n     * floats, a floating-point number is returned instead of an integer.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Number\n     * @param {number} [lower=0] The lower bound.\n     * @param {number} [upper=1] The upper bound.\n     * @param {boolean} [floating] Specify returning a floating-point number.\n     * @returns {number} Returns the random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(lower, upper, floating) {\n      if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {\n        upper = floating = undefined;\n      }\n      if (floating === undefined) {\n        if (typeof upper == 'boolean') {\n          floating = upper;\n          upper = undefined;\n        }\n        else if (typeof lower == 'boolean') {\n          floating = lower;\n          lower = undefined;\n        }\n      }\n      if (lower === undefined && upper === undefined) {\n        lower = 0;\n        upper = 1;\n      }\n      else {\n        lower = toFinite(lower);\n        if (upper === undefined) {\n          upper = lower;\n          lower = 0;\n        } else {\n          upper = toFinite(upper);\n        }\n      }\n      if (lower > upper) {\n        var temp = lower;\n        lower = upper;\n        upper = temp;\n      }\n      if (floating || lower % 1 || upper % 1) {\n        var rand = nativeRandom();\n        return nativeMin(lower + (rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1)))), upper);\n      }\n      return baseRandom(lower, upper);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the camel cased string.\n     * @example\n     *\n     * _.camelCase('Foo Bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('--foo-bar--');\n     * // => 'fooBar'\n     *\n     * _.camelCase('__FOO_BAR__');\n     * // => 'fooBar'\n     */\n    var camelCase = createCompounder(function(result, word, index) {\n      word = word.toLowerCase();\n      return result + (index ? capitalize(word) : word);\n    });\n\n    /**\n     * Converts the first character of `string` to upper case and the remaining\n     * to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to capitalize.\n     * @returns {string} Returns the capitalized string.\n     * @example\n     *\n     * _.capitalize('FRED');\n     * // => 'Fred'\n     */\n    function capitalize(string) {\n      return upperFirst(toString(string).toLowerCase());\n    }\n\n    /**\n     * Deburrs `string` by converting\n     * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n     * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n     * letters to basic Latin letters and removing\n     * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to deburr.\n     * @returns {string} Returns the deburred string.\n     * @example\n     *\n     * _.deburr('dj vu');\n     * // => 'deja vu'\n     */\n    function deburr(string) {\n      string = toString(string);\n      return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n    }\n\n    /**\n     * Checks if `string` ends with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=string.length] The position to search up to.\n     * @returns {boolean} Returns `true` if `string` ends with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.endsWith('abc', 'c');\n     * // => true\n     *\n     * _.endsWith('abc', 'b');\n     * // => false\n     *\n     * _.endsWith('abc', 'b', 2);\n     * // => true\n     */\n    function endsWith(string, target, position) {\n      string = toString(string);\n      target = baseToString(target);\n\n      var length = string.length;\n      position = position === undefined\n        ? length\n        : baseClamp(toInteger(position), 0, length);\n\n      var end = position;\n      position -= target.length;\n      return position >= 0 && string.slice(position, end) == target;\n    }\n\n    /**\n     * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n     * corresponding HTML entities.\n     *\n     * **Note:** No other characters are escaped. To escape additional\n     * characters use a third-party library like [_he_](https://mths.be/he).\n     *\n     * Though the \">\" character is escaped for symmetry, characters like\n     * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n     * unless they're part of a tag or unquoted attribute value. See\n     * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n     * (under \"semi-related fun fact\") for more details.\n     *\n     * When working with HTML you should always\n     * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n     * XSS vectors.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('fred, barney, & pebbles');\n     * // => 'fred, barney, &amp; pebbles'\n     */\n    function escape(string) {\n      string = toString(string);\n      return (string && reHasUnescapedHtml.test(string))\n        ? string.replace(reUnescapedHtml, escapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n     * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escapeRegExp('[lodash](https://lodash.com/)');\n     * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n     */\n    function escapeRegExp(string) {\n      string = toString(string);\n      return (string && reHasRegExpChar.test(string))\n        ? string.replace(reRegExpChar, '\\\\$&')\n        : string;\n    }\n\n    /**\n     * Converts `string` to\n     * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the kebab cased string.\n     * @example\n     *\n     * _.kebabCase('Foo Bar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('fooBar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('__FOO_BAR__');\n     * // => 'foo-bar'\n     */\n    var kebabCase = createCompounder(function(result, word, index) {\n      return result + (index ? '-' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts `string`, as space separated words, to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.lowerCase('--Foo-Bar--');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('fooBar');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('__FOO_BAR__');\n     * // => 'foo bar'\n     */\n    var lowerCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts the first character of `string` to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.lowerFirst('Fred');\n     * // => 'fred'\n     *\n     * _.lowerFirst('FRED');\n     * // => 'fRED'\n     */\n    var lowerFirst = createCaseFirst('toLowerCase');\n\n    /**\n     * Pads `string` on the left and right sides if it's shorter than `length`.\n     * Padding characters are truncated if they can't be evenly divided by `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.pad('abc', 8);\n     * // => '  abc   '\n     *\n     * _.pad('abc', 8, '_-');\n     * // => '_-abc_-_'\n     *\n     * _.pad('abc', 3);\n     * // => 'abc'\n     */\n    function pad(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      if (!length || strLength >= length) {\n        return string;\n      }\n      var mid = (length - strLength) / 2;\n      return (\n        createPadding(nativeFloor(mid), chars) +\n        string +\n        createPadding(nativeCeil(mid), chars)\n      );\n    }\n\n    /**\n     * Pads `string` on the right side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padEnd('abc', 6);\n     * // => 'abc   '\n     *\n     * _.padEnd('abc', 6, '_-');\n     * // => 'abc_-_'\n     *\n     * _.padEnd('abc', 3);\n     * // => 'abc'\n     */\n    function padEnd(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (string + createPadding(length - strLength, chars))\n        : string;\n    }\n\n    /**\n     * Pads `string` on the left side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padStart('abc', 6);\n     * // => '   abc'\n     *\n     * _.padStart('abc', 6, '_-');\n     * // => '_-_abc'\n     *\n     * _.padStart('abc', 3);\n     * // => 'abc'\n     */\n    function padStart(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (createPadding(length - strLength, chars) + string)\n        : string;\n    }\n\n    /**\n     * Converts `string` to an integer of the specified radix. If `radix` is\n     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a\n     * hexadecimal, in which case a `radix` of `16` is used.\n     *\n     * **Note:** This method aligns with the\n     * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category String\n     * @param {string} string The string to convert.\n     * @param {number} [radix=10] The radix to interpret `value` by.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     *\n     * _.map(['6', '08', '10'], _.parseInt);\n     * // => [6, 8, 10]\n     */\n    function parseInt(string, radix, guard) {\n      if (guard || radix == null) {\n        radix = 0;\n      } else if (radix) {\n        radix = +radix;\n      }\n      return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);\n    }\n\n    /**\n     * Repeats the given string `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to repeat.\n     * @param {number} [n=1] The number of times to repeat the string.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the repeated string.\n     * @example\n     *\n     * _.repeat('*', 3);\n     * // => '***'\n     *\n     * _.repeat('abc', 2);\n     * // => 'abcabc'\n     *\n     * _.repeat('abc', 0);\n     * // => ''\n     */\n    function repeat(string, n, guard) {\n      if ((guard ? isIterateeCall(string, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      return baseRepeat(toString(string), n);\n    }\n\n    /**\n     * Replaces matches for `pattern` in `string` with `replacement`.\n     *\n     * **Note:** This method is based on\n     * [`String#replace`](https://mdn.io/String/replace).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to modify.\n     * @param {RegExp|string} pattern The pattern to replace.\n     * @param {Function|string} replacement The match replacement.\n     * @returns {string} Returns the modified string.\n     * @example\n     *\n     * _.replace('Hi Fred', 'Fred', 'Barney');\n     * // => 'Hi Barney'\n     */\n    function replace() {\n      var args = arguments,\n          string = toString(args[0]);\n\n      return args.length < 3 ? string : string.replace(args[1], args[2]);\n    }\n\n    /**\n     * Converts `string` to\n     * [snake case](https://en.wikipedia.org/wiki/Snake_case).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the snake cased string.\n     * @example\n     *\n     * _.snakeCase('Foo Bar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('fooBar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('--FOO-BAR--');\n     * // => 'foo_bar'\n     */\n    var snakeCase = createCompounder(function(result, word, index) {\n      return result + (index ? '_' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Splits `string` by `separator`.\n     *\n     * **Note:** This method is based on\n     * [`String#split`](https://mdn.io/String/split).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to split.\n     * @param {RegExp|string} separator The separator pattern to split by.\n     * @param {number} [limit] The length to truncate results to.\n     * @returns {Array} Returns the string segments.\n     * @example\n     *\n     * _.split('a-b-c', '-', 2);\n     * // => ['a', 'b']\n     */\n    function split(string, separator, limit) {\n      if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {\n        separator = limit = undefined;\n      }\n      limit = limit === undefined ? MAX_ARRAY_LENGTH : limit >>> 0;\n      if (!limit) {\n        return [];\n      }\n      string = toString(string);\n      if (string && (\n            typeof separator == 'string' ||\n            (separator != null && !isRegExp(separator))\n          )) {\n        separator = baseToString(separator);\n        if (!separator && hasUnicode(string)) {\n          return castSlice(stringToArray(string), 0, limit);\n        }\n      }\n      return string.split(separator, limit);\n    }\n\n    /**\n     * Converts `string` to\n     * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.1.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the start cased string.\n     * @example\n     *\n     * _.startCase('--foo-bar--');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('fooBar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('__FOO_BAR__');\n     * // => 'FOO BAR'\n     */\n    var startCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + upperFirst(word);\n    });\n\n    /**\n     * Checks if `string` starts with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=0] The position to search from.\n     * @returns {boolean} Returns `true` if `string` starts with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.startsWith('abc', 'a');\n     * // => true\n     *\n     * _.startsWith('abc', 'b');\n     * // => false\n     *\n     * _.startsWith('abc', 'b', 1);\n     * // => true\n     */\n    function startsWith(string, target, position) {\n      string = toString(string);\n      position = position == null\n        ? 0\n        : baseClamp(toInteger(position), 0, string.length);\n\n      target = baseToString(target);\n      return string.slice(position, position + target.length) == target;\n    }\n\n    /**\n     * Creates a compiled template function that can interpolate data properties\n     * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n     * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n     * properties may be accessed as free variables in the template. If a setting\n     * object is given, it takes precedence over `_.templateSettings` values.\n     *\n     * **Note:** In the development build `_.template` utilizes\n     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n     * for easier debugging.\n     *\n     * For more information on precompiling templates see\n     * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n     *\n     * For more information on Chrome extension sandboxes see\n     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The template string.\n     * @param {Object} [options={}] The options object.\n     * @param {RegExp} [options.escape=_.templateSettings.escape]\n     *  The HTML \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]\n     *  The \"evaluate\" delimiter.\n     * @param {Object} [options.imports=_.templateSettings.imports]\n     *  An object to import into the template as free variables.\n     * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]\n     *  The \"interpolate\" delimiter.\n     * @param {string} [options.sourceURL='lodash.templateSources[n]']\n     *  The sourceURL of the compiled template.\n     * @param {string} [options.variable='obj']\n     *  The data object variable name.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the compiled template function.\n     * @example\n     *\n     * // Use the \"interpolate\" delimiter to create a compiled template.\n     * var compiled = _.template('hello <%= user %>!');\n     * compiled({ 'user': 'fred' });\n     * // => 'hello fred!'\n     *\n     * // Use the HTML \"escape\" delimiter to escape data property values.\n     * var compiled = _.template('<b><%- value %></b>');\n     * compiled({ 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // Use the \"evaluate\" delimiter to execute JavaScript and generate HTML.\n     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the internal `print` function in \"evaluate\" delimiters.\n     * var compiled = _.template('<% print(\"hello \" + user); %>!');\n     * compiled({ 'user': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // Use the ES template literal delimiter as an \"interpolate\" delimiter.\n     * // Disable support by replacing the \"interpolate\" delimiter.\n     * var compiled = _.template('hello ${ user }!');\n     * compiled({ 'user': 'pebbles' });\n     * // => 'hello pebbles!'\n     *\n     * // Use backslashes to treat delimiters as plain text.\n     * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n     * compiled({ 'value': 'ignored' });\n     * // => '<%- value %>'\n     *\n     * // Use the `imports` option to import `jQuery` as `jq`.\n     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the `sourceURL` option to specify a custom sourceURL for the template.\n     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => Find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector.\n     *\n     * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.\n     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     * //   var __t, __p = '';\n     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n     * //   return __p;\n     * // }\n     *\n     * // Use custom template delimiters.\n     * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n     * var compiled = _.template('hello {{ user }}!');\n     * compiled({ 'user': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // Use the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and stack traces.\n     * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(string, options, guard) {\n      // Based on John Resig's `tmpl` implementation\n      // (http://ejohn.org/blog/javascript-micro-templating/)\n      // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n      var settings = lodash.templateSettings;\n\n      if (guard && isIterateeCall(string, options, guard)) {\n        options = undefined;\n      }\n      string = toString(string);\n      options = assignInWith({}, options, settings, customDefaultsAssignIn);\n\n      var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),\n          importsKeys = keys(imports),\n          importsValues = baseValues(imports, importsKeys);\n\n      var isEscaping,\n          isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // Compile the regexp to match each delimiter.\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      // Use a sourceURL for easier debugging.\n      // The sourceURL gets injected into the source that's eval-ed, so be careful\n      // to normalize all kinds of whitespace, so e.g. newlines (and unicode versions of it) can't sneak in\n      // and escape the comment, thus injecting code that gets evaled.\n      var sourceURL = '//# sourceURL=' +\n        (hasOwnProperty.call(options, 'sourceURL')\n          ? (options.sourceURL + '').replace(/\\s/g, ' ')\n          : ('lodash.templateSources[' + (++templateCounter) + ']')\n        ) + '\\n';\n\n      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // Escape characters that can't be included in string literals.\n        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // Replace delimiters with snippets.\n        if (escapeValue) {\n          isEscaping = true;\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // The JS engine embedded in Adobe products needs `match` returned in\n        // order to produce the correct `offset` value.\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // If `variable` is not specified wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain.\n      var variable = hasOwnProperty.call(options, 'variable') && options.variable;\n      if (!variable) {\n        source = 'with (obj) {\\n' + source + '\\n}\\n';\n      }\n      // Throw an error if a forbidden character was found in `variable`, to prevent\n      // potential command injection attacks.\n      else if (reForbiddenIdentifierChars.test(variable)) {\n        throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT);\n      }\n\n      // Cleanup code by stripping empty strings.\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // Frame code as the function body.\n      source = 'function(' + (variable || 'obj') + ') {\\n' +\n        (variable\n          ? ''\n          : 'obj || (obj = {});\\n'\n        ) +\n        \"var __t, __p = ''\" +\n        (isEscaping\n           ? ', __e = _.escape'\n           : ''\n        ) +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      var result = attempt(function() {\n        return Function(importsKeys, sourceURL + 'return ' + source)\n          .apply(undefined, importsValues);\n      });\n\n      // Provide the compiled function's source by its `toString` method or\n      // the `source` property as a convenience for inlining compiled templates.\n      result.source = source;\n      if (isError(result)) {\n        throw result;\n      }\n      return result;\n    }\n\n    /**\n     * Converts `string`, as a whole, to lower case just like\n     * [String#toLowerCase](https://mdn.io/toLowerCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.toLower('--Foo-Bar--');\n     * // => '--foo-bar--'\n     *\n     * _.toLower('fooBar');\n     * // => 'foobar'\n     *\n     * _.toLower('__FOO_BAR__');\n     * // => '__foo_bar__'\n     */\n    function toLower(value) {\n      return toString(value).toLowerCase();\n    }\n\n    /**\n     * Converts `string`, as a whole, to upper case just like\n     * [String#toUpperCase](https://mdn.io/toUpperCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.toUpper('--foo-bar--');\n     * // => '--FOO-BAR--'\n     *\n     * _.toUpper('fooBar');\n     * // => 'FOOBAR'\n     *\n     * _.toUpper('__foo_bar__');\n     * // => '__FOO_BAR__'\n     */\n    function toUpper(value) {\n      return toString(value).toUpperCase();\n    }\n\n    /**\n     * Removes leading and trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trim('  abc  ');\n     * // => 'abc'\n     *\n     * _.trim('-_-abc-_-', '_-');\n     * // => 'abc'\n     *\n     * _.map(['  foo  ', '  bar  '], _.trim);\n     * // => ['foo', 'bar']\n     */\n    function trim(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return baseTrim(string);\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          chrSymbols = stringToArray(chars),\n          start = charsStartIndex(strSymbols, chrSymbols),\n          end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n      return castSlice(strSymbols, start, end).join('');\n    }\n\n    /**\n     * Removes trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimEnd('  abc  ');\n     * // => '  abc'\n     *\n     * _.trimEnd('-_-abc-_-', '_-');\n     * // => '-_-abc'\n     */\n    function trimEnd(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.slice(0, trimmedEndIndex(string) + 1);\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;\n\n      return castSlice(strSymbols, 0, end).join('');\n    }\n\n    /**\n     * Removes leading whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimStart('  abc  ');\n     * // => 'abc  '\n     *\n     * _.trimStart('-_-abc-_-', '_-');\n     * // => 'abc-_-'\n     */\n    function trimStart(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrimStart, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          start = charsStartIndex(strSymbols, stringToArray(chars));\n\n      return castSlice(strSymbols, start).join('');\n    }\n\n    /**\n     * Truncates `string` if it's longer than the given maximum string length.\n     * The last characters of the truncated string are replaced with the omission\n     * string which defaults to \"...\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to truncate.\n     * @param {Object} [options={}] The options object.\n     * @param {number} [options.length=30] The maximum string length.\n     * @param {string} [options.omission='...'] The string to indicate text is omitted.\n     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.\n     * @returns {string} Returns the truncated string.\n     * @example\n     *\n     * _.truncate('hi-diddly-ho there, neighborino');\n     * // => 'hi-diddly-ho there, neighbo...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': ' '\n     * });\n     * // => 'hi-diddly-ho there,...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': /,? +/\n     * });\n     * // => 'hi-diddly-ho there...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'omission': ' [...]'\n     * });\n     * // => 'hi-diddly-ho there, neig [...]'\n     */\n    function truncate(string, options) {\n      var length = DEFAULT_TRUNC_LENGTH,\n          omission = DEFAULT_TRUNC_OMISSION;\n\n      if (isObject(options)) {\n        var separator = 'separator' in options ? options.separator : separator;\n        length = 'length' in options ? toInteger(options.length) : length;\n        omission = 'omission' in options ? baseToString(options.omission) : omission;\n      }\n      string = toString(string);\n\n      var strLength = string.length;\n      if (hasUnicode(string)) {\n        var strSymbols = stringToArray(string);\n        strLength = strSymbols.length;\n      }\n      if (length >= strLength) {\n        return string;\n      }\n      var end = length - stringSize(omission);\n      if (end < 1) {\n        return omission;\n      }\n      var result = strSymbols\n        ? castSlice(strSymbols, 0, end).join('')\n        : string.slice(0, end);\n\n      if (separator === undefined) {\n        return result + omission;\n      }\n      if (strSymbols) {\n        end += (result.length - end);\n      }\n      if (isRegExp(separator)) {\n        if (string.slice(end).search(separator)) {\n          var match,\n              substring = result;\n\n          if (!separator.global) {\n            separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');\n          }\n          separator.lastIndex = 0;\n          while ((match = separator.exec(substring))) {\n            var newEnd = match.index;\n          }\n          result = result.slice(0, newEnd === undefined ? end : newEnd);\n        }\n      } else if (string.indexOf(baseToString(separator), end) != end) {\n        var index = result.lastIndexOf(separator);\n        if (index > -1) {\n          result = result.slice(0, index);\n        }\n      }\n      return result + omission;\n    }\n\n    /**\n     * The inverse of `_.escape`; this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n     * their corresponding characters.\n     *\n     * **Note:** No other HTML entities are unescaped. To unescape additional\n     * HTML entities use a third-party library like [_he_](https://mths.be/he).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.6.0\n     * @category String\n     * @param {string} [string=''] The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('fred, barney, &amp; pebbles');\n     * // => 'fred, barney, & pebbles'\n     */\n    function unescape(string) {\n      string = toString(string);\n      return (string && reHasEscapedHtml.test(string))\n        ? string.replace(reEscapedHtml, unescapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Converts `string`, as space separated words, to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.upperCase('--foo-bar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('fooBar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('__foo_bar__');\n     * // => 'FOO BAR'\n     */\n    var upperCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toUpperCase();\n    });\n\n    /**\n     * Converts the first character of `string` to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.upperFirst('fred');\n     * // => 'Fred'\n     *\n     * _.upperFirst('FRED');\n     * // => 'FRED'\n     */\n    var upperFirst = createCaseFirst('toUpperCase');\n\n    /**\n     * Splits `string` into an array of its words.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {RegExp|string} [pattern] The pattern to match words.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the words of `string`.\n     * @example\n     *\n     * _.words('fred, barney, & pebbles');\n     * // => ['fred', 'barney', 'pebbles']\n     *\n     * _.words('fred, barney, & pebbles', /[^, ]+/g);\n     * // => ['fred', 'barney', '&', 'pebbles']\n     */\n    function words(string, pattern, guard) {\n      string = toString(string);\n      pattern = guard ? undefined : pattern;\n\n      if (pattern === undefined) {\n        return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n      }\n      return string.match(pattern) || [];\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Attempts to invoke `func`, returning either the result or the caught error\n     * object. Any additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Function} func The function to attempt.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {*} Returns the `func` result or error object.\n     * @example\n     *\n     * // Avoid throwing errors for invalid selectors.\n     * var elements = _.attempt(function(selector) {\n     *   return document.querySelectorAll(selector);\n     * }, '>_>');\n     *\n     * if (_.isError(elements)) {\n     *   elements = [];\n     * }\n     */\n    var attempt = baseRest(function(func, args) {\n      try {\n        return apply(func, undefined, args);\n      } catch (e) {\n        return isError(e) ? e : new Error(e);\n      }\n    });\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method.\n     *\n     * **Note:** This method doesn't set the \"length\" property of bound functions.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...(string|string[])} methodNames The object method names to bind.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'click': function() {\n     *     console.log('clicked ' + this.label);\n     *   }\n     * };\n     *\n     * _.bindAll(view, ['click']);\n     * jQuery(element).on('click', view.click);\n     * // => Logs 'clicked docs' when clicked.\n     */\n    var bindAll = flatRest(function(object, methodNames) {\n      arrayEach(methodNames, function(key) {\n        key = toKey(key);\n        baseAssignValue(object, key, bind(object[key], object));\n      });\n      return object;\n    });\n\n    /**\n     * Creates a function that iterates over `pairs` and invokes the corresponding\n     * function of the first predicate to return truthy. The predicate-function\n     * pairs are invoked with the `this` binding and arguments of the created\n     * function.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Array} pairs The predicate-function pairs.\n     * @returns {Function} Returns the new composite function.\n     * @example\n     *\n     * var func = _.cond([\n     *   [_.matches({ 'a': 1 }),           _.constant('matches A')],\n     *   [_.conforms({ 'b': _.isNumber }), _.constant('matches B')],\n     *   [_.stubTrue,                      _.constant('no match')]\n     * ]);\n     *\n     * func({ 'a': 1, 'b': 2 });\n     * // => 'matches A'\n     *\n     * func({ 'a': 0, 'b': 1 });\n     * // => 'matches B'\n     *\n     * func({ 'a': '1', 'b': '2' });\n     * // => 'no match'\n     */\n    function cond(pairs) {\n      var length = pairs == null ? 0 : pairs.length,\n          toIteratee = getIteratee();\n\n      pairs = !length ? [] : arrayMap(pairs, function(pair) {\n        if (typeof pair[1] != 'function') {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n        return [toIteratee(pair[0]), pair[1]];\n      });\n\n      return baseRest(function(args) {\n        var index = -1;\n        while (++index < length) {\n          var pair = pairs[index];\n          if (apply(pair[0], this, args)) {\n            return apply(pair[1], this, args);\n          }\n        }\n      });\n    }\n\n    /**\n     * Creates a function that invokes the predicate properties of `source` with\n     * the corresponding property values of a given object, returning `true` if\n     * all predicates return truthy, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.conformsTo` with\n     * `source` partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 2, 'b': 1 },\n     *   { 'a': 1, 'b': 2 }\n     * ];\n     *\n     * _.filter(objects, _.conforms({ 'b': function(n) { return n > 1; } }));\n     * // => [{ 'a': 1, 'b': 2 }]\n     */\n    function conforms(source) {\n      return baseConforms(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new constant function.\n     * @example\n     *\n     * var objects = _.times(2, _.constant({ 'a': 1 }));\n     *\n     * console.log(objects);\n     * // => [{ 'a': 1 }, { 'a': 1 }]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * Checks `value` to determine whether a default value should be returned in\n     * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n     * or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Util\n     * @param {*} value The value to check.\n     * @param {*} defaultValue The default value.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * _.defaultTo(1, 10);\n     * // => 1\n     *\n     * _.defaultTo(undefined, 10);\n     * // => 10\n     */\n    function defaultTo(value, defaultValue) {\n      return (value == null || value !== value) ? defaultValue : value;\n    }\n\n    /**\n     * Creates a function that returns the result of invoking the given functions\n     * with the `this` binding of the created function, where each successive\n     * invocation is supplied the return value of the previous.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flowRight\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flow([_.add, square]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flow = createFlow();\n\n    /**\n     * This method is like `_.flow` except that it creates a function that\n     * invokes the given functions from right to left.\n     *\n     * @static\n     * @since 3.0.0\n     * @memberOf _\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flow\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flowRight([square, _.add]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flowRight = createFlow(true);\n\n    /**\n     * This method returns the first argument it receives.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     *\n     * console.log(_.identity(object) === object);\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Creates a function that invokes `func` with the arguments of the created\n     * function. If `func` is a property name, the created function returns the\n     * property value for a given element. If `func` is an array or object, the\n     * created function returns `true` for elements that contain the equivalent\n     * source properties, otherwise it returns `false`.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Util\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @returns {Function} Returns the callback.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));\n     * // => [{ 'user': 'barney', 'age': 36, 'active': true }]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, _.iteratee(['user', 'fred']));\n     * // => [{ 'user': 'fred', 'age': 40 }]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, _.iteratee('user'));\n     * // => ['barney', 'fred']\n     *\n     * // Create custom iteratee shorthands.\n     * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {\n     *   return !_.isRegExp(func) ? iteratee(func) : function(string) {\n     *     return func.test(string);\n     *   };\n     * });\n     *\n     * _.filter(['abc', 'def'], /ef/);\n     * // => ['def']\n     */\n    function iteratee(func) {\n      return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between a given\n     * object and `source`, returning `true` if the given object has equivalent\n     * property values, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.isMatch` with `source`\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * **Note:** Multiple values can be checked by combining several matchers\n     * using `_.overSome`\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));\n     * // => [{ 'a': 4, 'b': 5, 'c': 6 }]\n     *\n     * // Checking for several possible values\n     * _.filter(objects, _.overSome([_.matches({ 'a': 1 }), _.matches({ 'a': 4 })]));\n     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matches(source) {\n      return baseMatches(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between the\n     * value at `path` of a given object to `srcValue`, returning `true` if the\n     * object value is equivalent, else `false`.\n     *\n     * **Note:** Partial comparisons will match empty array and empty object\n     * `srcValue` values against any array or object value, respectively. See\n     * `_.isEqual` for a list of supported value comparisons.\n     *\n     * **Note:** Multiple values can be checked by combining several matchers\n     * using `_.overSome`\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.find(objects, _.matchesProperty('a', 4));\n     * // => { 'a': 4, 'b': 5, 'c': 6 }\n     *\n     * // Checking for several possible values\n     * _.filter(objects, _.overSome([_.matchesProperty('a', 1), _.matchesProperty('a', 4)]));\n     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matchesProperty(path, srcValue) {\n      return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that invokes the method at `path` of a given object.\n     * Any additional arguments are provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': _.constant(2) } },\n     *   { 'a': { 'b': _.constant(1) } }\n     * ];\n     *\n     * _.map(objects, _.method('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(objects, _.method(['a', 'b']));\n     * // => [2, 1]\n     */\n    var method = baseRest(function(path, args) {\n      return function(object) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * The opposite of `_.method`; this method creates a function that invokes\n     * the method at a given path of `object`. Any additional arguments are\n     * provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var array = _.times(3, _.constant),\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.methodOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));\n     * // => [2, 0]\n     */\n    var methodOf = baseRest(function(object, args) {\n      return function(path) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * Adds all own enumerable string keyed function properties of a source\n     * object to the destination object. If `object` is a function, then methods\n     * are added to its prototype as well.\n     *\n     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\n     * avoid conflicts caused by modifying the original.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Function|Object} [object=lodash] The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.chain=true] Specify whether mixins are chainable.\n     * @returns {Function|Object} Returns `object`.\n     * @example\n     *\n     * function vowels(string) {\n     *   return _.filter(string, function(v) {\n     *     return /[aeiou]/i.test(v);\n     *   });\n     * }\n     *\n     * _.mixin({ 'vowels': vowels });\n     * _.vowels('fred');\n     * // => ['e']\n     *\n     * _('fred').vowels().value();\n     * // => ['e']\n     *\n     * _.mixin({ 'vowels': vowels }, { 'chain': false });\n     * _('fred').vowels();\n     * // => ['e']\n     */\n    function mixin(object, source, options) {\n      var props = keys(source),\n          methodNames = baseFunctions(source, props);\n\n      if (options == null &&\n          !(isObject(source) && (methodNames.length || !props.length))) {\n        options = source;\n        source = object;\n        object = this;\n        methodNames = baseFunctions(source, keys(source));\n      }\n      var chain = !(isObject(options) && 'chain' in options) || !!options.chain,\n          isFunc = isFunction(object);\n\n      arrayEach(methodNames, function(methodName) {\n        var func = source[methodName];\n        object[methodName] = func;\n        if (isFunc) {\n          object.prototype[methodName] = function() {\n            var chainAll = this.__chain__;\n            if (chain || chainAll) {\n              var result = object(this.__wrapped__),\n                  actions = result.__actions__ = copyArray(this.__actions__);\n\n              actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\n              result.__chain__ = chainAll;\n              return result;\n            }\n            return func.apply(object, arrayPush([this.value()], arguments));\n          };\n        }\n      });\n\n      return object;\n    }\n\n    /**\n     * Reverts the `_` variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      if (root._ === this) {\n        root._ = oldDash;\n      }\n      return this;\n    }\n\n    /**\n     * This method returns `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Util\n     * @example\n     *\n     * _.times(2, _.noop);\n     * // => [undefined, undefined]\n     */\n    function noop() {\n      // No operation performed.\n    }\n\n    /**\n     * Creates a function that gets the argument at index `n`. If `n` is negative,\n     * the nth argument from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [n=0] The index of the argument to return.\n     * @returns {Function} Returns the new pass-thru function.\n     * @example\n     *\n     * var func = _.nthArg(1);\n     * func('a', 'b', 'c', 'd');\n     * // => 'b'\n     *\n     * var func = _.nthArg(-2);\n     * func('a', 'b', 'c', 'd');\n     * // => 'c'\n     */\n    function nthArg(n) {\n      n = toInteger(n);\n      return baseRest(function(args) {\n        return baseNth(args, n);\n      });\n    }\n\n    /**\n     * Creates a function that invokes `iteratees` with the arguments it receives\n     * and returns their results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.over([Math.max, Math.min]);\n     *\n     * func(1, 2, 3, 4);\n     * // => [4, 1]\n     */\n    var over = createOver(arrayMap);\n\n    /**\n     * Creates a function that checks if **all** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * Following shorthands are possible for providing predicates.\n     * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n     * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overEvery([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => false\n     *\n     * func(NaN);\n     * // => false\n     */\n    var overEvery = createOver(arrayEvery);\n\n    /**\n     * Creates a function that checks if **any** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * Following shorthands are possible for providing predicates.\n     * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n     * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overSome([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => true\n     *\n     * func(NaN);\n     * // => false\n     *\n     * var matchesFunc = _.overSome([{ 'a': 1 }, { 'a': 2 }])\n     * var matchesPropertyFunc = _.overSome([['a', 1], ['a', 2]])\n     */\n    var overSome = createOver(arraySome);\n\n    /**\n     * Creates a function that returns the value at `path` of a given object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': 2 } },\n     *   { 'a': { 'b': 1 } }\n     * ];\n     *\n     * _.map(objects, _.property('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n     * // => [1, 2]\n     */\n    function property(path) {\n      return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n    }\n\n    /**\n     * The opposite of `_.property`; this method creates a function that returns\n     * the value at a given path of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var array = [0, 1, 2],\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));\n     * // => [2, 0]\n     */\n    function propertyOf(object) {\n      return function(path) {\n        return object == null ? undefined : baseGet(object, path);\n      };\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n     * `start` is specified without an `end` or `step`. If `end` is not specified,\n     * it's set to `start` with `start` then set to `0`.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.rangeRight\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(-4);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    var range = createRange();\n\n    /**\n     * This method is like `_.range` except that it populates values in\n     * descending order.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.range\n     * @example\n     *\n     * _.rangeRight(4);\n     * // => [3, 2, 1, 0]\n     *\n     * _.rangeRight(-4);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 5);\n     * // => [4, 3, 2, 1]\n     *\n     * _.rangeRight(0, 20, 5);\n     * // => [15, 10, 5, 0]\n     *\n     * _.rangeRight(0, -4, -1);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.rangeRight(0);\n     * // => []\n     */\n    var rangeRight = createRange(true);\n\n    /**\n     * This method returns a new empty array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Array} Returns the new empty array.\n     * @example\n     *\n     * var arrays = _.times(2, _.stubArray);\n     *\n     * console.log(arrays);\n     * // => [[], []]\n     *\n     * console.log(arrays[0] === arrays[1]);\n     * // => false\n     */\n    function stubArray() {\n      return [];\n    }\n\n    /**\n     * This method returns `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `false`.\n     * @example\n     *\n     * _.times(2, _.stubFalse);\n     * // => [false, false]\n     */\n    function stubFalse() {\n      return false;\n    }\n\n    /**\n     * This method returns a new empty object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Object} Returns the new empty object.\n     * @example\n     *\n     * var objects = _.times(2, _.stubObject);\n     *\n     * console.log(objects);\n     * // => [{}, {}]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => false\n     */\n    function stubObject() {\n      return {};\n    }\n\n    /**\n     * This method returns an empty string.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {string} Returns the empty string.\n     * @example\n     *\n     * _.times(2, _.stubString);\n     * // => ['', '']\n     */\n    function stubString() {\n      return '';\n    }\n\n    /**\n     * This method returns `true`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `true`.\n     * @example\n     *\n     * _.times(2, _.stubTrue);\n     * // => [true, true]\n     */\n    function stubTrue() {\n      return true;\n    }\n\n    /**\n     * Invokes the iteratee `n` times, returning an array of the results of\n     * each invocation. The iteratee is invoked with one argument; (index).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} n The number of times to invoke `iteratee`.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.times(3, String);\n     * // => ['0', '1', '2']\n     *\n     *  _.times(4, _.constant(0));\n     * // => [0, 0, 0, 0]\n     */\n    function times(n, iteratee) {\n      n = toInteger(n);\n      if (n < 1 || n > MAX_SAFE_INTEGER) {\n        return [];\n      }\n      var index = MAX_ARRAY_LENGTH,\n          length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n      iteratee = getIteratee(iteratee);\n      n -= MAX_ARRAY_LENGTH;\n\n      var result = baseTimes(length, iteratee);\n      while (++index < n) {\n        iteratee(index);\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a property path array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the new property path array.\n     * @example\n     *\n     * _.toPath('a.b.c');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toPath('a[0].b.c');\n     * // => ['a', '0', 'b', 'c']\n     */\n    function toPath(value) {\n      if (isArray(value)) {\n        return arrayMap(value, toKey);\n      }\n      return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {string} [prefix=''] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return toString(prefix) + id;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Adds two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {number} augend The first number in an addition.\n     * @param {number} addend The second number in an addition.\n     * @returns {number} Returns the total.\n     * @example\n     *\n     * _.add(6, 4);\n     * // => 10\n     */\n    var add = createMathOperation(function(augend, addend) {\n      return augend + addend;\n    }, 0);\n\n    /**\n     * Computes `number` rounded up to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round up.\n     * @param {number} [precision=0] The precision to round up to.\n     * @returns {number} Returns the rounded up number.\n     * @example\n     *\n     * _.ceil(4.006);\n     * // => 5\n     *\n     * _.ceil(6.004, 2);\n     * // => 6.01\n     *\n     * _.ceil(6040, -2);\n     * // => 6100\n     */\n    var ceil = createRound('ceil');\n\n    /**\n     * Divide two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} dividend The first number in a division.\n     * @param {number} divisor The second number in a division.\n     * @returns {number} Returns the quotient.\n     * @example\n     *\n     * _.divide(6, 4);\n     * // => 1.5\n     */\n    var divide = createMathOperation(function(dividend, divisor) {\n      return dividend / divisor;\n    }, 1);\n\n    /**\n     * Computes `number` rounded down to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round down.\n     * @param {number} [precision=0] The precision to round down to.\n     * @returns {number} Returns the rounded down number.\n     * @example\n     *\n     * _.floor(4.006);\n     * // => 4\n     *\n     * _.floor(0.046, 2);\n     * // => 0.04\n     *\n     * _.floor(4060, -2);\n     * // => 4000\n     */\n    var floor = createRound('floor');\n\n    /**\n     * Computes the maximum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * _.max([]);\n     * // => undefined\n     */\n    function max(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseGt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.max` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.maxBy(objects, function(o) { return o.n; });\n     * // => { 'n': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.maxBy(objects, 'n');\n     * // => { 'n': 2 }\n     */\n    function maxBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseGt)\n        : undefined;\n    }\n\n    /**\n     * Computes the mean of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * _.mean([4, 2, 8, 6]);\n     * // => 5\n     */\n    function mean(array) {\n      return baseMean(array, identity);\n    }\n\n    /**\n     * This method is like `_.mean` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be averaged.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.meanBy(objects, function(o) { return o.n; });\n     * // => 5\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.meanBy(objects, 'n');\n     * // => 5\n     */\n    function meanBy(array, iteratee) {\n      return baseMean(array, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * Computes the minimum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * _.min([]);\n     * // => undefined\n     */\n    function min(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseLt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.min` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.minBy(objects, function(o) { return o.n; });\n     * // => { 'n': 1 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.minBy(objects, 'n');\n     * // => { 'n': 1 }\n     */\n    function minBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseLt)\n        : undefined;\n    }\n\n    /**\n     * Multiply two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} multiplier The first number in a multiplication.\n     * @param {number} multiplicand The second number in a multiplication.\n     * @returns {number} Returns the product.\n     * @example\n     *\n     * _.multiply(6, 4);\n     * // => 24\n     */\n    var multiply = createMathOperation(function(multiplier, multiplicand) {\n      return multiplier * multiplicand;\n    }, 1);\n\n    /**\n     * Computes `number` rounded to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round.\n     * @param {number} [precision=0] The precision to round to.\n     * @returns {number} Returns the rounded number.\n     * @example\n     *\n     * _.round(4.006);\n     * // => 4\n     *\n     * _.round(4.006, 2);\n     * // => 4.01\n     *\n     * _.round(4060, -2);\n     * // => 4100\n     */\n    var round = createRound('round');\n\n    /**\n     * Subtract two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {number} minuend The first number in a subtraction.\n     * @param {number} subtrahend The second number in a subtraction.\n     * @returns {number} Returns the difference.\n     * @example\n     *\n     * _.subtract(6, 4);\n     * // => 2\n     */\n    var subtract = createMathOperation(function(minuend, subtrahend) {\n      return minuend - subtrahend;\n    }, 0);\n\n    /**\n     * Computes the sum of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.sum([4, 2, 8, 6]);\n     * // => 20\n     */\n    function sum(array) {\n      return (array && array.length)\n        ? baseSum(array, identity)\n        : 0;\n    }\n\n    /**\n     * This method is like `_.sum` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be summed.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.sumBy(objects, function(o) { return o.n; });\n     * // => 20\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sumBy(objects, 'n');\n     * // => 20\n     */\n    function sumBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSum(array, getIteratee(iteratee, 2))\n        : 0;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return wrapped values in chain sequences.\n    lodash.after = after;\n    lodash.ary = ary;\n    lodash.assign = assign;\n    lodash.assignIn = assignIn;\n    lodash.assignInWith = assignInWith;\n    lodash.assignWith = assignWith;\n    lodash.at = at;\n    lodash.before = before;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.castArray = castArray;\n    lodash.chain = chain;\n    lodash.chunk = chunk;\n    lodash.compact = compact;\n    lodash.concat = concat;\n    lodash.cond = cond;\n    lodash.conforms = conforms;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.curry = curry;\n    lodash.curryRight = curryRight;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defaultsDeep = defaultsDeep;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.differenceBy = differenceBy;\n    lodash.differenceWith = differenceWith;\n    lodash.drop = drop;\n    lodash.dropRight = dropRight;\n    lodash.dropRightWhile = dropRightWhile;\n    lodash.dropWhile = dropWhile;\n    lodash.fill = fill;\n    lodash.filter = filter;\n    lodash.flatMap = flatMap;\n    lodash.flatMapDeep = flatMapDeep;\n    lodash.flatMapDepth = flatMapDepth;\n    lodash.flatten = flatten;\n    lodash.flattenDeep = flattenDeep;\n    lodash.flattenDepth = flattenDepth;\n    lodash.flip = flip;\n    lodash.flow = flow;\n    lodash.flowRight = flowRight;\n    lodash.fromPairs = fromPairs;\n    lodash.functions = functions;\n    lodash.functionsIn = functionsIn;\n    lodash.groupBy = groupBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.intersectionBy = intersectionBy;\n    lodash.intersectionWith = intersectionWith;\n    lodash.invert = invert;\n    lodash.invertBy = invertBy;\n    lodash.invokeMap = invokeMap;\n    lodash.iteratee = iteratee;\n    lodash.keyBy = keyBy;\n    lodash.keys = keys;\n    lodash.keysIn = keysIn;\n    lodash.map = map;\n    lodash.mapKeys = mapKeys;\n    lodash.mapValues = mapValues;\n    lodash.matches = matches;\n    lodash.matchesProperty = matchesProperty;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.mergeWith = mergeWith;\n    lodash.method = method;\n    lodash.methodOf = methodOf;\n    lodash.mixin = mixin;\n    lodash.negate = negate;\n    lodash.nthArg = nthArg;\n    lodash.omit = omit;\n    lodash.omitBy = omitBy;\n    lodash.once = once;\n    lodash.orderBy = orderBy;\n    lodash.over = over;\n    lodash.overArgs = overArgs;\n    lodash.overEvery = overEvery;\n    lodash.overSome = overSome;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.partition = partition;\n    lodash.pick = pick;\n    lodash.pickBy = pickBy;\n    lodash.property = property;\n    lodash.propertyOf = propertyOf;\n    lodash.pull = pull;\n    lodash.pullAll = pullAll;\n    lodash.pullAllBy = pullAllBy;\n    lodash.pullAllWith = pullAllWith;\n    lodash.pullAt = pullAt;\n    lodash.range = range;\n    lodash.rangeRight = rangeRight;\n    lodash.rearg = rearg;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.reverse = reverse;\n    lodash.sampleSize = sampleSize;\n    lodash.set = set;\n    lodash.setWith = setWith;\n    lodash.shuffle = shuffle;\n    lodash.slice = slice;\n    lodash.sortBy = sortBy;\n    lodash.sortedUniq = sortedUniq;\n    lodash.sortedUniqBy = sortedUniqBy;\n    lodash.split = split;\n    lodash.spread = spread;\n    lodash.tail = tail;\n    lodash.take = take;\n    lodash.takeRight = takeRight;\n    lodash.takeRightWhile = takeRightWhile;\n    lodash.takeWhile = takeWhile;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.thru = thru;\n    lodash.toArray = toArray;\n    lodash.toPairs = toPairs;\n    lodash.toPairsIn = toPairsIn;\n    lodash.toPath = toPath;\n    lodash.toPlainObject = toPlainObject;\n    lodash.transform = transform;\n    lodash.unary = unary;\n    lodash.union = union;\n    lodash.unionBy = unionBy;\n    lodash.unionWith = unionWith;\n    lodash.uniq = uniq;\n    lodash.uniqBy = uniqBy;\n    lodash.uniqWith = uniqWith;\n    lodash.unset = unset;\n    lodash.unzip = unzip;\n    lodash.unzipWith = unzipWith;\n    lodash.update = update;\n    lodash.updateWith = updateWith;\n    lodash.values = values;\n    lodash.valuesIn = valuesIn;\n    lodash.without = without;\n    lodash.words = words;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.xorBy = xorBy;\n    lodash.xorWith = xorWith;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n    lodash.zipObjectDeep = zipObjectDeep;\n    lodash.zipWith = zipWith;\n\n    // Add aliases.\n    lodash.entries = toPairs;\n    lodash.entriesIn = toPairsIn;\n    lodash.extend = assignIn;\n    lodash.extendWith = assignInWith;\n\n    // Add methods to `lodash.prototype`.\n    mixin(lodash, lodash);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return unwrapped values in chain sequences.\n    lodash.add = add;\n    lodash.attempt = attempt;\n    lodash.camelCase = camelCase;\n    lodash.capitalize = capitalize;\n    lodash.ceil = ceil;\n    lodash.clamp = clamp;\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.cloneDeepWith = cloneDeepWith;\n    lodash.cloneWith = cloneWith;\n    lodash.conformsTo = conformsTo;\n    lodash.deburr = deburr;\n    lodash.defaultTo = defaultTo;\n    lodash.divide = divide;\n    lodash.endsWith = endsWith;\n    lodash.eq = eq;\n    lodash.escape = escape;\n    lodash.escapeRegExp = escapeRegExp;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.floor = floor;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.get = get;\n    lodash.gt = gt;\n    lodash.gte = gte;\n    lodash.has = has;\n    lodash.hasIn = hasIn;\n    lodash.head = head;\n    lodash.identity = identity;\n    lodash.includes = includes;\n    lodash.indexOf = indexOf;\n    lodash.inRange = inRange;\n    lodash.invoke = invoke;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isArrayBuffer = isArrayBuffer;\n    lodash.isArrayLike = isArrayLike;\n    lodash.isArrayLikeObject = isArrayLikeObject;\n    lodash.isBoolean = isBoolean;\n    lodash.isBuffer = isBuffer;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isEqualWith = isEqualWith;\n    lodash.isError = isError;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isInteger = isInteger;\n    lodash.isLength = isLength;\n    lodash.isMap = isMap;\n    lodash.isMatch = isMatch;\n    lodash.isMatchWith = isMatchWith;\n    lodash.isNaN = isNaN;\n    lodash.isNative = isNative;\n    lodash.isNil = isNil;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isObjectLike = isObjectLike;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isSafeInteger = isSafeInteger;\n    lodash.isSet = isSet;\n    lodash.isString = isString;\n    lodash.isSymbol = isSymbol;\n    lodash.isTypedArray = isTypedArray;\n    lodash.isUndefined = isUndefined;\n    lodash.isWeakMap = isWeakMap;\n    lodash.isWeakSet = isWeakSet;\n    lodash.join = join;\n    lodash.kebabCase = kebabCase;\n    lodash.last = last;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.lowerCase = lowerCase;\n    lodash.lowerFirst = lowerFirst;\n    lodash.lt = lt;\n    lodash.lte = lte;\n    lodash.max = max;\n    lodash.maxBy = maxBy;\n    lodash.mean = mean;\n    lodash.meanBy = meanBy;\n    lodash.min = min;\n    lodash.minBy = minBy;\n    lodash.stubArray = stubArray;\n    lodash.stubFalse = stubFalse;\n    lodash.stubObject = stubObject;\n    lodash.stubString = stubString;\n    lodash.stubTrue = stubTrue;\n    lodash.multiply = multiply;\n    lodash.nth = nth;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.pad = pad;\n    lodash.padEnd = padEnd;\n    lodash.padStart = padStart;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.repeat = repeat;\n    lodash.replace = replace;\n    lodash.result = result;\n    lodash.round = round;\n    lodash.runInContext = runInContext;\n    lodash.sample = sample;\n    lodash.size = size;\n    lodash.snakeCase = snakeCase;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.sortedIndexBy = sortedIndexBy;\n    lodash.sortedIndexOf = sortedIndexOf;\n    lodash.sortedLastIndex = sortedLastIndex;\n    lodash.sortedLastIndexBy = sortedLastIndexBy;\n    lodash.sortedLastIndexOf = sortedLastIndexOf;\n    lodash.startCase = startCase;\n    lodash.startsWith = startsWith;\n    lodash.subtract = subtract;\n    lodash.sum = sum;\n    lodash.sumBy = sumBy;\n    lodash.template = template;\n    lodash.times = times;\n    lodash.toFinite = toFinite;\n    lodash.toInteger = toInteger;\n    lodash.toLength = toLength;\n    lodash.toLower = toLower;\n    lodash.toNumber = toNumber;\n    lodash.toSafeInteger = toSafeInteger;\n    lodash.toString = toString;\n    lodash.toUpper = toUpper;\n    lodash.trim = trim;\n    lodash.trimEnd = trimEnd;\n    lodash.trimStart = trimStart;\n    lodash.truncate = truncate;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n    lodash.upperCase = upperCase;\n    lodash.upperFirst = upperFirst;\n\n    // Add aliases.\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.first = head;\n\n    mixin(lodash, (function() {\n      var source = {};\n      baseForOwn(lodash, function(func, methodName) {\n        if (!hasOwnProperty.call(lodash.prototype, methodName)) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }()), { 'chain': false });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type {string}\n     */\n    lodash.VERSION = VERSION;\n\n    // Assign default placeholders.\n    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {\n      lodash[methodName].placeholder = lodash;\n    });\n\n    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.\n    arrayEach(['drop', 'take'], function(methodName, index) {\n      LazyWrapper.prototype[methodName] = function(n) {\n        n = n === undefined ? 1 : nativeMax(toInteger(n), 0);\n\n        var result = (this.__filtered__ && !index)\n          ? new LazyWrapper(this)\n          : this.clone();\n\n        if (result.__filtered__) {\n          result.__takeCount__ = nativeMin(n, result.__takeCount__);\n        } else {\n          result.__views__.push({\n            'size': nativeMin(n, MAX_ARRAY_LENGTH),\n            'type': methodName + (result.__dir__ < 0 ? 'Right' : '')\n          });\n        }\n        return result;\n      };\n\n      LazyWrapper.prototype[methodName + 'Right'] = function(n) {\n        return this.reverse()[methodName](n).reverse();\n      };\n    });\n\n    // Add `LazyWrapper` methods that accept an `iteratee` value.\n    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {\n      var type = index + 1,\n          isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;\n\n      LazyWrapper.prototype[methodName] = function(iteratee) {\n        var result = this.clone();\n        result.__iteratees__.push({\n          'iteratee': getIteratee(iteratee, 3),\n          'type': type\n        });\n        result.__filtered__ = result.__filtered__ || isFilter;\n        return result;\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.head` and `_.last`.\n    arrayEach(['head', 'last'], function(methodName, index) {\n      var takeName = 'take' + (index ? 'Right' : '');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this[takeName](1).value()[0];\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.initial` and `_.tail`.\n    arrayEach(['initial', 'tail'], function(methodName, index) {\n      var dropName = 'drop' + (index ? '' : 'Right');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n      };\n    });\n\n    LazyWrapper.prototype.compact = function() {\n      return this.filter(identity);\n    };\n\n    LazyWrapper.prototype.find = function(predicate) {\n      return this.filter(predicate).head();\n    };\n\n    LazyWrapper.prototype.findLast = function(predicate) {\n      return this.reverse().find(predicate);\n    };\n\n    LazyWrapper.prototype.invokeMap = baseRest(function(path, args) {\n      if (typeof path == 'function') {\n        return new LazyWrapper(this);\n      }\n      return this.map(function(value) {\n        return baseInvoke(value, path, args);\n      });\n    });\n\n    LazyWrapper.prototype.reject = function(predicate) {\n      return this.filter(negate(getIteratee(predicate)));\n    };\n\n    LazyWrapper.prototype.slice = function(start, end) {\n      start = toInteger(start);\n\n      var result = this;\n      if (result.__filtered__ && (start > 0 || end < 0)) {\n        return new LazyWrapper(result);\n      }\n      if (start < 0) {\n        result = result.takeRight(-start);\n      } else if (start) {\n        result = result.drop(start);\n      }\n      if (end !== undefined) {\n        end = toInteger(end);\n        result = end < 0 ? result.dropRight(-end) : result.take(end - start);\n      }\n      return result;\n    };\n\n    LazyWrapper.prototype.takeRightWhile = function(predicate) {\n      return this.reverse().takeWhile(predicate).reverse();\n    };\n\n    LazyWrapper.prototype.toArray = function() {\n      return this.take(MAX_ARRAY_LENGTH);\n    };\n\n    // Add `LazyWrapper` methods to `lodash.prototype`.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),\n          isTaker = /^(?:head|last)$/.test(methodName),\n          lodashFunc = lodash[isTaker ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName],\n          retUnwrapped = isTaker || /^find/.test(methodName);\n\n      if (!lodashFunc) {\n        return;\n      }\n      lodash.prototype[methodName] = function() {\n        var value = this.__wrapped__,\n            args = isTaker ? [1] : arguments,\n            isLazy = value instanceof LazyWrapper,\n            iteratee = args[0],\n            useLazy = isLazy || isArray(value);\n\n        var interceptor = function(value) {\n          var result = lodashFunc.apply(lodash, arrayPush([value], args));\n          return (isTaker && chainAll) ? result[0] : result;\n        };\n\n        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {\n          // Avoid lazy use if the iteratee has a \"length\" value other than `1`.\n          isLazy = useLazy = false;\n        }\n        var chainAll = this.__chain__,\n            isHybrid = !!this.__actions__.length,\n            isUnwrapped = retUnwrapped && !chainAll,\n            onlyLazy = isLazy && !isHybrid;\n\n        if (!retUnwrapped && useLazy) {\n          value = onlyLazy ? value : new LazyWrapper(this);\n          var result = func.apply(value, args);\n          result.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });\n          return new LodashWrapper(result, chainAll);\n        }\n        if (isUnwrapped && onlyLazy) {\n          return func.apply(this, args);\n        }\n        result = this.thru(interceptor);\n        return isUnwrapped ? (isTaker ? result.value()[0] : result.value()) : result;\n      };\n    });\n\n    // Add `Array` methods to `lodash.prototype`.\n    arrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {\n      var func = arrayProto[methodName],\n          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\n          retUnwrapped = /^(?:pop|shift)$/.test(methodName);\n\n      lodash.prototype[methodName] = function() {\n        var args = arguments;\n        if (retUnwrapped && !this.__chain__) {\n          var value = this.value();\n          return func.apply(isArray(value) ? value : [], args);\n        }\n        return this[chainName](function(value) {\n          return func.apply(isArray(value) ? value : [], args);\n        });\n      };\n    });\n\n    // Map minified method names to their real names.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var lodashFunc = lodash[methodName];\n      if (lodashFunc) {\n        var key = lodashFunc.name + '';\n        if (!hasOwnProperty.call(realNames, key)) {\n          realNames[key] = [];\n        }\n        realNames[key].push({ 'name': methodName, 'func': lodashFunc });\n      }\n    });\n\n    realNames[createHybrid(undefined, WRAP_BIND_KEY_FLAG).name] = [{\n      'name': 'wrapper',\n      'func': undefined\n    }];\n\n    // Add methods to `LazyWrapper`.\n    LazyWrapper.prototype.clone = lazyClone;\n    LazyWrapper.prototype.reverse = lazyReverse;\n    LazyWrapper.prototype.value = lazyValue;\n\n    // Add chain sequence methods to the `lodash` wrapper.\n    lodash.prototype.at = wrapperAt;\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.commit = wrapperCommit;\n    lodash.prototype.next = wrapperNext;\n    lodash.prototype.plant = wrapperPlant;\n    lodash.prototype.reverse = wrapperReverse;\n    lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;\n\n    // Add lazy aliases.\n    lodash.prototype.first = lodash.prototype.head;\n\n    if (symIterator) {\n      lodash.prototype[symIterator] = wrapperToIterator;\n    }\n    return lodash;\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export lodash.\n  var _ = runInContext();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lodash on the global object to prevent errors when Lodash is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    // Use `_.noConflict` to remove Lodash from the global object.\n    root._ = _;\n\n    // Define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module.\n    define(function() {\n      return _;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds it.\n  else if (freeModule) {\n    // Export for Node.js.\n    (freeModule.exports = _)._ = _;\n    // Export for CommonJS support.\n    freeExports._ = _;\n  }\n  else {\n    // Export to the global object.\n    root._ = _;\n  }\n}.call(this));\n","import immediate from 'immediate';\nimport { v4 } from 'uuid';\nimport Md5 from 'spark-md5';\nimport vuvuzela from 'vuvuzela';\nimport getArguments from 'argsarray';\nimport inherits from 'inherits';\nimport EE from 'events';\n\nfunction mangle(key) {\n  return '$' + key;\n}\nfunction unmangle(key) {\n  return key.substring(1);\n}\nfunction Map$1() {\n  this._store = {};\n}\nMap$1.prototype.get = function (key) {\n  var mangled = mangle(key);\n  return this._store[mangled];\n};\nMap$1.prototype.set = function (key, value) {\n  var mangled = mangle(key);\n  this._store[mangled] = value;\n  return true;\n};\nMap$1.prototype.has = function (key) {\n  var mangled = mangle(key);\n  return mangled in this._store;\n};\nMap$1.prototype.delete = function (key) {\n  var mangled = mangle(key);\n  var res = mangled in this._store;\n  delete this._store[mangled];\n  return res;\n};\nMap$1.prototype.forEach = function (cb) {\n  var keys = Object.keys(this._store);\n  for (var i = 0, len = keys.length; i < len; i++) {\n    var key = keys[i];\n    var value = this._store[key];\n    key = unmangle(key);\n    cb(value, key);\n  }\n};\nObject.defineProperty(Map$1.prototype, 'size', {\n  get: function () {\n    return Object.keys(this._store).length;\n  }\n});\n\nfunction Set$1(array) {\n  this._store = new Map$1();\n\n  // init with an array\n  if (array && Array.isArray(array)) {\n    for (var i = 0, len = array.length; i < len; i++) {\n      this.add(array[i]);\n    }\n  }\n}\nSet$1.prototype.add = function (key) {\n  return this._store.set(key, true);\n};\nSet$1.prototype.has = function (key) {\n  return this._store.has(key);\n};\nSet$1.prototype.forEach = function (cb) {\n  this._store.forEach(function (value, key) {\n    cb(key);\n  });\n};\nObject.defineProperty(Set$1.prototype, 'size', {\n  get: function () {\n    return this._store.size;\n  }\n});\n\n/* global Map,Set,Symbol */\n// Based on https://kangax.github.io/compat-table/es6/ we can sniff out\n// incomplete Map/Set implementations which would otherwise cause our tests to fail.\n// Notably they fail in IE11 and iOS 8.4, which this prevents.\nfunction supportsMapAndSet() {\n  if (typeof Symbol === 'undefined' || typeof Map === 'undefined' || typeof Set === 'undefined') {\n    return false;\n  }\n  var prop = Object.getOwnPropertyDescriptor(Map, Symbol.species);\n  return prop && 'get' in prop && Map[Symbol.species] === Map;\n}\n\n// based on https://github.com/montagejs/collections\n\nvar ExportedSet;\nvar ExportedMap;\n\n{\n  if (supportsMapAndSet()) { // prefer built-in Map/Set\n    ExportedSet = Set;\n    ExportedMap = Map;\n  } else { // fall back to our polyfill\n    ExportedSet = Set$1;\n    ExportedMap = Map$1;\n  }\n}\n\nfunction isBinaryObject(object) {\n  return (typeof ArrayBuffer !== 'undefined' && object instanceof ArrayBuffer) ||\n    (typeof Blob !== 'undefined' && object instanceof Blob);\n}\n\nfunction cloneArrayBuffer(buff) {\n  if (typeof buff.slice === 'function') {\n    return buff.slice(0);\n  }\n  // IE10-11 slice() polyfill\n  var target = new ArrayBuffer(buff.byteLength);\n  var targetArray = new Uint8Array(target);\n  var sourceArray = new Uint8Array(buff);\n  targetArray.set(sourceArray);\n  return target;\n}\n\nfunction cloneBinaryObject(object) {\n  if (object instanceof ArrayBuffer) {\n    return cloneArrayBuffer(object);\n  }\n  var size = object.size;\n  var type = object.type;\n  // Blob\n  if (typeof object.slice === 'function') {\n    return object.slice(0, size, type);\n  }\n  // PhantomJS slice() replacement\n  return object.webkitSlice(0, size, type);\n}\n\n// most of this is borrowed from lodash.isPlainObject:\n// https://github.com/fis-components/lodash.isplainobject/\n// blob/29c358140a74f252aeb08c9eb28bef86f2217d4a/index.js\n\nvar funcToString = Function.prototype.toString;\nvar objectCtorString = funcToString.call(Object);\n\nfunction isPlainObject(value) {\n  var proto = Object.getPrototypeOf(value);\n  /* istanbul ignore if */\n  if (proto === null) { // not sure when this happens, but I guess it can\n    return true;\n  }\n  var Ctor = proto.constructor;\n  return (typeof Ctor == 'function' &&\n    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);\n}\n\nfunction clone(object) {\n  var newObject;\n  var i;\n  var len;\n\n  if (!object || typeof object !== 'object') {\n    return object;\n  }\n\n  if (Array.isArray(object)) {\n    newObject = [];\n    for (i = 0, len = object.length; i < len; i++) {\n      newObject[i] = clone(object[i]);\n    }\n    return newObject;\n  }\n\n  // special case: to avoid inconsistencies between IndexedDB\n  // and other backends, we automatically stringify Dates\n  if (object instanceof Date) {\n    return object.toISOString();\n  }\n\n  if (isBinaryObject(object)) {\n    return cloneBinaryObject(object);\n  }\n\n  if (!isPlainObject(object)) {\n    return object; // don't clone objects like Workers\n  }\n\n  newObject = {};\n  for (i in object) {\n    /* istanbul ignore else */\n    if (Object.prototype.hasOwnProperty.call(object, i)) {\n      var value = clone(object[i]);\n      if (typeof value !== 'undefined') {\n        newObject[i] = value;\n      }\n    }\n  }\n  return newObject;\n}\n\nfunction once(fun) {\n  var called = false;\n  return getArguments(function (args) {\n    /* istanbul ignore if */\n    if (called) {\n      // this is a smoke test and should never actually happen\n      throw new Error('once called more than once');\n    } else {\n      called = true;\n      fun.apply(this, args);\n    }\n  });\n}\n\nfunction toPromise(func) {\n  //create the function we will be returning\n  return getArguments(function (args) {\n    // Clone arguments\n    args = clone(args);\n    var self = this;\n    // if the last argument is a function, assume its a callback\n    var usedCB = (typeof args[args.length - 1] === 'function') ? args.pop() : false;\n    var promise = new Promise(function (fulfill, reject) {\n      var resp;\n      try {\n        var callback = once(function (err, mesg) {\n          if (err) {\n            reject(err);\n          } else {\n            fulfill(mesg);\n          }\n        });\n        // create a callback for this invocation\n        // apply the function in the orig context\n        args.push(callback);\n        resp = func.apply(self, args);\n        if (resp && typeof resp.then === 'function') {\n          fulfill(resp);\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n    // if there is a callback, call it back\n    if (usedCB) {\n      promise.then(function (result) {\n        usedCB(null, result);\n      }, usedCB);\n    }\n    return promise;\n  });\n}\n\nfunction logApiCall(self, name, args) {\n  /* istanbul ignore if */\n  if (self.constructor.listeners('debug').length) {\n    var logArgs = ['api', self.name, name];\n    for (var i = 0; i < args.length - 1; i++) {\n      logArgs.push(args[i]);\n    }\n    self.constructor.emit('debug', logArgs);\n\n    // override the callback itself to log the response\n    var origCallback = args[args.length - 1];\n    args[args.length - 1] = function (err, res) {\n      var responseArgs = ['api', self.name, name];\n      responseArgs = responseArgs.concat(\n        err ? ['error', err] : ['success', res]\n      );\n      self.constructor.emit('debug', responseArgs);\n      origCallback(err, res);\n    };\n  }\n}\n\nfunction adapterFun(name, callback) {\n  return toPromise(getArguments(function (args) {\n    if (this._closed) {\n      return Promise.reject(new Error('database is closed'));\n    }\n    if (this._destroyed) {\n      return Promise.reject(new Error('database is destroyed'));\n    }\n    var self = this;\n    logApiCall(self, name, args);\n    if (!this.taskqueue.isReady) {\n      return new Promise(function (fulfill, reject) {\n        self.taskqueue.addTask(function (failed) {\n          if (failed) {\n            reject(failed);\n          } else {\n            fulfill(self[name].apply(self, args));\n          }\n        });\n      });\n    }\n    return callback.apply(this, args);\n  }));\n}\n\n// like underscore/lodash _.pick()\nfunction pick(obj, arr) {\n  var res = {};\n  for (var i = 0, len = arr.length; i < len; i++) {\n    var prop = arr[i];\n    if (prop in obj) {\n      res[prop] = obj[prop];\n    }\n  }\n  return res;\n}\n\n// Most browsers throttle concurrent requests at 6, so it's silly\n// to shim _bulk_get by trying to launch potentially hundreds of requests\n// and then letting the majority time out. We can handle this ourselves.\nvar MAX_NUM_CONCURRENT_REQUESTS = 6;\n\nfunction identityFunction(x) {\n  return x;\n}\n\nfunction formatResultForOpenRevsGet(result) {\n  return [{\n    ok: result\n  }];\n}\n\n// shim for P/CouchDB adapters that don't directly implement _bulk_get\nfunction bulkGet(db, opts, callback) {\n  var requests = opts.docs;\n\n  // consolidate into one request per doc if possible\n  var requestsById = new ExportedMap();\n  requests.forEach(function (request) {\n    if (requestsById.has(request.id)) {\n      requestsById.get(request.id).push(request);\n    } else {\n      requestsById.set(request.id, [request]);\n    }\n  });\n\n  var numDocs = requestsById.size;\n  var numDone = 0;\n  var perDocResults = new Array(numDocs);\n\n  function collapseResultsAndFinish() {\n    var results = [];\n    perDocResults.forEach(function (res) {\n      res.docs.forEach(function (info) {\n        results.push({\n          id: res.id,\n          docs: [info]\n        });\n      });\n    });\n    callback(null, {results: results});\n  }\n\n  function checkDone() {\n    if (++numDone === numDocs) {\n      collapseResultsAndFinish();\n    }\n  }\n\n  function gotResult(docIndex, id, docs) {\n    perDocResults[docIndex] = {id: id, docs: docs};\n    checkDone();\n  }\n\n  var allRequests = [];\n  requestsById.forEach(function (value, key) {\n    allRequests.push(key);\n  });\n\n  var i = 0;\n\n  function nextBatch() {\n\n    if (i >= allRequests.length) {\n      return;\n    }\n\n    var upTo = Math.min(i + MAX_NUM_CONCURRENT_REQUESTS, allRequests.length);\n    var batch = allRequests.slice(i, upTo);\n    processBatch(batch, i);\n    i += batch.length;\n  }\n\n  function processBatch(batch, offset) {\n    batch.forEach(function (docId, j) {\n      var docIdx = offset + j;\n      var docRequests = requestsById.get(docId);\n\n      // just use the first request as the \"template\"\n      // TODO: The _bulk_get API allows for more subtle use cases than this,\n      // but for now it is unlikely that there will be a mix of different\n      // \"atts_since\" or \"attachments\" in the same request, since it's just\n      // replicate.js that is using this for the moment.\n      // Also, atts_since is aspirational, since we don't support it yet.\n      var docOpts = pick(docRequests[0], ['atts_since', 'attachments']);\n      docOpts.open_revs = docRequests.map(function (request) {\n        // rev is optional, open_revs disallowed\n        return request.rev;\n      });\n\n      // remove falsey / undefined revisions\n      docOpts.open_revs = docOpts.open_revs.filter(identityFunction);\n\n      var formatResult = identityFunction;\n\n      if (docOpts.open_revs.length === 0) {\n        delete docOpts.open_revs;\n\n        // when fetching only the \"winning\" leaf,\n        // transform the result so it looks like an open_revs\n        // request\n        formatResult = formatResultForOpenRevsGet;\n      }\n\n      // globally-supplied options\n      ['revs', 'attachments', 'binary', 'ajax', 'latest'].forEach(function (param) {\n        if (param in opts) {\n          docOpts[param] = opts[param];\n        }\n      });\n      db.get(docId, docOpts, function (err, res) {\n        var result;\n        /* istanbul ignore if */\n        if (err) {\n          result = [{error: err}];\n        } else {\n          result = formatResult(res);\n        }\n        gotResult(docIdx, docId, result);\n        nextBatch();\n      });\n    });\n  }\n\n  nextBatch();\n\n}\n\nvar hasLocal;\n\ntry {\n  localStorage.setItem('_pouch_check_localstorage', 1);\n  hasLocal = !!localStorage.getItem('_pouch_check_localstorage');\n} catch (e) {\n  hasLocal = false;\n}\n\nfunction hasLocalStorage() {\n  return hasLocal;\n}\n\n// Custom nextTick() shim for browsers. In node, this will just be process.nextTick(). We\n\ninherits(Changes, EE);\n\n/* istanbul ignore next */\nfunction attachBrowserEvents(self) {\n  if (hasLocalStorage()) {\n    addEventListener(\"storage\", function (e) {\n      self.emit(e.key);\n    });\n  }\n}\n\nfunction Changes() {\n  EE.call(this);\n  this._listeners = {};\n\n  attachBrowserEvents(this);\n}\nChanges.prototype.addListener = function (dbName, id, db, opts) {\n  /* istanbul ignore if */\n  if (this._listeners[id]) {\n    return;\n  }\n  var self = this;\n  var inprogress = false;\n  function eventFunction() {\n    /* istanbul ignore if */\n    if (!self._listeners[id]) {\n      return;\n    }\n    if (inprogress) {\n      inprogress = 'waiting';\n      return;\n    }\n    inprogress = true;\n    var changesOpts = pick(opts, [\n      'style', 'include_docs', 'attachments', 'conflicts', 'filter',\n      'doc_ids', 'view', 'since', 'query_params', 'binary', 'return_docs'\n    ]);\n\n    /* istanbul ignore next */\n    function onError() {\n      inprogress = false;\n    }\n\n    db.changes(changesOpts).on('change', function (c) {\n      if (c.seq > opts.since && !opts.cancelled) {\n        opts.since = c.seq;\n        opts.onChange(c);\n      }\n    }).on('complete', function () {\n      if (inprogress === 'waiting') {\n        immediate(eventFunction);\n      }\n      inprogress = false;\n    }).on('error', onError);\n  }\n  this._listeners[id] = eventFunction;\n  this.on(dbName, eventFunction);\n};\n\nChanges.prototype.removeListener = function (dbName, id) {\n  /* istanbul ignore if */\n  if (!(id in this._listeners)) {\n    return;\n  }\n  EE.prototype.removeListener.call(this, dbName,\n    this._listeners[id]);\n  delete this._listeners[id];\n};\n\n\n/* istanbul ignore next */\nChanges.prototype.notifyLocalWindows = function (dbName) {\n  //do a useless change on a storage thing\n  //in order to get other windows's listeners to activate\n  if (hasLocalStorage()) {\n    localStorage[dbName] = (localStorage[dbName] === \"a\") ? \"b\" : \"a\";\n  }\n};\n\nChanges.prototype.notify = function (dbName) {\n  this.emit(dbName);\n  this.notifyLocalWindows(dbName);\n};\n\nfunction guardedConsole(method) {\n  /* istanbul ignore else */\n  if (typeof console !== 'undefined' && typeof console[method] === 'function') {\n    var args = Array.prototype.slice.call(arguments, 1);\n    console[method].apply(console, args);\n  }\n}\n\nfunction randomNumber(min, max) {\n  var maxTimeout = 600000; // Hard-coded default of 10 minutes\n  min = parseInt(min, 10) || 0;\n  max = parseInt(max, 10);\n  if (max !== max || max <= min) {\n    max = (min || 1) << 1; //doubling\n  } else {\n    max = max + 1;\n  }\n  // In order to not exceed maxTimeout, pick a random value between half of maxTimeout and maxTimeout\n  if (max > maxTimeout) {\n    min = maxTimeout >> 1; // divide by two\n    max = maxTimeout;\n  }\n  var ratio = Math.random();\n  var range = max - min;\n\n  return ~~(range * ratio + min); // ~~ coerces to an int, but fast.\n}\n\nfunction defaultBackOff(min) {\n  var max = 0;\n  if (!min) {\n    max = 2000;\n  }\n  return randomNumber(min, max);\n}\n\n// designed to give info to browser users, who are disturbed\n// when they see http errors in the console\nfunction explainError(status, str) {\n  guardedConsole('info', 'The above ' + status + ' is totally normal. ' + str);\n}\n\nvar assign;\n{\n  if (typeof Object.assign === 'function') {\n    assign = Object.assign;\n  } else {\n    // lite Object.assign polyfill based on\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n    assign = function (target) {\n      var to = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n\n        if (nextSource != null) { // Skip over if undefined or null\n          for (var nextKey in nextSource) {\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    };\n  }\n}\n\nvar $inject_Object_assign = assign;\n\ninherits(PouchError, Error);\n\nfunction PouchError(status, error, reason) {\n  Error.call(this, reason);\n  this.status = status;\n  this.name = error;\n  this.message = reason;\n  this.error = true;\n}\n\nPouchError.prototype.toString = function () {\n  return JSON.stringify({\n    status: this.status,\n    name: this.name,\n    message: this.message,\n    reason: this.reason\n  });\n};\n\nvar UNAUTHORIZED = new PouchError(401, 'unauthorized', \"Name or password is incorrect.\");\nvar MISSING_BULK_DOCS = new PouchError(400, 'bad_request', \"Missing JSON list of 'docs'\");\nvar MISSING_DOC = new PouchError(404, 'not_found', 'missing');\nvar REV_CONFLICT = new PouchError(409, 'conflict', 'Document update conflict');\nvar INVALID_ID = new PouchError(400, 'bad_request', '_id field must contain a string');\nvar MISSING_ID = new PouchError(412, 'missing_id', '_id is required for puts');\nvar RESERVED_ID = new PouchError(400, 'bad_request', 'Only reserved document ids may start with underscore.');\nvar NOT_OPEN = new PouchError(412, 'precondition_failed', 'Database not open');\nvar UNKNOWN_ERROR = new PouchError(500, 'unknown_error', 'Database encountered an unknown error');\nvar BAD_ARG = new PouchError(500, 'badarg', 'Some query argument is invalid');\nvar INVALID_REQUEST = new PouchError(400, 'invalid_request', 'Request was invalid');\nvar QUERY_PARSE_ERROR = new PouchError(400, 'query_parse_error', 'Some query parameter is invalid');\nvar DOC_VALIDATION = new PouchError(500, 'doc_validation', 'Bad special document member');\nvar BAD_REQUEST = new PouchError(400, 'bad_request', 'Something wrong with the request');\nvar NOT_AN_OBJECT = new PouchError(400, 'bad_request', 'Document must be a JSON object');\nvar DB_MISSING = new PouchError(404, 'not_found', 'Database not found');\nvar IDB_ERROR = new PouchError(500, 'indexed_db_went_bad', 'unknown');\nvar WSQ_ERROR = new PouchError(500, 'web_sql_went_bad', 'unknown');\nvar LDB_ERROR = new PouchError(500, 'levelDB_went_went_bad', 'unknown');\nvar FORBIDDEN = new PouchError(403, 'forbidden', 'Forbidden by design doc validate_doc_update function');\nvar INVALID_REV = new PouchError(400, 'bad_request', 'Invalid rev format');\nvar FILE_EXISTS = new PouchError(412, 'file_exists', 'The database could not be created, the file already exists.');\nvar MISSING_STUB = new PouchError(412, 'missing_stub', 'A pre-existing attachment stub wasn\\'t found');\nvar INVALID_URL = new PouchError(413, 'invalid_url', 'Provided URL is invalid');\n\nfunction createError(error, reason) {\n  function CustomPouchError(reason) {\n    // inherit error properties from our parent error manually\n    // so as to allow proper JSON parsing.\n    /* jshint ignore:start */\n    var names = Object.getOwnPropertyNames(error);\n    for (var i = 0, len = names.length; i < len; i++) {\n      if (typeof error[names[i]] !== 'function') {\n        this[names[i]] = error[names[i]];\n      }\n    }\n    /* jshint ignore:end */\n    if (reason !== undefined) {\n      this.reason = reason;\n    }\n  }\n  CustomPouchError.prototype = PouchError.prototype;\n  return new CustomPouchError(reason);\n}\n\nfunction generateErrorFromResponse(err) {\n\n  if (typeof err !== 'object') {\n    var data = err;\n    err = UNKNOWN_ERROR;\n    err.data = data;\n  }\n\n  if ('error' in err && err.error === 'conflict') {\n    err.name = 'conflict';\n    err.status = 409;\n  }\n\n  if (!('name' in err)) {\n    err.name = err.error || 'unknown';\n  }\n\n  if (!('status' in err)) {\n    err.status = 500;\n  }\n\n  if (!('message' in err)) {\n    err.message = err.message || err.reason;\n  }\n\n  return err;\n}\n\nfunction tryFilter(filter, doc, req) {\n  try {\n    return !filter(doc, req);\n  } catch (err) {\n    var msg = 'Filter function threw: ' + err.toString();\n    return createError(BAD_REQUEST, msg);\n  }\n}\n\nfunction filterChange(opts) {\n  var req = {};\n  var hasFilter = opts.filter && typeof opts.filter === 'function';\n  req.query = opts.query_params;\n\n  return function filter(change) {\n    if (!change.doc) {\n      // CSG sends events on the changes feed that don't have documents,\n      // this hack makes a whole lot of existing code robust.\n      change.doc = {};\n    }\n\n    var filterReturn = hasFilter && tryFilter(opts.filter, change.doc, req);\n\n    if (typeof filterReturn === 'object') {\n      return filterReturn;\n    }\n\n    if (filterReturn) {\n      return false;\n    }\n\n    if (!opts.include_docs) {\n      delete change.doc;\n    } else if (!opts.attachments) {\n      for (var att in change.doc._attachments) {\n        /* istanbul ignore else */\n        if (change.doc._attachments.hasOwnProperty(att)) {\n          change.doc._attachments[att].stub = true;\n        }\n      }\n    }\n    return true;\n  };\n}\n\nfunction flatten(arrs) {\n  var res = [];\n  for (var i = 0, len = arrs.length; i < len; i++) {\n    res = res.concat(arrs[i]);\n  }\n  return res;\n}\n\n// shim for Function.prototype.name,\n\n// Determine id an ID is valid\n//   - invalid IDs begin with an underescore that does not begin '_design' or\n//     '_local'\n//   - any other string value is a valid id\n// Returns the specific error object for each case\nfunction invalidIdError(id) {\n  var err;\n  if (!id) {\n    err = createError(MISSING_ID);\n  } else if (typeof id !== 'string') {\n    err = createError(INVALID_ID);\n  } else if (/^_/.test(id) && !(/^_(design|local)/).test(id)) {\n    err = createError(RESERVED_ID);\n  }\n  if (err) {\n    throw err;\n  }\n}\n\n// Checks if a PouchDB object is \"remote\" or not. This is\n\nfunction isRemote(db) {\n  if (typeof db._remote === 'boolean') {\n    return db._remote;\n  }\n  /* istanbul ignore next */\n  if (typeof db.type === 'function') {\n    guardedConsole('warn',\n      'db.type() is deprecated and will be removed in ' +\n      'a future version of PouchDB');\n    return db.type() === 'http';\n  }\n  /* istanbul ignore next */\n  return false;\n}\n\nfunction listenerCount(ee, type) {\n  return 'listenerCount' in ee ? ee.listenerCount(type) :\n                                 EE.listenerCount(ee, type);\n}\n\nfunction parseDesignDocFunctionName(s) {\n  if (!s) {\n    return null;\n  }\n  var parts = s.split('/');\n  if (parts.length === 2) {\n    return parts;\n  }\n  if (parts.length === 1) {\n    return [s, s];\n  }\n  return null;\n}\n\nfunction normalizeDesignDocFunctionName(s) {\n  var normalized = parseDesignDocFunctionName(s);\n  return normalized ? normalized.join('/') : null;\n}\n\n// originally parseUri 1.2.2, now patched by us\n// (c) Steven Levithan <stevenlevithan.com>\n// MIT License\nvar keys = [\"source\", \"protocol\", \"authority\", \"userInfo\", \"user\", \"password\",\n    \"host\", \"port\", \"relative\", \"path\", \"directory\", \"file\", \"query\", \"anchor\"];\nvar qName =\"queryKey\";\nvar qParser = /(?:^|&)([^&=]*)=?([^&]*)/g;\n\n// use the \"loose\" parser\n/* eslint maxlen: 0, no-useless-escape: 0 */\nvar parser = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nfunction parseUri(str) {\n  var m = parser.exec(str);\n  var uri = {};\n  var i = 14;\n\n  while (i--) {\n    var key = keys[i];\n    var value = m[i] || \"\";\n    var encoded = ['user', 'password'].indexOf(key) !== -1;\n    uri[key] = encoded ? decodeURIComponent(value) : value;\n  }\n\n  uri[qName] = {};\n  uri[keys[12]].replace(qParser, function ($0, $1, $2) {\n    if ($1) {\n      uri[qName][$1] = $2;\n    }\n  });\n\n  return uri;\n}\n\n// Based on https://github.com/alexdavid/scope-eval v0.0.3\n// (source: https://unpkg.com/scope-eval@0.0.3/scope_eval.js)\n// This is basically just a wrapper around new Function()\n\nfunction scopeEval(source, scope) {\n  var keys = [];\n  var values = [];\n  for (var key in scope) {\n    if (scope.hasOwnProperty(key)) {\n      keys.push(key);\n      values.push(scope[key]);\n    }\n  }\n  keys.push(source);\n  return Function.apply(null, keys).apply(null, values);\n}\n\n// this is essentially the \"update sugar\" function from daleharvey/pouchdb#1388\n// the diffFun tells us what delta to apply to the doc.  it either returns\n// the doc, or false if it doesn't need to do an update after all\nfunction upsert(db, docId, diffFun) {\n  return new Promise(function (fulfill, reject) {\n    db.get(docId, function (err, doc) {\n      if (err) {\n        /* istanbul ignore next */\n        if (err.status !== 404) {\n          return reject(err);\n        }\n        doc = {};\n      }\n\n      // the user might change the _rev, so save it for posterity\n      var docRev = doc._rev;\n      var newDoc = diffFun(doc);\n\n      if (!newDoc) {\n        // if the diffFun returns falsy, we short-circuit as\n        // an optimization\n        return fulfill({updated: false, rev: docRev});\n      }\n\n      // users aren't allowed to modify these values,\n      // so reset them here\n      newDoc._id = docId;\n      newDoc._rev = docRev;\n      fulfill(tryAndPut(db, newDoc, diffFun));\n    });\n  });\n}\n\nfunction tryAndPut(db, doc, diffFun) {\n  return db.put(doc).then(function (res) {\n    return {\n      updated: true,\n      rev: res.rev\n    };\n  }, function (err) {\n    /* istanbul ignore next */\n    if (err.status !== 409) {\n      throw err;\n    }\n    return upsert(db, doc._id, diffFun);\n  });\n}\n\nvar thisAtob = function (str) {\n  return atob(str);\n};\n\nvar thisBtoa = function (str) {\n  return btoa(str);\n};\n\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor (e.g.\n// old QtWebKit versions, Android < 4.4).\nfunction createBlob(parts, properties) {\n  /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */\n  parts = parts || [];\n  properties = properties || {};\n  try {\n    return new Blob(parts, properties);\n  } catch (e) {\n    if (e.name !== \"TypeError\") {\n      throw e;\n    }\n    var Builder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\n                  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\n                  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder :\n                  WebKitBlobBuilder;\n    var builder = new Builder();\n    for (var i = 0; i < parts.length; i += 1) {\n      builder.append(parts[i]);\n    }\n    return builder.getBlob(properties.type);\n  }\n}\n\n// From http://stackoverflow.com/questions/14967647/ (continues on next line)\n// encode-decode-image-with-base64-breaks-image (2013-04-21)\nfunction binaryStringToArrayBuffer(bin) {\n  var length = bin.length;\n  var buf = new ArrayBuffer(length);\n  var arr = new Uint8Array(buf);\n  for (var i = 0; i < length; i++) {\n    arr[i] = bin.charCodeAt(i);\n  }\n  return buf;\n}\n\nfunction binStringToBluffer(binString, type) {\n  return createBlob([binaryStringToArrayBuffer(binString)], {type: type});\n}\n\nfunction b64ToBluffer(b64, type) {\n  return binStringToBluffer(thisAtob(b64), type);\n}\n\n//Can't find original post, but this is close\n//http://stackoverflow.com/questions/6965107/ (continues on next line)\n//converting-between-strings-and-arraybuffers\nfunction arrayBufferToBinaryString(buffer) {\n  var binary = '';\n  var bytes = new Uint8Array(buffer);\n  var length = bytes.byteLength;\n  for (var i = 0; i < length; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return binary;\n}\n\n// shim for browsers that don't support it\nfunction readAsBinaryString(blob, callback) {\n  var reader = new FileReader();\n  var hasBinaryString = typeof reader.readAsBinaryString === 'function';\n  reader.onloadend = function (e) {\n    var result = e.target.result || '';\n    if (hasBinaryString) {\n      return callback(result);\n    }\n    callback(arrayBufferToBinaryString(result));\n  };\n  if (hasBinaryString) {\n    reader.readAsBinaryString(blob);\n  } else {\n    reader.readAsArrayBuffer(blob);\n  }\n}\n\nfunction blobToBinaryString(blobOrBuffer, callback) {\n  readAsBinaryString(blobOrBuffer, function (bin) {\n    callback(bin);\n  });\n}\n\nfunction blobToBase64(blobOrBuffer, callback) {\n  blobToBinaryString(blobOrBuffer, function (base64) {\n    callback(thisBtoa(base64));\n  });\n}\n\n// simplified API. universal browser support is assumed\nfunction readAsArrayBuffer(blob, callback) {\n  var reader = new FileReader();\n  reader.onloadend = function (e) {\n    var result = e.target.result || new ArrayBuffer(0);\n    callback(result);\n  };\n  reader.readAsArrayBuffer(blob);\n}\n\n// this is not used in the browser\n\nvar setImmediateShim = self.setImmediate || self.setTimeout;\nvar MD5_CHUNK_SIZE = 32768;\n\nfunction rawToBase64(raw) {\n  return thisBtoa(raw);\n}\n\nfunction sliceBlob(blob, start, end) {\n  if (blob.webkitSlice) {\n    return blob.webkitSlice(start, end);\n  }\n  return blob.slice(start, end);\n}\n\nfunction appendBlob(buffer, blob, start, end, callback) {\n  if (start > 0 || end < blob.size) {\n    // only slice blob if we really need to\n    blob = sliceBlob(blob, start, end);\n  }\n  readAsArrayBuffer(blob, function (arrayBuffer) {\n    buffer.append(arrayBuffer);\n    callback();\n  });\n}\n\nfunction appendString(buffer, string, start, end, callback) {\n  if (start > 0 || end < string.length) {\n    // only create a substring if we really need to\n    string = string.substring(start, end);\n  }\n  buffer.appendBinary(string);\n  callback();\n}\n\nfunction binaryMd5(data, callback) {\n  var inputIsString = typeof data === 'string';\n  var len = inputIsString ? data.length : data.size;\n  var chunkSize = Math.min(MD5_CHUNK_SIZE, len);\n  var chunks = Math.ceil(len / chunkSize);\n  var currentChunk = 0;\n  var buffer = inputIsString ? new Md5() : new Md5.ArrayBuffer();\n\n  var append = inputIsString ? appendString : appendBlob;\n\n  function next() {\n    setImmediateShim(loadNextChunk);\n  }\n\n  function done() {\n    var raw = buffer.end(true);\n    var base64 = rawToBase64(raw);\n    callback(base64);\n    buffer.destroy();\n  }\n\n  function loadNextChunk() {\n    var start = currentChunk * chunkSize;\n    var end = start + chunkSize;\n    currentChunk++;\n    if (currentChunk < chunks) {\n      append(buffer, data, start, end, next);\n    } else {\n      append(buffer, data, start, end, done);\n    }\n  }\n  loadNextChunk();\n}\n\nfunction stringMd5(string) {\n  return Md5.hash(string);\n}\n\nfunction rev(doc, deterministic_revs) {\n  var clonedDoc = clone(doc);\n  if (!deterministic_revs) {\n    return v4().replace(/-/g, '').toLowerCase();\n  }\n\n  delete clonedDoc._rev_tree;\n  return stringMd5(JSON.stringify(clonedDoc));\n}\n\nvar uuid = v4; // mimic old import, only v4 is ever used elsewhere\n\n// We fetch all leafs of the revision tree, and sort them based on tree length\n// and whether they were deleted, undeleted documents with the longest revision\n// tree (most edits) win\n// The final sort algorithm is slightly documented in a sidebar here:\n// http://guide.couchdb.org/draft/conflicts.html\nfunction winningRev(metadata) {\n  var winningId;\n  var winningPos;\n  var winningDeleted;\n  var toVisit = metadata.rev_tree.slice();\n  var node;\n  while ((node = toVisit.pop())) {\n    var tree = node.ids;\n    var branches = tree[2];\n    var pos = node.pos;\n    if (branches.length) { // non-leaf\n      for (var i = 0, len = branches.length; i < len; i++) {\n        toVisit.push({pos: pos + 1, ids: branches[i]});\n      }\n      continue;\n    }\n    var deleted = !!tree[1].deleted;\n    var id = tree[0];\n    // sort by deleted, then pos, then id\n    if (!winningId || (winningDeleted !== deleted ? winningDeleted :\n        winningPos !== pos ? winningPos < pos : winningId < id)) {\n      winningId = id;\n      winningPos = pos;\n      winningDeleted = deleted;\n    }\n  }\n\n  return winningPos + '-' + winningId;\n}\n\n// Pretty much all below can be combined into a higher order function to\n// traverse revisions\n// The return value from the callback will be passed as context to all\n// children of that node\nfunction traverseRevTree(revs, callback) {\n  var toVisit = revs.slice();\n\n  var node;\n  while ((node = toVisit.pop())) {\n    var pos = node.pos;\n    var tree = node.ids;\n    var branches = tree[2];\n    var newCtx =\n      callback(branches.length === 0, pos, tree[0], node.ctx, tree[1]);\n    for (var i = 0, len = branches.length; i < len; i++) {\n      toVisit.push({pos: pos + 1, ids: branches[i], ctx: newCtx});\n    }\n  }\n}\n\nfunction sortByPos(a, b) {\n  return a.pos - b.pos;\n}\n\nfunction collectLeaves(revs) {\n  var leaves = [];\n  traverseRevTree(revs, function (isLeaf, pos, id, acc, opts) {\n    if (isLeaf) {\n      leaves.push({rev: pos + \"-\" + id, pos: pos, opts: opts});\n    }\n  });\n  leaves.sort(sortByPos).reverse();\n  for (var i = 0, len = leaves.length; i < len; i++) {\n    delete leaves[i].pos;\n  }\n  return leaves;\n}\n\n// returns revs of all conflicts that is leaves such that\n// 1. are not deleted and\n// 2. are different than winning revision\nfunction collectConflicts(metadata) {\n  var win = winningRev(metadata);\n  var leaves = collectLeaves(metadata.rev_tree);\n  var conflicts = [];\n  for (var i = 0, len = leaves.length; i < len; i++) {\n    var leaf = leaves[i];\n    if (leaf.rev !== win && !leaf.opts.deleted) {\n      conflicts.push(leaf.rev);\n    }\n  }\n  return conflicts;\n}\n\n// compact a tree by marking its non-leafs as missing,\n// and return a list of revs to delete\nfunction compactTree(metadata) {\n  var revs = [];\n  traverseRevTree(metadata.rev_tree, function (isLeaf, pos,\n                                               revHash, ctx, opts) {\n    if (opts.status === 'available' && !isLeaf) {\n      revs.push(pos + '-' + revHash);\n      opts.status = 'missing';\n    }\n  });\n  return revs;\n}\n\n// build up a list of all the paths to the leafs in this revision tree\nfunction rootToLeaf(revs) {\n  var paths = [];\n  var toVisit = revs.slice();\n  var node;\n  while ((node = toVisit.pop())) {\n    var pos = node.pos;\n    var tree = node.ids;\n    var id = tree[0];\n    var opts = tree[1];\n    var branches = tree[2];\n    var isLeaf = branches.length === 0;\n\n    var history = node.history ? node.history.slice() : [];\n    history.push({id: id, opts: opts});\n    if (isLeaf) {\n      paths.push({pos: (pos + 1 - history.length), ids: history});\n    }\n    for (var i = 0, len = branches.length; i < len; i++) {\n      toVisit.push({pos: pos + 1, ids: branches[i], history: history});\n    }\n  }\n  return paths.reverse();\n}\n\n// for a better overview of what this is doing, read:\n\nfunction sortByPos$1(a, b) {\n  return a.pos - b.pos;\n}\n\n// classic binary search\nfunction binarySearch(arr, item, comparator) {\n  var low = 0;\n  var high = arr.length;\n  var mid;\n  while (low < high) {\n    mid = (low + high) >>> 1;\n    if (comparator(arr[mid], item) < 0) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return low;\n}\n\n// assuming the arr is sorted, insert the item in the proper place\nfunction insertSorted(arr, item, comparator) {\n  var idx = binarySearch(arr, item, comparator);\n  arr.splice(idx, 0, item);\n}\n\n// Turn a path as a flat array into a tree with a single branch.\n// If any should be stemmed from the beginning of the array, that's passed\n// in as the second argument\nfunction pathToTree(path, numStemmed) {\n  var root;\n  var leaf;\n  for (var i = numStemmed, len = path.length; i < len; i++) {\n    var node = path[i];\n    var currentLeaf = [node.id, node.opts, []];\n    if (leaf) {\n      leaf[2].push(currentLeaf);\n      leaf = currentLeaf;\n    } else {\n      root = leaf = currentLeaf;\n    }\n  }\n  return root;\n}\n\n// compare the IDs of two trees\nfunction compareTree(a, b) {\n  return a[0] < b[0] ? -1 : 1;\n}\n\n// Merge two trees together\n// The roots of tree1 and tree2 must be the same revision\nfunction mergeTree(in_tree1, in_tree2) {\n  var queue = [{tree1: in_tree1, tree2: in_tree2}];\n  var conflicts = false;\n  while (queue.length > 0) {\n    var item = queue.pop();\n    var tree1 = item.tree1;\n    var tree2 = item.tree2;\n\n    if (tree1[1].status || tree2[1].status) {\n      tree1[1].status =\n        (tree1[1].status ===  'available' ||\n        tree2[1].status === 'available') ? 'available' : 'missing';\n    }\n\n    for (var i = 0; i < tree2[2].length; i++) {\n      if (!tree1[2][0]) {\n        conflicts = 'new_leaf';\n        tree1[2][0] = tree2[2][i];\n        continue;\n      }\n\n      var merged = false;\n      for (var j = 0; j < tree1[2].length; j++) {\n        if (tree1[2][j][0] === tree2[2][i][0]) {\n          queue.push({tree1: tree1[2][j], tree2: tree2[2][i]});\n          merged = true;\n        }\n      }\n      if (!merged) {\n        conflicts = 'new_branch';\n        insertSorted(tree1[2], tree2[2][i], compareTree);\n      }\n    }\n  }\n  return {conflicts: conflicts, tree: in_tree1};\n}\n\nfunction doMerge(tree, path, dontExpand) {\n  var restree = [];\n  var conflicts = false;\n  var merged = false;\n  var res;\n\n  if (!tree.length) {\n    return {tree: [path], conflicts: 'new_leaf'};\n  }\n\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var branch = tree[i];\n    if (branch.pos === path.pos && branch.ids[0] === path.ids[0]) {\n      // Paths start at the same position and have the same root, so they need\n      // merged\n      res = mergeTree(branch.ids, path.ids);\n      restree.push({pos: branch.pos, ids: res.tree});\n      conflicts = conflicts || res.conflicts;\n      merged = true;\n    } else if (dontExpand !== true) {\n      // The paths start at a different position, take the earliest path and\n      // traverse up until it as at the same point from root as the path we\n      // want to merge.  If the keys match we return the longer path with the\n      // other merged After stemming we dont want to expand the trees\n\n      var t1 = branch.pos < path.pos ? branch : path;\n      var t2 = branch.pos < path.pos ? path : branch;\n      var diff = t2.pos - t1.pos;\n\n      var candidateParents = [];\n\n      var trees = [];\n      trees.push({ids: t1.ids, diff: diff, parent: null, parentIdx: null});\n      while (trees.length > 0) {\n        var item = trees.pop();\n        if (item.diff === 0) {\n          if (item.ids[0] === t2.ids[0]) {\n            candidateParents.push(item);\n          }\n          continue;\n        }\n        var elements = item.ids[2];\n        for (var j = 0, elementsLen = elements.length; j < elementsLen; j++) {\n          trees.push({\n            ids: elements[j],\n            diff: item.diff - 1,\n            parent: item.ids,\n            parentIdx: j\n          });\n        }\n      }\n\n      var el = candidateParents[0];\n\n      if (!el) {\n        restree.push(branch);\n      } else {\n        res = mergeTree(el.ids, t2.ids);\n        el.parent[2][el.parentIdx] = res.tree;\n        restree.push({pos: t1.pos, ids: t1.ids});\n        conflicts = conflicts || res.conflicts;\n        merged = true;\n      }\n    } else {\n      restree.push(branch);\n    }\n  }\n\n  // We didnt find\n  if (!merged) {\n    restree.push(path);\n  }\n\n  restree.sort(sortByPos$1);\n\n  return {\n    tree: restree,\n    conflicts: conflicts || 'internal_node'\n  };\n}\n\n// To ensure we dont grow the revision tree infinitely, we stem old revisions\nfunction stem(tree, depth) {\n  // First we break out the tree into a complete list of root to leaf paths\n  var paths = rootToLeaf(tree);\n  var stemmedRevs;\n\n  var result;\n  for (var i = 0, len = paths.length; i < len; i++) {\n    // Then for each path, we cut off the start of the path based on the\n    // `depth` to stem to, and generate a new set of flat trees\n    var path = paths[i];\n    var stemmed = path.ids;\n    var node;\n    if (stemmed.length > depth) {\n      // only do the stemming work if we actually need to stem\n      if (!stemmedRevs) {\n        stemmedRevs = {}; // avoid allocating this object unnecessarily\n      }\n      var numStemmed = stemmed.length - depth;\n      node = {\n        pos: path.pos + numStemmed,\n        ids: pathToTree(stemmed, numStemmed)\n      };\n\n      for (var s = 0; s < numStemmed; s++) {\n        var rev = (path.pos + s) + '-' + stemmed[s].id;\n        stemmedRevs[rev] = true;\n      }\n    } else { // no need to actually stem\n      node = {\n        pos: path.pos,\n        ids: pathToTree(stemmed, 0)\n      };\n    }\n\n    // Then we remerge all those flat trees together, ensuring that we dont\n    // connect trees that would go beyond the depth limit\n    if (result) {\n      result = doMerge(result, node, true).tree;\n    } else {\n      result = [node];\n    }\n  }\n\n  // this is memory-heavy per Chrome profiler, avoid unless we actually stemmed\n  if (stemmedRevs) {\n    traverseRevTree(result, function (isLeaf, pos, revHash) {\n      // some revisions may have been removed in a branch but not in another\n      delete stemmedRevs[pos + '-' + revHash];\n    });\n  }\n\n  return {\n    tree: result,\n    revs: stemmedRevs ? Object.keys(stemmedRevs) : []\n  };\n}\n\nfunction merge(tree, path, depth) {\n  var newTree = doMerge(tree, path);\n  var stemmed = stem(newTree.tree, depth);\n  return {\n    tree: stemmed.tree,\n    stemmedRevs: stemmed.revs,\n    conflicts: newTree.conflicts\n  };\n}\n\n// return true if a rev exists in the rev tree, false otherwise\nfunction revExists(revs, rev) {\n  var toVisit = revs.slice();\n  var splitRev = rev.split('-');\n  var targetPos = parseInt(splitRev[0], 10);\n  var targetId = splitRev[1];\n\n  var node;\n  while ((node = toVisit.pop())) {\n    if (node.pos === targetPos && node.ids[0] === targetId) {\n      return true;\n    }\n    var branches = node.ids[2];\n    for (var i = 0, len = branches.length; i < len; i++) {\n      toVisit.push({pos: node.pos + 1, ids: branches[i]});\n    }\n  }\n  return false;\n}\n\nfunction getTrees(node) {\n  return node.ids;\n}\n\n// check if a specific revision of a doc has been deleted\n//  - metadata: the metadata object from the doc store\n//  - rev: (optional) the revision to check. defaults to winning revision\nfunction isDeleted(metadata, rev) {\n  if (!rev) {\n    rev = winningRev(metadata);\n  }\n  var id = rev.substring(rev.indexOf('-') + 1);\n  var toVisit = metadata.rev_tree.map(getTrees);\n\n  var tree;\n  while ((tree = toVisit.pop())) {\n    if (tree[0] === id) {\n      return !!tree[1].deleted;\n    }\n    toVisit = toVisit.concat(tree[2]);\n  }\n}\n\nfunction isLocalId(id) {\n  return (/^_local/).test(id);\n}\n\n// returns the current leaf node for a given revision\nfunction latest(rev, metadata) {\n  var toVisit = metadata.rev_tree.slice();\n  var node;\n  while ((node = toVisit.pop())) {\n    var pos = node.pos;\n    var tree = node.ids;\n    var id = tree[0];\n    var opts = tree[1];\n    var branches = tree[2];\n    var isLeaf = branches.length === 0;\n\n    var history = node.history ? node.history.slice() : [];\n    history.push({id: id, pos: pos, opts: opts});\n\n    if (isLeaf) {\n      for (var i = 0, len = history.length; i < len; i++) {\n        var historyNode = history[i];\n        var historyRev = historyNode.pos + '-' + historyNode.id;\n\n        if (historyRev === rev) {\n          // return the rev of this leaf\n          return pos + '-' + id;\n        }\n      }\n    }\n\n    for (var j = 0, l = branches.length; j < l; j++) {\n      toVisit.push({pos: pos + 1, ids: branches[j], history: history});\n    }\n  }\n\n  /* istanbul ignore next */\n  throw new Error('Unable to resolve latest revision for id ' + metadata.id + ', rev ' + rev);\n}\n\ninherits(Changes$1, EE);\n\nfunction tryCatchInChangeListener(self, change, pending, lastSeq) {\n  // isolate try/catches to avoid V8 deoptimizations\n  try {\n    self.emit('change', change, pending, lastSeq);\n  } catch (e) {\n    guardedConsole('error', 'Error in .on(\"change\", function):', e);\n  }\n}\n\nfunction Changes$1(db, opts, callback) {\n  EE.call(this);\n  var self = this;\n  this.db = db;\n  opts = opts ? clone(opts) : {};\n  var complete = opts.complete = once(function (err, resp) {\n    if (err) {\n      if (listenerCount(self, 'error') > 0) {\n        self.emit('error', err);\n      }\n    } else {\n      self.emit('complete', resp);\n    }\n    self.removeAllListeners();\n    db.removeListener('destroyed', onDestroy);\n  });\n  if (callback) {\n    self.on('complete', function (resp) {\n      callback(null, resp);\n    });\n    self.on('error', callback);\n  }\n  function onDestroy() {\n    self.cancel();\n  }\n  db.once('destroyed', onDestroy);\n\n  opts.onChange = function (change, pending, lastSeq) {\n    /* istanbul ignore if */\n    if (self.isCancelled) {\n      return;\n    }\n    tryCatchInChangeListener(self, change, pending, lastSeq);\n  };\n\n  var promise = new Promise(function (fulfill, reject) {\n    opts.complete = function (err, res) {\n      if (err) {\n        reject(err);\n      } else {\n        fulfill(res);\n      }\n    };\n  });\n  self.once('cancel', function () {\n    db.removeListener('destroyed', onDestroy);\n    opts.complete(null, {status: 'cancelled'});\n  });\n  this.then = promise.then.bind(promise);\n  this['catch'] = promise['catch'].bind(promise);\n  this.then(function (result) {\n    complete(null, result);\n  }, complete);\n\n\n\n  if (!db.taskqueue.isReady) {\n    db.taskqueue.addTask(function (failed) {\n      if (failed) {\n        opts.complete(failed);\n      } else if (self.isCancelled) {\n        self.emit('cancel');\n      } else {\n        self.validateChanges(opts);\n      }\n    });\n  } else {\n    self.validateChanges(opts);\n  }\n}\nChanges$1.prototype.cancel = function () {\n  this.isCancelled = true;\n  if (this.db.taskqueue.isReady) {\n    this.emit('cancel');\n  }\n};\nfunction processChange(doc, metadata, opts) {\n  var changeList = [{rev: doc._rev}];\n  if (opts.style === 'all_docs') {\n    changeList = collectLeaves(metadata.rev_tree)\n    .map(function (x) { return {rev: x.rev}; });\n  }\n  var change = {\n    id: metadata.id,\n    changes: changeList,\n    doc: doc\n  };\n\n  if (isDeleted(metadata, doc._rev)) {\n    change.deleted = true;\n  }\n  if (opts.conflicts) {\n    change.doc._conflicts = collectConflicts(metadata);\n    if (!change.doc._conflicts.length) {\n      delete change.doc._conflicts;\n    }\n  }\n  return change;\n}\n\nChanges$1.prototype.validateChanges = function (opts) {\n  var callback = opts.complete;\n  var self = this;\n\n  /* istanbul ignore else */\n  if (PouchDB._changesFilterPlugin) {\n    PouchDB._changesFilterPlugin.validate(opts, function (err) {\n      if (err) {\n        return callback(err);\n      }\n      self.doChanges(opts);\n    });\n  } else {\n    self.doChanges(opts);\n  }\n};\n\nChanges$1.prototype.doChanges = function (opts) {\n  var self = this;\n  var callback = opts.complete;\n\n  opts = clone(opts);\n  if ('live' in opts && !('continuous' in opts)) {\n    opts.continuous = opts.live;\n  }\n  opts.processChange = processChange;\n\n  if (opts.since === 'latest') {\n    opts.since = 'now';\n  }\n  if (!opts.since) {\n    opts.since = 0;\n  }\n  if (opts.since === 'now') {\n    this.db.info().then(function (info) {\n      /* istanbul ignore if */\n      if (self.isCancelled) {\n        callback(null, {status: 'cancelled'});\n        return;\n      }\n      opts.since = info.update_seq;\n      self.doChanges(opts);\n    }, callback);\n    return;\n  }\n\n  /* istanbul ignore else */\n  if (PouchDB._changesFilterPlugin) {\n    PouchDB._changesFilterPlugin.normalize(opts);\n    if (PouchDB._changesFilterPlugin.shouldFilter(this, opts)) {\n      return PouchDB._changesFilterPlugin.filter(this, opts);\n    }\n  } else {\n    ['doc_ids', 'filter', 'selector', 'view'].forEach(function (key) {\n      if (key in opts) {\n        guardedConsole('warn',\n          'The \"' + key + '\" option was passed in to changes/replicate, ' +\n          'but pouchdb-changes-filter plugin is not installed, so it ' +\n          'was ignored. Please install the plugin to enable filtering.'\n        );\n      }\n    });\n  }\n\n  if (!('descending' in opts)) {\n    opts.descending = false;\n  }\n\n  // 0 and 1 should return 1 document\n  opts.limit = opts.limit === 0 ? 1 : opts.limit;\n  opts.complete = callback;\n  var newPromise = this.db._changes(opts);\n  /* istanbul ignore else */\n  if (newPromise && typeof newPromise.cancel === 'function') {\n    var cancel = self.cancel;\n    self.cancel = getArguments(function (args) {\n      newPromise.cancel();\n      cancel.apply(this, args);\n    });\n  }\n};\n\n/*\n * A generic pouch adapter\n */\n\nfunction compare(left, right) {\n  return left < right ? -1 : left > right ? 1 : 0;\n}\n\n// Wrapper for functions that call the bulkdocs api with a single doc,\n// if the first result is an error, return an error\nfunction yankError(callback, docId) {\n  return function (err, results) {\n    if (err || (results[0] && results[0].error)) {\n      err = err || results[0];\n      err.docId = docId;\n      callback(err);\n    } else {\n      callback(null, results.length ? results[0]  : results);\n    }\n  };\n}\n\n// clean docs given to us by the user\nfunction cleanDocs(docs) {\n  for (var i = 0; i < docs.length; i++) {\n    var doc = docs[i];\n    if (doc._deleted) {\n      delete doc._attachments; // ignore atts for deleted docs\n    } else if (doc._attachments) {\n      // filter out extraneous keys from _attachments\n      var atts = Object.keys(doc._attachments);\n      for (var j = 0; j < atts.length; j++) {\n        var att = atts[j];\n        doc._attachments[att] = pick(doc._attachments[att],\n          ['data', 'digest', 'content_type', 'length', 'revpos', 'stub']);\n      }\n    }\n  }\n}\n\n// compare two docs, first by _id then by _rev\nfunction compareByIdThenRev(a, b) {\n  var idCompare = compare(a._id, b._id);\n  if (idCompare !== 0) {\n    return idCompare;\n  }\n  var aStart = a._revisions ? a._revisions.start : 0;\n  var bStart = b._revisions ? b._revisions.start : 0;\n  return compare(aStart, bStart);\n}\n\n// for every node in a revision tree computes its distance from the closest\n// leaf\nfunction computeHeight(revs) {\n  var height = {};\n  var edges = [];\n  traverseRevTree(revs, function (isLeaf, pos, id, prnt) {\n    var rev$$1 = pos + \"-\" + id;\n    if (isLeaf) {\n      height[rev$$1] = 0;\n    }\n    if (prnt !== undefined) {\n      edges.push({from: prnt, to: rev$$1});\n    }\n    return rev$$1;\n  });\n\n  edges.reverse();\n  edges.forEach(function (edge) {\n    if (height[edge.from] === undefined) {\n      height[edge.from] = 1 + height[edge.to];\n    } else {\n      height[edge.from] = Math.min(height[edge.from], 1 + height[edge.to]);\n    }\n  });\n  return height;\n}\n\nfunction allDocsKeysParse(opts) {\n  var keys =  ('limit' in opts) ?\n    opts.keys.slice(opts.skip, opts.limit + opts.skip) :\n    (opts.skip > 0) ? opts.keys.slice(opts.skip) : opts.keys;\n  opts.keys = keys;\n  opts.skip = 0;\n  delete opts.limit;\n  if (opts.descending) {\n    keys.reverse();\n    opts.descending = false;\n  }\n}\n\n// all compaction is done in a queue, to avoid attaching\n// too many listeners at once\nfunction doNextCompaction(self) {\n  var task = self._compactionQueue[0];\n  var opts = task.opts;\n  var callback = task.callback;\n  self.get('_local/compaction').catch(function () {\n    return false;\n  }).then(function (doc) {\n    if (doc && doc.last_seq) {\n      opts.last_seq = doc.last_seq;\n    }\n    self._compact(opts, function (err, res) {\n      /* istanbul ignore if */\n      if (err) {\n        callback(err);\n      } else {\n        callback(null, res);\n      }\n      immediate(function () {\n        self._compactionQueue.shift();\n        if (self._compactionQueue.length) {\n          doNextCompaction(self);\n        }\n      });\n    });\n  });\n}\n\nfunction attachmentNameError(name) {\n  if (name.charAt(0) === '_') {\n    return name + ' is not a valid attachment name, attachment ' +\n      'names cannot start with \\'_\\'';\n  }\n  return false;\n}\n\ninherits(AbstractPouchDB, EE);\n\nfunction AbstractPouchDB() {\n  EE.call(this);\n\n  // re-bind prototyped methods\n  for (var p in AbstractPouchDB.prototype) {\n    if (typeof this[p] === 'function') {\n      this[p] = this[p].bind(this);\n    }\n  }\n}\n\nAbstractPouchDB.prototype.post =\n  adapterFun('post', function (doc, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  if (typeof doc !== 'object' || Array.isArray(doc)) {\n    return callback(createError(NOT_AN_OBJECT));\n  }\n  this.bulkDocs({docs: [doc]}, opts, yankError(callback, doc._id));\n});\n\nAbstractPouchDB.prototype.put = adapterFun('put', function (doc, opts, cb) {\n  if (typeof opts === 'function') {\n    cb = opts;\n    opts = {};\n  }\n  if (typeof doc !== 'object' || Array.isArray(doc)) {\n    return cb(createError(NOT_AN_OBJECT));\n  }\n  invalidIdError(doc._id);\n  if (isLocalId(doc._id) && typeof this._putLocal === 'function') {\n    if (doc._deleted) {\n      return this._removeLocal(doc, cb);\n    } else {\n      return this._putLocal(doc, cb);\n    }\n  }\n  var self = this;\n  if (opts.force && doc._rev) {\n    transformForceOptionToNewEditsOption();\n    putDoc(function (err) {\n      var result = err ? null : {ok: true, id: doc._id, rev: doc._rev};\n      cb(err, result);\n    });\n  } else {\n    putDoc(cb);\n  }\n\n  function transformForceOptionToNewEditsOption() {\n    var parts = doc._rev.split('-');\n    var oldRevId = parts[1];\n    var oldRevNum = parseInt(parts[0], 10);\n\n    var newRevNum = oldRevNum + 1;\n    var newRevId = rev();\n\n    doc._revisions = {\n      start: newRevNum,\n      ids: [newRevId, oldRevId]\n    };\n    doc._rev = newRevNum + '-' + newRevId;\n    opts.new_edits = false;\n  }\n  function putDoc(next) {\n    if (typeof self._put === 'function' && opts.new_edits !== false) {\n      self._put(doc, opts, next);\n    } else {\n      self.bulkDocs({docs: [doc]}, opts, yankError(next, doc._id));\n    }\n  }\n});\n\nAbstractPouchDB.prototype.putAttachment =\n  adapterFun('putAttachment', function (docId, attachmentId, rev$$1,\n                                              blob, type) {\n  var api = this;\n  if (typeof type === 'function') {\n    type = blob;\n    blob = rev$$1;\n    rev$$1 = null;\n  }\n  // Lets fix in https://github.com/pouchdb/pouchdb/issues/3267\n  /* istanbul ignore if */\n  if (typeof type === 'undefined') {\n    type = blob;\n    blob = rev$$1;\n    rev$$1 = null;\n  }\n  if (!type) {\n    guardedConsole('warn', 'Attachment', attachmentId, 'on document', docId, 'is missing content_type');\n  }\n\n  function createAttachment(doc) {\n    var prevrevpos = '_rev' in doc ? parseInt(doc._rev, 10) : 0;\n    doc._attachments = doc._attachments || {};\n    doc._attachments[attachmentId] = {\n      content_type: type,\n      data: blob,\n      revpos: ++prevrevpos\n    };\n    return api.put(doc);\n  }\n\n  return api.get(docId).then(function (doc) {\n    if (doc._rev !== rev$$1) {\n      throw createError(REV_CONFLICT);\n    }\n\n    return createAttachment(doc);\n  }, function (err) {\n     // create new doc\n    /* istanbul ignore else */\n    if (err.reason === MISSING_DOC.message) {\n      return createAttachment({_id: docId});\n    } else {\n      throw err;\n    }\n  });\n});\n\nAbstractPouchDB.prototype.removeAttachment =\n  adapterFun('removeAttachment', function (docId, attachmentId, rev$$1,\n                                                 callback) {\n  var self = this;\n  self.get(docId, function (err, obj) {\n    /* istanbul ignore if */\n    if (err) {\n      callback(err);\n      return;\n    }\n    if (obj._rev !== rev$$1) {\n      callback(createError(REV_CONFLICT));\n      return;\n    }\n    /* istanbul ignore if */\n    if (!obj._attachments) {\n      return callback();\n    }\n    delete obj._attachments[attachmentId];\n    if (Object.keys(obj._attachments).length === 0) {\n      delete obj._attachments;\n    }\n    self.put(obj, callback);\n  });\n});\n\nAbstractPouchDB.prototype.remove =\n  adapterFun('remove', function (docOrId, optsOrRev, opts, callback) {\n  var doc;\n  if (typeof optsOrRev === 'string') {\n    // id, rev, opts, callback style\n    doc = {\n      _id: docOrId,\n      _rev: optsOrRev\n    };\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n  } else {\n    // doc, opts, callback style\n    doc = docOrId;\n    if (typeof optsOrRev === 'function') {\n      callback = optsOrRev;\n      opts = {};\n    } else {\n      callback = opts;\n      opts = optsOrRev;\n    }\n  }\n  opts = opts || {};\n  opts.was_delete = true;\n  var newDoc = {_id: doc._id, _rev: (doc._rev || opts.rev)};\n  newDoc._deleted = true;\n  if (isLocalId(newDoc._id) && typeof this._removeLocal === 'function') {\n    return this._removeLocal(doc, callback);\n  }\n  this.bulkDocs({docs: [newDoc]}, opts, yankError(callback, newDoc._id));\n});\n\nAbstractPouchDB.prototype.revsDiff =\n  adapterFun('revsDiff', function (req, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  var ids = Object.keys(req);\n\n  if (!ids.length) {\n    return callback(null, {});\n  }\n\n  var count = 0;\n  var missing = new ExportedMap();\n\n  function addToMissing(id, revId) {\n    if (!missing.has(id)) {\n      missing.set(id, {missing: []});\n    }\n    missing.get(id).missing.push(revId);\n  }\n\n  function processDoc(id, rev_tree) {\n    // Is this fast enough? Maybe we should switch to a set simulated by a map\n    var missingForId = req[id].slice(0);\n    traverseRevTree(rev_tree, function (isLeaf, pos, revHash, ctx,\n      opts) {\n        var rev$$1 = pos + '-' + revHash;\n        var idx = missingForId.indexOf(rev$$1);\n        if (idx === -1) {\n          return;\n        }\n\n        missingForId.splice(idx, 1);\n        /* istanbul ignore if */\n        if (opts.status !== 'available') {\n          addToMissing(id, rev$$1);\n        }\n      });\n\n    // Traversing the tree is synchronous, so now `missingForId` contains\n    // revisions that were not found in the tree\n    missingForId.forEach(function (rev$$1) {\n      addToMissing(id, rev$$1);\n    });\n  }\n\n  ids.map(function (id) {\n    this._getRevisionTree(id, function (err, rev_tree) {\n      if (err && err.status === 404 && err.message === 'missing') {\n        missing.set(id, {missing: req[id]});\n      } else if (err) {\n        /* istanbul ignore next */\n        return callback(err);\n      } else {\n        processDoc(id, rev_tree);\n      }\n\n      if (++count === ids.length) {\n        // convert LazyMap to object\n        var missingObj = {};\n        missing.forEach(function (value, key) {\n          missingObj[key] = value;\n        });\n        return callback(null, missingObj);\n      }\n    });\n  }, this);\n});\n\n// _bulk_get API for faster replication, as described in\n// https://github.com/apache/couchdb-chttpd/pull/33\n// At the \"abstract\" level, it will just run multiple get()s in\n// parallel, because this isn't much of a performance cost\n// for local databases (except the cost of multiple transactions, which is\n// small). The http adapter overrides this in order\n// to do a more efficient single HTTP request.\nAbstractPouchDB.prototype.bulkGet =\n  adapterFun('bulkGet', function (opts, callback) {\n  bulkGet(this, opts, callback);\n});\n\n// compact one document and fire callback\n// by compacting we mean removing all revisions which\n// are further from the leaf in revision tree than max_height\nAbstractPouchDB.prototype.compactDocument =\n  adapterFun('compactDocument', function (docId, maxHeight, callback) {\n  var self = this;\n  this._getRevisionTree(docId, function (err, revTree) {\n    /* istanbul ignore if */\n    if (err) {\n      return callback(err);\n    }\n    var height = computeHeight(revTree);\n    var candidates = [];\n    var revs = [];\n    Object.keys(height).forEach(function (rev$$1) {\n      if (height[rev$$1] > maxHeight) {\n        candidates.push(rev$$1);\n      }\n    });\n\n    traverseRevTree(revTree, function (isLeaf, pos, revHash, ctx, opts) {\n      var rev$$1 = pos + '-' + revHash;\n      if (opts.status === 'available' && candidates.indexOf(rev$$1) !== -1) {\n        revs.push(rev$$1);\n      }\n    });\n    self._doCompaction(docId, revs, callback);\n  });\n});\n\n// compact the whole database using single document\n// compaction\nAbstractPouchDB.prototype.compact =\n  adapterFun('compact', function (opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n\n  var self = this;\n  opts = opts || {};\n\n  self._compactionQueue = self._compactionQueue || [];\n  self._compactionQueue.push({opts: opts, callback: callback});\n  if (self._compactionQueue.length === 1) {\n    doNextCompaction(self);\n  }\n});\nAbstractPouchDB.prototype._compact = function (opts, callback) {\n  var self = this;\n  var changesOpts = {\n    return_docs: false,\n    last_seq: opts.last_seq || 0\n  };\n  var promises = [];\n\n  function onChange(row) {\n    promises.push(self.compactDocument(row.id, 0));\n  }\n  function onComplete(resp) {\n    var lastSeq = resp.last_seq;\n    Promise.all(promises).then(function () {\n      return upsert(self, '_local/compaction', function deltaFunc(doc) {\n        if (!doc.last_seq || doc.last_seq < lastSeq) {\n          doc.last_seq = lastSeq;\n          return doc;\n        }\n        return false; // somebody else got here first, don't update\n      });\n    }).then(function () {\n      callback(null, {ok: true});\n    }).catch(callback);\n  }\n  self.changes(changesOpts)\n    .on('change', onChange)\n    .on('complete', onComplete)\n    .on('error', callback);\n};\n\n/* Begin api wrappers. Specific functionality to storage belongs in the\n   _[method] */\nAbstractPouchDB.prototype.get = adapterFun('get', function (id, opts, cb) {\n  if (typeof opts === 'function') {\n    cb = opts;\n    opts = {};\n  }\n  if (typeof id !== 'string') {\n    return cb(createError(INVALID_ID));\n  }\n  if (isLocalId(id) && typeof this._getLocal === 'function') {\n    return this._getLocal(id, cb);\n  }\n  var leaves = [], self = this;\n\n  function finishOpenRevs() {\n    var result = [];\n    var count = leaves.length;\n    /* istanbul ignore if */\n    if (!count) {\n      return cb(null, result);\n    }\n\n    // order with open_revs is unspecified\n    leaves.forEach(function (leaf) {\n      self.get(id, {\n        rev: leaf,\n        revs: opts.revs,\n        latest: opts.latest,\n        attachments: opts.attachments,\n        binary: opts.binary\n      }, function (err, doc) {\n        if (!err) {\n          // using latest=true can produce duplicates\n          var existing;\n          for (var i = 0, l = result.length; i < l; i++) {\n            if (result[i].ok && result[i].ok._rev === doc._rev) {\n              existing = true;\n              break;\n            }\n          }\n          if (!existing) {\n            result.push({ok: doc});\n          }\n        } else {\n          result.push({missing: leaf});\n        }\n        count--;\n        if (!count) {\n          cb(null, result);\n        }\n      });\n    });\n  }\n\n  if (opts.open_revs) {\n    if (opts.open_revs === \"all\") {\n      this._getRevisionTree(id, function (err, rev_tree) {\n        /* istanbul ignore if */\n        if (err) {\n          return cb(err);\n        }\n        leaves = collectLeaves(rev_tree).map(function (leaf) {\n          return leaf.rev;\n        });\n        finishOpenRevs();\n      });\n    } else {\n      if (Array.isArray(opts.open_revs)) {\n        leaves = opts.open_revs;\n        for (var i = 0; i < leaves.length; i++) {\n          var l = leaves[i];\n          // looks like it's the only thing couchdb checks\n          if (!(typeof (l) === \"string\" && /^\\d+-/.test(l))) {\n            return cb(createError(INVALID_REV));\n          }\n        }\n        finishOpenRevs();\n      } else {\n        return cb(createError(UNKNOWN_ERROR, 'function_clause'));\n      }\n    }\n    return; // open_revs does not like other options\n  }\n\n  return this._get(id, opts, function (err, result) {\n    if (err) {\n      err.docId = id;\n      return cb(err);\n    }\n\n    var doc = result.doc;\n    var metadata = result.metadata;\n    var ctx = result.ctx;\n\n    if (opts.conflicts) {\n      var conflicts = collectConflicts(metadata);\n      if (conflicts.length) {\n        doc._conflicts = conflicts;\n      }\n    }\n\n    if (isDeleted(metadata, doc._rev)) {\n      doc._deleted = true;\n    }\n\n    if (opts.revs || opts.revs_info) {\n      var splittedRev = doc._rev.split('-');\n      var revNo       = parseInt(splittedRev[0], 10);\n      var revHash     = splittedRev[1];\n\n      var paths = rootToLeaf(metadata.rev_tree);\n      var path = null;\n\n      for (var i = 0; i < paths.length; i++) {\n        var currentPath = paths[i];\n        var hashIndex = currentPath.ids.map(function (x) { return x.id; })\n          .indexOf(revHash);\n        var hashFoundAtRevPos = hashIndex === (revNo - 1);\n\n        if (hashFoundAtRevPos || (!path && hashIndex !== -1)) {\n          path = currentPath;\n        }\n      }\n\n      /* istanbul ignore if */\n      if (!path) {\n        err = new Error('invalid rev tree');\n        err.docId = id;\n        return cb(err);\n      }\n\n      var indexOfRev = path.ids.map(function (x) { return x.id; })\n        .indexOf(doc._rev.split('-')[1]) + 1;\n      var howMany = path.ids.length - indexOfRev;\n      path.ids.splice(indexOfRev, howMany);\n      path.ids.reverse();\n\n      if (opts.revs) {\n        doc._revisions = {\n          start: (path.pos + path.ids.length) - 1,\n          ids: path.ids.map(function (rev$$1) {\n            return rev$$1.id;\n          })\n        };\n      }\n      if (opts.revs_info) {\n        var pos =  path.pos + path.ids.length;\n        doc._revs_info = path.ids.map(function (rev$$1) {\n          pos--;\n          return {\n            rev: pos + '-' + rev$$1.id,\n            status: rev$$1.opts.status\n          };\n        });\n      }\n    }\n\n    if (opts.attachments && doc._attachments) {\n      var attachments = doc._attachments;\n      var count = Object.keys(attachments).length;\n      if (count === 0) {\n        return cb(null, doc);\n      }\n      Object.keys(attachments).forEach(function (key) {\n        this._getAttachment(doc._id, key, attachments[key], {\n          // Previously the revision handling was done in adapter.js\n          // getAttachment, however since idb-next doesnt we need to\n          // pass the rev through\n          rev: doc._rev,\n          binary: opts.binary,\n          ctx: ctx\n        }, function (err, data) {\n          var att = doc._attachments[key];\n          att.data = data;\n          delete att.stub;\n          delete att.length;\n          if (!--count) {\n            cb(null, doc);\n          }\n        });\n      }, self);\n    } else {\n      if (doc._attachments) {\n        for (var key in doc._attachments) {\n          /* istanbul ignore else */\n          if (doc._attachments.hasOwnProperty(key)) {\n            doc._attachments[key].stub = true;\n          }\n        }\n      }\n      cb(null, doc);\n    }\n  });\n});\n\n// TODO: I dont like this, it forces an extra read for every\n// attachment read and enforces a confusing api between\n// adapter.js and the adapter implementation\nAbstractPouchDB.prototype.getAttachment =\n  adapterFun('getAttachment', function (docId, attachmentId, opts, callback) {\n  var self = this;\n  if (opts instanceof Function) {\n    callback = opts;\n    opts = {};\n  }\n  this._get(docId, opts, function (err, res) {\n    if (err) {\n      return callback(err);\n    }\n    if (res.doc._attachments && res.doc._attachments[attachmentId]) {\n      opts.ctx = res.ctx;\n      opts.binary = true;\n      self._getAttachment(docId, attachmentId,\n                          res.doc._attachments[attachmentId], opts, callback);\n    } else {\n      return callback(createError(MISSING_DOC));\n    }\n  });\n});\n\nAbstractPouchDB.prototype.allDocs =\n  adapterFun('allDocs', function (opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  opts.skip = typeof opts.skip !== 'undefined' ? opts.skip : 0;\n  if (opts.start_key) {\n    opts.startkey = opts.start_key;\n  }\n  if (opts.end_key) {\n    opts.endkey = opts.end_key;\n  }\n  if ('keys' in opts) {\n    if (!Array.isArray(opts.keys)) {\n      return callback(new TypeError('options.keys must be an array'));\n    }\n    var incompatibleOpt =\n      ['startkey', 'endkey', 'key'].filter(function (incompatibleOpt) {\n      return incompatibleOpt in opts;\n    })[0];\n    if (incompatibleOpt) {\n      callback(createError(QUERY_PARSE_ERROR,\n        'Query parameter `' + incompatibleOpt +\n        '` is not compatible with multi-get'\n      ));\n      return;\n    }\n    if (!isRemote(this)) {\n      allDocsKeysParse(opts);\n      if (opts.keys.length === 0) {\n        return this._allDocs({limit: 0}, callback);\n      }\n    }\n  }\n\n  return this._allDocs(opts, callback);\n});\n\nAbstractPouchDB.prototype.changes = function (opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n\n  opts = opts || {};\n\n  // By default set return_docs to false if the caller has opts.live = true,\n  // this will prevent us from collecting the set of changes indefinitely\n  // resulting in growing memory\n  opts.return_docs = ('return_docs' in opts) ? opts.return_docs : !opts.live;\n\n  return new Changes$1(this, opts, callback);\n};\n\nAbstractPouchDB.prototype.close = adapterFun('close', function (callback) {\n  this._closed = true;\n  this.emit('closed');\n  return this._close(callback);\n});\n\nAbstractPouchDB.prototype.info = adapterFun('info', function (callback) {\n  var self = this;\n  this._info(function (err, info) {\n    if (err) {\n      return callback(err);\n    }\n    // assume we know better than the adapter, unless it informs us\n    info.db_name = info.db_name || self.name;\n    info.auto_compaction = !!(self.auto_compaction && !isRemote(self));\n    info.adapter = self.adapter;\n    callback(null, info);\n  });\n});\n\nAbstractPouchDB.prototype.id = adapterFun('id', function (callback) {\n  return this._id(callback);\n});\n\n/* istanbul ignore next */\nAbstractPouchDB.prototype.type = function () {\n  return (typeof this._type === 'function') ? this._type() : this.adapter;\n};\n\nAbstractPouchDB.prototype.bulkDocs =\n  adapterFun('bulkDocs', function (req, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n\n  opts = opts || {};\n\n  if (Array.isArray(req)) {\n    req = {\n      docs: req\n    };\n  }\n\n  if (!req || !req.docs || !Array.isArray(req.docs)) {\n    return callback(createError(MISSING_BULK_DOCS));\n  }\n\n  for (var i = 0; i < req.docs.length; ++i) {\n    if (typeof req.docs[i] !== 'object' || Array.isArray(req.docs[i])) {\n      return callback(createError(NOT_AN_OBJECT));\n    }\n  }\n\n  var attachmentError;\n  req.docs.forEach(function (doc) {\n    if (doc._attachments) {\n      Object.keys(doc._attachments).forEach(function (name) {\n        attachmentError = attachmentError || attachmentNameError(name);\n        if (!doc._attachments[name].content_type) {\n          guardedConsole('warn', 'Attachment', name, 'on document', doc._id, 'is missing content_type');\n        }\n      });\n    }\n  });\n\n  if (attachmentError) {\n    return callback(createError(BAD_REQUEST, attachmentError));\n  }\n\n  if (!('new_edits' in opts)) {\n    if ('new_edits' in req) {\n      opts.new_edits = req.new_edits;\n    } else {\n      opts.new_edits = true;\n    }\n  }\n\n  var adapter = this;\n  if (!opts.new_edits && !isRemote(adapter)) {\n    // ensure revisions of the same doc are sorted, so that\n    // the local adapter processes them correctly (#2935)\n    req.docs.sort(compareByIdThenRev);\n  }\n\n  cleanDocs(req.docs);\n\n  // in the case of conflicts, we want to return the _ids to the user\n  // however, the underlying adapter may destroy the docs array, so\n  // create a copy here\n  var ids = req.docs.map(function (doc) {\n    return doc._id;\n  });\n\n  return this._bulkDocs(req, opts, function (err, res) {\n    if (err) {\n      return callback(err);\n    }\n    if (!opts.new_edits) {\n      // this is what couch does when new_edits is false\n      res = res.filter(function (x) {\n        return x.error;\n      });\n    }\n    // add ids for error/conflict responses (not required for CouchDB)\n    if (!isRemote(adapter)) {\n      for (var i = 0, l = res.length; i < l; i++) {\n        res[i].id = res[i].id || ids[i];\n      }\n    }\n\n    callback(null, res);\n  });\n});\n\nAbstractPouchDB.prototype.registerDependentDatabase =\n  adapterFun('registerDependentDatabase', function (dependentDb,\n                                                          callback) {\n  var depDB = new this.constructor(dependentDb, this.__opts);\n\n  function diffFun(doc) {\n    doc.dependentDbs = doc.dependentDbs || {};\n    if (doc.dependentDbs[dependentDb]) {\n      return false; // no update required\n    }\n    doc.dependentDbs[dependentDb] = true;\n    return doc;\n  }\n  upsert(this, '_local/_pouch_dependentDbs', diffFun)\n    .then(function () {\n      callback(null, {db: depDB});\n    }).catch(callback);\n});\n\nAbstractPouchDB.prototype.destroy =\n  adapterFun('destroy', function (opts, callback) {\n\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n\n  var self = this;\n  var usePrefix = 'use_prefix' in self ? self.use_prefix : true;\n\n  function destroyDb() {\n    // call destroy method of the particular adaptor\n    self._destroy(opts, function (err, resp) {\n      if (err) {\n        return callback(err);\n      }\n      self._destroyed = true;\n      self.emit('destroyed');\n      callback(null, resp || { 'ok': true });\n    });\n  }\n\n  if (isRemote(self)) {\n    // no need to check for dependent DBs if it's a remote DB\n    return destroyDb();\n  }\n\n  self.get('_local/_pouch_dependentDbs', function (err, localDoc) {\n    if (err) {\n      /* istanbul ignore if */\n      if (err.status !== 404) {\n        return callback(err);\n      } else { // no dependencies\n        return destroyDb();\n      }\n    }\n    var dependentDbs = localDoc.dependentDbs;\n    var PouchDB = self.constructor;\n    var deletedMap = Object.keys(dependentDbs).map(function (name) {\n      // use_prefix is only false in the browser\n      /* istanbul ignore next */\n      var trueName = usePrefix ?\n        name.replace(new RegExp('^' + PouchDB.prefix), '') : name;\n      return new PouchDB(trueName, self.__opts).destroy();\n    });\n    Promise.all(deletedMap).then(destroyDb, callback);\n  });\n});\n\nfunction TaskQueue() {\n  this.isReady = false;\n  this.failed = false;\n  this.queue = [];\n}\n\nTaskQueue.prototype.execute = function () {\n  var fun;\n  if (this.failed) {\n    while ((fun = this.queue.shift())) {\n      fun(this.failed);\n    }\n  } else {\n    while ((fun = this.queue.shift())) {\n      fun();\n    }\n  }\n};\n\nTaskQueue.prototype.fail = function (err) {\n  this.failed = err;\n  this.execute();\n};\n\nTaskQueue.prototype.ready = function (db) {\n  this.isReady = true;\n  this.db = db;\n  this.execute();\n};\n\nTaskQueue.prototype.addTask = function (fun) {\n  this.queue.push(fun);\n  if (this.failed) {\n    this.execute();\n  }\n};\n\nfunction parseAdapter(name, opts) {\n  var match = name.match(/([a-z-]*):\\/\\/(.*)/);\n  if (match) {\n    // the http adapter expects the fully qualified name\n    return {\n      name: /https?/.test(match[1]) ? match[1] + '://' + match[2] : match[2],\n      adapter: match[1]\n    };\n  }\n\n  var adapters = PouchDB.adapters;\n  var preferredAdapters = PouchDB.preferredAdapters;\n  var prefix = PouchDB.prefix;\n  var adapterName = opts.adapter;\n\n  if (!adapterName) { // automatically determine adapter\n    for (var i = 0; i < preferredAdapters.length; ++i) {\n      adapterName = preferredAdapters[i];\n      // check for browsers that have been upgraded from websql-only to websql+idb\n      /* istanbul ignore if */\n      if (adapterName === 'idb' && 'websql' in adapters &&\n          hasLocalStorage() && localStorage['_pouch__websqldb_' + prefix + name]) {\n        // log it, because this can be confusing during development\n        guardedConsole('log', 'PouchDB is downgrading \"' + name + '\" to WebSQL to' +\n          ' avoid data loss, because it was already opened with WebSQL.');\n        continue; // keep using websql to avoid user data loss\n      }\n      break;\n    }\n  }\n\n  var adapter = adapters[adapterName];\n\n  // if adapter is invalid, then an error will be thrown later\n  var usePrefix = (adapter && 'use_prefix' in adapter) ?\n    adapter.use_prefix : true;\n\n  return {\n    name: usePrefix ? (prefix + name) : name,\n    adapter: adapterName\n  };\n}\n\n// OK, so here's the deal. Consider this code:\n//     var db1 = new PouchDB('foo');\n//     var db2 = new PouchDB('foo');\n//     db1.destroy();\n// ^ these two both need to emit 'destroyed' events,\n// as well as the PouchDB constructor itself.\n// So we have one db object (whichever one got destroy() called on it)\n// responsible for emitting the initial event, which then gets emitted\n// by the constructor, which then broadcasts it to any other dbs\n// that may have been created with the same name.\nfunction prepareForDestruction(self) {\n\n  function onDestroyed(from_constructor) {\n    self.removeListener('closed', onClosed);\n    if (!from_constructor) {\n      self.constructor.emit('destroyed', self.name);\n    }\n  }\n\n  function onClosed() {\n    self.removeListener('destroyed', onDestroyed);\n    self.constructor.emit('unref', self);\n  }\n\n  self.once('destroyed', onDestroyed);\n  self.once('closed', onClosed);\n  self.constructor.emit('ref', self);\n}\n\ninherits(PouchDB, AbstractPouchDB);\nfunction PouchDB(name, opts) {\n  // In Node our test suite only tests this for PouchAlt unfortunately\n  /* istanbul ignore if */\n  if (!(this instanceof PouchDB)) {\n    return new PouchDB(name, opts);\n  }\n\n  var self = this;\n  opts = opts || {};\n\n  if (name && typeof name === 'object') {\n    opts = name;\n    name = opts.name;\n    delete opts.name;\n  }\n\n  if (opts.deterministic_revs === undefined) {\n    opts.deterministic_revs = true;\n  }\n\n  this.__opts = opts = clone(opts);\n\n  self.auto_compaction = opts.auto_compaction;\n  self.prefix = PouchDB.prefix;\n\n  if (typeof name !== 'string') {\n    throw new Error('Missing/invalid DB name');\n  }\n\n  var prefixedName = (opts.prefix || '') + name;\n  var backend = parseAdapter(prefixedName, opts);\n\n  opts.name = backend.name;\n  opts.adapter = opts.adapter || backend.adapter;\n\n  self.name = name;\n  self._adapter = opts.adapter;\n  PouchDB.emit('debug', ['adapter', 'Picked adapter: ', opts.adapter]);\n\n  if (!PouchDB.adapters[opts.adapter] ||\n      !PouchDB.adapters[opts.adapter].valid()) {\n    throw new Error('Invalid Adapter: ' + opts.adapter);\n  }\n\n  AbstractPouchDB.call(self);\n  self.taskqueue = new TaskQueue();\n\n  self.adapter = opts.adapter;\n\n  PouchDB.adapters[opts.adapter].call(self, opts, function (err) {\n    if (err) {\n      return self.taskqueue.fail(err);\n    }\n    prepareForDestruction(self);\n\n    self.emit('created', self);\n    PouchDB.emit('created', self.name);\n    self.taskqueue.ready(self);\n  });\n\n}\n\n// AbortController was introduced quite a while after fetch and\n// isnt required for PouchDB to function so polyfill if needed\nvar a = (typeof AbortController !== 'undefined')\n    ? AbortController\n    : function () { return {abort: function () {}}; };\n\nvar f$1 = fetch;\nvar h = Headers;\n\nPouchDB.adapters = {};\nPouchDB.preferredAdapters = [];\n\nPouchDB.prefix = '_pouch_';\n\nvar eventEmitter = new EE();\n\nfunction setUpEventEmitter(Pouch) {\n  Object.keys(EE.prototype).forEach(function (key) {\n    if (typeof EE.prototype[key] === 'function') {\n      Pouch[key] = eventEmitter[key].bind(eventEmitter);\n    }\n  });\n\n  // these are created in constructor.js, and allow us to notify each DB with\n  // the same name that it was destroyed, via the constructor object\n  var destructListeners = Pouch._destructionListeners = new ExportedMap();\n\n  Pouch.on('ref', function onConstructorRef(db) {\n    if (!destructListeners.has(db.name)) {\n      destructListeners.set(db.name, []);\n    }\n    destructListeners.get(db.name).push(db);\n  });\n\n  Pouch.on('unref', function onConstructorUnref(db) {\n    if (!destructListeners.has(db.name)) {\n      return;\n    }\n    var dbList = destructListeners.get(db.name);\n    var pos = dbList.indexOf(db);\n    if (pos < 0) {\n      /* istanbul ignore next */\n      return;\n    }\n    dbList.splice(pos, 1);\n    if (dbList.length > 1) {\n      /* istanbul ignore next */\n      destructListeners.set(db.name, dbList);\n    } else {\n      destructListeners.delete(db.name);\n    }\n  });\n\n  Pouch.on('destroyed', function onConstructorDestroyed(name) {\n    if (!destructListeners.has(name)) {\n      return;\n    }\n    var dbList = destructListeners.get(name);\n    destructListeners.delete(name);\n    dbList.forEach(function (db) {\n      db.emit('destroyed',true);\n    });\n  });\n}\n\nsetUpEventEmitter(PouchDB);\n\nPouchDB.adapter = function (id, obj, addToPreferredAdapters) {\n  /* istanbul ignore else */\n  if (obj.valid()) {\n    PouchDB.adapters[id] = obj;\n    if (addToPreferredAdapters) {\n      PouchDB.preferredAdapters.push(id);\n    }\n  }\n};\n\nPouchDB.plugin = function (obj) {\n  if (typeof obj === 'function') { // function style for plugins\n    obj(PouchDB);\n  } else if (typeof obj !== 'object' || Object.keys(obj).length === 0) {\n    throw new Error('Invalid plugin: got \"' + obj + '\", expected an object or a function');\n  } else {\n    Object.keys(obj).forEach(function (id) { // object style for plugins\n      PouchDB.prototype[id] = obj[id];\n    });\n  }\n  if (this.__defaults) {\n    PouchDB.__defaults = $inject_Object_assign({}, this.__defaults);\n  }\n  return PouchDB;\n};\n\nPouchDB.defaults = function (defaultOpts) {\n  function PouchAlt(name, opts) {\n    if (!(this instanceof PouchAlt)) {\n      return new PouchAlt(name, opts);\n    }\n\n    opts = opts || {};\n\n    if (name && typeof name === 'object') {\n      opts = name;\n      name = opts.name;\n      delete opts.name;\n    }\n\n    opts = $inject_Object_assign({}, PouchAlt.__defaults, opts);\n    PouchDB.call(this, name, opts);\n  }\n\n  inherits(PouchAlt, PouchDB);\n\n  PouchAlt.preferredAdapters = PouchDB.preferredAdapters.slice();\n  Object.keys(PouchDB).forEach(function (key) {\n    if (!(key in PouchAlt)) {\n      PouchAlt[key] = PouchDB[key];\n    }\n  });\n\n  // make default options transitive\n  // https://github.com/pouchdb/pouchdb/issues/5922\n  PouchAlt.__defaults = $inject_Object_assign({}, this.__defaults, defaultOpts);\n\n  return PouchAlt;\n};\n\nPouchDB.fetch = function (url, opts) {\n  return f$1(url, opts);\n};\n\n// managed automatically by set-version.js\nvar version = \"7.2.2\";\n\n// this would just be \"return doc[field]\", but fields\n// can be \"deep\" due to dot notation\nfunction getFieldFromDoc(doc, parsedField) {\n  var value = doc;\n  for (var i = 0, len = parsedField.length; i < len; i++) {\n    var key = parsedField[i];\n    value = value[key];\n    if (!value) {\n      break;\n    }\n  }\n  return value;\n}\n\nfunction compare$1(left, right) {\n  return left < right ? -1 : left > right ? 1 : 0;\n}\n\n// Converts a string in dot notation to an array of its components, with backslash escaping\nfunction parseField(fieldName) {\n  // fields may be deep (e.g. \"foo.bar.baz\"), so parse\n  var fields = [];\n  var current = '';\n  for (var i = 0, len = fieldName.length; i < len; i++) {\n    var ch = fieldName[i];\n    if (ch === '.') {\n      if (i > 0 && fieldName[i - 1] === '\\\\') { // escaped delimiter\n        current = current.substring(0, current.length - 1) + '.';\n      } else { // not escaped, so delimiter\n        fields.push(current);\n        current = '';\n      }\n    } else { // normal character\n      current += ch;\n    }\n  }\n  fields.push(current);\n  return fields;\n}\n\nvar combinationFields = ['$or', '$nor', '$not'];\nfunction isCombinationalField(field) {\n  return combinationFields.indexOf(field) > -1;\n}\n\nfunction getKey(obj) {\n  return Object.keys(obj)[0];\n}\n\nfunction getValue(obj) {\n  return obj[getKey(obj)];\n}\n\n\n// flatten an array of selectors joined by an $and operator\nfunction mergeAndedSelectors(selectors) {\n\n  // sort to ensure that e.g. if the user specified\n  // $and: [{$gt: 'a'}, {$gt: 'b'}], then it's collapsed into\n  // just {$gt: 'b'}\n  var res = {};\n\n  selectors.forEach(function (selector) {\n    Object.keys(selector).forEach(function (field) {\n      var matcher = selector[field];\n      if (typeof matcher !== 'object') {\n        matcher = {$eq: matcher};\n      }\n\n      if (isCombinationalField(field)) {\n        if (matcher instanceof Array) {\n          res[field] = matcher.map(function (m) {\n            return mergeAndedSelectors([m]);\n          });\n        } else {\n          res[field] = mergeAndedSelectors([matcher]);\n        }\n      } else {\n        var fieldMatchers = res[field] = res[field] || {};\n        Object.keys(matcher).forEach(function (operator) {\n          var value = matcher[operator];\n\n          if (operator === '$gt' || operator === '$gte') {\n            return mergeGtGte(operator, value, fieldMatchers);\n          } else if (operator === '$lt' || operator === '$lte') {\n            return mergeLtLte(operator, value, fieldMatchers);\n          } else if (operator === '$ne') {\n            return mergeNe(value, fieldMatchers);\n          } else if (operator === '$eq') {\n            return mergeEq(value, fieldMatchers);\n          }\n          fieldMatchers[operator] = value;\n        });\n      }\n    });\n  });\n\n  return res;\n}\n\n\n\n// collapse logically equivalent gt/gte values\nfunction mergeGtGte(operator, value, fieldMatchers) {\n  if (typeof fieldMatchers.$eq !== 'undefined') {\n    return; // do nothing\n  }\n  if (typeof fieldMatchers.$gte !== 'undefined') {\n    if (operator === '$gte') {\n      if (value > fieldMatchers.$gte) { // more specificity\n        fieldMatchers.$gte = value;\n      }\n    } else { // operator === '$gt'\n      if (value >= fieldMatchers.$gte) { // more specificity\n        delete fieldMatchers.$gte;\n        fieldMatchers.$gt = value;\n      }\n    }\n  } else if (typeof fieldMatchers.$gt !== 'undefined') {\n    if (operator === '$gte') {\n      if (value > fieldMatchers.$gt) { // more specificity\n        delete fieldMatchers.$gt;\n        fieldMatchers.$gte = value;\n      }\n    } else { // operator === '$gt'\n      if (value > fieldMatchers.$gt) { // more specificity\n        fieldMatchers.$gt = value;\n      }\n    }\n  } else {\n    fieldMatchers[operator] = value;\n  }\n}\n\n// collapse logically equivalent lt/lte values\nfunction mergeLtLte(operator, value, fieldMatchers) {\n  if (typeof fieldMatchers.$eq !== 'undefined') {\n    return; // do nothing\n  }\n  if (typeof fieldMatchers.$lte !== 'undefined') {\n    if (operator === '$lte') {\n      if (value < fieldMatchers.$lte) { // more specificity\n        fieldMatchers.$lte = value;\n      }\n    } else { // operator === '$gt'\n      if (value <= fieldMatchers.$lte) { // more specificity\n        delete fieldMatchers.$lte;\n        fieldMatchers.$lt = value;\n      }\n    }\n  } else if (typeof fieldMatchers.$lt !== 'undefined') {\n    if (operator === '$lte') {\n      if (value < fieldMatchers.$lt) { // more specificity\n        delete fieldMatchers.$lt;\n        fieldMatchers.$lte = value;\n      }\n    } else { // operator === '$gt'\n      if (value < fieldMatchers.$lt) { // more specificity\n        fieldMatchers.$lt = value;\n      }\n    }\n  } else {\n    fieldMatchers[operator] = value;\n  }\n}\n\n// combine $ne values into one array\nfunction mergeNe(value, fieldMatchers) {\n  if ('$ne' in fieldMatchers) {\n    // there are many things this could \"not\" be\n    fieldMatchers.$ne.push(value);\n  } else { // doesn't exist yet\n    fieldMatchers.$ne = [value];\n  }\n}\n\n// add $eq into the mix\nfunction mergeEq(value, fieldMatchers) {\n  // these all have less specificity than the $eq\n  // TODO: check for user errors here\n  delete fieldMatchers.$gt;\n  delete fieldMatchers.$gte;\n  delete fieldMatchers.$lt;\n  delete fieldMatchers.$lte;\n  delete fieldMatchers.$ne;\n  fieldMatchers.$eq = value;\n}\n\n//#7458: execute function mergeAndedSelectors on nested $and\nfunction mergeAndedSelectorsNested(obj) {\n    for (var prop in obj) {\n        if (Array.isArray(obj)) {\n            for (var i in obj) {\n                if (obj[i]['$and']) {\n                    obj[i] = mergeAndedSelectors(obj[i]['$and']);\n                }\n            }\n        }\n        var value = obj[prop];\n        if (typeof value === 'object') {\n            mergeAndedSelectorsNested(value); // <- recursive call\n        }\n    }\n    return obj;\n}\n\n//#7458: determine id $and is present in selector (at any level)\nfunction isAndInSelector(obj, isAnd) {\n    for (var prop in obj) {\n        if (prop === '$and') {\n            isAnd = true;\n        }\n        var value = obj[prop];\n        if (typeof value === 'object') {\n            isAnd = isAndInSelector(value, isAnd); // <- recursive call\n        }\n    }\n    return isAnd;\n}\n\n//\n// normalize the selector\n//\nfunction massageSelector(input) {\n  var result = clone(input);\n  var wasAnded = false;\n    //#7458: if $and is present in selector (at any level) merge nested $and\n    if (isAndInSelector(result, false)) {\n        result = mergeAndedSelectorsNested(result);\n        if ('$and' in result) {\n            result = mergeAndedSelectors(result['$and']);\n        }\n        wasAnded = true;\n    }\n\n  ['$or', '$nor'].forEach(function (orOrNor) {\n    if (orOrNor in result) {\n      // message each individual selector\n      // e.g. {foo: 'bar'} becomes {foo: {$eq: 'bar'}}\n      result[orOrNor].forEach(function (subSelector) {\n        var fields = Object.keys(subSelector);\n        for (var i = 0; i < fields.length; i++) {\n          var field = fields[i];\n          var matcher = subSelector[field];\n          if (typeof matcher !== 'object' || matcher === null) {\n            subSelector[field] = {$eq: matcher};\n          }\n        }\n      });\n    }\n  });\n\n  if ('$not' in result) {\n    //This feels a little like forcing, but it will work for now,\n    //I would like to come back to this and make the merging of selectors a little more generic\n    result['$not'] = mergeAndedSelectors([result['$not']]);\n  }\n\n  var fields = Object.keys(result);\n\n  for (var i = 0; i < fields.length; i++) {\n    var field = fields[i];\n    var matcher = result[field];\n\n    if (typeof matcher !== 'object' || matcher === null) {\n      matcher = {$eq: matcher};\n    } else if ('$ne' in matcher && !wasAnded) {\n      // I put these in an array, since there may be more than one\n      // but in the \"mergeAnded\" operation, I already take care of that\n      matcher.$ne = [matcher.$ne];\n    }\n    result[field] = matcher;\n  }\n\n  return result;\n}\n\nfunction pad(str, padWith, upToLength) {\n  var padding = '';\n  var targetLength = upToLength - str.length;\n  /* istanbul ignore next */\n  while (padding.length < targetLength) {\n    padding += padWith;\n  }\n  return padding;\n}\n\nfunction padLeft(str, padWith, upToLength) {\n  var padding = pad(str, padWith, upToLength);\n  return padding + str;\n}\n\nvar MIN_MAGNITUDE = -324; // verified by -Number.MIN_VALUE\nvar MAGNITUDE_DIGITS = 3; // ditto\nvar SEP = ''; // set to '_' for easier debugging \n\nfunction collate(a, b) {\n\n  if (a === b) {\n    return 0;\n  }\n\n  a = normalizeKey(a);\n  b = normalizeKey(b);\n\n  var ai = collationIndex(a);\n  var bi = collationIndex(b);\n  if ((ai - bi) !== 0) {\n    return ai - bi;\n  }\n  switch (typeof a) {\n    case 'number':\n      return a - b;\n    case 'boolean':\n      return a < b ? -1 : 1;\n    case 'string':\n      return stringCollate(a, b);\n  }\n  return Array.isArray(a) ? arrayCollate(a, b) : objectCollate(a, b);\n}\n\n// couch considers null/NaN/Infinity/-Infinity === undefined,\n// for the purposes of mapreduce indexes. also, dates get stringified.\nfunction normalizeKey(key) {\n  switch (typeof key) {\n    case 'undefined':\n      return null;\n    case 'number':\n      if (key === Infinity || key === -Infinity || isNaN(key)) {\n        return null;\n      }\n      return key;\n    case 'object':\n      var origKey = key;\n      if (Array.isArray(key)) {\n        var len = key.length;\n        key = new Array(len);\n        for (var i = 0; i < len; i++) {\n          key[i] = normalizeKey(origKey[i]);\n        }\n      /* istanbul ignore next */\n      } else if (key instanceof Date) {\n        return key.toJSON();\n      } else if (key !== null) { // generic object\n        key = {};\n        for (var k in origKey) {\n          if (origKey.hasOwnProperty(k)) {\n            var val = origKey[k];\n            if (typeof val !== 'undefined') {\n              key[k] = normalizeKey(val);\n            }\n          }\n        }\n      }\n  }\n  return key;\n}\n\nfunction indexify(key) {\n  if (key !== null) {\n    switch (typeof key) {\n      case 'boolean':\n        return key ? 1 : 0;\n      case 'number':\n        return numToIndexableString(key);\n      case 'string':\n        // We've to be sure that key does not contain \\u0000\n        // Do order-preserving replacements:\n        // 0 -> 1, 1\n        // 1 -> 1, 2\n        // 2 -> 2, 2\n        /* eslint-disable no-control-regex */\n        return key\n          .replace(/\\u0002/g, '\\u0002\\u0002')\n          .replace(/\\u0001/g, '\\u0001\\u0002')\n          .replace(/\\u0000/g, '\\u0001\\u0001');\n        /* eslint-enable no-control-regex */\n      case 'object':\n        var isArray = Array.isArray(key);\n        var arr = isArray ? key : Object.keys(key);\n        var i = -1;\n        var len = arr.length;\n        var result = '';\n        if (isArray) {\n          while (++i < len) {\n            result += toIndexableString(arr[i]);\n          }\n        } else {\n          while (++i < len) {\n            var objKey = arr[i];\n            result += toIndexableString(objKey) +\n                toIndexableString(key[objKey]);\n          }\n        }\n        return result;\n    }\n  }\n  return '';\n}\n\n// convert the given key to a string that would be appropriate\n// for lexical sorting, e.g. within a database, where the\n// sorting is the same given by the collate() function.\nfunction toIndexableString(key) {\n  var zero = '\\u0000';\n  key = normalizeKey(key);\n  return collationIndex(key) + SEP + indexify(key) + zero;\n}\n\nfunction parseNumber(str, i) {\n  var originalIdx = i;\n  var num;\n  var zero = str[i] === '1';\n  if (zero) {\n    num = 0;\n    i++;\n  } else {\n    var neg = str[i] === '0';\n    i++;\n    var numAsString = '';\n    var magAsString = str.substring(i, i + MAGNITUDE_DIGITS);\n    var magnitude = parseInt(magAsString, 10) + MIN_MAGNITUDE;\n    /* istanbul ignore next */\n    if (neg) {\n      magnitude = -magnitude;\n    }\n    i += MAGNITUDE_DIGITS;\n    while (true) {\n      var ch = str[i];\n      if (ch === '\\u0000') {\n        break;\n      } else {\n        numAsString += ch;\n      }\n      i++;\n    }\n    numAsString = numAsString.split('.');\n    if (numAsString.length === 1) {\n      num = parseInt(numAsString, 10);\n    } else {\n      /* istanbul ignore next */\n      num = parseFloat(numAsString[0] + '.' + numAsString[1]);\n    }\n    /* istanbul ignore next */\n    if (neg) {\n      num = num - 10;\n    }\n    /* istanbul ignore next */\n    if (magnitude !== 0) {\n      // parseFloat is more reliable than pow due to rounding errors\n      // e.g. Number.MAX_VALUE would return Infinity if we did\n      // num * Math.pow(10, magnitude);\n      num = parseFloat(num + 'e' + magnitude);\n    }\n  }\n  return {num: num, length : i - originalIdx};\n}\n\n// move up the stack while parsing\n// this function moved outside of parseIndexableString for performance\nfunction pop(stack, metaStack) {\n  var obj = stack.pop();\n\n  if (metaStack.length) {\n    var lastMetaElement = metaStack[metaStack.length - 1];\n    if (obj === lastMetaElement.element) {\n      // popping a meta-element, e.g. an object whose value is another object\n      metaStack.pop();\n      lastMetaElement = metaStack[metaStack.length - 1];\n    }\n    var element = lastMetaElement.element;\n    var lastElementIndex = lastMetaElement.index;\n    if (Array.isArray(element)) {\n      element.push(obj);\n    } else if (lastElementIndex === stack.length - 2) { // obj with key+value\n      var key = stack.pop();\n      element[key] = obj;\n    } else {\n      stack.push(obj); // obj with key only\n    }\n  }\n}\n\nfunction parseIndexableString(str) {\n  var stack = [];\n  var metaStack = []; // stack for arrays and objects\n  var i = 0;\n\n  /*eslint no-constant-condition: [\"error\", { \"checkLoops\": false }]*/\n  while (true) {\n    var collationIndex = str[i++];\n    if (collationIndex === '\\u0000') {\n      if (stack.length === 1) {\n        return stack.pop();\n      } else {\n        pop(stack, metaStack);\n        continue;\n      }\n    }\n    switch (collationIndex) {\n      case '1':\n        stack.push(null);\n        break;\n      case '2':\n        stack.push(str[i] === '1');\n        i++;\n        break;\n      case '3':\n        var parsedNum = parseNumber(str, i);\n        stack.push(parsedNum.num);\n        i += parsedNum.length;\n        break;\n      case '4':\n        var parsedStr = '';\n        /*eslint no-constant-condition: [\"error\", { \"checkLoops\": false }]*/\n        while (true) {\n          var ch = str[i];\n          if (ch === '\\u0000') {\n            break;\n          }\n          parsedStr += ch;\n          i++;\n        }\n        // perform the reverse of the order-preserving replacement\n        // algorithm (see above)\n        /* eslint-disable no-control-regex */\n        parsedStr = parsedStr.replace(/\\u0001\\u0001/g, '\\u0000')\n          .replace(/\\u0001\\u0002/g, '\\u0001')\n          .replace(/\\u0002\\u0002/g, '\\u0002');\n        /* eslint-enable no-control-regex */\n        stack.push(parsedStr);\n        break;\n      case '5':\n        var arrayElement = { element: [], index: stack.length };\n        stack.push(arrayElement.element);\n        metaStack.push(arrayElement);\n        break;\n      case '6':\n        var objElement = { element: {}, index: stack.length };\n        stack.push(objElement.element);\n        metaStack.push(objElement);\n        break;\n      /* istanbul ignore next */\n      default:\n        throw new Error(\n          'bad collationIndex or unexpectedly reached end of input: ' +\n            collationIndex);\n    }\n  }\n}\n\nfunction arrayCollate(a, b) {\n  var len = Math.min(a.length, b.length);\n  for (var i = 0; i < len; i++) {\n    var sort = collate(a[i], b[i]);\n    if (sort !== 0) {\n      return sort;\n    }\n  }\n  return (a.length === b.length) ? 0 :\n    (a.length > b.length) ? 1 : -1;\n}\nfunction stringCollate(a, b) {\n  // See: https://github.com/daleharvey/pouchdb/issues/40\n  // This is incompatible with the CouchDB implementation, but its the\n  // best we can do for now\n  return (a === b) ? 0 : ((a > b) ? 1 : -1);\n}\nfunction objectCollate(a, b) {\n  var ak = Object.keys(a), bk = Object.keys(b);\n  var len = Math.min(ak.length, bk.length);\n  for (var i = 0; i < len; i++) {\n    // First sort the keys\n    var sort = collate(ak[i], bk[i]);\n    if (sort !== 0) {\n      return sort;\n    }\n    // if the keys are equal sort the values\n    sort = collate(a[ak[i]], b[bk[i]]);\n    if (sort !== 0) {\n      return sort;\n    }\n\n  }\n  return (ak.length === bk.length) ? 0 :\n    (ak.length > bk.length) ? 1 : -1;\n}\n// The collation is defined by erlangs ordered terms\n// the atoms null, true, false come first, then numbers, strings,\n// arrays, then objects\n// null/undefined/NaN/Infinity/-Infinity are all considered null\nfunction collationIndex(x) {\n  var id = ['boolean', 'number', 'string', 'object'];\n  var idx = id.indexOf(typeof x);\n  //false if -1 otherwise true, but fast!!!!1\n  if (~idx) {\n    if (x === null) {\n      return 1;\n    }\n    if (Array.isArray(x)) {\n      return 5;\n    }\n    return idx < 3 ? (idx + 2) : (idx + 3);\n  }\n  /* istanbul ignore next */\n  if (Array.isArray(x)) {\n    return 5;\n  }\n}\n\n// conversion:\n// x yyy zz...zz\n// x = 0 for negative, 1 for 0, 2 for positive\n// y = exponent (for negative numbers negated) moved so that it's >= 0\n// z = mantisse\nfunction numToIndexableString(num) {\n\n  if (num === 0) {\n    return '1';\n  }\n\n  // convert number to exponential format for easier and\n  // more succinct string sorting\n  var expFormat = num.toExponential().split(/e\\+?/);\n  var magnitude = parseInt(expFormat[1], 10);\n\n  var neg = num < 0;\n\n  var result = neg ? '0' : '2';\n\n  // first sort by magnitude\n  // it's easier if all magnitudes are positive\n  var magForComparison = ((neg ? -magnitude : magnitude) - MIN_MAGNITUDE);\n  var magString = padLeft((magForComparison).toString(), '0', MAGNITUDE_DIGITS);\n\n  result += SEP + magString;\n\n  // then sort by the factor\n  var factor = Math.abs(parseFloat(expFormat[0])); // [1..10)\n  /* istanbul ignore next */\n  if (neg) { // for negative reverse ordering\n    factor = 10 - factor;\n  }\n\n  var factorStr = factor.toFixed(20);\n\n  // strip zeros from the end\n  factorStr = factorStr.replace(/\\.?0+$/, '');\n\n  result += SEP + factorStr;\n\n  return result;\n}\n\n// create a comparator based on the sort object\nfunction createFieldSorter(sort) {\n\n  function getFieldValuesAsArray(doc) {\n    return sort.map(function (sorting) {\n      var fieldName = getKey(sorting);\n      var parsedField = parseField(fieldName);\n      var docFieldValue = getFieldFromDoc(doc, parsedField);\n      return docFieldValue;\n    });\n  }\n\n  return function (aRow, bRow) {\n    var aFieldValues = getFieldValuesAsArray(aRow.doc);\n    var bFieldValues = getFieldValuesAsArray(bRow.doc);\n    var collation = collate(aFieldValues, bFieldValues);\n    if (collation !== 0) {\n      return collation;\n    }\n    // this is what mango seems to do\n    return compare$1(aRow.doc._id, bRow.doc._id);\n  };\n}\n\nfunction filterInMemoryFields(rows, requestDef, inMemoryFields) {\n  rows = rows.filter(function (row) {\n    return rowFilter(row.doc, requestDef.selector, inMemoryFields);\n  });\n\n  if (requestDef.sort) {\n    // in-memory sort\n    var fieldSorter = createFieldSorter(requestDef.sort);\n    rows = rows.sort(fieldSorter);\n    if (typeof requestDef.sort[0] !== 'string' &&\n        getValue(requestDef.sort[0]) === 'desc') {\n      rows = rows.reverse();\n    }\n  }\n\n  if ('limit' in requestDef || 'skip' in requestDef) {\n    // have to do the limit in-memory\n    var skip = requestDef.skip || 0;\n    var limit = ('limit' in requestDef ? requestDef.limit : rows.length) + skip;\n    rows = rows.slice(skip, limit);\n  }\n  return rows;\n}\n\nfunction rowFilter(doc, selector, inMemoryFields) {\n  return inMemoryFields.every(function (field) {\n    var matcher = selector[field];\n    var parsedField = parseField(field);\n    var docFieldValue = getFieldFromDoc(doc, parsedField);\n    if (isCombinationalField(field)) {\n      return matchCominationalSelector(field, matcher, doc);\n    }\n\n    return matchSelector(matcher, doc, parsedField, docFieldValue);\n  });\n}\n\nfunction matchSelector(matcher, doc, parsedField, docFieldValue) {\n  if (!matcher) {\n    // no filtering necessary; this field is just needed for sorting\n    return true;\n  }\n\n  // is matcher an object, if so continue recursion\n  if (typeof matcher === 'object') {\n    return Object.keys(matcher).every(function (userOperator) {\n      var userValue = matcher[userOperator];\n      return match(userOperator, doc, userValue, parsedField, docFieldValue);\n    });\n  }\n\n  // no more depth, No need to recurse further\n  return matcher === docFieldValue;\n}\n\nfunction matchCominationalSelector(field, matcher, doc) {\n\n  if (field === '$or') {\n    return matcher.some(function (orMatchers) {\n      return rowFilter(doc, orMatchers, Object.keys(orMatchers));\n    });\n  }\n\n  if (field === '$not') {\n    return !rowFilter(doc, matcher, Object.keys(matcher));\n  }\n\n  //`$nor`\n  return !matcher.find(function (orMatchers) {\n    return rowFilter(doc, orMatchers, Object.keys(orMatchers));\n  });\n\n}\n\nfunction match(userOperator, doc, userValue, parsedField, docFieldValue) {\n  if (!matchers[userOperator]) {\n    throw new Error('unknown operator \"' + userOperator +\n      '\" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, ' +\n      '$nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');\n  }\n  return matchers[userOperator](doc, userValue, parsedField, docFieldValue);\n}\n\nfunction fieldExists(docFieldValue) {\n  return typeof docFieldValue !== 'undefined' && docFieldValue !== null;\n}\n\nfunction fieldIsNotUndefined(docFieldValue) {\n  return typeof docFieldValue !== 'undefined';\n}\n\nfunction modField(docFieldValue, userValue) {\n  var divisor = userValue[0];\n  var mod = userValue[1];\n  if (divisor === 0) {\n    throw new Error('Bad divisor, cannot divide by zero');\n  }\n\n  if (parseInt(divisor, 10) !== divisor ) {\n    throw new Error('Divisor is not an integer');\n  }\n\n  if (parseInt(mod, 10) !== mod ) {\n    throw new Error('Modulus is not an integer');\n  }\n\n  if (parseInt(docFieldValue, 10) !== docFieldValue) {\n    return false;\n  }\n\n  return docFieldValue % divisor === mod;\n}\n\nfunction arrayContainsValue(docFieldValue, userValue) {\n  return userValue.some(function (val) {\n    if (docFieldValue instanceof Array) {\n      return docFieldValue.indexOf(val) > -1;\n    }\n\n    return docFieldValue === val;\n  });\n}\n\nfunction arrayContainsAllValues(docFieldValue, userValue) {\n  return userValue.every(function (val) {\n    return docFieldValue.indexOf(val) > -1;\n  });\n}\n\nfunction arraySize(docFieldValue, userValue) {\n  return docFieldValue.length === userValue;\n}\n\nfunction regexMatch(docFieldValue, userValue) {\n  var re = new RegExp(userValue);\n\n  return re.test(docFieldValue);\n}\n\nfunction typeMatch(docFieldValue, userValue) {\n\n  switch (userValue) {\n    case 'null':\n      return docFieldValue === null;\n    case 'boolean':\n      return typeof (docFieldValue) === 'boolean';\n    case 'number':\n      return typeof (docFieldValue) === 'number';\n    case 'string':\n      return typeof (docFieldValue) === 'string';\n    case 'array':\n      return docFieldValue instanceof Array;\n    case 'object':\n      return ({}).toString.call(docFieldValue) === '[object Object]';\n  }\n\n  throw new Error(userValue + ' not supported as a type.' +\n                  'Please use one of object, string, array, number, boolean or null.');\n\n}\n\nvar matchers = {\n\n  '$elemMatch': function (doc, userValue, parsedField, docFieldValue) {\n    if (!Array.isArray(docFieldValue)) {\n      return false;\n    }\n\n    if (docFieldValue.length === 0) {\n      return false;\n    }\n\n    if (typeof docFieldValue[0] === 'object') {\n      return docFieldValue.some(function (val) {\n        return rowFilter(val, userValue, Object.keys(userValue));\n      });\n    }\n\n    return docFieldValue.some(function (val) {\n      return matchSelector(userValue, doc, parsedField, val);\n    });\n  },\n\n  '$allMatch': function (doc, userValue, parsedField, docFieldValue) {\n    if (!Array.isArray(docFieldValue)) {\n      return false;\n    }\n\n    /* istanbul ignore next */\n    if (docFieldValue.length === 0) {\n      return false;\n    }\n\n    if (typeof docFieldValue[0] === 'object') {\n      return docFieldValue.every(function (val) {\n        return rowFilter(val, userValue, Object.keys(userValue));\n      });\n    }\n\n    return docFieldValue.every(function (val) {\n      return matchSelector(userValue, doc, parsedField, val);\n    });\n  },\n\n  '$eq': function (doc, userValue, parsedField, docFieldValue) {\n    return fieldIsNotUndefined(docFieldValue) && collate(docFieldValue, userValue) === 0;\n  },\n\n  '$gte': function (doc, userValue, parsedField, docFieldValue) {\n    return fieldIsNotUndefined(docFieldValue) && collate(docFieldValue, userValue) >= 0;\n  },\n\n  '$gt': function (doc, userValue, parsedField, docFieldValue) {\n    return fieldIsNotUndefined(docFieldValue) && collate(docFieldValue, userValue) > 0;\n  },\n\n  '$lte': function (doc, userValue, parsedField, docFieldValue) {\n    return fieldIsNotUndefined(docFieldValue) && collate(docFieldValue, userValue) <= 0;\n  },\n\n  '$lt': function (doc, userValue, parsedField, docFieldValue) {\n    return fieldIsNotUndefined(docFieldValue) && collate(docFieldValue, userValue) < 0;\n  },\n\n  '$exists': function (doc, userValue, parsedField, docFieldValue) {\n    //a field that is null is still considered to exist\n    if (userValue) {\n      return fieldIsNotUndefined(docFieldValue);\n    }\n\n    return !fieldIsNotUndefined(docFieldValue);\n  },\n\n  '$mod': function (doc, userValue, parsedField, docFieldValue) {\n    return fieldExists(docFieldValue) && modField(docFieldValue, userValue);\n  },\n\n  '$ne': function (doc, userValue, parsedField, docFieldValue) {\n    return userValue.every(function (neValue) {\n      return collate(docFieldValue, neValue) !== 0;\n    });\n  },\n  '$in': function (doc, userValue, parsedField, docFieldValue) {\n    return fieldExists(docFieldValue) && arrayContainsValue(docFieldValue, userValue);\n  },\n\n  '$nin': function (doc, userValue, parsedField, docFieldValue) {\n    return fieldExists(docFieldValue) && !arrayContainsValue(docFieldValue, userValue);\n  },\n\n  '$size': function (doc, userValue, parsedField, docFieldValue) {\n    return fieldExists(docFieldValue) && arraySize(docFieldValue, userValue);\n  },\n\n  '$all': function (doc, userValue, parsedField, docFieldValue) {\n    return Array.isArray(docFieldValue) && arrayContainsAllValues(docFieldValue, userValue);\n  },\n\n  '$regex': function (doc, userValue, parsedField, docFieldValue) {\n    return fieldExists(docFieldValue) && regexMatch(docFieldValue, userValue);\n  },\n\n  '$type': function (doc, userValue, parsedField, docFieldValue) {\n    return typeMatch(docFieldValue, userValue);\n  }\n};\n\n// return true if the given doc matches the supplied selector\nfunction matchesSelector(doc, selector) {\n  /* istanbul ignore if */\n  if (typeof selector !== 'object') {\n    // match the CouchDB error message\n    throw new Error('Selector error: expected a JSON object');\n  }\n\n  selector = massageSelector(selector);\n  var row = {\n    'doc': doc\n  };\n\n  var rowsMatched = filterInMemoryFields([row], { 'selector': selector }, Object.keys(selector));\n  return rowsMatched && rowsMatched.length === 1;\n}\n\nfunction evalFilter(input) {\n  return scopeEval('\"use strict\";\\nreturn ' + input + ';', {});\n}\n\nfunction evalView(input) {\n  var code = [\n    'return function(doc) {',\n    '  \"use strict\";',\n    '  var emitted = false;',\n    '  var emit = function (a, b) {',\n    '    emitted = true;',\n    '  };',\n    '  var view = ' + input + ';',\n    '  view(doc);',\n    '  if (emitted) {',\n    '    return true;',\n    '  }',\n    '};'\n  ].join('\\n');\n\n  return scopeEval(code, {});\n}\n\nfunction validate(opts, callback) {\n  if (opts.selector) {\n    if (opts.filter && opts.filter !== '_selector') {\n      var filterName = typeof opts.filter === 'string' ?\n        opts.filter : 'function';\n      return callback(new Error('selector invalid for filter \"' + filterName + '\"'));\n    }\n  }\n  callback();\n}\n\nfunction normalize(opts) {\n  if (opts.view && !opts.filter) {\n    opts.filter = '_view';\n  }\n\n  if (opts.selector && !opts.filter) {\n    opts.filter = '_selector';\n  }\n\n  if (opts.filter && typeof opts.filter === 'string') {\n    if (opts.filter === '_view') {\n      opts.view = normalizeDesignDocFunctionName(opts.view);\n    } else {\n      opts.filter = normalizeDesignDocFunctionName(opts.filter);\n    }\n  }\n}\n\nfunction shouldFilter(changesHandler, opts) {\n  return opts.filter && typeof opts.filter === 'string' &&\n    !opts.doc_ids && !isRemote(changesHandler.db);\n}\n\nfunction filter(changesHandler, opts) {\n  var callback = opts.complete;\n  if (opts.filter === '_view') {\n    if (!opts.view || typeof opts.view !== 'string') {\n      var err = createError(BAD_REQUEST,\n        '`view` filter parameter not found or invalid.');\n      return callback(err);\n    }\n    // fetch a view from a design doc, make it behave like a filter\n    var viewName = parseDesignDocFunctionName(opts.view);\n    changesHandler.db.get('_design/' + viewName[0], function (err, ddoc) {\n      /* istanbul ignore if */\n      if (changesHandler.isCancelled) {\n        return callback(null, {status: 'cancelled'});\n      }\n      /* istanbul ignore next */\n      if (err) {\n        return callback(generateErrorFromResponse(err));\n      }\n      var mapFun = ddoc && ddoc.views && ddoc.views[viewName[1]] &&\n        ddoc.views[viewName[1]].map;\n      if (!mapFun) {\n        return callback(createError(MISSING_DOC,\n          (ddoc.views ? 'missing json key: ' + viewName[1] :\n            'missing json key: views')));\n      }\n      opts.filter = evalView(mapFun);\n      changesHandler.doChanges(opts);\n    });\n  } else if (opts.selector) {\n    opts.filter = function (doc) {\n      return matchesSelector(doc, opts.selector);\n    };\n    changesHandler.doChanges(opts);\n  } else {\n    // fetch a filter from a design doc\n    var filterName = parseDesignDocFunctionName(opts.filter);\n    changesHandler.db.get('_design/' + filterName[0], function (err, ddoc) {\n      /* istanbul ignore if */\n      if (changesHandler.isCancelled) {\n        return callback(null, {status: 'cancelled'});\n      }\n      /* istanbul ignore next */\n      if (err) {\n        return callback(generateErrorFromResponse(err));\n      }\n      var filterFun = ddoc && ddoc.filters && ddoc.filters[filterName[1]];\n      if (!filterFun) {\n        return callback(createError(MISSING_DOC,\n          ((ddoc && ddoc.filters) ? 'missing json key: ' + filterName[1]\n            : 'missing json key: filters')));\n      }\n      opts.filter = evalFilter(filterFun);\n      changesHandler.doChanges(opts);\n    });\n  }\n}\n\nfunction applyChangesFilterPlugin(PouchDB) {\n  PouchDB._changesFilterPlugin = {\n    validate: validate,\n    normalize: normalize,\n    shouldFilter: shouldFilter,\n    filter: filter\n  };\n}\n\n// TODO: remove from pouchdb-core (breaking)\nPouchDB.plugin(applyChangesFilterPlugin);\n\nPouchDB.version = version;\n\nfunction toObject(array) {\n  return array.reduce(function (obj, item) {\n    obj[item] = true;\n    return obj;\n  }, {});\n}\n// List of top level reserved words for doc\nvar reservedWords = toObject([\n  '_id',\n  '_rev',\n  '_attachments',\n  '_deleted',\n  '_revisions',\n  '_revs_info',\n  '_conflicts',\n  '_deleted_conflicts',\n  '_local_seq',\n  '_rev_tree',\n  //replication documents\n  '_replication_id',\n  '_replication_state',\n  '_replication_state_time',\n  '_replication_state_reason',\n  '_replication_stats',\n  // Specific to Couchbase Sync Gateway\n  '_removed'\n]);\n\n// List of reserved words that should end up the document\nvar dataWords = toObject([\n  '_attachments',\n  //replication documents\n  '_replication_id',\n  '_replication_state',\n  '_replication_state_time',\n  '_replication_state_reason',\n  '_replication_stats'\n]);\n\nfunction parseRevisionInfo(rev$$1) {\n  if (!/^\\d+-/.test(rev$$1)) {\n    return createError(INVALID_REV);\n  }\n  var idx = rev$$1.indexOf('-');\n  var left = rev$$1.substring(0, idx);\n  var right = rev$$1.substring(idx + 1);\n  return {\n    prefix: parseInt(left, 10),\n    id: right\n  };\n}\n\nfunction makeRevTreeFromRevisions(revisions, opts) {\n  var pos = revisions.start - revisions.ids.length + 1;\n\n  var revisionIds = revisions.ids;\n  var ids = [revisionIds[0], opts, []];\n\n  for (var i = 1, len = revisionIds.length; i < len; i++) {\n    ids = [revisionIds[i], {status: 'missing'}, [ids]];\n  }\n\n  return [{\n    pos: pos,\n    ids: ids\n  }];\n}\n\n// Preprocess documents, parse their revisions, assign an id and a\n// revision for new writes that are missing them, etc\nfunction parseDoc(doc, newEdits, dbOpts) {\n  if (!dbOpts) {\n    dbOpts = {\n      deterministic_revs: true\n    };\n  }\n\n  var nRevNum;\n  var newRevId;\n  var revInfo;\n  var opts = {status: 'available'};\n  if (doc._deleted) {\n    opts.deleted = true;\n  }\n\n  if (newEdits) {\n    if (!doc._id) {\n      doc._id = uuid();\n    }\n    newRevId = rev(doc, dbOpts.deterministic_revs);\n    if (doc._rev) {\n      revInfo = parseRevisionInfo(doc._rev);\n      if (revInfo.error) {\n        return revInfo;\n      }\n      doc._rev_tree = [{\n        pos: revInfo.prefix,\n        ids: [revInfo.id, {status: 'missing'}, [[newRevId, opts, []]]]\n      }];\n      nRevNum = revInfo.prefix + 1;\n    } else {\n      doc._rev_tree = [{\n        pos: 1,\n        ids : [newRevId, opts, []]\n      }];\n      nRevNum = 1;\n    }\n  } else {\n    if (doc._revisions) {\n      doc._rev_tree = makeRevTreeFromRevisions(doc._revisions, opts);\n      nRevNum = doc._revisions.start;\n      newRevId = doc._revisions.ids[0];\n    }\n    if (!doc._rev_tree) {\n      revInfo = parseRevisionInfo(doc._rev);\n      if (revInfo.error) {\n        return revInfo;\n      }\n      nRevNum = revInfo.prefix;\n      newRevId = revInfo.id;\n      doc._rev_tree = [{\n        pos: nRevNum,\n        ids: [newRevId, opts, []]\n      }];\n    }\n  }\n\n  invalidIdError(doc._id);\n\n  doc._rev = nRevNum + '-' + newRevId;\n\n  var result = {metadata : {}, data : {}};\n  for (var key in doc) {\n    /* istanbul ignore else */\n    if (Object.prototype.hasOwnProperty.call(doc, key)) {\n      var specialKey = key[0] === '_';\n      if (specialKey && !reservedWords[key]) {\n        var error = createError(DOC_VALIDATION, key);\n        error.message = DOC_VALIDATION.message + ': ' + key;\n        throw error;\n      } else if (specialKey && !dataWords[key]) {\n        result.metadata[key.slice(1)] = doc[key];\n      } else {\n        result.data[key] = doc[key];\n      }\n    }\n  }\n  return result;\n}\n\nfunction parseBase64(data) {\n  try {\n    return thisAtob(data);\n  } catch (e) {\n    var err = createError(BAD_ARG,\n      'Attachment is not a valid base64 string');\n    return {error: err};\n  }\n}\n\nfunction preprocessString(att, blobType, callback) {\n  var asBinary = parseBase64(att.data);\n  if (asBinary.error) {\n    return callback(asBinary.error);\n  }\n\n  att.length = asBinary.length;\n  if (blobType === 'blob') {\n    att.data = binStringToBluffer(asBinary, att.content_type);\n  } else if (blobType === 'base64') {\n    att.data = thisBtoa(asBinary);\n  } else { // binary\n    att.data = asBinary;\n  }\n  binaryMd5(asBinary, function (result) {\n    att.digest = 'md5-' + result;\n    callback();\n  });\n}\n\nfunction preprocessBlob(att, blobType, callback) {\n  binaryMd5(att.data, function (md5) {\n    att.digest = 'md5-' + md5;\n    // size is for blobs (browser), length is for buffers (node)\n    att.length = att.data.size || att.data.length || 0;\n    if (blobType === 'binary') {\n      blobToBinaryString(att.data, function (binString) {\n        att.data = binString;\n        callback();\n      });\n    } else if (blobType === 'base64') {\n      blobToBase64(att.data, function (b64) {\n        att.data = b64;\n        callback();\n      });\n    } else {\n      callback();\n    }\n  });\n}\n\nfunction preprocessAttachment(att, blobType, callback) {\n  if (att.stub) {\n    return callback();\n  }\n  if (typeof att.data === 'string') { // input is a base64 string\n    preprocessString(att, blobType, callback);\n  } else { // input is a blob\n    preprocessBlob(att, blobType, callback);\n  }\n}\n\nfunction preprocessAttachments(docInfos, blobType, callback) {\n\n  if (!docInfos.length) {\n    return callback();\n  }\n\n  var docv = 0;\n  var overallErr;\n\n  docInfos.forEach(function (docInfo) {\n    var attachments = docInfo.data && docInfo.data._attachments ?\n      Object.keys(docInfo.data._attachments) : [];\n    var recv = 0;\n\n    if (!attachments.length) {\n      return done();\n    }\n\n    function processedAttachment(err) {\n      overallErr = err;\n      recv++;\n      if (recv === attachments.length) {\n        done();\n      }\n    }\n\n    for (var key in docInfo.data._attachments) {\n      if (docInfo.data._attachments.hasOwnProperty(key)) {\n        preprocessAttachment(docInfo.data._attachments[key],\n          blobType, processedAttachment);\n      }\n    }\n  });\n\n  function done() {\n    docv++;\n    if (docInfos.length === docv) {\n      if (overallErr) {\n        callback(overallErr);\n      } else {\n        callback();\n      }\n    }\n  }\n}\n\nfunction updateDoc(revLimit, prev, docInfo, results,\n                   i, cb, writeDoc, newEdits) {\n\n  if (revExists(prev.rev_tree, docInfo.metadata.rev) && !newEdits) {\n    results[i] = docInfo;\n    return cb();\n  }\n\n  // sometimes this is pre-calculated. historically not always\n  var previousWinningRev = prev.winningRev || winningRev(prev);\n  var previouslyDeleted = 'deleted' in prev ? prev.deleted :\n    isDeleted(prev, previousWinningRev);\n  var deleted = 'deleted' in docInfo.metadata ? docInfo.metadata.deleted :\n    isDeleted(docInfo.metadata);\n  var isRoot = /^1-/.test(docInfo.metadata.rev);\n\n  if (previouslyDeleted && !deleted && newEdits && isRoot) {\n    var newDoc = docInfo.data;\n    newDoc._rev = previousWinningRev;\n    newDoc._id = docInfo.metadata.id;\n    docInfo = parseDoc(newDoc, newEdits);\n  }\n\n  var merged = merge(prev.rev_tree, docInfo.metadata.rev_tree[0], revLimit);\n\n  var inConflict = newEdits && ((\n    (previouslyDeleted && deleted && merged.conflicts !== 'new_leaf') ||\n    (!previouslyDeleted && merged.conflicts !== 'new_leaf') ||\n    (previouslyDeleted && !deleted && merged.conflicts === 'new_branch')));\n\n  if (inConflict) {\n    var err = createError(REV_CONFLICT);\n    results[i] = err;\n    return cb();\n  }\n\n  var newRev = docInfo.metadata.rev;\n  docInfo.metadata.rev_tree = merged.tree;\n  docInfo.stemmedRevs = merged.stemmedRevs || [];\n  /* istanbul ignore else */\n  if (prev.rev_map) {\n    docInfo.metadata.rev_map = prev.rev_map; // used only by leveldb\n  }\n\n  // recalculate\n  var winningRev$$1 = winningRev(docInfo.metadata);\n  var winningRevIsDeleted = isDeleted(docInfo.metadata, winningRev$$1);\n\n  // calculate the total number of documents that were added/removed,\n  // from the perspective of total_rows/doc_count\n  var delta = (previouslyDeleted === winningRevIsDeleted) ? 0 :\n    previouslyDeleted < winningRevIsDeleted ? -1 : 1;\n\n  var newRevIsDeleted;\n  if (newRev === winningRev$$1) {\n    // if the new rev is the same as the winning rev, we can reuse that value\n    newRevIsDeleted = winningRevIsDeleted;\n  } else {\n    // if they're not the same, then we need to recalculate\n    newRevIsDeleted = isDeleted(docInfo.metadata, newRev);\n  }\n\n  writeDoc(docInfo, winningRev$$1, winningRevIsDeleted, newRevIsDeleted,\n    true, delta, i, cb);\n}\n\nfunction rootIsMissing(docInfo) {\n  return docInfo.metadata.rev_tree[0].ids[1].status === 'missing';\n}\n\nfunction processDocs(revLimit, docInfos, api, fetchedDocs, tx, results,\n                     writeDoc, opts, overallCallback) {\n\n  // Default to 1000 locally\n  revLimit = revLimit || 1000;\n\n  function insertDoc(docInfo, resultsIdx, callback) {\n    // Cant insert new deleted documents\n    var winningRev$$1 = winningRev(docInfo.metadata);\n    var deleted = isDeleted(docInfo.metadata, winningRev$$1);\n    if ('was_delete' in opts && deleted) {\n      results[resultsIdx] = createError(MISSING_DOC, 'deleted');\n      return callback();\n    }\n\n    // 4712 - detect whether a new document was inserted with a _rev\n    var inConflict = newEdits && rootIsMissing(docInfo);\n\n    if (inConflict) {\n      var err = createError(REV_CONFLICT);\n      results[resultsIdx] = err;\n      return callback();\n    }\n\n    var delta = deleted ? 0 : 1;\n\n    writeDoc(docInfo, winningRev$$1, deleted, deleted, false,\n      delta, resultsIdx, callback);\n  }\n\n  var newEdits = opts.new_edits;\n  var idsToDocs = new ExportedMap();\n\n  var docsDone = 0;\n  var docsToDo = docInfos.length;\n\n  function checkAllDocsDone() {\n    if (++docsDone === docsToDo && overallCallback) {\n      overallCallback();\n    }\n  }\n\n  docInfos.forEach(function (currentDoc, resultsIdx) {\n\n    if (currentDoc._id && isLocalId(currentDoc._id)) {\n      var fun = currentDoc._deleted ? '_removeLocal' : '_putLocal';\n      api[fun](currentDoc, {ctx: tx}, function (err, res) {\n        results[resultsIdx] = err || res;\n        checkAllDocsDone();\n      });\n      return;\n    }\n\n    var id = currentDoc.metadata.id;\n    if (idsToDocs.has(id)) {\n      docsToDo--; // duplicate\n      idsToDocs.get(id).push([currentDoc, resultsIdx]);\n    } else {\n      idsToDocs.set(id, [[currentDoc, resultsIdx]]);\n    }\n  });\n\n  // in the case of new_edits, the user can provide multiple docs\n  // with the same id. these need to be processed sequentially\n  idsToDocs.forEach(function (docs, id) {\n    var numDone = 0;\n\n    function docWritten() {\n      if (++numDone < docs.length) {\n        nextDoc();\n      } else {\n        checkAllDocsDone();\n      }\n    }\n    function nextDoc() {\n      var value = docs[numDone];\n      var currentDoc = value[0];\n      var resultsIdx = value[1];\n\n      if (fetchedDocs.has(id)) {\n        updateDoc(revLimit, fetchedDocs.get(id), currentDoc, results,\n          resultsIdx, docWritten, writeDoc, newEdits);\n      } else {\n        // Ensure stemming applies to new writes as well\n        var merged = merge([], currentDoc.metadata.rev_tree[0], revLimit);\n        currentDoc.metadata.rev_tree = merged.tree;\n        currentDoc.stemmedRevs = merged.stemmedRevs || [];\n        insertDoc(currentDoc, resultsIdx, docWritten);\n      }\n    }\n    nextDoc();\n  });\n}\n\n// IndexedDB requires a versioned database structure, so we use the\n// version here to manage migrations.\nvar ADAPTER_VERSION = 5;\n\n// The object stores created for each database\n// DOC_STORE stores the document meta data, its revision history and state\n// Keyed by document id\nvar DOC_STORE = 'document-store';\n// BY_SEQ_STORE stores a particular version of a document, keyed by its\n// sequence id\nvar BY_SEQ_STORE = 'by-sequence';\n// Where we store attachments\nvar ATTACH_STORE = 'attach-store';\n// Where we store many-to-many relations\n// between attachment digests and seqs\nvar ATTACH_AND_SEQ_STORE = 'attach-seq-store';\n\n// Where we store database-wide meta data in a single record\n// keyed by id: META_STORE\nvar META_STORE = 'meta-store';\n// Where we store local documents\nvar LOCAL_STORE = 'local-store';\n// Where we detect blob support\nvar DETECT_BLOB_SUPPORT_STORE = 'detect-blob-support';\n\nfunction safeJsonParse(str) {\n  // This try/catch guards against stack overflow errors.\n  // JSON.parse() is faster than vuvuzela.parse() but vuvuzela\n  // cannot overflow.\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    /* istanbul ignore next */\n    return vuvuzela.parse(str);\n  }\n}\n\nfunction safeJsonStringify(json) {\n  try {\n    return JSON.stringify(json);\n  } catch (e) {\n    /* istanbul ignore next */\n    return vuvuzela.stringify(json);\n  }\n}\n\nfunction idbError(callback) {\n  return function (evt) {\n    var message = 'unknown_error';\n    if (evt.target && evt.target.error) {\n      message = evt.target.error.name || evt.target.error.message;\n    }\n    callback(createError(IDB_ERROR, message, evt.type));\n  };\n}\n\n// Unfortunately, the metadata has to be stringified\n// when it is put into the database, because otherwise\n// IndexedDB can throw errors for deeply-nested objects.\n// Originally we just used JSON.parse/JSON.stringify; now\n// we use this custom vuvuzela library that avoids recursion.\n// If we could do it all over again, we'd probably use a\n// format for the revision trees other than JSON.\nfunction encodeMetadata(metadata, winningRev, deleted) {\n  return {\n    data: safeJsonStringify(metadata),\n    winningRev: winningRev,\n    deletedOrLocal: deleted ? '1' : '0',\n    seq: metadata.seq, // highest seq for this doc\n    id: metadata.id\n  };\n}\n\nfunction decodeMetadata(storedObject) {\n  if (!storedObject) {\n    return null;\n  }\n  var metadata = safeJsonParse(storedObject.data);\n  metadata.winningRev = storedObject.winningRev;\n  metadata.deleted = storedObject.deletedOrLocal === '1';\n  metadata.seq = storedObject.seq;\n  return metadata;\n}\n\n// read the doc back out from the database. we don't store the\n// _id or _rev because we already have _doc_id_rev.\nfunction decodeDoc(doc) {\n  if (!doc) {\n    return doc;\n  }\n  var idx = doc._doc_id_rev.lastIndexOf(':');\n  doc._id = doc._doc_id_rev.substring(0, idx - 1);\n  doc._rev = doc._doc_id_rev.substring(idx + 1);\n  delete doc._doc_id_rev;\n  return doc;\n}\n\n// Read a blob from the database, encoding as necessary\n// and translating from base64 if the IDB doesn't support\n// native Blobs\nfunction readBlobData(body, type, asBlob, callback) {\n  if (asBlob) {\n    if (!body) {\n      callback(createBlob([''], {type: type}));\n    } else if (typeof body !== 'string') { // we have blob support\n      callback(body);\n    } else { // no blob support\n      callback(b64ToBluffer(body, type));\n    }\n  } else { // as base64 string\n    if (!body) {\n      callback('');\n    } else if (typeof body !== 'string') { // we have blob support\n      readAsBinaryString(body, function (binary) {\n        callback(thisBtoa(binary));\n      });\n    } else { // no blob support\n      callback(body);\n    }\n  }\n}\n\nfunction fetchAttachmentsIfNecessary(doc, opts, txn, cb) {\n  var attachments = Object.keys(doc._attachments || {});\n  if (!attachments.length) {\n    return cb && cb();\n  }\n  var numDone = 0;\n\n  function checkDone() {\n    if (++numDone === attachments.length && cb) {\n      cb();\n    }\n  }\n\n  function fetchAttachment(doc, att) {\n    var attObj = doc._attachments[att];\n    var digest = attObj.digest;\n    var req = txn.objectStore(ATTACH_STORE).get(digest);\n    req.onsuccess = function (e) {\n      attObj.body = e.target.result.body;\n      checkDone();\n    };\n  }\n\n  attachments.forEach(function (att) {\n    if (opts.attachments && opts.include_docs) {\n      fetchAttachment(doc, att);\n    } else {\n      doc._attachments[att].stub = true;\n      checkDone();\n    }\n  });\n}\n\n// IDB-specific postprocessing necessary because\n// we don't know whether we stored a true Blob or\n// a base64-encoded string, and if it's a Blob it\n// needs to be read outside of the transaction context\nfunction postProcessAttachments(results, asBlob) {\n  return Promise.all(results.map(function (row) {\n    if (row.doc && row.doc._attachments) {\n      var attNames = Object.keys(row.doc._attachments);\n      return Promise.all(attNames.map(function (att) {\n        var attObj = row.doc._attachments[att];\n        if (!('body' in attObj)) { // already processed\n          return;\n        }\n        var body = attObj.body;\n        var type = attObj.content_type;\n        return new Promise(function (resolve) {\n          readBlobData(body, type, asBlob, function (data) {\n            row.doc._attachments[att] = $inject_Object_assign(\n              pick(attObj, ['digest', 'content_type']),\n              {data: data}\n            );\n            resolve();\n          });\n        });\n      }));\n    }\n  }));\n}\n\nfunction compactRevs(revs, docId, txn) {\n\n  var possiblyOrphanedDigests = [];\n  var seqStore = txn.objectStore(BY_SEQ_STORE);\n  var attStore = txn.objectStore(ATTACH_STORE);\n  var attAndSeqStore = txn.objectStore(ATTACH_AND_SEQ_STORE);\n  var count = revs.length;\n\n  function checkDone() {\n    count--;\n    if (!count) { // done processing all revs\n      deleteOrphanedAttachments();\n    }\n  }\n\n  function deleteOrphanedAttachments() {\n    if (!possiblyOrphanedDigests.length) {\n      return;\n    }\n    possiblyOrphanedDigests.forEach(function (digest) {\n      var countReq = attAndSeqStore.index('digestSeq').count(\n        IDBKeyRange.bound(\n          digest + '::', digest + '::\\uffff', false, false));\n      countReq.onsuccess = function (e) {\n        var count = e.target.result;\n        if (!count) {\n          // orphaned\n          attStore.delete(digest);\n        }\n      };\n    });\n  }\n\n  revs.forEach(function (rev$$1) {\n    var index = seqStore.index('_doc_id_rev');\n    var key = docId + \"::\" + rev$$1;\n    index.getKey(key).onsuccess = function (e) {\n      var seq = e.target.result;\n      if (typeof seq !== 'number') {\n        return checkDone();\n      }\n      seqStore.delete(seq);\n\n      var cursor = attAndSeqStore.index('seq')\n        .openCursor(IDBKeyRange.only(seq));\n\n      cursor.onsuccess = function (event) {\n        var cursor = event.target.result;\n        if (cursor) {\n          var digest = cursor.value.digestSeq.split('::')[0];\n          possiblyOrphanedDigests.push(digest);\n          attAndSeqStore.delete(cursor.primaryKey);\n          cursor.continue();\n        } else { // done\n          checkDone();\n        }\n      };\n    };\n  });\n}\n\nfunction openTransactionSafely(idb, stores, mode) {\n  try {\n    return {\n      txn: idb.transaction(stores, mode)\n    };\n  } catch (err) {\n    return {\n      error: err\n    };\n  }\n}\n\nvar changesHandler = new Changes();\n\nfunction idbBulkDocs(dbOpts, req, opts, api, idb, callback) {\n  var docInfos = req.docs;\n  var txn;\n  var docStore;\n  var bySeqStore;\n  var attachStore;\n  var attachAndSeqStore;\n  var metaStore;\n  var docInfoError;\n  var metaDoc;\n\n  for (var i = 0, len = docInfos.length; i < len; i++) {\n    var doc = docInfos[i];\n    if (doc._id && isLocalId(doc._id)) {\n      continue;\n    }\n    doc = docInfos[i] = parseDoc(doc, opts.new_edits, dbOpts);\n    if (doc.error && !docInfoError) {\n      docInfoError = doc;\n    }\n  }\n\n  if (docInfoError) {\n    return callback(docInfoError);\n  }\n\n  var allDocsProcessed = false;\n  var docCountDelta = 0;\n  var results = new Array(docInfos.length);\n  var fetchedDocs = new ExportedMap();\n  var preconditionErrored = false;\n  var blobType = api._meta.blobSupport ? 'blob' : 'base64';\n\n  preprocessAttachments(docInfos, blobType, function (err) {\n    if (err) {\n      return callback(err);\n    }\n    startTransaction();\n  });\n\n  function startTransaction() {\n\n    var stores = [\n      DOC_STORE, BY_SEQ_STORE,\n      ATTACH_STORE,\n      LOCAL_STORE, ATTACH_AND_SEQ_STORE,\n      META_STORE\n    ];\n    var txnResult = openTransactionSafely(idb, stores, 'readwrite');\n    if (txnResult.error) {\n      return callback(txnResult.error);\n    }\n    txn = txnResult.txn;\n    txn.onabort = idbError(callback);\n    txn.ontimeout = idbError(callback);\n    txn.oncomplete = complete;\n    docStore = txn.objectStore(DOC_STORE);\n    bySeqStore = txn.objectStore(BY_SEQ_STORE);\n    attachStore = txn.objectStore(ATTACH_STORE);\n    attachAndSeqStore = txn.objectStore(ATTACH_AND_SEQ_STORE);\n    metaStore = txn.objectStore(META_STORE);\n\n    metaStore.get(META_STORE).onsuccess = function (e) {\n      metaDoc = e.target.result;\n      updateDocCountIfReady();\n    };\n\n    verifyAttachments(function (err) {\n      if (err) {\n        preconditionErrored = true;\n        return callback(err);\n      }\n      fetchExistingDocs();\n    });\n  }\n\n  function onAllDocsProcessed() {\n    allDocsProcessed = true;\n    updateDocCountIfReady();\n  }\n\n  function idbProcessDocs() {\n    processDocs(dbOpts.revs_limit, docInfos, api, fetchedDocs,\n                txn, results, writeDoc, opts, onAllDocsProcessed);\n  }\n\n  function updateDocCountIfReady() {\n    if (!metaDoc || !allDocsProcessed) {\n      return;\n    }\n    // caching the docCount saves a lot of time in allDocs() and\n    // info(), which is why we go to all the trouble of doing this\n    metaDoc.docCount += docCountDelta;\n    metaStore.put(metaDoc);\n  }\n\n  function fetchExistingDocs() {\n\n    if (!docInfos.length) {\n      return;\n    }\n\n    var numFetched = 0;\n\n    function checkDone() {\n      if (++numFetched === docInfos.length) {\n        idbProcessDocs();\n      }\n    }\n\n    function readMetadata(event) {\n      var metadata = decodeMetadata(event.target.result);\n\n      if (metadata) {\n        fetchedDocs.set(metadata.id, metadata);\n      }\n      checkDone();\n    }\n\n    for (var i = 0, len = docInfos.length; i < len; i++) {\n      var docInfo = docInfos[i];\n      if (docInfo._id && isLocalId(docInfo._id)) {\n        checkDone(); // skip local docs\n        continue;\n      }\n      var req = docStore.get(docInfo.metadata.id);\n      req.onsuccess = readMetadata;\n    }\n  }\n\n  function complete() {\n    if (preconditionErrored) {\n      return;\n    }\n\n    changesHandler.notify(api._meta.name);\n    callback(null, results);\n  }\n\n  function verifyAttachment(digest, callback) {\n\n    var req = attachStore.get(digest);\n    req.onsuccess = function (e) {\n      if (!e.target.result) {\n        var err = createError(MISSING_STUB,\n          'unknown stub attachment with digest ' +\n          digest);\n        err.status = 412;\n        callback(err);\n      } else {\n        callback();\n      }\n    };\n  }\n\n  function verifyAttachments(finish) {\n\n\n    var digests = [];\n    docInfos.forEach(function (docInfo) {\n      if (docInfo.data && docInfo.data._attachments) {\n        Object.keys(docInfo.data._attachments).forEach(function (filename) {\n          var att = docInfo.data._attachments[filename];\n          if (att.stub) {\n            digests.push(att.digest);\n          }\n        });\n      }\n    });\n    if (!digests.length) {\n      return finish();\n    }\n    var numDone = 0;\n    var err;\n\n    function checkDone() {\n      if (++numDone === digests.length) {\n        finish(err);\n      }\n    }\n    digests.forEach(function (digest) {\n      verifyAttachment(digest, function (attErr) {\n        if (attErr && !err) {\n          err = attErr;\n        }\n        checkDone();\n      });\n    });\n  }\n\n  function writeDoc(docInfo, winningRev$$1, winningRevIsDeleted, newRevIsDeleted,\n                    isUpdate, delta, resultsIdx, callback) {\n\n    docInfo.metadata.winningRev = winningRev$$1;\n    docInfo.metadata.deleted = winningRevIsDeleted;\n\n    var doc = docInfo.data;\n    doc._id = docInfo.metadata.id;\n    doc._rev = docInfo.metadata.rev;\n\n    if (newRevIsDeleted) {\n      doc._deleted = true;\n    }\n\n    var hasAttachments = doc._attachments &&\n      Object.keys(doc._attachments).length;\n    if (hasAttachments) {\n      return writeAttachments(docInfo, winningRev$$1, winningRevIsDeleted,\n        isUpdate, resultsIdx, callback);\n    }\n\n    docCountDelta += delta;\n    updateDocCountIfReady();\n\n    finishDoc(docInfo, winningRev$$1, winningRevIsDeleted,\n      isUpdate, resultsIdx, callback);\n  }\n\n  function finishDoc(docInfo, winningRev$$1, winningRevIsDeleted,\n                     isUpdate, resultsIdx, callback) {\n\n    var doc = docInfo.data;\n    var metadata = docInfo.metadata;\n\n    doc._doc_id_rev = metadata.id + '::' + metadata.rev;\n    delete doc._id;\n    delete doc._rev;\n\n    function afterPutDoc(e) {\n      var revsToDelete = docInfo.stemmedRevs || [];\n\n      if (isUpdate && api.auto_compaction) {\n        revsToDelete = revsToDelete.concat(compactTree(docInfo.metadata));\n      }\n\n      if (revsToDelete && revsToDelete.length) {\n        compactRevs(revsToDelete, docInfo.metadata.id, txn);\n      }\n\n      metadata.seq = e.target.result;\n      // Current _rev is calculated from _rev_tree on read\n      // delete metadata.rev;\n      var metadataToStore = encodeMetadata(metadata, winningRev$$1,\n        winningRevIsDeleted);\n      var metaDataReq = docStore.put(metadataToStore);\n      metaDataReq.onsuccess = afterPutMetadata;\n    }\n\n    function afterPutDocError(e) {\n      // ConstraintError, need to update, not put (see #1638 for details)\n      e.preventDefault(); // avoid transaction abort\n      e.stopPropagation(); // avoid transaction onerror\n      var index = bySeqStore.index('_doc_id_rev');\n      var getKeyReq = index.getKey(doc._doc_id_rev);\n      getKeyReq.onsuccess = function (e) {\n        var putReq = bySeqStore.put(doc, e.target.result);\n        putReq.onsuccess = afterPutDoc;\n      };\n    }\n\n    function afterPutMetadata() {\n      results[resultsIdx] = {\n        ok: true,\n        id: metadata.id,\n        rev: metadata.rev\n      };\n      fetchedDocs.set(docInfo.metadata.id, docInfo.metadata);\n      insertAttachmentMappings(docInfo, metadata.seq, callback);\n    }\n\n    var putReq = bySeqStore.put(doc);\n\n    putReq.onsuccess = afterPutDoc;\n    putReq.onerror = afterPutDocError;\n  }\n\n  function writeAttachments(docInfo, winningRev$$1, winningRevIsDeleted,\n                            isUpdate, resultsIdx, callback) {\n\n\n    var doc = docInfo.data;\n\n    var numDone = 0;\n    var attachments = Object.keys(doc._attachments);\n\n    function collectResults() {\n      if (numDone === attachments.length) {\n        finishDoc(docInfo, winningRev$$1, winningRevIsDeleted,\n          isUpdate, resultsIdx, callback);\n      }\n    }\n\n    function attachmentSaved() {\n      numDone++;\n      collectResults();\n    }\n\n    attachments.forEach(function (key) {\n      var att = docInfo.data._attachments[key];\n      if (!att.stub) {\n        var data = att.data;\n        delete att.data;\n        att.revpos = parseInt(winningRev$$1, 10);\n        var digest = att.digest;\n        saveAttachment(digest, data, attachmentSaved);\n      } else {\n        numDone++;\n        collectResults();\n      }\n    });\n  }\n\n  // map seqs to attachment digests, which\n  // we will need later during compaction\n  function insertAttachmentMappings(docInfo, seq, callback) {\n\n    var attsAdded = 0;\n    var attsToAdd = Object.keys(docInfo.data._attachments || {});\n\n    if (!attsToAdd.length) {\n      return callback();\n    }\n\n    function checkDone() {\n      if (++attsAdded === attsToAdd.length) {\n        callback();\n      }\n    }\n\n    function add(att) {\n      var digest = docInfo.data._attachments[att].digest;\n      var req = attachAndSeqStore.put({\n        seq: seq,\n        digestSeq: digest + '::' + seq\n      });\n\n      req.onsuccess = checkDone;\n      req.onerror = function (e) {\n        // this callback is for a constaint error, which we ignore\n        // because this docid/rev has already been associated with\n        // the digest (e.g. when new_edits == false)\n        e.preventDefault(); // avoid transaction abort\n        e.stopPropagation(); // avoid transaction onerror\n        checkDone();\n      };\n    }\n    for (var i = 0; i < attsToAdd.length; i++) {\n      add(attsToAdd[i]); // do in parallel\n    }\n  }\n\n  function saveAttachment(digest, data, callback) {\n\n\n    var getKeyReq = attachStore.count(digest);\n    getKeyReq.onsuccess = function (e) {\n      var count = e.target.result;\n      if (count) {\n        return callback(); // already exists\n      }\n      var newAtt = {\n        digest: digest,\n        body: data\n      };\n      var putReq = attachStore.put(newAtt);\n      putReq.onsuccess = callback;\n    };\n  }\n}\n\n// Abstraction over IDBCursor and getAll()/getAllKeys() that allows us to batch our operations\n// while falling back to a normal IDBCursor operation on browsers that don't support getAll() or\n// getAllKeys(). This allows for a much faster implementation than just straight-up cursors, because\n// we're not processing each document one-at-a-time.\nfunction runBatchedCursor(objectStore, keyRange, descending, batchSize, onBatch) {\n\n  if (batchSize === -1) {\n    batchSize = 1000;\n  }\n\n  // Bail out of getAll()/getAllKeys() in the following cases:\n  // 1) either method is unsupported - we need both\n  // 2) batchSize is 1 (might as well use IDBCursor)\n  // 3) descending  no real way to do this via getAll()/getAllKeys()\n\n  var useGetAll = typeof objectStore.getAll === 'function' &&\n    typeof objectStore.getAllKeys === 'function' &&\n    batchSize > 1 && !descending;\n\n  var keysBatch;\n  var valuesBatch;\n  var pseudoCursor;\n\n  function onGetAll(e) {\n    valuesBatch = e.target.result;\n    if (keysBatch) {\n      onBatch(keysBatch, valuesBatch, pseudoCursor);\n    }\n  }\n\n  function onGetAllKeys(e) {\n    keysBatch = e.target.result;\n    if (valuesBatch) {\n      onBatch(keysBatch, valuesBatch, pseudoCursor);\n    }\n  }\n\n  function continuePseudoCursor() {\n    if (!keysBatch.length) { // no more results\n      return onBatch();\n    }\n    // fetch next batch, exclusive start\n    var lastKey = keysBatch[keysBatch.length - 1];\n    var newKeyRange;\n    if (keyRange && keyRange.upper) {\n      try {\n        newKeyRange = IDBKeyRange.bound(lastKey, keyRange.upper,\n          true, keyRange.upperOpen);\n      } catch (e) {\n        if (e.name === \"DataError\" && e.code === 0) {\n          return onBatch(); // we're done, startkey and endkey are equal\n        }\n      }\n    } else {\n      newKeyRange = IDBKeyRange.lowerBound(lastKey, true);\n    }\n    keyRange = newKeyRange;\n    keysBatch = null;\n    valuesBatch = null;\n    objectStore.getAll(keyRange, batchSize).onsuccess = onGetAll;\n    objectStore.getAllKeys(keyRange, batchSize).onsuccess = onGetAllKeys;\n  }\n\n  function onCursor(e) {\n    var cursor = e.target.result;\n    if (!cursor) { // done\n      return onBatch();\n    }\n    // regular IDBCursor acts like a batch where batch size is always 1\n    onBatch([cursor.key], [cursor.value], cursor);\n  }\n\n  if (useGetAll) {\n    pseudoCursor = {\"continue\": continuePseudoCursor};\n    objectStore.getAll(keyRange, batchSize).onsuccess = onGetAll;\n    objectStore.getAllKeys(keyRange, batchSize).onsuccess = onGetAllKeys;\n  } else if (descending) {\n    objectStore.openCursor(keyRange, 'prev').onsuccess = onCursor;\n  } else {\n    objectStore.openCursor(keyRange).onsuccess = onCursor;\n  }\n}\n\n// simple shim for objectStore.getAll(), falling back to IDBCursor\nfunction getAll(objectStore, keyRange, onSuccess) {\n  if (typeof objectStore.getAll === 'function') {\n    // use native getAll\n    objectStore.getAll(keyRange).onsuccess = onSuccess;\n    return;\n  }\n  // fall back to cursors\n  var values = [];\n\n  function onCursor(e) {\n    var cursor = e.target.result;\n    if (cursor) {\n      values.push(cursor.value);\n      cursor.continue();\n    } else {\n      onSuccess({\n        target: {\n          result: values\n        }\n      });\n    }\n  }\n\n  objectStore.openCursor(keyRange).onsuccess = onCursor;\n}\n\nfunction allDocsKeys(keys, docStore, onBatch) {\n  // It's not guaranted to be returned in right order  \n  var valuesBatch = new Array(keys.length);\n  var count = 0;\n  keys.forEach(function (key, index) {\n    docStore.get(key).onsuccess = function (event) {\n      if (event.target.result) {\n        valuesBatch[index] = event.target.result;\n      } else {\n        valuesBatch[index] = {key: key, error: 'not_found'};\n      }\n      count++;\n      if (count === keys.length) {\n        onBatch(keys, valuesBatch, {});\n      }\n    };\n  });\n}\n\nfunction createKeyRange(start, end, inclusiveEnd, key, descending) {\n  try {\n    if (start && end) {\n      if (descending) {\n        return IDBKeyRange.bound(end, start, !inclusiveEnd, false);\n      } else {\n        return IDBKeyRange.bound(start, end, false, !inclusiveEnd);\n      }\n    } else if (start) {\n      if (descending) {\n        return IDBKeyRange.upperBound(start);\n      } else {\n        return IDBKeyRange.lowerBound(start);\n      }\n    } else if (end) {\n      if (descending) {\n        return IDBKeyRange.lowerBound(end, !inclusiveEnd);\n      } else {\n        return IDBKeyRange.upperBound(end, !inclusiveEnd);\n      }\n    } else if (key) {\n      return IDBKeyRange.only(key);\n    }\n  } catch (e) {\n    return {error: e};\n  }\n  return null;\n}\n\nfunction idbAllDocs(opts, idb, callback) {\n  var start = 'startkey' in opts ? opts.startkey : false;\n  var end = 'endkey' in opts ? opts.endkey : false;\n  var key = 'key' in opts ? opts.key : false;\n  var keys = 'keys' in opts ? opts.keys : false; \n  var skip = opts.skip || 0;\n  var limit = typeof opts.limit === 'number' ? opts.limit : -1;\n  var inclusiveEnd = opts.inclusive_end !== false;\n\n  var keyRange ; \n  var keyRangeError;\n  if (!keys) {\n    keyRange = createKeyRange(start, end, inclusiveEnd, key, opts.descending);\n    keyRangeError = keyRange && keyRange.error;\n    if (keyRangeError && \n      !(keyRangeError.name === \"DataError\" && keyRangeError.code === 0)) {\n      // DataError with error code 0 indicates start is less than end, so\n      // can just do an empty query. Else need to throw\n      return callback(createError(IDB_ERROR,\n        keyRangeError.name, keyRangeError.message));\n    }\n  }\n\n  var stores = [DOC_STORE, BY_SEQ_STORE, META_STORE];\n\n  if (opts.attachments) {\n    stores.push(ATTACH_STORE);\n  }\n  var txnResult = openTransactionSafely(idb, stores, 'readonly');\n  if (txnResult.error) {\n    return callback(txnResult.error);\n  }\n  var txn = txnResult.txn;\n  txn.oncomplete = onTxnComplete;\n  txn.onabort = idbError(callback);\n  var docStore = txn.objectStore(DOC_STORE);\n  var seqStore = txn.objectStore(BY_SEQ_STORE);\n  var metaStore = txn.objectStore(META_STORE);\n  var docIdRevIndex = seqStore.index('_doc_id_rev');\n  var results = [];\n  var docCount;\n  var updateSeq;\n\n  metaStore.get(META_STORE).onsuccess = function (e) {\n    docCount = e.target.result.docCount;\n  };\n\n  /* istanbul ignore if */\n  if (opts.update_seq) {\n    getMaxUpdateSeq(seqStore, function (e) { \n      if (e.target.result && e.target.result.length > 0) {\n        updateSeq = e.target.result[0];\n      }\n    });\n  }\n\n  function getMaxUpdateSeq(objectStore, onSuccess) {\n    function onCursor(e) {\n      var cursor = e.target.result;\n      var maxKey = undefined;\n      if (cursor && cursor.key) {\n        maxKey = cursor.key;\n      } \n      return onSuccess({\n        target: {\n          result: [maxKey]\n        }\n      });\n    }\n    objectStore.openCursor(null, 'prev').onsuccess = onCursor;\n  }\n\n  // if the user specifies include_docs=true, then we don't\n  // want to block the main cursor while we're fetching the doc\n  function fetchDocAsynchronously(metadata, row, winningRev$$1) {\n    var key = metadata.id + \"::\" + winningRev$$1;\n    docIdRevIndex.get(key).onsuccess =  function onGetDoc(e) {\n      row.doc = decodeDoc(e.target.result) || {};\n      if (opts.conflicts) {\n        var conflicts = collectConflicts(metadata);\n        if (conflicts.length) {\n          row.doc._conflicts = conflicts;\n        }\n      }\n      fetchAttachmentsIfNecessary(row.doc, opts, txn);\n    };\n  }\n\n  function allDocsInner(winningRev$$1, metadata) {\n    var row = {\n      id: metadata.id,\n      key: metadata.id,\n      value: {\n        rev: winningRev$$1\n      }\n    };\n    var deleted = metadata.deleted;\n    if (deleted) {\n      if (keys) {\n        results.push(row);\n        // deleted docs are okay with \"keys\" requests\n        row.value.deleted = true;\n        row.doc = null;\n      }\n    } else if (skip-- <= 0) {\n      results.push(row);\n      if (opts.include_docs) {\n        fetchDocAsynchronously(metadata, row, winningRev$$1);\n      }\n    }\n  }\n\n  function processBatch(batchValues) {\n    for (var i = 0, len = batchValues.length; i < len; i++) {\n      if (results.length === limit) {\n        break;\n      }\n      var batchValue = batchValues[i];\n      if (batchValue.error && keys) {\n        // key was not found with \"keys\" requests\n        results.push(batchValue);\n        continue;\n      }\n      var metadata = decodeMetadata(batchValue);\n      var winningRev$$1 = metadata.winningRev;\n      allDocsInner(winningRev$$1, metadata);\n    }\n  }\n\n  function onBatch(batchKeys, batchValues, cursor) {\n    if (!cursor) {\n      return;\n    }\n    processBatch(batchValues);\n    if (results.length < limit) {\n      cursor.continue();\n    }\n  }\n\n  function onGetAll(e) {\n    var values = e.target.result;\n    if (opts.descending) {\n      values = values.reverse();\n    }\n    processBatch(values);\n  }\n\n  function onResultsReady() {\n    var returnVal = {\n      total_rows: docCount,\n      offset: opts.skip,\n      rows: results\n    };\n    \n    /* istanbul ignore if */\n    if (opts.update_seq && updateSeq !== undefined) {\n      returnVal.update_seq = updateSeq;\n    }\n    callback(null, returnVal);\n  }\n\n  function onTxnComplete() {\n    if (opts.attachments) {\n      postProcessAttachments(results, opts.binary).then(onResultsReady);\n    } else {\n      onResultsReady();\n    }\n  }\n\n  // don't bother doing any requests if start > end or limit === 0\n  if (keyRangeError || limit === 0) {\n    return;\n  }\n  if (keys) {\n    return allDocsKeys(opts.keys, docStore, onBatch);\n  }\n  if (limit === -1) { // just fetch everything\n    return getAll(docStore, keyRange, onGetAll);\n  }\n  // else do a cursor\n  // choose a batch size based on the skip, since we'll need to skip that many\n  runBatchedCursor(docStore, keyRange, opts.descending, limit + skip, onBatch);\n}\n\n//\n// Blobs are not supported in all versions of IndexedDB, notably\n// Chrome <37 and Android <5. In those versions, storing a blob will throw.\n//\n// Various other blob bugs exist in Chrome v37-42 (inclusive).\n// Detecting them is expensive and confusing to users, and Chrome 37-42\n// is at very low usage worldwide, so we do a hacky userAgent check instead.\n//\n// content-type bug: https://code.google.com/p/chromium/issues/detail?id=408120\n// 404 bug: https://code.google.com/p/chromium/issues/detail?id=447916\n// FileReader bug: https://code.google.com/p/chromium/issues/detail?id=447836\n//\nfunction checkBlobSupport(txn) {\n  return new Promise(function (resolve) {\n    var blob$$1 = createBlob(['']);\n    var req = txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob$$1, 'key');\n\n    req.onsuccess = function () {\n      var matchedChrome = navigator.userAgent.match(/Chrome\\/(\\d+)/);\n      var matchedEdge = navigator.userAgent.match(/Edge\\//);\n      // MS Edge pretends to be Chrome 42:\n      // https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx\n      resolve(matchedEdge || !matchedChrome ||\n        parseInt(matchedChrome[1], 10) >= 43);\n    };\n\n    req.onerror = txn.onabort = function (e) {\n      // If the transaction aborts now its due to not being able to\n      // write to the database, likely due to the disk being full\n      e.preventDefault();\n      e.stopPropagation();\n      resolve(false);\n    };\n  }).catch(function () {\n    return false; // error, so assume unsupported\n  });\n}\n\nfunction countDocs(txn, cb) {\n  var index = txn.objectStore(DOC_STORE).index('deletedOrLocal');\n  index.count(IDBKeyRange.only('0')).onsuccess = function (e) {\n    cb(e.target.result);\n  };\n}\n\n// This task queue ensures that IDB open calls are done in their own tick\n\nvar running = false;\nvar queue = [];\n\nfunction tryCode(fun, err, res, PouchDB) {\n  try {\n    fun(err, res);\n  } catch (err) {\n    // Shouldn't happen, but in some odd cases\n    // IndexedDB implementations might throw a sync\n    // error, in which case this will at least log it.\n    PouchDB.emit('error', err);\n  }\n}\n\nfunction applyNext() {\n  if (running || !queue.length) {\n    return;\n  }\n  running = true;\n  queue.shift()();\n}\n\nfunction enqueueTask(action, callback, PouchDB) {\n  queue.push(function runAction() {\n    action(function runCallback(err, res) {\n      tryCode(callback, err, res, PouchDB);\n      running = false;\n      immediate(function runNext() {\n        applyNext(PouchDB);\n      });\n    });\n  });\n  applyNext();\n}\n\nfunction changes(opts, api, dbName, idb) {\n  opts = clone(opts);\n\n  if (opts.continuous) {\n    var id = dbName + ':' + uuid();\n    changesHandler.addListener(dbName, id, api, opts);\n    changesHandler.notify(dbName);\n    return {\n      cancel: function () {\n        changesHandler.removeListener(dbName, id);\n      }\n    };\n  }\n\n  var docIds = opts.doc_ids && new ExportedSet(opts.doc_ids);\n\n  opts.since = opts.since || 0;\n  var lastSeq = opts.since;\n\n  var limit = 'limit' in opts ? opts.limit : -1;\n  if (limit === 0) {\n    limit = 1; // per CouchDB _changes spec\n  }\n\n  var results = [];\n  var numResults = 0;\n  var filter = filterChange(opts);\n  var docIdsToMetadata = new ExportedMap();\n\n  var txn;\n  var bySeqStore;\n  var docStore;\n  var docIdRevIndex;\n\n  function onBatch(batchKeys, batchValues, cursor) {\n    if (!cursor || !batchKeys.length) { // done\n      return;\n    }\n\n    var winningDocs = new Array(batchKeys.length);\n    var metadatas = new Array(batchKeys.length);\n\n    function processMetadataAndWinningDoc(metadata, winningDoc) {\n      var change = opts.processChange(winningDoc, metadata, opts);\n      lastSeq = change.seq = metadata.seq;\n\n      var filtered = filter(change);\n      if (typeof filtered === 'object') { // anything but true/false indicates error\n        return Promise.reject(filtered);\n      }\n\n      if (!filtered) {\n        return Promise.resolve();\n      }\n      numResults++;\n      if (opts.return_docs) {\n        results.push(change);\n      }\n      // process the attachment immediately\n      // for the benefit of live listeners\n      if (opts.attachments && opts.include_docs) {\n        return new Promise(function (resolve) {\n          fetchAttachmentsIfNecessary(winningDoc, opts, txn, function () {\n            postProcessAttachments([change], opts.binary).then(function () {\n              resolve(change);\n            });\n          });\n        });\n      } else {\n        return Promise.resolve(change);\n      }\n    }\n\n    function onBatchDone() {\n      var promises = [];\n      for (var i = 0, len = winningDocs.length; i < len; i++) {\n        if (numResults === limit) {\n          break;\n        }\n        var winningDoc = winningDocs[i];\n        if (!winningDoc) {\n          continue;\n        }\n        var metadata = metadatas[i];\n        promises.push(processMetadataAndWinningDoc(metadata, winningDoc));\n      }\n\n      Promise.all(promises).then(function (changes) {\n        for (var i = 0, len = changes.length; i < len; i++) {\n          if (changes[i]) {\n            opts.onChange(changes[i]);\n          }\n        }\n      }).catch(opts.complete);\n\n      if (numResults !== limit) {\n        cursor.continue();\n      }\n    }\n\n    // Fetch all metadatas/winningdocs from this batch in parallel, then process\n    // them all only once all data has been collected. This is done in parallel\n    // because it's faster than doing it one-at-a-time.\n    var numDone = 0;\n    batchValues.forEach(function (value, i) {\n      var doc = decodeDoc(value);\n      var seq = batchKeys[i];\n      fetchWinningDocAndMetadata(doc, seq, function (metadata, winningDoc) {\n        metadatas[i] = metadata;\n        winningDocs[i] = winningDoc;\n        if (++numDone === batchKeys.length) {\n          onBatchDone();\n        }\n      });\n    });\n  }\n\n  function onGetMetadata(doc, seq, metadata, cb) {\n    if (metadata.seq !== seq) {\n      // some other seq is later\n      return cb();\n    }\n\n    if (metadata.winningRev === doc._rev) {\n      // this is the winning doc\n      return cb(metadata, doc);\n    }\n\n    // fetch winning doc in separate request\n    var docIdRev = doc._id + '::' + metadata.winningRev;\n    var req = docIdRevIndex.get(docIdRev);\n    req.onsuccess = function (e) {\n      cb(metadata, decodeDoc(e.target.result));\n    };\n  }\n\n  function fetchWinningDocAndMetadata(doc, seq, cb) {\n    if (docIds && !docIds.has(doc._id)) {\n      return cb();\n    }\n\n    var metadata = docIdsToMetadata.get(doc._id);\n    if (metadata) { // cached\n      return onGetMetadata(doc, seq, metadata, cb);\n    }\n    // metadata not cached, have to go fetch it\n    docStore.get(doc._id).onsuccess = function (e) {\n      metadata = decodeMetadata(e.target.result);\n      docIdsToMetadata.set(doc._id, metadata);\n      onGetMetadata(doc, seq, metadata, cb);\n    };\n  }\n\n  function finish() {\n    opts.complete(null, {\n      results: results,\n      last_seq: lastSeq\n    });\n  }\n\n  function onTxnComplete() {\n    if (!opts.continuous && opts.attachments) {\n      // cannot guarantee that postProcessing was already done,\n      // so do it again\n      postProcessAttachments(results).then(finish);\n    } else {\n      finish();\n    }\n  }\n\n  var objectStores = [DOC_STORE, BY_SEQ_STORE];\n  if (opts.attachments) {\n    objectStores.push(ATTACH_STORE);\n  }\n  var txnResult = openTransactionSafely(idb, objectStores, 'readonly');\n  if (txnResult.error) {\n    return opts.complete(txnResult.error);\n  }\n  txn = txnResult.txn;\n  txn.onabort = idbError(opts.complete);\n  txn.oncomplete = onTxnComplete;\n\n  bySeqStore = txn.objectStore(BY_SEQ_STORE);\n  docStore = txn.objectStore(DOC_STORE);\n  docIdRevIndex = bySeqStore.index('_doc_id_rev');\n\n  var keyRange = (opts.since && !opts.descending) ?\n    IDBKeyRange.lowerBound(opts.since, true) : null;\n\n  runBatchedCursor(bySeqStore, keyRange, opts.descending, limit, onBatch);\n}\n\nvar cachedDBs = new ExportedMap();\nvar blobSupportPromise;\nvar openReqList = new ExportedMap();\n\nfunction IdbPouch(opts, callback) {\n  var api = this;\n\n  enqueueTask(function (thisCallback) {\n    init(api, opts, thisCallback);\n  }, callback, api.constructor);\n}\n\nfunction init(api, opts, callback) {\n\n  var dbName = opts.name;\n\n  var idb = null;\n  api._meta = null;\n\n  // called when creating a fresh new database\n  function createSchema(db) {\n    var docStore = db.createObjectStore(DOC_STORE, {keyPath : 'id'});\n    db.createObjectStore(BY_SEQ_STORE, {autoIncrement: true})\n      .createIndex('_doc_id_rev', '_doc_id_rev', {unique: true});\n    db.createObjectStore(ATTACH_STORE, {keyPath: 'digest'});\n    db.createObjectStore(META_STORE, {keyPath: 'id', autoIncrement: false});\n    db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);\n\n    // added in v2\n    docStore.createIndex('deletedOrLocal', 'deletedOrLocal', {unique : false});\n\n    // added in v3\n    db.createObjectStore(LOCAL_STORE, {keyPath: '_id'});\n\n    // added in v4\n    var attAndSeqStore = db.createObjectStore(ATTACH_AND_SEQ_STORE,\n      {autoIncrement: true});\n    attAndSeqStore.createIndex('seq', 'seq');\n    attAndSeqStore.createIndex('digestSeq', 'digestSeq', {unique: true});\n  }\n\n  // migration to version 2\n  // unfortunately \"deletedOrLocal\" is a misnomer now that we no longer\n  // store local docs in the main doc-store, but whaddyagonnado\n  function addDeletedOrLocalIndex(txn, callback) {\n    var docStore = txn.objectStore(DOC_STORE);\n    docStore.createIndex('deletedOrLocal', 'deletedOrLocal', {unique : false});\n\n    docStore.openCursor().onsuccess = function (event) {\n      var cursor = event.target.result;\n      if (cursor) {\n        var metadata = cursor.value;\n        var deleted = isDeleted(metadata);\n        metadata.deletedOrLocal = deleted ? \"1\" : \"0\";\n        docStore.put(metadata);\n        cursor.continue();\n      } else {\n        callback();\n      }\n    };\n  }\n\n  // migration to version 3 (part 1)\n  function createLocalStoreSchema(db) {\n    db.createObjectStore(LOCAL_STORE, {keyPath: '_id'})\n      .createIndex('_doc_id_rev', '_doc_id_rev', {unique: true});\n  }\n\n  // migration to version 3 (part 2)\n  function migrateLocalStore(txn, cb) {\n    var localStore = txn.objectStore(LOCAL_STORE);\n    var docStore = txn.objectStore(DOC_STORE);\n    var seqStore = txn.objectStore(BY_SEQ_STORE);\n\n    var cursor = docStore.openCursor();\n    cursor.onsuccess = function (event) {\n      var cursor = event.target.result;\n      if (cursor) {\n        var metadata = cursor.value;\n        var docId = metadata.id;\n        var local = isLocalId(docId);\n        var rev$$1 = winningRev(metadata);\n        if (local) {\n          var docIdRev = docId + \"::\" + rev$$1;\n          // remove all seq entries\n          // associated with this docId\n          var start = docId + \"::\";\n          var end = docId + \"::~\";\n          var index = seqStore.index('_doc_id_rev');\n          var range = IDBKeyRange.bound(start, end, false, false);\n          var seqCursor = index.openCursor(range);\n          seqCursor.onsuccess = function (e) {\n            seqCursor = e.target.result;\n            if (!seqCursor) {\n              // done\n              docStore.delete(cursor.primaryKey);\n              cursor.continue();\n            } else {\n              var data = seqCursor.value;\n              if (data._doc_id_rev === docIdRev) {\n                localStore.put(data);\n              }\n              seqStore.delete(seqCursor.primaryKey);\n              seqCursor.continue();\n            }\n          };\n        } else {\n          cursor.continue();\n        }\n      } else if (cb) {\n        cb();\n      }\n    };\n  }\n\n  // migration to version 4 (part 1)\n  function addAttachAndSeqStore(db) {\n    var attAndSeqStore = db.createObjectStore(ATTACH_AND_SEQ_STORE,\n      {autoIncrement: true});\n    attAndSeqStore.createIndex('seq', 'seq');\n    attAndSeqStore.createIndex('digestSeq', 'digestSeq', {unique: true});\n  }\n\n  // migration to version 4 (part 2)\n  function migrateAttsAndSeqs(txn, callback) {\n    var seqStore = txn.objectStore(BY_SEQ_STORE);\n    var attStore = txn.objectStore(ATTACH_STORE);\n    var attAndSeqStore = txn.objectStore(ATTACH_AND_SEQ_STORE);\n\n    // need to actually populate the table. this is the expensive part,\n    // so as an optimization, check first that this database even\n    // contains attachments\n    var req = attStore.count();\n    req.onsuccess = function (e) {\n      var count = e.target.result;\n      if (!count) {\n        return callback(); // done\n      }\n\n      seqStore.openCursor().onsuccess = function (e) {\n        var cursor = e.target.result;\n        if (!cursor) {\n          return callback(); // done\n        }\n        var doc = cursor.value;\n        var seq = cursor.primaryKey;\n        var atts = Object.keys(doc._attachments || {});\n        var digestMap = {};\n        for (var j = 0; j < atts.length; j++) {\n          var att = doc._attachments[atts[j]];\n          digestMap[att.digest] = true; // uniq digests, just in case\n        }\n        var digests = Object.keys(digestMap);\n        for (j = 0; j < digests.length; j++) {\n          var digest = digests[j];\n          attAndSeqStore.put({\n            seq: seq,\n            digestSeq: digest + '::' + seq\n          });\n        }\n        cursor.continue();\n      };\n    };\n  }\n\n  // migration to version 5\n  // Instead of relying on on-the-fly migration of metadata,\n  // this brings the doc-store to its modern form:\n  // - metadata.winningrev\n  // - metadata.seq\n  // - stringify the metadata when storing it\n  function migrateMetadata(txn) {\n\n    function decodeMetadataCompat(storedObject) {\n      if (!storedObject.data) {\n        // old format, when we didn't store it stringified\n        storedObject.deleted = storedObject.deletedOrLocal === '1';\n        return storedObject;\n      }\n      return decodeMetadata(storedObject);\n    }\n\n    // ensure that every metadata has a winningRev and seq,\n    // which was previously created on-the-fly but better to migrate\n    var bySeqStore = txn.objectStore(BY_SEQ_STORE);\n    var docStore = txn.objectStore(DOC_STORE);\n    var cursor = docStore.openCursor();\n    cursor.onsuccess = function (e) {\n      var cursor = e.target.result;\n      if (!cursor) {\n        return; // done\n      }\n      var metadata = decodeMetadataCompat(cursor.value);\n\n      metadata.winningRev = metadata.winningRev ||\n        winningRev(metadata);\n\n      function fetchMetadataSeq() {\n        // metadata.seq was added post-3.2.0, so if it's missing,\n        // we need to fetch it manually\n        var start = metadata.id + '::';\n        var end = metadata.id + '::\\uffff';\n        var req = bySeqStore.index('_doc_id_rev').openCursor(\n          IDBKeyRange.bound(start, end));\n\n        var metadataSeq = 0;\n        req.onsuccess = function (e) {\n          var cursor = e.target.result;\n          if (!cursor) {\n            metadata.seq = metadataSeq;\n            return onGetMetadataSeq();\n          }\n          var seq = cursor.primaryKey;\n          if (seq > metadataSeq) {\n            metadataSeq = seq;\n          }\n          cursor.continue();\n        };\n      }\n\n      function onGetMetadataSeq() {\n        var metadataToStore = encodeMetadata(metadata,\n          metadata.winningRev, metadata.deleted);\n\n        var req = docStore.put(metadataToStore);\n        req.onsuccess = function () {\n          cursor.continue();\n        };\n      }\n\n      if (metadata.seq) {\n        return onGetMetadataSeq();\n      }\n\n      fetchMetadataSeq();\n    };\n\n  }\n\n  api._remote = false;\n  api.type = function () {\n    return 'idb';\n  };\n\n  api._id = toPromise(function (callback) {\n    callback(null, api._meta.instanceId);\n  });\n\n  api._bulkDocs = function idb_bulkDocs(req, reqOpts, callback) {\n    idbBulkDocs(opts, req, reqOpts, api, idb, callback);\n  };\n\n  // First we look up the metadata in the ids database, then we fetch the\n  // current revision(s) from the by sequence store\n  api._get = function idb_get(id, opts, callback) {\n    var doc;\n    var metadata;\n    var err;\n    var txn = opts.ctx;\n    if (!txn) {\n      var txnResult = openTransactionSafely(idb,\n        [DOC_STORE, BY_SEQ_STORE, ATTACH_STORE], 'readonly');\n      if (txnResult.error) {\n        return callback(txnResult.error);\n      }\n      txn = txnResult.txn;\n    }\n\n    function finish() {\n      callback(err, {doc: doc, metadata: metadata, ctx: txn});\n    }\n\n    txn.objectStore(DOC_STORE).get(id).onsuccess = function (e) {\n      metadata = decodeMetadata(e.target.result);\n      // we can determine the result here if:\n      // 1. there is no such document\n      // 2. the document is deleted and we don't ask about specific rev\n      // When we ask with opts.rev we expect the answer to be either\n      // doc (possibly with _deleted=true) or missing error\n      if (!metadata) {\n        err = createError(MISSING_DOC, 'missing');\n        return finish();\n      }\n\n      var rev$$1;\n      if (!opts.rev) {\n        rev$$1 = metadata.winningRev;\n        var deleted = isDeleted(metadata);\n        if (deleted) {\n          err = createError(MISSING_DOC, \"deleted\");\n          return finish();\n        }\n      } else {\n        rev$$1 = opts.latest ? latest(opts.rev, metadata) : opts.rev;\n      }\n\n      var objectStore = txn.objectStore(BY_SEQ_STORE);\n      var key = metadata.id + '::' + rev$$1;\n\n      objectStore.index('_doc_id_rev').get(key).onsuccess = function (e) {\n        doc = e.target.result;\n        if (doc) {\n          doc = decodeDoc(doc);\n        }\n        if (!doc) {\n          err = createError(MISSING_DOC, 'missing');\n          return finish();\n        }\n        finish();\n      };\n    };\n  };\n\n  api._getAttachment = function (docId, attachId, attachment, opts, callback) {\n    var txn;\n    if (opts.ctx) {\n      txn = opts.ctx;\n    } else {\n      var txnResult = openTransactionSafely(idb,\n        [DOC_STORE, BY_SEQ_STORE, ATTACH_STORE], 'readonly');\n      if (txnResult.error) {\n        return callback(txnResult.error);\n      }\n      txn = txnResult.txn;\n    }\n    var digest = attachment.digest;\n    var type = attachment.content_type;\n\n    txn.objectStore(ATTACH_STORE).get(digest).onsuccess = function (e) {\n      var body = e.target.result.body;\n      readBlobData(body, type, opts.binary, function (blobData) {\n        callback(null, blobData);\n      });\n    };\n  };\n\n  api._info = function idb_info(callback) {\n    var updateSeq;\n    var docCount;\n\n    var txnResult = openTransactionSafely(idb, [META_STORE, BY_SEQ_STORE], 'readonly');\n    if (txnResult.error) {\n      return callback(txnResult.error);\n    }\n    var txn = txnResult.txn;\n    txn.objectStore(META_STORE).get(META_STORE).onsuccess = function (e) {\n      docCount = e.target.result.docCount;\n    };\n    txn.objectStore(BY_SEQ_STORE).openCursor(null, 'prev').onsuccess = function (e) {\n      var cursor = e.target.result;\n      updateSeq = cursor ? cursor.key : 0;\n    };\n\n    txn.oncomplete = function () {\n      callback(null, {\n        doc_count: docCount,\n        update_seq: updateSeq,\n        // for debugging\n        idb_attachment_format: (api._meta.blobSupport ? 'binary' : 'base64')\n      });\n    };\n  };\n\n  api._allDocs = function idb_allDocs(opts, callback) {\n    idbAllDocs(opts, idb, callback);\n  };\n\n  api._changes = function idbChanges(opts) {\n    return changes(opts, api, dbName, idb);\n  };\n\n  api._close = function (callback) {\n    // https://developer.mozilla.org/en-US/docs/IndexedDB/IDBDatabase#close\n    // \"Returns immediately and closes the connection in a separate thread...\"\n    idb.close();\n    cachedDBs.delete(dbName);\n    callback();\n  };\n\n  api._getRevisionTree = function (docId, callback) {\n    var txnResult = openTransactionSafely(idb, [DOC_STORE], 'readonly');\n    if (txnResult.error) {\n      return callback(txnResult.error);\n    }\n    var txn = txnResult.txn;\n    var req = txn.objectStore(DOC_STORE).get(docId);\n    req.onsuccess = function (event) {\n      var doc = decodeMetadata(event.target.result);\n      if (!doc) {\n        callback(createError(MISSING_DOC));\n      } else {\n        callback(null, doc.rev_tree);\n      }\n    };\n  };\n\n  // This function removes revisions of document docId\n  // which are listed in revs and sets this document\n  // revision to to rev_tree\n  api._doCompaction = function (docId, revs, callback) {\n    var stores = [\n      DOC_STORE,\n      BY_SEQ_STORE,\n      ATTACH_STORE,\n      ATTACH_AND_SEQ_STORE\n    ];\n    var txnResult = openTransactionSafely(idb, stores, 'readwrite');\n    if (txnResult.error) {\n      return callback(txnResult.error);\n    }\n    var txn = txnResult.txn;\n\n    var docStore = txn.objectStore(DOC_STORE);\n\n    docStore.get(docId).onsuccess = function (event) {\n      var metadata = decodeMetadata(event.target.result);\n      traverseRevTree(metadata.rev_tree, function (isLeaf, pos,\n                                                         revHash, ctx, opts) {\n        var rev$$1 = pos + '-' + revHash;\n        if (revs.indexOf(rev$$1) !== -1) {\n          opts.status = 'missing';\n        }\n      });\n      compactRevs(revs, docId, txn);\n      var winningRev$$1 = metadata.winningRev;\n      var deleted = metadata.deleted;\n      txn.objectStore(DOC_STORE).put(\n        encodeMetadata(metadata, winningRev$$1, deleted));\n    };\n    txn.onabort = idbError(callback);\n    txn.oncomplete = function () {\n      callback();\n    };\n  };\n\n\n  api._getLocal = function (id, callback) {\n    var txnResult = openTransactionSafely(idb, [LOCAL_STORE], 'readonly');\n    if (txnResult.error) {\n      return callback(txnResult.error);\n    }\n    var tx = txnResult.txn;\n    var req = tx.objectStore(LOCAL_STORE).get(id);\n\n    req.onerror = idbError(callback);\n    req.onsuccess = function (e) {\n      var doc = e.target.result;\n      if (!doc) {\n        callback(createError(MISSING_DOC));\n      } else {\n        delete doc['_doc_id_rev']; // for backwards compat\n        callback(null, doc);\n      }\n    };\n  };\n\n  api._putLocal = function (doc, opts, callback) {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    delete doc._revisions; // ignore this, trust the rev\n    var oldRev = doc._rev;\n    var id = doc._id;\n    if (!oldRev) {\n      doc._rev = '0-1';\n    } else {\n      doc._rev = '0-' + (parseInt(oldRev.split('-')[1], 10) + 1);\n    }\n\n    var tx = opts.ctx;\n    var ret;\n    if (!tx) {\n      var txnResult = openTransactionSafely(idb, [LOCAL_STORE], 'readwrite');\n      if (txnResult.error) {\n        return callback(txnResult.error);\n      }\n      tx = txnResult.txn;\n      tx.onerror = idbError(callback);\n      tx.oncomplete = function () {\n        if (ret) {\n          callback(null, ret);\n        }\n      };\n    }\n\n    var oStore = tx.objectStore(LOCAL_STORE);\n    var req;\n    if (oldRev) {\n      req = oStore.get(id);\n      req.onsuccess = function (e) {\n        var oldDoc = e.target.result;\n        if (!oldDoc || oldDoc._rev !== oldRev) {\n          callback(createError(REV_CONFLICT));\n        } else { // update\n          var req = oStore.put(doc);\n          req.onsuccess = function () {\n            ret = {ok: true, id: doc._id, rev: doc._rev};\n            if (opts.ctx) { // return immediately\n              callback(null, ret);\n            }\n          };\n        }\n      };\n    } else { // new doc\n      req = oStore.add(doc);\n      req.onerror = function (e) {\n        // constraint error, already exists\n        callback(createError(REV_CONFLICT));\n        e.preventDefault(); // avoid transaction abort\n        e.stopPropagation(); // avoid transaction onerror\n      };\n      req.onsuccess = function () {\n        ret = {ok: true, id: doc._id, rev: doc._rev};\n        if (opts.ctx) { // return immediately\n          callback(null, ret);\n        }\n      };\n    }\n  };\n\n  api._removeLocal = function (doc, opts, callback) {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    var tx = opts.ctx;\n    if (!tx) {\n      var txnResult = openTransactionSafely(idb, [LOCAL_STORE], 'readwrite');\n      if (txnResult.error) {\n        return callback(txnResult.error);\n      }\n      tx = txnResult.txn;\n      tx.oncomplete = function () {\n        if (ret) {\n          callback(null, ret);\n        }\n      };\n    }\n    var ret;\n    var id = doc._id;\n    var oStore = tx.objectStore(LOCAL_STORE);\n    var req = oStore.get(id);\n\n    req.onerror = idbError(callback);\n    req.onsuccess = function (e) {\n      var oldDoc = e.target.result;\n      if (!oldDoc || oldDoc._rev !== doc._rev) {\n        callback(createError(MISSING_DOC));\n      } else {\n        oStore.delete(id);\n        ret = {ok: true, id: id, rev: '0-0'};\n        if (opts.ctx) { // return immediately\n          callback(null, ret);\n        }\n      }\n    };\n  };\n\n  api._destroy = function (opts, callback) {\n    changesHandler.removeAllListeners(dbName);\n\n    //Close open request for \"dbName\" database to fix ie delay.\n    var openReq = openReqList.get(dbName);\n    if (openReq && openReq.result) {\n      openReq.result.close();\n      cachedDBs.delete(dbName);\n    }\n    var req = indexedDB.deleteDatabase(dbName);\n\n    req.onsuccess = function () {\n      //Remove open request from the list.\n      openReqList.delete(dbName);\n      if (hasLocalStorage() && (dbName in localStorage)) {\n        delete localStorage[dbName];\n      }\n      callback(null, { 'ok': true });\n    };\n\n    req.onerror = idbError(callback);\n  };\n\n  var cached = cachedDBs.get(dbName);\n\n  if (cached) {\n    idb = cached.idb;\n    api._meta = cached.global;\n    return immediate(function () {\n      callback(null, api);\n    });\n  }\n\n  var req = indexedDB.open(dbName, ADAPTER_VERSION);\n  openReqList.set(dbName, req);\n\n  req.onupgradeneeded = function (e) {\n    var db = e.target.result;\n    if (e.oldVersion < 1) {\n      return createSchema(db); // new db, initial schema\n    }\n    // do migrations\n\n    var txn = e.currentTarget.transaction;\n    // these migrations have to be done in this function, before\n    // control is returned to the event loop, because IndexedDB\n\n    if (e.oldVersion < 3) {\n      createLocalStoreSchema(db); // v2 -> v3\n    }\n    if (e.oldVersion < 4) {\n      addAttachAndSeqStore(db); // v3 -> v4\n    }\n\n    var migrations = [\n      addDeletedOrLocalIndex, // v1 -> v2\n      migrateLocalStore,      // v2 -> v3\n      migrateAttsAndSeqs,     // v3 -> v4\n      migrateMetadata         // v4 -> v5\n    ];\n\n    var i = e.oldVersion;\n\n    function next() {\n      var migration = migrations[i - 1];\n      i++;\n      if (migration) {\n        migration(txn, next);\n      }\n    }\n\n    next();\n  };\n\n  req.onsuccess = function (e) {\n\n    idb = e.target.result;\n\n    idb.onversionchange = function () {\n      idb.close();\n      cachedDBs.delete(dbName);\n    };\n\n    idb.onabort = function (e) {\n      guardedConsole('error', 'Database has a global failure', e.target.error);\n      idb.close();\n      cachedDBs.delete(dbName);\n    };\n\n    // Do a few setup operations (in parallel as much as possible):\n    // 1. Fetch meta doc\n    // 2. Check blob support\n    // 3. Calculate docCount\n    // 4. Generate an instanceId if necessary\n    // 5. Store docCount and instanceId on meta doc\n\n    var txn = idb.transaction([\n      META_STORE,\n      DETECT_BLOB_SUPPORT_STORE,\n      DOC_STORE\n    ], 'readwrite');\n\n    var storedMetaDoc = false;\n    var metaDoc;\n    var docCount;\n    var blobSupport;\n    var instanceId;\n\n    function completeSetup() {\n      if (typeof blobSupport === 'undefined' || !storedMetaDoc) {\n        return;\n      }\n      api._meta = {\n        name: dbName,\n        instanceId: instanceId,\n        blobSupport: blobSupport\n      };\n\n      cachedDBs.set(dbName, {\n        idb: idb,\n        global: api._meta\n      });\n      callback(null, api);\n    }\n\n    function storeMetaDocIfReady() {\n      if (typeof docCount === 'undefined' || typeof metaDoc === 'undefined') {\n        return;\n      }\n      var instanceKey = dbName + '_id';\n      if (instanceKey in metaDoc) {\n        instanceId = metaDoc[instanceKey];\n      } else {\n        metaDoc[instanceKey] = instanceId = uuid();\n      }\n      metaDoc.docCount = docCount;\n      txn.objectStore(META_STORE).put(metaDoc);\n    }\n\n    //\n    // fetch or generate the instanceId\n    //\n    txn.objectStore(META_STORE).get(META_STORE).onsuccess = function (e) {\n      metaDoc = e.target.result || { id: META_STORE };\n      storeMetaDocIfReady();\n    };\n\n    //\n    // countDocs\n    //\n    countDocs(txn, function (count) {\n      docCount = count;\n      storeMetaDocIfReady();\n    });\n\n    //\n    // check blob support\n    //\n    if (!blobSupportPromise) {\n      // make sure blob support is only checked once\n      blobSupportPromise = checkBlobSupport(txn);\n    }\n\n    blobSupportPromise.then(function (val) {\n      blobSupport = val;\n      completeSetup();\n    });\n\n    // only when the metadata put transaction has completed,\n    // consider the setup done\n    txn.oncomplete = function () {\n      storedMetaDoc = true;\n      completeSetup();\n    };\n    txn.onabort = idbError(callback);\n  };\n\n  req.onerror = function (e) {\n    var msg = e.target.error && e.target.error.message;\n\n    if (!msg) {\n      msg = 'Failed to open indexedDB, are you in private browsing mode?';\n    } else if (msg.indexOf(\"stored database is a higher version\") !== -1) {\n      msg = new Error('This DB was created with the newer \"indexeddb\" adapter, but you are trying to open it with the older \"idb\" adapter');\n    }\n\n    guardedConsole('error', msg);\n    callback(createError(IDB_ERROR, msg));\n  };\n}\n\nIdbPouch.valid = function () {\n  // Following #7085 buggy idb versions (typically Safari < 10.1) are\n  // considered valid.\n\n  // On Firefox SecurityError is thrown while referencing indexedDB if cookies\n  // are not allowed. `typeof indexedDB` also triggers the error.\n  try {\n    // some outdated implementations of IDB that appear on Samsung\n    // and HTC Android devices <4.4 are missing IDBKeyRange\n    return typeof indexedDB !== 'undefined' && typeof IDBKeyRange !== 'undefined';\n  } catch (e) {\n    return false;\n  }\n};\n\nfunction IDBPouch (PouchDB) {\n  PouchDB.adapter('idb', IdbPouch, true);\n}\n\n// dead simple promise pool, inspired by https://github.com/timdp/es6-promise-pool\n// but much smaller in code size. limits the number of concurrent promises that are executed\n\n\nfunction pool(promiseFactories, limit) {\n  return new Promise(function (resolve, reject) {\n    var running = 0;\n    var current = 0;\n    var done = 0;\n    var len = promiseFactories.length;\n    var err;\n\n    function runNext() {\n      running++;\n      promiseFactories[current++]().then(onSuccess, onError);\n    }\n\n    function doNext() {\n      if (++done === len) {\n        /* istanbul ignore if */\n        if (err) {\n          reject(err);\n        } else {\n          resolve();\n        }\n      } else {\n        runNextBatch();\n      }\n    }\n\n    function onSuccess() {\n      running--;\n      doNext();\n    }\n\n    /* istanbul ignore next */\n    function onError(thisErr) {\n      running--;\n      err = err || thisErr;\n      doNext();\n    }\n\n    function runNextBatch() {\n      while (running < limit && current < len) {\n        runNext();\n      }\n    }\n\n    runNextBatch();\n  });\n}\n\nvar CHANGES_BATCH_SIZE = 25;\nvar MAX_SIMULTANEOUS_REVS = 50;\nvar CHANGES_TIMEOUT_BUFFER = 5000;\nvar DEFAULT_HEARTBEAT = 10000;\n\nvar supportsBulkGetMap = {};\n\nfunction readAttachmentsAsBlobOrBuffer(row) {\n  var doc = row.doc || row.ok;\n  var atts = doc && doc._attachments;\n  if (!atts) {\n    return;\n  }\n  Object.keys(atts).forEach(function (filename) {\n    var att = atts[filename];\n    att.data = b64ToBluffer(att.data, att.content_type);\n  });\n}\n\nfunction encodeDocId(id) {\n  if (/^_design/.test(id)) {\n    return '_design/' + encodeURIComponent(id.slice(8));\n  }\n  if (/^_local/.test(id)) {\n    return '_local/' + encodeURIComponent(id.slice(7));\n  }\n  return encodeURIComponent(id);\n}\n\nfunction preprocessAttachments$1(doc) {\n  if (!doc._attachments || !Object.keys(doc._attachments)) {\n    return Promise.resolve();\n  }\n\n  return Promise.all(Object.keys(doc._attachments).map(function (key) {\n    var attachment = doc._attachments[key];\n    if (attachment.data && typeof attachment.data !== 'string') {\n      return new Promise(function (resolve) {\n        blobToBase64(attachment.data, resolve);\n      }).then(function (b64) {\n        attachment.data = b64;\n      });\n    }\n  }));\n}\n\nfunction hasUrlPrefix(opts) {\n  if (!opts.prefix) {\n    return false;\n  }\n  var protocol = parseUri(opts.prefix).protocol;\n  return protocol === 'http' || protocol === 'https';\n}\n\n// Get all the information you possibly can about the URI given by name and\n// return it as a suitable object.\nfunction getHost(name, opts) {\n  // encode db name if opts.prefix is a url (#5574)\n  if (hasUrlPrefix(opts)) {\n    var dbName = opts.name.substr(opts.prefix.length);\n    // Ensure prefix has a trailing slash\n    var prefix = opts.prefix.replace(/\\/?$/, '/');\n    name = prefix + encodeURIComponent(dbName);\n  }\n\n  var uri = parseUri(name);\n  if (uri.user || uri.password) {\n    uri.auth = {username: uri.user, password: uri.password};\n  }\n\n  // Split the path part of the URI into parts using '/' as the delimiter\n  // after removing any leading '/' and any trailing '/'\n  var parts = uri.path.replace(/(^\\/|\\/$)/g, '').split('/');\n\n  uri.db = parts.pop();\n  // Prevent double encoding of URI component\n  if (uri.db.indexOf('%') === -1) {\n    uri.db = encodeURIComponent(uri.db);\n  }\n\n  uri.path = parts.join('/');\n\n  return uri;\n}\n\n// Generate a URL with the host data given by opts and the given path\nfunction genDBUrl(opts, path) {\n  return genUrl(opts, opts.db + '/' + path);\n}\n\n// Generate a URL with the host data given by opts and the given path\nfunction genUrl(opts, path) {\n  // If the host already has a path, then we need to have a path delimiter\n  // Otherwise, the path delimiter is the empty string\n  var pathDel = !opts.path ? '' : '/';\n\n  // If the host already has a path, then we need to have a path delimiter\n  // Otherwise, the path delimiter is the empty string\n  return opts.protocol + '://' + opts.host +\n         (opts.port ? (':' + opts.port) : '') +\n         '/' + opts.path + pathDel + path;\n}\n\nfunction paramsToStr(params) {\n  return '?' + Object.keys(params).map(function (k) {\n    return k + '=' + encodeURIComponent(params[k]);\n  }).join('&');\n}\n\nfunction shouldCacheBust(opts) {\n  var ua = (typeof navigator !== 'undefined' && navigator.userAgent) ?\n      navigator.userAgent.toLowerCase() : '';\n  var isIE = ua.indexOf('msie') !== -1;\n  var isTrident = ua.indexOf('trident') !== -1;\n  var isEdge = ua.indexOf('edge') !== -1;\n  var isGET = !('method' in opts) || opts.method === 'GET';\n  return (isIE || isTrident || isEdge) && isGET;\n}\n\n// Implements the PouchDB API for dealing with CouchDB instances over HTTP\nfunction HttpPouch(opts, callback) {\n\n  // The functions that will be publicly available for HttpPouch\n  var api = this;\n\n  var host = getHost(opts.name, opts);\n  var dbUrl = genDBUrl(host, '');\n\n  opts = clone(opts);\n\n  var ourFetch = function (url, options) {\n\n    options = options || {};\n    options.headers = options.headers || new h();\n\n    options.credentials = 'include';\n\n    if (opts.auth || host.auth) {\n      var nAuth = opts.auth || host.auth;\n      var str = nAuth.username + ':' + nAuth.password;\n      var token = thisBtoa(unescape(encodeURIComponent(str)));\n      options.headers.set('Authorization', 'Basic ' + token);\n    }\n\n    var headers = opts.headers || {};\n    Object.keys(headers).forEach(function (key) {\n      options.headers.append(key, headers[key]);\n    });\n\n    /* istanbul ignore if */\n    if (shouldCacheBust(options)) {\n      url += (url.indexOf('?') === -1 ? '?' : '&') + '_nonce=' + Date.now();\n    }\n\n    var fetchFun = opts.fetch || f$1;\n    return fetchFun(url, options);\n  };\n\n  function adapterFun$$1(name, fun) {\n    return adapterFun(name, getArguments(function (args) {\n      setup().then(function () {\n        return fun.apply(this, args);\n      }).catch(function (e) {\n        var callback = args.pop();\n        callback(e);\n      });\n    })).bind(api);\n  }\n\n  function fetchJSON(url, options, callback) {\n\n    var result = {};\n\n    options = options || {};\n    options.headers = options.headers || new h();\n\n    if (!options.headers.get('Content-Type')) {\n      options.headers.set('Content-Type', 'application/json');\n    }\n    if (!options.headers.get('Accept')) {\n      options.headers.set('Accept', 'application/json');\n    }\n\n    return ourFetch(url, options).then(function (response) {\n      result.ok = response.ok;\n      result.status = response.status;\n      return response.json();\n    }).then(function (json) {\n      result.data = json;\n      if (!result.ok) {\n        result.data.status = result.status;\n        var err = generateErrorFromResponse(result.data);\n        if (callback) {\n          return callback(err);\n        } else {\n          throw err;\n        }\n      }\n\n      if (Array.isArray(result.data)) {\n        result.data = result.data.map(function (v) {\n          if (v.error || v.missing) {\n            return generateErrorFromResponse(v);\n          } else {\n            return v;\n          }\n        });\n      }\n\n      if (callback) {\n        callback(null, result.data);\n      } else {\n        return result;\n      }\n    });\n  }\n\n  var setupPromise;\n\n  function setup() {\n    if (opts.skip_setup) {\n      return Promise.resolve();\n    }\n\n    // If there is a setup in process or previous successful setup\n    // done then we will use that\n    // If previous setups have been rejected we will try again\n    if (setupPromise) {\n      return setupPromise;\n    }\n\n    setupPromise = fetchJSON(dbUrl).catch(function (err) {\n      if (err && err.status && err.status === 404) {\n        // Doesnt exist, create it\n        explainError(404, 'PouchDB is just detecting if the remote exists.');\n        return fetchJSON(dbUrl, {method: 'PUT'});\n      } else {\n        return Promise.reject(err);\n      }\n    }).catch(function (err) {\n      // If we try to create a database that already exists, skipped in\n      // istanbul since its catching a race condition.\n      /* istanbul ignore if */\n      if (err && err.status && err.status === 412) {\n        return true;\n      }\n      return Promise.reject(err);\n    });\n\n    setupPromise.catch(function () {\n      setupPromise = null;\n    });\n\n    return setupPromise;\n  }\n\n  immediate(function () {\n    callback(null, api);\n  });\n\n  api._remote = true;\n\n  /* istanbul ignore next */\n  api.type = function () {\n    return 'http';\n  };\n\n  api.id = adapterFun$$1('id', function (callback) {\n    ourFetch(genUrl(host, '')).then(function (response) {\n      return response.json();\n    }).catch(function () {\n      return {};\n    }).then(function (result) {\n      // Bad response or missing `uuid` should not prevent ID generation.\n      var uuid$$1 = (result && result.uuid) ?\n          (result.uuid + host.db) : genDBUrl(host, '');\n      callback(null, uuid$$1);\n    });\n  });\n\n  // Sends a POST request to the host calling the couchdb _compact function\n  //    version: The version of CouchDB it is running\n  api.compact = adapterFun$$1('compact', function (opts, callback) {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    opts = clone(opts);\n\n    fetchJSON(genDBUrl(host, '_compact'), {method: 'POST'}).then(function () {\n      function ping() {\n        api.info(function (err, res) {\n          // CouchDB may send a \"compact_running:true\" if it's\n          // already compacting. PouchDB Server doesn't.\n          /* istanbul ignore else */\n          if (res && !res.compact_running) {\n            callback(null, {ok: true});\n          } else {\n            setTimeout(ping, opts.interval || 200);\n          }\n        });\n      }\n      // Ping the http if it's finished compaction\n      ping();\n    });\n  });\n\n  api.bulkGet = adapterFun('bulkGet', function (opts, callback) {\n    var self = this;\n\n    function doBulkGet(cb) {\n      var params = {};\n      if (opts.revs) {\n        params.revs = true;\n      }\n      if (opts.attachments) {\n        /* istanbul ignore next */\n        params.attachments = true;\n      }\n      if (opts.latest) {\n        params.latest = true;\n      }\n      fetchJSON(genDBUrl(host, '_bulk_get' + paramsToStr(params)), {\n        method: 'POST',\n        body: JSON.stringify({ docs: opts.docs})\n      }).then(function (result) {\n        if (opts.attachments && opts.binary) {\n          result.data.results.forEach(function (res) {\n            res.docs.forEach(readAttachmentsAsBlobOrBuffer);\n          });\n        }\n        cb(null, result.data);\n      }).catch(cb);\n    }\n\n    /* istanbul ignore next */\n    function doBulkGetShim() {\n      // avoid \"url too long error\" by splitting up into multiple requests\n      var batchSize = MAX_SIMULTANEOUS_REVS;\n      var numBatches = Math.ceil(opts.docs.length / batchSize);\n      var numDone = 0;\n      var results = new Array(numBatches);\n\n      function onResult(batchNum) {\n        return function (err, res) {\n          // err is impossible because shim returns a list of errs in that case\n          results[batchNum] = res.results;\n          if (++numDone === numBatches) {\n            callback(null, {results: flatten(results)});\n          }\n        };\n      }\n\n      for (var i = 0; i < numBatches; i++) {\n        var subOpts = pick(opts, ['revs', 'attachments', 'binary', 'latest']);\n        subOpts.docs = opts.docs.slice(i * batchSize,\n          Math.min(opts.docs.length, (i + 1) * batchSize));\n        bulkGet(self, subOpts, onResult(i));\n      }\n    }\n\n    // mark the whole database as either supporting or not supporting _bulk_get\n    var dbUrl = genUrl(host, '');\n    var supportsBulkGet = supportsBulkGetMap[dbUrl];\n\n    /* istanbul ignore next */\n    if (typeof supportsBulkGet !== 'boolean') {\n      // check if this database supports _bulk_get\n      doBulkGet(function (err, res) {\n        if (err) {\n          supportsBulkGetMap[dbUrl] = false;\n          explainError(\n            err.status,\n            'PouchDB is just detecting if the remote ' +\n            'supports the _bulk_get API.'\n          );\n          doBulkGetShim();\n        } else {\n          supportsBulkGetMap[dbUrl] = true;\n          callback(null, res);\n        }\n      });\n    } else if (supportsBulkGet) {\n      doBulkGet(callback);\n    } else {\n      doBulkGetShim();\n    }\n  });\n\n  // Calls GET on the host, which gets back a JSON string containing\n  //    couchdb: A welcome string\n  //    version: The version of CouchDB it is running\n  api._info = function (callback) {\n    setup().then(function () {\n      return ourFetch(genDBUrl(host, ''));\n    }).then(function (response) {\n      return response.json();\n    }).then(function (info) {\n      info.host = genDBUrl(host, '');\n      callback(null, info);\n    }).catch(callback);\n  };\n\n  api.fetch = function (path, options) {\n    return setup().then(function () {\n      var url = path.substring(0, 1) === '/' ?\n        genUrl(host, path.substring(1)) :\n        genDBUrl(host, path);\n      return ourFetch(url, options);\n    });\n  };\n\n  // Get the document with the given id from the database given by host.\n  // The id could be solely the _id in the database, or it may be a\n  // _design/ID or _local/ID path\n  api.get = adapterFun$$1('get', function (id, opts, callback) {\n    // If no options were given, set the callback to the second parameter\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    opts = clone(opts);\n\n    // List of parameters to add to the GET request\n    var params = {};\n\n    if (opts.revs) {\n      params.revs = true;\n    }\n\n    if (opts.revs_info) {\n      params.revs_info = true;\n    }\n\n    if (opts.latest) {\n      params.latest = true;\n    }\n\n    if (opts.open_revs) {\n      if (opts.open_revs !== \"all\") {\n        opts.open_revs = JSON.stringify(opts.open_revs);\n      }\n      params.open_revs = opts.open_revs;\n    }\n\n    if (opts.rev) {\n      params.rev = opts.rev;\n    }\n\n    if (opts.conflicts) {\n      params.conflicts = opts.conflicts;\n    }\n\n    /* istanbul ignore if */\n    if (opts.update_seq) {\n      params.update_seq = opts.update_seq;\n    }\n\n    id = encodeDocId(id);\n\n    function fetchAttachments(doc) {\n      var atts = doc._attachments;\n      var filenames = atts && Object.keys(atts);\n      if (!atts || !filenames.length) {\n        return;\n      }\n      // we fetch these manually in separate XHRs, because\n      // Sync Gateway would normally send it back as multipart/mixed,\n      // which we cannot parse. Also, this is more efficient than\n      // receiving attachments as base64-encoded strings.\n      function fetchData(filename) {\n        var att = atts[filename];\n        var path = encodeDocId(doc._id) + '/' + encodeAttachmentId(filename) +\n            '?rev=' + doc._rev;\n        return ourFetch(genDBUrl(host, path)).then(function (response) {\n          if ('buffer' in response) {\n            return response.buffer();\n          } else {\n            /* istanbul ignore next */\n            return response.blob();\n          }\n        }).then(function (blob) {\n          if (opts.binary) {\n            var typeFieldDescriptor = Object.getOwnPropertyDescriptor(blob.__proto__, 'type');\n            if (!typeFieldDescriptor || typeFieldDescriptor.set) {\n              blob.type = att.content_type;\n            }\n            return blob;\n          }\n          return new Promise(function (resolve) {\n            blobToBase64(blob, resolve);\n          });\n        }).then(function (data) {\n          delete att.stub;\n          delete att.length;\n          att.data = data;\n        });\n      }\n\n      var promiseFactories = filenames.map(function (filename) {\n        return function () {\n          return fetchData(filename);\n        };\n      });\n\n      // This limits the number of parallel xhr requests to 5 any time\n      // to avoid issues with maximum browser request limits\n      return pool(promiseFactories, 5);\n    }\n\n    function fetchAllAttachments(docOrDocs) {\n      if (Array.isArray(docOrDocs)) {\n        return Promise.all(docOrDocs.map(function (doc) {\n          if (doc.ok) {\n            return fetchAttachments(doc.ok);\n          }\n        }));\n      }\n      return fetchAttachments(docOrDocs);\n    }\n\n    var url = genDBUrl(host, id + paramsToStr(params));\n    fetchJSON(url).then(function (res) {\n      return Promise.resolve().then(function () {\n        if (opts.attachments) {\n          return fetchAllAttachments(res.data);\n        }\n      }).then(function () {\n        callback(null, res.data);\n      });\n    }).catch(function (e) {\n      e.docId = id;\n      callback(e);\n    });\n  });\n\n\n  // Delete the document given by doc from the database given by host.\n  api.remove = adapterFun$$1('remove', function (docOrId, optsOrRev, opts, cb) {\n    var doc;\n    if (typeof optsOrRev === 'string') {\n      // id, rev, opts, callback style\n      doc = {\n        _id: docOrId,\n        _rev: optsOrRev\n      };\n      if (typeof opts === 'function') {\n        cb = opts;\n        opts = {};\n      }\n    } else {\n      // doc, opts, callback style\n      doc = docOrId;\n      if (typeof optsOrRev === 'function') {\n        cb = optsOrRev;\n        opts = {};\n      } else {\n        cb = opts;\n        opts = optsOrRev;\n      }\n    }\n\n    var rev$$1 = (doc._rev || opts.rev);\n    var url = genDBUrl(host, encodeDocId(doc._id)) + '?rev=' + rev$$1;\n\n    fetchJSON(url, {method: 'DELETE'}, cb).catch(cb);\n  });\n\n  function encodeAttachmentId(attachmentId) {\n    return attachmentId.split(\"/\").map(encodeURIComponent).join(\"/\");\n  }\n\n  // Get the attachment\n  api.getAttachment = adapterFun$$1('getAttachment', function (docId, attachmentId,\n                                                            opts, callback) {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    var params = opts.rev ? ('?rev=' + opts.rev) : '';\n    var url = genDBUrl(host, encodeDocId(docId)) + '/' +\n        encodeAttachmentId(attachmentId) + params;\n    var contentType;\n    ourFetch(url, {method: 'GET'}).then(function (response) {\n      contentType = response.headers.get('content-type');\n      if (!response.ok) {\n        throw response;\n      } else {\n        if (typeof process !== 'undefined' && !process.browser && typeof response.buffer === 'function') {\n          return response.buffer();\n        } else {\n          /* istanbul ignore next */\n          return response.blob();\n        }\n      }\n    }).then(function (blob) {\n      // TODO: also remove\n      if (typeof process !== 'undefined' && !process.browser) {\n        blob.type = contentType;\n      }\n      callback(null, blob);\n    }).catch(function (err) {\n      callback(err);\n    });\n  });\n\n  // Remove the attachment given by the id and rev\n  api.removeAttachment =  adapterFun$$1('removeAttachment', function (docId,\n                                                                   attachmentId,\n                                                                   rev$$1,\n                                                                   callback) {\n    var url = genDBUrl(host, encodeDocId(docId) + '/' +\n                       encodeAttachmentId(attachmentId)) + '?rev=' + rev$$1;\n    fetchJSON(url, {method: 'DELETE'}, callback).catch(callback);\n  });\n\n  // Add the attachment given by blob and its contentType property\n  // to the document with the given id, the revision given by rev, and\n  // add it to the database given by host.\n  api.putAttachment = adapterFun$$1('putAttachment', function (docId, attachmentId,\n                                                            rev$$1, blob,\n                                                            type, callback) {\n    if (typeof type === 'function') {\n      callback = type;\n      type = blob;\n      blob = rev$$1;\n      rev$$1 = null;\n    }\n    var id = encodeDocId(docId) + '/' + encodeAttachmentId(attachmentId);\n    var url = genDBUrl(host, id);\n    if (rev$$1) {\n      url += '?rev=' + rev$$1;\n    }\n\n    if (typeof blob === 'string') {\n      // input is assumed to be a base64 string\n      var binary;\n      try {\n        binary = thisAtob(blob);\n      } catch (err) {\n        return callback(createError(BAD_ARG,\n                        'Attachment is not a valid base64 string'));\n      }\n      blob = binary ? binStringToBluffer(binary, type) : '';\n    }\n\n    // Add the attachment\n    fetchJSON(url, {\n      headers: new h({'Content-Type': type}),\n      method: 'PUT',\n      body: blob\n    }, callback).catch(callback);\n  });\n\n  // Update/create multiple documents given by req in the database\n  // given by host.\n  api._bulkDocs = function (req, opts, callback) {\n    // If new_edits=false then it prevents the database from creating\n    // new revision numbers for the documents. Instead it just uses\n    // the old ones. This is used in database replication.\n    req.new_edits = opts.new_edits;\n\n    setup().then(function () {\n      return Promise.all(req.docs.map(preprocessAttachments$1));\n    }).then(function () {\n      // Update/create the documents\n      return fetchJSON(genDBUrl(host, '_bulk_docs'), {\n        method: 'POST',\n        body: JSON.stringify(req)\n      }, callback);\n    }).catch(callback);\n  };\n\n\n  // Update/create document\n  api._put = function (doc, opts, callback) {\n    setup().then(function () {\n      return preprocessAttachments$1(doc);\n    }).then(function () {\n      return fetchJSON(genDBUrl(host, encodeDocId(doc._id)), {\n        method: 'PUT',\n        body: JSON.stringify(doc)\n      });\n    }).then(function (result) {\n      callback(null, result.data);\n    }).catch(function (err) {\n      err.docId = doc && doc._id;\n      callback(err);\n    });\n  };\n\n\n  // Get a listing of the documents in the database given\n  // by host and ordered by increasing id.\n  api.allDocs = adapterFun$$1('allDocs', function (opts, callback) {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    opts = clone(opts);\n\n    // List of parameters to add to the GET request\n    var params = {};\n    var body;\n    var method = 'GET';\n\n    if (opts.conflicts) {\n      params.conflicts = true;\n    }\n\n    /* istanbul ignore if */\n    if (opts.update_seq) {\n      params.update_seq = true;\n    }\n\n    if (opts.descending) {\n      params.descending = true;\n    }\n\n    if (opts.include_docs) {\n      params.include_docs = true;\n    }\n\n    // added in CouchDB 1.6.0\n    if (opts.attachments) {\n      params.attachments = true;\n    }\n\n    if (opts.key) {\n      params.key = JSON.stringify(opts.key);\n    }\n\n    if (opts.start_key) {\n      opts.startkey = opts.start_key;\n    }\n\n    if (opts.startkey) {\n      params.startkey = JSON.stringify(opts.startkey);\n    }\n\n    if (opts.end_key) {\n      opts.endkey = opts.end_key;\n    }\n\n    if (opts.endkey) {\n      params.endkey = JSON.stringify(opts.endkey);\n    }\n\n    if (typeof opts.inclusive_end !== 'undefined') {\n      params.inclusive_end = !!opts.inclusive_end;\n    }\n\n    if (typeof opts.limit !== 'undefined') {\n      params.limit = opts.limit;\n    }\n\n    if (typeof opts.skip !== 'undefined') {\n      params.skip = opts.skip;\n    }\n\n    var paramStr = paramsToStr(params);\n\n    if (typeof opts.keys !== 'undefined') {\n      method = 'POST';\n      body = {keys: opts.keys};\n    }\n\n    fetchJSON(genDBUrl(host, '_all_docs' + paramStr), {\n       method: method,\n      body: JSON.stringify(body)\n    }).then(function (result) {\n      if (opts.include_docs && opts.attachments && opts.binary) {\n        result.data.rows.forEach(readAttachmentsAsBlobOrBuffer);\n      }\n      callback(null, result.data);\n    }).catch(callback);\n  });\n\n  // Get a list of changes made to documents in the database given by host.\n  // TODO According to the README, there should be two other methods here,\n  // api.changes.addListener and api.changes.removeListener.\n  api._changes = function (opts) {\n\n    // We internally page the results of a changes request, this means\n    // if there is a large set of changes to be returned we can start\n    // processing them quicker instead of waiting on the entire\n    // set of changes to return and attempting to process them at once\n    var batchSize = 'batch_size' in opts ? opts.batch_size : CHANGES_BATCH_SIZE;\n\n    opts = clone(opts);\n\n    if (opts.continuous && !('heartbeat' in opts)) {\n      opts.heartbeat = DEFAULT_HEARTBEAT;\n    }\n\n    var requestTimeout = ('timeout' in opts) ? opts.timeout : 30 * 1000;\n\n    // ensure CHANGES_TIMEOUT_BUFFER applies\n    if ('timeout' in opts && opts.timeout &&\n      (requestTimeout - opts.timeout) < CHANGES_TIMEOUT_BUFFER) {\n        requestTimeout = opts.timeout + CHANGES_TIMEOUT_BUFFER;\n    }\n\n    /* istanbul ignore if */\n    if ('heartbeat' in opts && opts.heartbeat &&\n       (requestTimeout - opts.heartbeat) < CHANGES_TIMEOUT_BUFFER) {\n        requestTimeout = opts.heartbeat + CHANGES_TIMEOUT_BUFFER;\n    }\n\n    var params = {};\n    if ('timeout' in opts && opts.timeout) {\n      params.timeout = opts.timeout;\n    }\n\n    var limit = (typeof opts.limit !== 'undefined') ? opts.limit : false;\n    var leftToFetch = limit;\n\n    if (opts.style) {\n      params.style = opts.style;\n    }\n\n    if (opts.include_docs || opts.filter && typeof opts.filter === 'function') {\n      params.include_docs = true;\n    }\n\n    if (opts.attachments) {\n      params.attachments = true;\n    }\n\n    if (opts.continuous) {\n      params.feed = 'longpoll';\n    }\n\n    if (opts.seq_interval) {\n      params.seq_interval = opts.seq_interval;\n    }\n\n    if (opts.conflicts) {\n      params.conflicts = true;\n    }\n\n    if (opts.descending) {\n      params.descending = true;\n    }\n\n    /* istanbul ignore if */\n    if (opts.update_seq) {\n      params.update_seq = true;\n    }\n\n    if ('heartbeat' in opts) {\n      // If the heartbeat value is false, it disables the default heartbeat\n      if (opts.heartbeat) {\n        params.heartbeat = opts.heartbeat;\n      }\n    }\n\n    if (opts.filter && typeof opts.filter === 'string') {\n      params.filter = opts.filter;\n    }\n\n    if (opts.view && typeof opts.view === 'string') {\n      params.filter = '_view';\n      params.view = opts.view;\n    }\n\n    // If opts.query_params exists, pass it through to the changes request.\n    // These parameters may be used by the filter on the source database.\n    if (opts.query_params && typeof opts.query_params === 'object') {\n      for (var param_name in opts.query_params) {\n        /* istanbul ignore else */\n        if (opts.query_params.hasOwnProperty(param_name)) {\n          params[param_name] = opts.query_params[param_name];\n        }\n      }\n    }\n\n    var method = 'GET';\n    var body;\n\n    if (opts.doc_ids) {\n      // set this automagically for the user; it's annoying that couchdb\n      // requires both a \"filter\" and a \"doc_ids\" param.\n      params.filter = '_doc_ids';\n      method = 'POST';\n      body = {doc_ids: opts.doc_ids };\n    }\n    /* istanbul ignore next */\n    else if (opts.selector) {\n      // set this automagically for the user, similar to above\n      params.filter = '_selector';\n      method = 'POST';\n      body = {selector: opts.selector };\n    }\n\n    var controller = new a();\n    var lastFetchedSeq;\n\n    // Get all the changes starting wtih the one immediately after the\n    // sequence number given by since.\n    var fetchData = function (since, callback) {\n      if (opts.aborted) {\n        return;\n      }\n      params.since = since;\n      // \"since\" can be any kind of json object in Cloudant/CouchDB 2.x\n      /* istanbul ignore next */\n      if (typeof params.since === \"object\") {\n        params.since = JSON.stringify(params.since);\n      }\n\n      if (opts.descending) {\n        if (limit) {\n          params.limit = leftToFetch;\n        }\n      } else {\n        params.limit = (!limit || leftToFetch > batchSize) ?\n          batchSize : leftToFetch;\n      }\n\n      // Set the options for the ajax call\n      var url = genDBUrl(host, '_changes' + paramsToStr(params));\n      var fetchOpts = {\n        signal: controller.signal,\n        method: method,\n        body: JSON.stringify(body)\n      };\n      lastFetchedSeq = since;\n\n      /* istanbul ignore if */\n      if (opts.aborted) {\n        return;\n      }\n\n      // Get the changes\n      setup().then(function () {\n        return fetchJSON(url, fetchOpts, callback);\n      }).catch(callback);\n    };\n\n    // If opts.since exists, get all the changes from the sequence\n    // number given by opts.since. Otherwise, get all the changes\n    // from the sequence number 0.\n    var results = {results: []};\n\n    var fetched = function (err, res) {\n      if (opts.aborted) {\n        return;\n      }\n      var raw_results_length = 0;\n      // If the result of the ajax call (res) contains changes (res.results)\n      if (res && res.results) {\n        raw_results_length = res.results.length;\n        results.last_seq = res.last_seq;\n        var pending = null;\n        var lastSeq = null;\n        // Attach 'pending' property if server supports it (CouchDB 2.0+)\n        /* istanbul ignore if */\n        if (typeof res.pending === 'number') {\n          pending = res.pending;\n        }\n        if (typeof results.last_seq === 'string' || typeof results.last_seq === 'number') {\n          lastSeq = results.last_seq;\n        }\n        // For each change\n        var req = {};\n        req.query = opts.query_params;\n        res.results = res.results.filter(function (c) {\n          leftToFetch--;\n          var ret = filterChange(opts)(c);\n          if (ret) {\n            if (opts.include_docs && opts.attachments && opts.binary) {\n              readAttachmentsAsBlobOrBuffer(c);\n            }\n            if (opts.return_docs) {\n              results.results.push(c);\n            }\n            opts.onChange(c, pending, lastSeq);\n          }\n          return ret;\n        });\n      } else if (err) {\n        // In case of an error, stop listening for changes and call\n        // opts.complete\n        opts.aborted = true;\n        opts.complete(err);\n        return;\n      }\n\n      // The changes feed may have timed out with no results\n      // if so reuse last update sequence\n      if (res && res.last_seq) {\n        lastFetchedSeq = res.last_seq;\n      }\n\n      var finished = (limit && leftToFetch <= 0) ||\n        (res && raw_results_length < batchSize) ||\n        (opts.descending);\n\n      if ((opts.continuous && !(limit && leftToFetch <= 0)) || !finished) {\n        // Queue a call to fetch again with the newest sequence number\n        immediate(function () { fetchData(lastFetchedSeq, fetched); });\n      } else {\n        // We're done, call the callback\n        opts.complete(null, results);\n      }\n    };\n\n    fetchData(opts.since || 0, fetched);\n\n    // Return a method to cancel this method from processing any more\n    return {\n      cancel: function () {\n        opts.aborted = true;\n        controller.abort();\n      }\n    };\n  };\n\n  // Given a set of document/revision IDs (given by req), tets the subset of\n  // those that do NOT correspond to revisions stored in the database.\n  // See http://wiki.apache.org/couchdb/HttpPostRevsDiff\n  api.revsDiff = adapterFun$$1('revsDiff', function (req, opts, callback) {\n    // If no options were given, set the callback to be the second parameter\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n\n    // Get the missing document/revision IDs\n    fetchJSON(genDBUrl(host, '_revs_diff'), {\n      method: 'POST',\n      body: JSON.stringify(req)\n    }, callback).catch(callback);\n  });\n\n  api._close = function (callback) {\n    callback();\n  };\n\n  api._destroy = function (options, callback) {\n    fetchJSON(genDBUrl(host, ''), {method: 'DELETE'}).then(function (json) {\n      callback(null, json);\n    }).catch(function (err) {\n      /* istanbul ignore if */\n      if (err.status === 404) {\n        callback(null, {ok: true});\n      } else {\n        callback(err);\n      }\n    });\n  };\n}\n\n// HttpPouch is a valid adapter.\nHttpPouch.valid = function () {\n  return true;\n};\n\nfunction HttpPouch$1 (PouchDB) {\n  PouchDB.adapter('http', HttpPouch, false);\n  PouchDB.adapter('https', HttpPouch, false);\n}\n\nfunction QueryParseError(message) {\n  this.status = 400;\n  this.name = 'query_parse_error';\n  this.message = message;\n  this.error = true;\n  try {\n    Error.captureStackTrace(this, QueryParseError);\n  } catch (e) {}\n}\n\ninherits(QueryParseError, Error);\n\nfunction NotFoundError(message) {\n  this.status = 404;\n  this.name = 'not_found';\n  this.message = message;\n  this.error = true;\n  try {\n    Error.captureStackTrace(this, NotFoundError);\n  } catch (e) {}\n}\n\ninherits(NotFoundError, Error);\n\nfunction BuiltInError(message) {\n  this.status = 500;\n  this.name = 'invalid_value';\n  this.message = message;\n  this.error = true;\n  try {\n    Error.captureStackTrace(this, BuiltInError);\n  } catch (e) {}\n}\n\ninherits(BuiltInError, Error);\n\nfunction promisedCallback(promise, callback) {\n  if (callback) {\n    promise.then(function (res) {\n      immediate(function () {\n        callback(null, res);\n      });\n    }, function (reason) {\n      immediate(function () {\n        callback(reason);\n      });\n    });\n  }\n  return promise;\n}\n\nfunction callbackify(fun) {\n  return getArguments(function (args) {\n    var cb = args.pop();\n    var promise = fun.apply(this, args);\n    if (typeof cb === 'function') {\n      promisedCallback(promise, cb);\n    }\n    return promise;\n  });\n}\n\n// Promise finally util similar to Q.finally\nfunction fin(promise, finalPromiseFactory) {\n  return promise.then(function (res) {\n    return finalPromiseFactory().then(function () {\n      return res;\n    });\n  }, function (reason) {\n    return finalPromiseFactory().then(function () {\n      throw reason;\n    });\n  });\n}\n\nfunction sequentialize(queue, promiseFactory) {\n  return function () {\n    var args = arguments;\n    var that = this;\n    return queue.add(function () {\n      return promiseFactory.apply(that, args);\n    });\n  };\n}\n\n// uniq an array of strings, order not guaranteed\n// similar to underscore/lodash _.uniq\nfunction uniq(arr) {\n  var theSet = new ExportedSet(arr);\n  var result = new Array(theSet.size);\n  var index = -1;\n  theSet.forEach(function (value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nfunction mapToKeysArray(map) {\n  var result = new Array(map.size);\n  var index = -1;\n  map.forEach(function (value, key) {\n    result[++index] = key;\n  });\n  return result;\n}\n\nfunction createBuiltInError(name) {\n  var message = 'builtin ' + name +\n    ' function requires map values to be numbers' +\n    ' or number arrays';\n  return new BuiltInError(message);\n}\n\nfunction sum(values) {\n  var result = 0;\n  for (var i = 0, len = values.length; i < len; i++) {\n    var num = values[i];\n    if (typeof num !== 'number') {\n      if (Array.isArray(num)) {\n        // lists of numbers are also allowed, sum them separately\n        result = typeof result === 'number' ? [result] : result;\n        for (var j = 0, jLen = num.length; j < jLen; j++) {\n          var jNum = num[j];\n          if (typeof jNum !== 'number') {\n            throw createBuiltInError('_sum');\n          } else if (typeof result[j] === 'undefined') {\n            result.push(jNum);\n          } else {\n            result[j] += jNum;\n          }\n        }\n      } else { // not array/number\n        throw createBuiltInError('_sum');\n      }\n    } else if (typeof result === 'number') {\n      result += num;\n    } else { // add number to array\n      result[0] += num;\n    }\n  }\n  return result;\n}\n\nvar log = guardedConsole.bind(null, 'log');\nvar isArray = Array.isArray;\nvar toJSON = JSON.parse;\n\nfunction evalFunctionWithEval(func, emit) {\n  return scopeEval(\n    \"return (\" + func.replace(/;\\s*$/, \"\") + \");\",\n    {\n      emit: emit,\n      sum: sum,\n      log: log,\n      isArray: isArray,\n      toJSON: toJSON\n    }\n  );\n}\n\n/*\n * Simple task queue to sequentialize actions. Assumes\n * callbacks will eventually fire (once).\n */\n\n\nfunction TaskQueue$1() {\n  this.promise = new Promise(function (fulfill) {fulfill(); });\n}\nTaskQueue$1.prototype.add = function (promiseFactory) {\n  this.promise = this.promise.catch(function () {\n    // just recover\n  }).then(function () {\n    return promiseFactory();\n  });\n  return this.promise;\n};\nTaskQueue$1.prototype.finish = function () {\n  return this.promise;\n};\n\nfunction stringify(input) {\n  if (!input) {\n    return 'undefined'; // backwards compat for empty reduce\n  }\n  // for backwards compat with mapreduce, functions/strings are stringified\n  // as-is. everything else is JSON-stringified.\n  switch (typeof input) {\n    case 'function':\n      // e.g. a mapreduce map\n      return input.toString();\n    case 'string':\n      // e.g. a mapreduce built-in _reduce function\n      return input.toString();\n    default:\n      // e.g. a JSON object in the case of mango queries\n      return JSON.stringify(input);\n  }\n}\n\n/* create a string signature for a view so we can cache it and uniq it */\nfunction createViewSignature(mapFun, reduceFun) {\n  // the \"undefined\" part is for backwards compatibility\n  return stringify(mapFun) + stringify(reduceFun) + 'undefined';\n}\n\nfunction createView(sourceDB, viewName, mapFun, reduceFun, temporary, localDocName) {\n  var viewSignature = createViewSignature(mapFun, reduceFun);\n\n  var cachedViews;\n  if (!temporary) {\n    // cache this to ensure we don't try to update the same view twice\n    cachedViews = sourceDB._cachedViews = sourceDB._cachedViews || {};\n    if (cachedViews[viewSignature]) {\n      return cachedViews[viewSignature];\n    }\n  }\n\n  var promiseForView = sourceDB.info().then(function (info) {\n\n    var depDbName = info.db_name + '-mrview-' +\n      (temporary ? 'temp' : stringMd5(viewSignature));\n\n    // save the view name in the source db so it can be cleaned up if necessary\n    // (e.g. when the _design doc is deleted, remove all associated view data)\n    function diffFunction(doc) {\n      doc.views = doc.views || {};\n      var fullViewName = viewName;\n      if (fullViewName.indexOf('/') === -1) {\n        fullViewName = viewName + '/' + viewName;\n      }\n      var depDbs = doc.views[fullViewName] = doc.views[fullViewName] || {};\n      /* istanbul ignore if */\n      if (depDbs[depDbName]) {\n        return; // no update necessary\n      }\n      depDbs[depDbName] = true;\n      return doc;\n    }\n    return upsert(sourceDB, '_local/' + localDocName, diffFunction).then(function () {\n      return sourceDB.registerDependentDatabase(depDbName).then(function (res) {\n        var db = res.db;\n        db.auto_compaction = true;\n        var view = {\n          name: depDbName,\n          db: db,\n          sourceDB: sourceDB,\n          adapter: sourceDB.adapter,\n          mapFun: mapFun,\n          reduceFun: reduceFun\n        };\n        return view.db.get('_local/lastSeq').catch(function (err) {\n          /* istanbul ignore if */\n          if (err.status !== 404) {\n            throw err;\n          }\n        }).then(function (lastSeqDoc) {\n          view.seq = lastSeqDoc ? lastSeqDoc.seq : 0;\n          if (cachedViews) {\n            view.db.once('destroyed', function () {\n              delete cachedViews[viewSignature];\n            });\n          }\n          return view;\n        });\n      });\n    });\n  });\n\n  if (cachedViews) {\n    cachedViews[viewSignature] = promiseForView;\n  }\n  return promiseForView;\n}\n\nvar persistentQueues = {};\nvar tempViewQueue = new TaskQueue$1();\nvar CHANGES_BATCH_SIZE$1 = 50;\n\nfunction parseViewName(name) {\n  // can be either 'ddocname/viewname' or just 'viewname'\n  // (where the ddoc name is the same)\n  return name.indexOf('/') === -1 ? [name, name] : name.split('/');\n}\n\nfunction isGenOne(changes) {\n  // only return true if the current change is 1-\n  // and there are no other leafs\n  return changes.length === 1 && /^1-/.test(changes[0].rev);\n}\n\nfunction emitError(db, e) {\n  try {\n    db.emit('error', e);\n  } catch (err) {\n    guardedConsole('error',\n      'The user\\'s map/reduce function threw an uncaught error.\\n' +\n      'You can debug this error by doing:\\n' +\n      'myDatabase.on(\\'error\\', function (err) { debugger; });\\n' +\n      'Please double-check your map/reduce function.');\n    guardedConsole('error', e);\n  }\n}\n\n/**\n * Returns an \"abstract\" mapreduce object of the form:\n *\n *   {\n *     query: queryFun,\n *     viewCleanup: viewCleanupFun\n *   }\n *\n * Arguments are:\n *\n * localDoc: string\n *   This is for the local doc that gets saved in order to track the\n *   \"dependent\" DBs and clean them up for viewCleanup. It should be\n *   unique, so that indexer plugins don't collide with each other.\n * mapper: function (mapFunDef, emit)\n *   Returns a map function based on the mapFunDef, which in the case of\n *   normal map/reduce is just the de-stringified function, but may be\n *   something else, such as an object in the case of pouchdb-find.\n * reducer: function (reduceFunDef)\n *   Ditto, but for reducing. Modules don't have to support reducing\n *   (e.g. pouchdb-find).\n * ddocValidator: function (ddoc, viewName)\n *   Throws an error if the ddoc or viewName is not valid.\n *   This could be a way to communicate to the user that the configuration for the\n *   indexer is invalid.\n */\nfunction createAbstractMapReduce(localDocName, mapper, reducer, ddocValidator) {\n\n  function tryMap(db, fun, doc) {\n    // emit an event if there was an error thrown by a map function.\n    // putting try/catches in a single function also avoids deoptimizations.\n    try {\n      fun(doc);\n    } catch (e) {\n      emitError(db, e);\n    }\n  }\n\n  function tryReduce(db, fun, keys, values, rereduce) {\n    // same as above, but returning the result or an error. there are two separate\n    // functions to avoid extra memory allocations since the tryCode() case is used\n    // for custom map functions (common) vs this function, which is only used for\n    // custom reduce functions (rare)\n    try {\n      return {output : fun(keys, values, rereduce)};\n    } catch (e) {\n      emitError(db, e);\n      return {error: e};\n    }\n  }\n\n  function sortByKeyThenValue(x, y) {\n    var keyCompare = collate(x.key, y.key);\n    return keyCompare !== 0 ? keyCompare : collate(x.value, y.value);\n  }\n\n  function sliceResults(results, limit, skip) {\n    skip = skip || 0;\n    if (typeof limit === 'number') {\n      return results.slice(skip, limit + skip);\n    } else if (skip > 0) {\n      return results.slice(skip);\n    }\n    return results;\n  }\n\n  function rowToDocId(row) {\n    var val = row.value;\n    // Users can explicitly specify a joined doc _id, or it\n    // defaults to the doc _id that emitted the key/value.\n    var docId = (val && typeof val === 'object' && val._id) || row.id;\n    return docId;\n  }\n\n  function readAttachmentsAsBlobOrBuffer(res) {\n    res.rows.forEach(function (row) {\n      var atts = row.doc && row.doc._attachments;\n      if (!atts) {\n        return;\n      }\n      Object.keys(atts).forEach(function (filename) {\n        var att = atts[filename];\n        atts[filename].data = b64ToBluffer(att.data, att.content_type);\n      });\n    });\n  }\n\n  function postprocessAttachments(opts) {\n    return function (res) {\n      if (opts.include_docs && opts.attachments && opts.binary) {\n        readAttachmentsAsBlobOrBuffer(res);\n      }\n      return res;\n    };\n  }\n\n  function addHttpParam(paramName, opts, params, asJson) {\n    // add an http param from opts to params, optionally json-encoded\n    var val = opts[paramName];\n    if (typeof val !== 'undefined') {\n      if (asJson) {\n        val = encodeURIComponent(JSON.stringify(val));\n      }\n      params.push(paramName + '=' + val);\n    }\n  }\n\n  function coerceInteger(integerCandidate) {\n    if (typeof integerCandidate !== 'undefined') {\n      var asNumber = Number(integerCandidate);\n      // prevents e.g. '1foo' or '1.1' being coerced to 1\n      if (!isNaN(asNumber) && asNumber === parseInt(integerCandidate, 10)) {\n        return asNumber;\n      } else {\n        return integerCandidate;\n      }\n    }\n  }\n\n  function coerceOptions(opts) {\n    opts.group_level = coerceInteger(opts.group_level);\n    opts.limit = coerceInteger(opts.limit);\n    opts.skip = coerceInteger(opts.skip);\n    return opts;\n  }\n\n  function checkPositiveInteger(number) {\n    if (number) {\n      if (typeof number !== 'number') {\n        return  new QueryParseError('Invalid value for integer: \"' +\n          number + '\"');\n      }\n      if (number < 0) {\n        return new QueryParseError('Invalid value for positive integer: ' +\n          '\"' + number + '\"');\n      }\n    }\n  }\n\n  function checkQueryParseError(options, fun) {\n    var startkeyName = options.descending ? 'endkey' : 'startkey';\n    var endkeyName = options.descending ? 'startkey' : 'endkey';\n\n    if (typeof options[startkeyName] !== 'undefined' &&\n      typeof options[endkeyName] !== 'undefined' &&\n      collate(options[startkeyName], options[endkeyName]) > 0) {\n      throw new QueryParseError('No rows can match your key range, ' +\n        'reverse your start_key and end_key or set {descending : true}');\n    } else if (fun.reduce && options.reduce !== false) {\n      if (options.include_docs) {\n        throw new QueryParseError('{include_docs:true} is invalid for reduce');\n      } else if (options.keys && options.keys.length > 1 &&\n        !options.group && !options.group_level) {\n        throw new QueryParseError('Multi-key fetches for reduce views must use ' +\n          '{group: true}');\n      }\n    }\n    ['group_level', 'limit', 'skip'].forEach(function (optionName) {\n      var error = checkPositiveInteger(options[optionName]);\n      if (error) {\n        throw error;\n      }\n    });\n  }\n\n  function httpQuery(db, fun, opts) {\n    // List of parameters to add to the PUT request\n    var params = [];\n    var body;\n    var method = 'GET';\n    var ok, status;\n\n    // If opts.reduce exists and is defined, then add it to the list\n    // of parameters.\n    // If reduce=false then the results are that of only the map function\n    // not the final result of map and reduce.\n    addHttpParam('reduce', opts, params);\n    addHttpParam('include_docs', opts, params);\n    addHttpParam('attachments', opts, params);\n    addHttpParam('limit', opts, params);\n    addHttpParam('descending', opts, params);\n    addHttpParam('group', opts, params);\n    addHttpParam('group_level', opts, params);\n    addHttpParam('skip', opts, params);\n    addHttpParam('stale', opts, params);\n    addHttpParam('conflicts', opts, params);\n    addHttpParam('startkey', opts, params, true);\n    addHttpParam('start_key', opts, params, true);\n    addHttpParam('endkey', opts, params, true);\n    addHttpParam('end_key', opts, params, true);\n    addHttpParam('inclusive_end', opts, params);\n    addHttpParam('key', opts, params, true);\n    addHttpParam('update_seq', opts, params);\n\n    // Format the list of parameters into a valid URI query string\n    params = params.join('&');\n    params = params === '' ? '' : '?' + params;\n\n    // If keys are supplied, issue a POST to circumvent GET query string limits\n    // see http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options\n    if (typeof opts.keys !== 'undefined') {\n      var MAX_URL_LENGTH = 2000;\n      // according to http://stackoverflow.com/a/417184/680742,\n      // the de facto URL length limit is 2000 characters\n\n      var keysAsString =\n        'keys=' + encodeURIComponent(JSON.stringify(opts.keys));\n      if (keysAsString.length + params.length + 1 <= MAX_URL_LENGTH) {\n        // If the keys are short enough, do a GET. we do this to work around\n        // Safari not understanding 304s on POSTs (see pouchdb/pouchdb#1239)\n        params += (params[0] === '?' ? '&' : '?') + keysAsString;\n      } else {\n        method = 'POST';\n        if (typeof fun === 'string') {\n          body = {keys: opts.keys};\n        } else { // fun is {map : mapfun}, so append to this\n          fun.keys = opts.keys;\n        }\n      }\n    }\n\n    // We are referencing a query defined in the design doc\n    if (typeof fun === 'string') {\n      var parts = parseViewName(fun);\n      return db.fetch('_design/' + parts[0] + '/_view/' + parts[1] + params, {\n        headers: new h({'Content-Type': 'application/json'}),\n        method: method,\n        body: JSON.stringify(body)\n      }).then(function (response) {\n        ok = response.ok;\n        status = response.status;\n        return response.json();\n      }).then(function (result) {\n        if (!ok) {\n          result.status = status;\n          throw generateErrorFromResponse(result);\n        }\n        // fail the entire request if the result contains an error\n        result.rows.forEach(function (row) {\n          /* istanbul ignore if */\n          if (row.value && row.value.error && row.value.error === \"builtin_reduce_error\") {\n            throw new Error(row.reason);\n          }\n        });\n        return result;\n      }).then(postprocessAttachments(opts));\n    }\n\n    // We are using a temporary view, terrible for performance, good for testing\n    body = body || {};\n    Object.keys(fun).forEach(function (key) {\n      if (Array.isArray(fun[key])) {\n        body[key] = fun[key];\n      } else {\n        body[key] = fun[key].toString();\n      }\n    });\n\n    return db.fetch('_temp_view' + params, {\n      headers: new h({'Content-Type': 'application/json'}),\n      method: 'POST',\n      body: JSON.stringify(body)\n    }).then(function (response) {\n        ok = response.ok;\n        status = response.status;\n      return response.json();\n    }).then(function (result) {\n      if (!ok) {\n        result.status = status;\n        throw generateErrorFromResponse(result);\n      }\n      return result;\n    }).then(postprocessAttachments(opts));\n  }\n\n  // custom adapters can define their own api._query\n  // and override the default behavior\n  /* istanbul ignore next */\n  function customQuery(db, fun, opts) {\n    return new Promise(function (resolve, reject) {\n      db._query(fun, opts, function (err, res) {\n        if (err) {\n          return reject(err);\n        }\n        resolve(res);\n      });\n    });\n  }\n\n  // custom adapters can define their own api._viewCleanup\n  // and override the default behavior\n  /* istanbul ignore next */\n  function customViewCleanup(db) {\n    return new Promise(function (resolve, reject) {\n      db._viewCleanup(function (err, res) {\n        if (err) {\n          return reject(err);\n        }\n        resolve(res);\n      });\n    });\n  }\n\n  function defaultsTo(value) {\n    return function (reason) {\n      /* istanbul ignore else */\n      if (reason.status === 404) {\n        return value;\n      } else {\n        throw reason;\n      }\n    };\n  }\n\n  // returns a promise for a list of docs to update, based on the input docId.\n  // the order doesn't matter, because post-3.2.0, bulkDocs\n  // is an atomic operation in all three adapters.\n  function getDocsToPersist(docId, view, docIdsToChangesAndEmits) {\n    var metaDocId = '_local/doc_' + docId;\n    var defaultMetaDoc = {_id: metaDocId, keys: []};\n    var docData = docIdsToChangesAndEmits.get(docId);\n    var indexableKeysToKeyValues = docData[0];\n    var changes = docData[1];\n\n    function getMetaDoc() {\n      if (isGenOne(changes)) {\n        // generation 1, so we can safely assume initial state\n        // for performance reasons (avoids unnecessary GETs)\n        return Promise.resolve(defaultMetaDoc);\n      }\n      return view.db.get(metaDocId).catch(defaultsTo(defaultMetaDoc));\n    }\n\n    function getKeyValueDocs(metaDoc) {\n      if (!metaDoc.keys.length) {\n        // no keys, no need for a lookup\n        return Promise.resolve({rows: []});\n      }\n      return view.db.allDocs({\n        keys: metaDoc.keys,\n        include_docs: true\n      });\n    }\n\n    function processKeyValueDocs(metaDoc, kvDocsRes) {\n      var kvDocs = [];\n      var oldKeys = new ExportedSet();\n\n      for (var i = 0, len = kvDocsRes.rows.length; i < len; i++) {\n        var row = kvDocsRes.rows[i];\n        var doc = row.doc;\n        if (!doc) { // deleted\n          continue;\n        }\n        kvDocs.push(doc);\n        oldKeys.add(doc._id);\n        doc._deleted = !indexableKeysToKeyValues.has(doc._id);\n        if (!doc._deleted) {\n          var keyValue = indexableKeysToKeyValues.get(doc._id);\n          if ('value' in keyValue) {\n            doc.value = keyValue.value;\n          }\n        }\n      }\n      var newKeys = mapToKeysArray(indexableKeysToKeyValues);\n      newKeys.forEach(function (key) {\n        if (!oldKeys.has(key)) {\n          // new doc\n          var kvDoc = {\n            _id: key\n          };\n          var keyValue = indexableKeysToKeyValues.get(key);\n          if ('value' in keyValue) {\n            kvDoc.value = keyValue.value;\n          }\n          kvDocs.push(kvDoc);\n        }\n      });\n      metaDoc.keys = uniq(newKeys.concat(metaDoc.keys));\n      kvDocs.push(metaDoc);\n\n      return kvDocs;\n    }\n\n    return getMetaDoc().then(function (metaDoc) {\n      return getKeyValueDocs(metaDoc).then(function (kvDocsRes) {\n        return processKeyValueDocs(metaDoc, kvDocsRes);\n      });\n    });\n  }\n\n  // updates all emitted key/value docs and metaDocs in the mrview database\n  // for the given batch of documents from the source database\n  function saveKeyValues(view, docIdsToChangesAndEmits, seq) {\n    var seqDocId = '_local/lastSeq';\n    return view.db.get(seqDocId)\n      .catch(defaultsTo({_id: seqDocId, seq: 0}))\n      .then(function (lastSeqDoc) {\n        var docIds = mapToKeysArray(docIdsToChangesAndEmits);\n        return Promise.all(docIds.map(function (docId) {\n          return getDocsToPersist(docId, view, docIdsToChangesAndEmits);\n        })).then(function (listOfDocsToPersist) {\n          var docsToPersist = flatten(listOfDocsToPersist);\n          lastSeqDoc.seq = seq;\n          docsToPersist.push(lastSeqDoc);\n          // write all docs in a single operation, update the seq once\n          return view.db.bulkDocs({docs : docsToPersist});\n        });\n      });\n  }\n\n  function getQueue(view) {\n    var viewName = typeof view === 'string' ? view : view.name;\n    var queue = persistentQueues[viewName];\n    if (!queue) {\n      queue = persistentQueues[viewName] = new TaskQueue$1();\n    }\n    return queue;\n  }\n\n  function updateView(view) {\n    return sequentialize(getQueue(view), function () {\n      return updateViewInQueue(view);\n    })();\n  }\n\n  function updateViewInQueue(view) {\n    // bind the emit function once\n    var mapResults;\n    var doc;\n\n    function emit(key, value) {\n      var output = {id: doc._id, key: normalizeKey(key)};\n      // Don't explicitly store the value unless it's defined and non-null.\n      // This saves on storage space, because often people don't use it.\n      if (typeof value !== 'undefined' && value !== null) {\n        output.value = normalizeKey(value);\n      }\n      mapResults.push(output);\n    }\n\n    var mapFun = mapper(view.mapFun, emit);\n\n    var currentSeq = view.seq || 0;\n\n    function processChange(docIdsToChangesAndEmits, seq) {\n      return function () {\n        return saveKeyValues(view, docIdsToChangesAndEmits, seq);\n      };\n    }\n\n    var queue = new TaskQueue$1();\n\n    function processNextBatch() {\n      return view.sourceDB.changes({\n        return_docs: true,\n        conflicts: true,\n        include_docs: true,\n        style: 'all_docs',\n        since: currentSeq,\n        limit: CHANGES_BATCH_SIZE$1\n      }).then(processBatch);\n    }\n\n    function processBatch(response) {\n      var results = response.results;\n      if (!results.length) {\n        return;\n      }\n      var docIdsToChangesAndEmits = createDocIdsToChangesAndEmits(results);\n      queue.add(processChange(docIdsToChangesAndEmits, currentSeq));\n      if (results.length < CHANGES_BATCH_SIZE$1) {\n        return;\n      }\n      return processNextBatch();\n    }\n\n    function createDocIdsToChangesAndEmits(results) {\n      var docIdsToChangesAndEmits = new ExportedMap();\n      for (var i = 0, len = results.length; i < len; i++) {\n        var change = results[i];\n        if (change.doc._id[0] !== '_') {\n          mapResults = [];\n          doc = change.doc;\n\n          if (!doc._deleted) {\n            tryMap(view.sourceDB, mapFun, doc);\n          }\n          mapResults.sort(sortByKeyThenValue);\n\n          var indexableKeysToKeyValues = createIndexableKeysToKeyValues(mapResults);\n          docIdsToChangesAndEmits.set(change.doc._id, [\n            indexableKeysToKeyValues,\n            change.changes\n          ]);\n        }\n        currentSeq = change.seq;\n      }\n      return docIdsToChangesAndEmits;\n    }\n\n    function createIndexableKeysToKeyValues(mapResults) {\n      var indexableKeysToKeyValues = new ExportedMap();\n      var lastKey;\n      for (var i = 0, len = mapResults.length; i < len; i++) {\n        var emittedKeyValue = mapResults[i];\n        var complexKey = [emittedKeyValue.key, emittedKeyValue.id];\n        if (i > 0 && collate(emittedKeyValue.key, lastKey) === 0) {\n          complexKey.push(i); // dup key+id, so make it unique\n        }\n        indexableKeysToKeyValues.set(toIndexableString(complexKey), emittedKeyValue);\n        lastKey = emittedKeyValue.key;\n      }\n      return indexableKeysToKeyValues;\n    }\n\n    return processNextBatch().then(function () {\n      return queue.finish();\n    }).then(function () {\n      view.seq = currentSeq;\n    });\n  }\n\n  function reduceView(view, results, options) {\n    if (options.group_level === 0) {\n      delete options.group_level;\n    }\n\n    var shouldGroup = options.group || options.group_level;\n\n    var reduceFun = reducer(view.reduceFun);\n\n    var groups = [];\n    var lvl = isNaN(options.group_level) ? Number.POSITIVE_INFINITY :\n      options.group_level;\n    results.forEach(function (e) {\n      var last = groups[groups.length - 1];\n      var groupKey = shouldGroup ? e.key : null;\n\n      // only set group_level for array keys\n      if (shouldGroup && Array.isArray(groupKey)) {\n        groupKey = groupKey.slice(0, lvl);\n      }\n\n      if (last && collate(last.groupKey, groupKey) === 0) {\n        last.keys.push([e.key, e.id]);\n        last.values.push(e.value);\n        return;\n      }\n      groups.push({\n        keys: [[e.key, e.id]],\n        values: [e.value],\n        groupKey: groupKey\n      });\n    });\n    results = [];\n    for (var i = 0, len = groups.length; i < len; i++) {\n      var e = groups[i];\n      var reduceTry = tryReduce(view.sourceDB, reduceFun, e.keys, e.values, false);\n      if (reduceTry.error && reduceTry.error instanceof BuiltInError) {\n        // CouchDB returns an error if a built-in errors out\n        throw reduceTry.error;\n      }\n      results.push({\n        // CouchDB just sets the value to null if a non-built-in errors out\n        value: reduceTry.error ? null : reduceTry.output,\n        key: e.groupKey\n      });\n    }\n    // no total_rows/offset when reducing\n    return {rows: sliceResults(results, options.limit, options.skip)};\n  }\n\n  function queryView(view, opts) {\n    return sequentialize(getQueue(view), function () {\n      return queryViewInQueue(view, opts);\n    })();\n  }\n\n  function queryViewInQueue(view, opts) {\n    var totalRows;\n    var shouldReduce = view.reduceFun && opts.reduce !== false;\n    var skip = opts.skip || 0;\n    if (typeof opts.keys !== 'undefined' && !opts.keys.length) {\n      // equivalent query\n      opts.limit = 0;\n      delete opts.keys;\n    }\n\n    function fetchFromView(viewOpts) {\n      viewOpts.include_docs = true;\n      return view.db.allDocs(viewOpts).then(function (res) {\n        totalRows = res.total_rows;\n        return res.rows.map(function (result) {\n\n          // implicit migration - in older versions of PouchDB,\n          // we explicitly stored the doc as {id: ..., key: ..., value: ...}\n          // this is tested in a migration test\n          /* istanbul ignore next */\n          if ('value' in result.doc && typeof result.doc.value === 'object' &&\n            result.doc.value !== null) {\n            var keys = Object.keys(result.doc.value).sort();\n            // this detection method is not perfect, but it's unlikely the user\n            // emitted a value which was an object with these 3 exact keys\n            var expectedKeys = ['id', 'key', 'value'];\n            if (!(keys < expectedKeys || keys > expectedKeys)) {\n              return result.doc.value;\n            }\n          }\n\n          var parsedKeyAndDocId = parseIndexableString(result.doc._id);\n          return {\n            key: parsedKeyAndDocId[0],\n            id: parsedKeyAndDocId[1],\n            value: ('value' in result.doc ? result.doc.value : null)\n          };\n        });\n      });\n    }\n\n    function onMapResultsReady(rows) {\n      var finalResults;\n      if (shouldReduce) {\n        finalResults = reduceView(view, rows, opts);\n      } else {\n        finalResults = {\n          total_rows: totalRows,\n          offset: skip,\n          rows: rows\n        };\n      }\n      /* istanbul ignore if */\n      if (opts.update_seq) {\n        finalResults.update_seq = view.seq;\n      }\n      if (opts.include_docs) {\n        var docIds = uniq(rows.map(rowToDocId));\n\n        return view.sourceDB.allDocs({\n          keys: docIds,\n          include_docs: true,\n          conflicts: opts.conflicts,\n          attachments: opts.attachments,\n          binary: opts.binary\n        }).then(function (allDocsRes) {\n          var docIdsToDocs = new ExportedMap();\n          allDocsRes.rows.forEach(function (row) {\n            docIdsToDocs.set(row.id, row.doc);\n          });\n          rows.forEach(function (row) {\n            var docId = rowToDocId(row);\n            var doc = docIdsToDocs.get(docId);\n            if (doc) {\n              row.doc = doc;\n            }\n          });\n          return finalResults;\n        });\n      } else {\n        return finalResults;\n      }\n    }\n\n    if (typeof opts.keys !== 'undefined') {\n      var keys = opts.keys;\n      var fetchPromises = keys.map(function (key) {\n        var viewOpts = {\n          startkey : toIndexableString([key]),\n          endkey   : toIndexableString([key, {}])\n        };\n        /* istanbul ignore if */\n        if (opts.update_seq) {\n          viewOpts.update_seq = true;\n        }\n        return fetchFromView(viewOpts);\n      });\n      return Promise.all(fetchPromises).then(flatten).then(onMapResultsReady);\n    } else { // normal query, no 'keys'\n      var viewOpts = {\n        descending : opts.descending\n      };\n      /* istanbul ignore if */\n      if (opts.update_seq) {\n        viewOpts.update_seq = true;\n      }\n      var startkey;\n      var endkey;\n      if ('start_key' in opts) {\n        startkey = opts.start_key;\n      }\n      if ('startkey' in opts) {\n        startkey = opts.startkey;\n      }\n      if ('end_key' in opts) {\n        endkey = opts.end_key;\n      }\n      if ('endkey' in opts) {\n        endkey = opts.endkey;\n      }\n      if (typeof startkey !== 'undefined') {\n        viewOpts.startkey = opts.descending ?\n          toIndexableString([startkey, {}]) :\n          toIndexableString([startkey]);\n      }\n      if (typeof endkey !== 'undefined') {\n        var inclusiveEnd = opts.inclusive_end !== false;\n        if (opts.descending) {\n          inclusiveEnd = !inclusiveEnd;\n        }\n\n        viewOpts.endkey = toIndexableString(\n          inclusiveEnd ? [endkey, {}] : [endkey]);\n      }\n      if (typeof opts.key !== 'undefined') {\n        var keyStart = toIndexableString([opts.key]);\n        var keyEnd = toIndexableString([opts.key, {}]);\n        if (viewOpts.descending) {\n          viewOpts.endkey = keyStart;\n          viewOpts.startkey = keyEnd;\n        } else {\n          viewOpts.startkey = keyStart;\n          viewOpts.endkey = keyEnd;\n        }\n      }\n      if (!shouldReduce) {\n        if (typeof opts.limit === 'number') {\n          viewOpts.limit = opts.limit;\n        }\n        viewOpts.skip = skip;\n      }\n      return fetchFromView(viewOpts).then(onMapResultsReady);\n    }\n  }\n\n  function httpViewCleanup(db) {\n    return db.fetch('_view_cleanup', {\n      headers: new h({'Content-Type': 'application/json'}),\n      method: 'POST'\n    }).then(function (response) {\n      return response.json();\n    });\n  }\n\n  function localViewCleanup(db) {\n    return db.get('_local/' + localDocName).then(function (metaDoc) {\n      var docsToViews = new ExportedMap();\n      Object.keys(metaDoc.views).forEach(function (fullViewName) {\n        var parts = parseViewName(fullViewName);\n        var designDocName = '_design/' + parts[0];\n        var viewName = parts[1];\n        var views = docsToViews.get(designDocName);\n        if (!views) {\n          views = new ExportedSet();\n          docsToViews.set(designDocName, views);\n        }\n        views.add(viewName);\n      });\n      var opts = {\n        keys : mapToKeysArray(docsToViews),\n        include_docs : true\n      };\n      return db.allDocs(opts).then(function (res) {\n        var viewsToStatus = {};\n        res.rows.forEach(function (row) {\n          var ddocName = row.key.substring(8); // cuts off '_design/'\n          docsToViews.get(row.key).forEach(function (viewName) {\n            var fullViewName = ddocName + '/' + viewName;\n            /* istanbul ignore if */\n            if (!metaDoc.views[fullViewName]) {\n              // new format, without slashes, to support PouchDB 2.2.0\n              // migration test in pouchdb's browser.migration.js verifies this\n              fullViewName = viewName;\n            }\n            var viewDBNames = Object.keys(metaDoc.views[fullViewName]);\n            // design doc deleted, or view function nonexistent\n            var statusIsGood = row.doc && row.doc.views &&\n              row.doc.views[viewName];\n            viewDBNames.forEach(function (viewDBName) {\n              viewsToStatus[viewDBName] =\n                viewsToStatus[viewDBName] || statusIsGood;\n            });\n          });\n        });\n        var dbsToDelete = Object.keys(viewsToStatus).filter(\n          function (viewDBName) { return !viewsToStatus[viewDBName]; });\n        var destroyPromises = dbsToDelete.map(function (viewDBName) {\n          return sequentialize(getQueue(viewDBName), function () {\n            return new db.constructor(viewDBName, db.__opts).destroy();\n          })();\n        });\n        return Promise.all(destroyPromises).then(function () {\n          return {ok: true};\n        });\n      });\n    }, defaultsTo({ok: true}));\n  }\n\n  function queryPromised(db, fun, opts) {\n    /* istanbul ignore next */\n    if (typeof db._query === 'function') {\n      return customQuery(db, fun, opts);\n    }\n    if (isRemote(db)) {\n      return httpQuery(db, fun, opts);\n    }\n\n    if (typeof fun !== 'string') {\n      // temp_view\n      checkQueryParseError(opts, fun);\n\n      tempViewQueue.add(function () {\n        var createViewPromise = createView(\n          /* sourceDB */ db,\n          /* viewName */ 'temp_view/temp_view',\n          /* mapFun */ fun.map,\n          /* reduceFun */ fun.reduce,\n          /* temporary */ true,\n          /* localDocName */ localDocName);\n        return createViewPromise.then(function (view) {\n          return fin(updateView(view).then(function () {\n            return queryView(view, opts);\n          }), function () {\n            return view.db.destroy();\n          });\n        });\n      });\n      return tempViewQueue.finish();\n    } else {\n      // persistent view\n      var fullViewName = fun;\n      var parts = parseViewName(fullViewName);\n      var designDocName = parts[0];\n      var viewName = parts[1];\n      return db.get('_design/' + designDocName).then(function (doc) {\n        var fun = doc.views && doc.views[viewName];\n\n        if (!fun) {\n          // basic validator; it's assumed that every subclass would want this\n          throw new NotFoundError('ddoc ' + doc._id + ' has no view named ' +\n            viewName);\n        }\n\n        ddocValidator(doc, viewName);\n        checkQueryParseError(opts, fun);\n\n        var createViewPromise = createView(\n          /* sourceDB */ db,\n          /* viewName */ fullViewName,\n          /* mapFun */ fun.map,\n          /* reduceFun */ fun.reduce,\n          /* temporary */ false,\n          /* localDocName */ localDocName);\n        return createViewPromise.then(function (view) {\n          if (opts.stale === 'ok' || opts.stale === 'update_after') {\n            if (opts.stale === 'update_after') {\n              immediate(function () {\n                updateView(view);\n              });\n            }\n            return queryView(view, opts);\n          } else { // stale not ok\n            return updateView(view).then(function () {\n              return queryView(view, opts);\n            });\n          }\n        });\n      });\n    }\n  }\n\n  function abstractQuery(fun, opts, callback) {\n    var db = this;\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    opts = opts ? coerceOptions(opts) : {};\n\n    if (typeof fun === 'function') {\n      fun = {map : fun};\n    }\n\n    var promise = Promise.resolve().then(function () {\n      return queryPromised(db, fun, opts);\n    });\n    promisedCallback(promise, callback);\n    return promise;\n  }\n\n  var abstractViewCleanup = callbackify(function () {\n    var db = this;\n    /* istanbul ignore next */\n    if (typeof db._viewCleanup === 'function') {\n      return customViewCleanup(db);\n    }\n    if (isRemote(db)) {\n      return httpViewCleanup(db);\n    }\n    return localViewCleanup(db);\n  });\n\n  return {\n    query: abstractQuery,\n    viewCleanup: abstractViewCleanup\n  };\n}\n\nvar builtInReduce = {\n  _sum: function (keys, values) {\n    return sum(values);\n  },\n\n  _count: function (keys, values) {\n    return values.length;\n  },\n\n  _stats: function (keys, values) {\n    // no need to implement rereduce=true, because Pouch\n    // will never call it\n    function sumsqr(values) {\n      var _sumsqr = 0;\n      for (var i = 0, len = values.length; i < len; i++) {\n        var num = values[i];\n        _sumsqr += (num * num);\n      }\n      return _sumsqr;\n    }\n    return {\n      sum     : sum(values),\n      min     : Math.min.apply(null, values),\n      max     : Math.max.apply(null, values),\n      count   : values.length,\n      sumsqr : sumsqr(values)\n    };\n  }\n};\n\nfunction getBuiltIn(reduceFunString) {\n  if (/^_sum/.test(reduceFunString)) {\n    return builtInReduce._sum;\n  } else if (/^_count/.test(reduceFunString)) {\n    return builtInReduce._count;\n  } else if (/^_stats/.test(reduceFunString)) {\n    return builtInReduce._stats;\n  } else if (/^_/.test(reduceFunString)) {\n    throw new Error(reduceFunString + ' is not a supported reduce function.');\n  }\n}\n\nfunction mapper(mapFun, emit) {\n  // for temp_views one can use emit(doc, emit), see #38\n  if (typeof mapFun === \"function\" && mapFun.length === 2) {\n    var origMap = mapFun;\n    return function (doc) {\n      return origMap(doc, emit);\n    };\n  } else {\n    return evalFunctionWithEval(mapFun.toString(), emit);\n  }\n}\n\nfunction reducer(reduceFun) {\n  var reduceFunString = reduceFun.toString();\n  var builtIn = getBuiltIn(reduceFunString);\n  if (builtIn) {\n    return builtIn;\n  } else {\n    return evalFunctionWithEval(reduceFunString);\n  }\n}\n\nfunction ddocValidator(ddoc, viewName) {\n  var fun = ddoc.views && ddoc.views[viewName];\n  if (typeof fun.map !== 'string') {\n    throw new NotFoundError('ddoc ' + ddoc._id + ' has no string view named ' +\n      viewName + ', instead found object of type: ' + typeof fun.map);\n  }\n}\n\nvar localDocName = 'mrviews';\nvar abstract = createAbstractMapReduce(localDocName, mapper, reducer, ddocValidator);\n\nfunction query(fun, opts, callback) {\n  return abstract.query.call(this, fun, opts, callback);\n}\n\nfunction viewCleanup(callback) {\n  return abstract.viewCleanup.call(this, callback);\n}\n\nvar mapreduce = {\n  query: query,\n  viewCleanup: viewCleanup\n};\n\nfunction isGenOne$1(rev$$1) {\n  return /^1-/.test(rev$$1);\n}\n\nfunction fileHasChanged(localDoc, remoteDoc, filename) {\n  return !localDoc._attachments ||\n         !localDoc._attachments[filename] ||\n         localDoc._attachments[filename].digest !== remoteDoc._attachments[filename].digest;\n}\n\nfunction getDocAttachments(db, doc) {\n  var filenames = Object.keys(doc._attachments);\n  return Promise.all(filenames.map(function (filename) {\n    return db.getAttachment(doc._id, filename, {rev: doc._rev});\n  }));\n}\n\nfunction getDocAttachmentsFromTargetOrSource(target, src, doc) {\n  var doCheckForLocalAttachments = isRemote(src) && !isRemote(target);\n  var filenames = Object.keys(doc._attachments);\n\n  if (!doCheckForLocalAttachments) {\n    return getDocAttachments(src, doc);\n  }\n\n  return target.get(doc._id).then(function (localDoc) {\n    return Promise.all(filenames.map(function (filename) {\n      if (fileHasChanged(localDoc, doc, filename)) {\n        return src.getAttachment(doc._id, filename);\n      }\n\n      return target.getAttachment(localDoc._id, filename);\n    }));\n  }).catch(function (error) {\n    /* istanbul ignore if */\n    if (error.status !== 404) {\n      throw error;\n    }\n\n    return getDocAttachments(src, doc);\n  });\n}\n\nfunction createBulkGetOpts(diffs) {\n  var requests = [];\n  Object.keys(diffs).forEach(function (id) {\n    var missingRevs = diffs[id].missing;\n    missingRevs.forEach(function (missingRev) {\n      requests.push({\n        id: id,\n        rev: missingRev\n      });\n    });\n  });\n\n  return {\n    docs: requests,\n    revs: true,\n    latest: true\n  };\n}\n\n//\n// Fetch all the documents from the src as described in the \"diffs\",\n// which is a mapping of docs IDs to revisions. If the state ever\n// changes to \"cancelled\", then the returned promise will be rejected.\n// Else it will be resolved with a list of fetched documents.\n//\nfunction getDocs(src, target, diffs, state) {\n  diffs = clone(diffs); // we do not need to modify this\n\n  var resultDocs = [],\n      ok = true;\n\n  function getAllDocs() {\n\n    var bulkGetOpts = createBulkGetOpts(diffs);\n\n    if (!bulkGetOpts.docs.length) { // optimization: skip empty requests\n      return;\n    }\n\n    return src.bulkGet(bulkGetOpts).then(function (bulkGetResponse) {\n      /* istanbul ignore if */\n      if (state.cancelled) {\n        throw new Error('cancelled');\n      }\n      return Promise.all(bulkGetResponse.results.map(function (bulkGetInfo) {\n        return Promise.all(bulkGetInfo.docs.map(function (doc) {\n          var remoteDoc = doc.ok;\n\n          if (doc.error) {\n            // when AUTO_COMPACTION is set, docs can be returned which look\n            // like this: {\"missing\":\"1-7c3ac256b693c462af8442f992b83696\"}\n            ok = false;\n          }\n\n          if (!remoteDoc || !remoteDoc._attachments) {\n            return remoteDoc;\n          }\n\n          return getDocAttachmentsFromTargetOrSource(target, src, remoteDoc)\n                   .then(function (attachments) {\n                           var filenames = Object.keys(remoteDoc._attachments);\n                           attachments\n                             .forEach(function (attachment, i) {\n                                        var att = remoteDoc._attachments[filenames[i]];\n                                        delete att.stub;\n                                        delete att.length;\n                                        att.data = attachment;\n                                      });\n\n                                      return remoteDoc;\n                                    });\n        }));\n      }))\n\n      .then(function (results) {\n        resultDocs = resultDocs.concat(flatten(results).filter(Boolean));\n      });\n    });\n  }\n\n  function hasAttachments(doc) {\n    return doc._attachments && Object.keys(doc._attachments).length > 0;\n  }\n\n  function hasConflicts(doc) {\n    return doc._conflicts && doc._conflicts.length > 0;\n  }\n\n  function fetchRevisionOneDocs(ids) {\n    // Optimization: fetch gen-1 docs and attachments in\n    // a single request using _all_docs\n    return src.allDocs({\n      keys: ids,\n      include_docs: true,\n      conflicts: true\n    }).then(function (res) {\n      if (state.cancelled) {\n        throw new Error('cancelled');\n      }\n      res.rows.forEach(function (row) {\n        if (row.deleted || !row.doc || !isGenOne$1(row.value.rev) ||\n            hasAttachments(row.doc) || hasConflicts(row.doc)) {\n          // if any of these conditions apply, we need to fetch using get()\n          return;\n        }\n\n        // strip _conflicts array to appease CSG (#5793)\n        /* istanbul ignore if */\n        if (row.doc._conflicts) {\n          delete row.doc._conflicts;\n        }\n\n        // the doc we got back from allDocs() is sufficient\n        resultDocs.push(row.doc);\n        delete diffs[row.id];\n      });\n    });\n  }\n\n  function getRevisionOneDocs() {\n    // filter out the generation 1 docs and get them\n    // leaving the non-generation one docs to be got otherwise\n    var ids = Object.keys(diffs).filter(function (id) {\n      var missing = diffs[id].missing;\n      return missing.length === 1 && isGenOne$1(missing[0]);\n    });\n    if (ids.length > 0) {\n      return fetchRevisionOneDocs(ids);\n    }\n  }\n\n  function returnResult() {\n    return { ok:ok, docs:resultDocs };\n  }\n\n  return Promise.resolve()\n    .then(getRevisionOneDocs)\n    .then(getAllDocs)\n    .then(returnResult);\n}\n\nvar CHECKPOINT_VERSION = 1;\nvar REPLICATOR = \"pouchdb\";\n// This is an arbitrary number to limit the\n// amount of replication history we save in the checkpoint.\n// If we save too much, the checkpoing docs will become very big,\n// if we save fewer, we'll run a greater risk of having to\n// read all the changes from 0 when checkpoint PUTs fail\n// CouchDB 2.0 has a more involved history pruning,\n// but let's go for the simple version for now.\nvar CHECKPOINT_HISTORY_SIZE = 5;\nvar LOWEST_SEQ = 0;\n\nfunction updateCheckpoint(db, id, checkpoint, session, returnValue) {\n  return db.get(id).catch(function (err) {\n    if (err.status === 404) {\n      if (db.adapter === 'http' || db.adapter === 'https') {\n        explainError(\n          404, 'PouchDB is just checking if a remote checkpoint exists.'\n        );\n      }\n      return {\n        session_id: session,\n        _id: id,\n        history: [],\n        replicator: REPLICATOR,\n        version: CHECKPOINT_VERSION\n      };\n    }\n    throw err;\n  }).then(function (doc) {\n    if (returnValue.cancelled) {\n      return;\n    }\n\n    // if the checkpoint has not changed, do not update\n    if (doc.last_seq === checkpoint) {\n      return;\n    }\n\n    // Filter out current entry for this replication\n    doc.history = (doc.history || []).filter(function (item) {\n      return item.session_id !== session;\n    });\n\n    // Add the latest checkpoint to history\n    doc.history.unshift({\n      last_seq: checkpoint,\n      session_id: session\n    });\n\n    // Just take the last pieces in history, to\n    // avoid really big checkpoint docs.\n    // see comment on history size above\n    doc.history = doc.history.slice(0, CHECKPOINT_HISTORY_SIZE);\n\n    doc.version = CHECKPOINT_VERSION;\n    doc.replicator = REPLICATOR;\n\n    doc.session_id = session;\n    doc.last_seq = checkpoint;\n\n    return db.put(doc).catch(function (err) {\n      if (err.status === 409) {\n        // retry; someone is trying to write a checkpoint simultaneously\n        return updateCheckpoint(db, id, checkpoint, session, returnValue);\n      }\n      throw err;\n    });\n  });\n}\n\nfunction Checkpointer(src, target, id, returnValue, opts) {\n  this.src = src;\n  this.target = target;\n  this.id = id;\n  this.returnValue = returnValue;\n  this.opts = opts || {};\n}\n\nCheckpointer.prototype.writeCheckpoint = function (checkpoint, session) {\n  var self = this;\n  return this.updateTarget(checkpoint, session).then(function () {\n    return self.updateSource(checkpoint, session);\n  });\n};\n\nCheckpointer.prototype.updateTarget = function (checkpoint, session) {\n  if (this.opts.writeTargetCheckpoint) {\n    return updateCheckpoint(this.target, this.id, checkpoint,\n      session, this.returnValue);\n  } else {\n    return Promise.resolve(true);\n  }\n};\n\nCheckpointer.prototype.updateSource = function (checkpoint, session) {\n  if (this.opts.writeSourceCheckpoint) {\n    var self = this;\n    return updateCheckpoint(this.src, this.id, checkpoint,\n      session, this.returnValue)\n      .catch(function (err) {\n        if (isForbiddenError(err)) {\n          self.opts.writeSourceCheckpoint = false;\n          return true;\n        }\n        throw err;\n      });\n  } else {\n    return Promise.resolve(true);\n  }\n};\n\nvar comparisons = {\n  \"undefined\": function (targetDoc, sourceDoc) {\n    // This is the previous comparison function\n    if (collate(targetDoc.last_seq, sourceDoc.last_seq) === 0) {\n      return sourceDoc.last_seq;\n    }\n    /* istanbul ignore next */\n    return 0;\n  },\n  \"1\": function (targetDoc, sourceDoc) {\n    // This is the comparison function ported from CouchDB\n    return compareReplicationLogs(sourceDoc, targetDoc).last_seq;\n  }\n};\n\nCheckpointer.prototype.getCheckpoint = function () {\n  var self = this;\n\n  if (self.opts && self.opts.writeSourceCheckpoint && !self.opts.writeTargetCheckpoint) {\n    return self.src.get(self.id).then(function (sourceDoc) {\n      return sourceDoc.last_seq || LOWEST_SEQ;\n    }).catch(function (err) {\n      /* istanbul ignore if */\n      if (err.status !== 404) {\n        throw err;\n      }\n      return LOWEST_SEQ;\n    });\n  }\n\n  return self.target.get(self.id).then(function (targetDoc) {\n    if (self.opts && self.opts.writeTargetCheckpoint && !self.opts.writeSourceCheckpoint) {\n      return targetDoc.last_seq || LOWEST_SEQ;\n    }\n\n    return self.src.get(self.id).then(function (sourceDoc) {\n      // Since we can't migrate an old version doc to a new one\n      // (no session id), we just go with the lowest seq in this case\n      /* istanbul ignore if */\n      if (targetDoc.version !== sourceDoc.version) {\n        return LOWEST_SEQ;\n      }\n\n      var version;\n      if (targetDoc.version) {\n        version = targetDoc.version.toString();\n      } else {\n        version = \"undefined\";\n      }\n\n      if (version in comparisons) {\n        return comparisons[version](targetDoc, sourceDoc);\n      }\n      /* istanbul ignore next */\n      return LOWEST_SEQ;\n    }, function (err) {\n      if (err.status === 404 && targetDoc.last_seq) {\n        return self.src.put({\n          _id: self.id,\n          last_seq: LOWEST_SEQ\n        }).then(function () {\n          return LOWEST_SEQ;\n        }, function (err) {\n          if (isForbiddenError(err)) {\n            self.opts.writeSourceCheckpoint = false;\n            return targetDoc.last_seq;\n          }\n          /* istanbul ignore next */\n          return LOWEST_SEQ;\n        });\n      }\n      throw err;\n    });\n  }).catch(function (err) {\n    if (err.status !== 404) {\n      throw err;\n    }\n    return LOWEST_SEQ;\n  });\n};\n// This checkpoint comparison is ported from CouchDBs source\n// they come from here:\n// https://github.com/apache/couchdb-couch-replicator/blob/master/src/couch_replicator.erl#L863-L906\n\nfunction compareReplicationLogs(srcDoc, tgtDoc) {\n  if (srcDoc.session_id === tgtDoc.session_id) {\n    return {\n      last_seq: srcDoc.last_seq,\n      history: srcDoc.history\n    };\n  }\n\n  return compareReplicationHistory(srcDoc.history, tgtDoc.history);\n}\n\nfunction compareReplicationHistory(sourceHistory, targetHistory) {\n  // the erlang loop via function arguments is not so easy to repeat in JS\n  // therefore, doing this as recursion\n  var S = sourceHistory[0];\n  var sourceRest = sourceHistory.slice(1);\n  var T = targetHistory[0];\n  var targetRest = targetHistory.slice(1);\n\n  if (!S || targetHistory.length === 0) {\n    return {\n      last_seq: LOWEST_SEQ,\n      history: []\n    };\n  }\n\n  var sourceId = S.session_id;\n  /* istanbul ignore if */\n  if (hasSessionId(sourceId, targetHistory)) {\n    return {\n      last_seq: S.last_seq,\n      history: sourceHistory\n    };\n  }\n\n  var targetId = T.session_id;\n  if (hasSessionId(targetId, sourceRest)) {\n    return {\n      last_seq: T.last_seq,\n      history: targetRest\n    };\n  }\n\n  return compareReplicationHistory(sourceRest, targetRest);\n}\n\nfunction hasSessionId(sessionId, history) {\n  var props = history[0];\n  var rest = history.slice(1);\n\n  if (!sessionId || history.length === 0) {\n    return false;\n  }\n\n  if (sessionId === props.session_id) {\n    return true;\n  }\n\n  return hasSessionId(sessionId, rest);\n}\n\nfunction isForbiddenError(err) {\n  return typeof err.status === 'number' && Math.floor(err.status / 100) === 4;\n}\n\nvar STARTING_BACK_OFF = 0;\n\nfunction backOff(opts, returnValue, error, callback) {\n  if (opts.retry === false) {\n    returnValue.emit('error', error);\n    returnValue.removeAllListeners();\n    return;\n  }\n  /* istanbul ignore if */\n  if (typeof opts.back_off_function !== 'function') {\n    opts.back_off_function = defaultBackOff;\n  }\n  returnValue.emit('requestError', error);\n  if (returnValue.state === 'active' || returnValue.state === 'pending') {\n    returnValue.emit('paused', error);\n    returnValue.state = 'stopped';\n    var backOffSet = function backoffTimeSet() {\n      opts.current_back_off = STARTING_BACK_OFF;\n    };\n    var removeBackOffSetter = function removeBackOffTimeSet() {\n      returnValue.removeListener('active', backOffSet);\n    };\n    returnValue.once('paused', removeBackOffSetter);\n    returnValue.once('active', backOffSet);\n  }\n\n  opts.current_back_off = opts.current_back_off || STARTING_BACK_OFF;\n  opts.current_back_off = opts.back_off_function(opts.current_back_off);\n  setTimeout(callback, opts.current_back_off);\n}\n\nfunction sortObjectPropertiesByKey(queryParams) {\n  return Object.keys(queryParams).sort(collate).reduce(function (result, key) {\n    result[key] = queryParams[key];\n    return result;\n  }, {});\n}\n\n// Generate a unique id particular to this replication.\n// Not guaranteed to align perfectly with CouchDB's rep ids.\nfunction generateReplicationId(src, target, opts) {\n  var docIds = opts.doc_ids ? opts.doc_ids.sort(collate) : '';\n  var filterFun = opts.filter ? opts.filter.toString() : '';\n  var queryParams = '';\n  var filterViewName =  '';\n  var selector = '';\n\n  // possibility for checkpoints to be lost here as behaviour of\n  // JSON.stringify is not stable (see #6226)\n  /* istanbul ignore if */\n  if (opts.selector) {\n    selector = JSON.stringify(opts.selector);\n  }\n\n  if (opts.filter && opts.query_params) {\n    queryParams = JSON.stringify(sortObjectPropertiesByKey(opts.query_params));\n  }\n\n  if (opts.filter && opts.filter === '_view') {\n    filterViewName = opts.view.toString();\n  }\n\n  return Promise.all([src.id(), target.id()]).then(function (res) {\n    var queryData = res[0] + res[1] + filterFun + filterViewName +\n      queryParams + docIds + selector;\n    return new Promise(function (resolve) {\n      binaryMd5(queryData, resolve);\n    });\n  }).then(function (md5sum) {\n    // can't use straight-up md5 alphabet, because\n    // the char '/' is interpreted as being for attachments,\n    // and + is also not url-safe\n    md5sum = md5sum.replace(/\\//g, '.').replace(/\\+/g, '_');\n    return '_local/' + md5sum;\n  });\n}\n\nfunction replicate(src, target, opts, returnValue, result) {\n  var batches = [];               // list of batches to be processed\n  var currentBatch;               // the batch currently being processed\n  var pendingBatch = {\n    seq: 0,\n    changes: [],\n    docs: []\n  }; // next batch, not yet ready to be processed\n  var writingCheckpoint = false;  // true while checkpoint is being written\n  var changesCompleted = false;   // true when all changes received\n  var replicationCompleted = false; // true when replication has completed\n  var last_seq = 0;\n  var continuous = opts.continuous || opts.live || false;\n  var batch_size = opts.batch_size || 100;\n  var batches_limit = opts.batches_limit || 10;\n  var changesPending = false;     // true while src.changes is running\n  var doc_ids = opts.doc_ids;\n  var selector = opts.selector;\n  var repId;\n  var checkpointer;\n  var changedDocs = [];\n  // Like couchdb, every replication gets a unique session id\n  var session = uuid();\n\n  result = result || {\n    ok: true,\n    start_time: new Date().toISOString(),\n    docs_read: 0,\n    docs_written: 0,\n    doc_write_failures: 0,\n    errors: []\n  };\n\n  var changesOpts = {};\n  returnValue.ready(src, target);\n\n  function initCheckpointer() {\n    if (checkpointer) {\n      return Promise.resolve();\n    }\n    return generateReplicationId(src, target, opts).then(function (res) {\n      repId = res;\n\n      var checkpointOpts = {};\n      if (opts.checkpoint === false) {\n        checkpointOpts = { writeSourceCheckpoint: false, writeTargetCheckpoint: false };\n      } else if (opts.checkpoint === 'source') {\n        checkpointOpts = { writeSourceCheckpoint: true, writeTargetCheckpoint: false };\n      } else if (opts.checkpoint === 'target') {\n        checkpointOpts = { writeSourceCheckpoint: false, writeTargetCheckpoint: true };\n      } else {\n        checkpointOpts = { writeSourceCheckpoint: true, writeTargetCheckpoint: true };\n      }\n\n      checkpointer = new Checkpointer(src, target, repId, returnValue, checkpointOpts);\n    });\n  }\n\n  function writeDocs() {\n    changedDocs = [];\n\n    if (currentBatch.docs.length === 0) {\n      return;\n    }\n    var docs = currentBatch.docs;\n    var bulkOpts = {timeout: opts.timeout};\n    return target.bulkDocs({docs: docs, new_edits: false}, bulkOpts).then(function (res) {\n      /* istanbul ignore if */\n      if (returnValue.cancelled) {\n        completeReplication();\n        throw new Error('cancelled');\n      }\n\n      // `res` doesn't include full documents (which live in `docs`), so we create a map of \n      // (id -> error), and check for errors while iterating over `docs`\n      var errorsById = Object.create(null);\n      res.forEach(function (res) {\n        if (res.error) {\n          errorsById[res.id] = res;\n        }\n      });\n\n      var errorsNo = Object.keys(errorsById).length;\n      result.doc_write_failures += errorsNo;\n      result.docs_written += docs.length - errorsNo;\n\n      docs.forEach(function (doc) {\n        var error = errorsById[doc._id];\n        if (error) {\n          result.errors.push(error);\n          // Normalize error name. i.e. 'Unauthorized' -> 'unauthorized' (eg Sync Gateway)\n          var errorName = (error.name || '').toLowerCase();\n          if (errorName === 'unauthorized' || errorName === 'forbidden') {\n            returnValue.emit('denied', clone(error));\n          } else {\n            throw error;\n          }\n        } else {\n          changedDocs.push(doc);\n        }\n      });\n\n    }, function (err) {\n      result.doc_write_failures += docs.length;\n      throw err;\n    });\n  }\n\n  function finishBatch() {\n    if (currentBatch.error) {\n      throw new Error('There was a problem getting docs.');\n    }\n    result.last_seq = last_seq = currentBatch.seq;\n    var outResult = clone(result);\n    if (changedDocs.length) {\n      outResult.docs = changedDocs;\n      // Attach 'pending' property if server supports it (CouchDB 2.0+)\n      /* istanbul ignore if */\n      if (typeof currentBatch.pending === 'number') {\n        outResult.pending = currentBatch.pending;\n        delete currentBatch.pending;\n      }\n      returnValue.emit('change', outResult);\n    }\n    writingCheckpoint = true;\n    return checkpointer.writeCheckpoint(currentBatch.seq,\n        session).then(function () {\n      writingCheckpoint = false;\n      /* istanbul ignore if */\n      if (returnValue.cancelled) {\n        completeReplication();\n        throw new Error('cancelled');\n      }\n      currentBatch = undefined;\n      getChanges();\n    }).catch(function (err) {\n      onCheckpointError(err);\n      throw err;\n    });\n  }\n\n  function getDiffs() {\n    var diff = {};\n    currentBatch.changes.forEach(function (change) {\n      // Couchbase Sync Gateway emits these, but we can ignore them\n      /* istanbul ignore if */\n      if (change.id === \"_user/\") {\n        return;\n      }\n      diff[change.id] = change.changes.map(function (x) {\n        return x.rev;\n      });\n    });\n    return target.revsDiff(diff).then(function (diffs) {\n      /* istanbul ignore if */\n      if (returnValue.cancelled) {\n        completeReplication();\n        throw new Error('cancelled');\n      }\n      // currentBatch.diffs elements are deleted as the documents are written\n      currentBatch.diffs = diffs;\n    });\n  }\n\n  function getBatchDocs() {\n    return getDocs(src, target, currentBatch.diffs, returnValue).then(function (got) {\n      currentBatch.error = !got.ok;\n      got.docs.forEach(function (doc) {\n        delete currentBatch.diffs[doc._id];\n        result.docs_read++;\n        currentBatch.docs.push(doc);\n      });\n    });\n  }\n\n  function startNextBatch() {\n    if (returnValue.cancelled || currentBatch) {\n      return;\n    }\n    if (batches.length === 0) {\n      processPendingBatch(true);\n      return;\n    }\n    currentBatch = batches.shift();\n    getDiffs()\n      .then(getBatchDocs)\n      .then(writeDocs)\n      .then(finishBatch)\n      .then(startNextBatch)\n      .catch(function (err) {\n        abortReplication('batch processing terminated with error', err);\n      });\n  }\n\n\n  function processPendingBatch(immediate$$1) {\n    if (pendingBatch.changes.length === 0) {\n      if (batches.length === 0 && !currentBatch) {\n        if ((continuous && changesOpts.live) || changesCompleted) {\n          returnValue.state = 'pending';\n          returnValue.emit('paused');\n        }\n        if (changesCompleted) {\n          completeReplication();\n        }\n      }\n      return;\n    }\n    if (\n      immediate$$1 ||\n      changesCompleted ||\n      pendingBatch.changes.length >= batch_size\n    ) {\n      batches.push(pendingBatch);\n      pendingBatch = {\n        seq: 0,\n        changes: [],\n        docs: []\n      };\n      if (returnValue.state === 'pending' || returnValue.state === 'stopped') {\n        returnValue.state = 'active';\n        returnValue.emit('active');\n      }\n      startNextBatch();\n    }\n  }\n\n\n  function abortReplication(reason, err) {\n    if (replicationCompleted) {\n      return;\n    }\n    if (!err.message) {\n      err.message = reason;\n    }\n    result.ok = false;\n    result.status = 'aborting';\n    batches = [];\n    pendingBatch = {\n      seq: 0,\n      changes: [],\n      docs: []\n    };\n    completeReplication(err);\n  }\n\n\n  function completeReplication(fatalError) {\n    if (replicationCompleted) {\n      return;\n    }\n    /* istanbul ignore if */\n    if (returnValue.cancelled) {\n      result.status = 'cancelled';\n      if (writingCheckpoint) {\n        return;\n      }\n    }\n    result.status = result.status || 'complete';\n    result.end_time = new Date().toISOString();\n    result.last_seq = last_seq;\n    replicationCompleted = true;\n\n    if (fatalError) {\n      // need to extend the error because Firefox considers \".result\" read-only\n      fatalError = createError(fatalError);\n      fatalError.result = result;\n\n      // Normalize error name. i.e. 'Unauthorized' -> 'unauthorized' (eg Sync Gateway)\n      var errorName = (fatalError.name || '').toLowerCase();\n      if (errorName === 'unauthorized' || errorName === 'forbidden') {\n        returnValue.emit('error', fatalError);\n        returnValue.removeAllListeners();\n      } else {\n        backOff(opts, returnValue, fatalError, function () {\n          replicate(src, target, opts, returnValue);\n        });\n      }\n    } else {\n      returnValue.emit('complete', result);\n      returnValue.removeAllListeners();\n    }\n  }\n\n\n  function onChange(change, pending, lastSeq) {\n    /* istanbul ignore if */\n    if (returnValue.cancelled) {\n      return completeReplication();\n    }\n    // Attach 'pending' property if server supports it (CouchDB 2.0+)\n    /* istanbul ignore if */\n    if (typeof pending === 'number') {\n      pendingBatch.pending = pending;\n    }\n\n    var filter = filterChange(opts)(change);\n    if (!filter) {\n      return;\n    }\n    pendingBatch.seq = change.seq || lastSeq;\n    pendingBatch.changes.push(change);\n    immediate(function () {\n      processPendingBatch(batches.length === 0 && changesOpts.live);\n    });\n  }\n\n\n  function onChangesComplete(changes) {\n    changesPending = false;\n    /* istanbul ignore if */\n    if (returnValue.cancelled) {\n      return completeReplication();\n    }\n\n    // if no results were returned then we're done,\n    // else fetch more\n    if (changes.results.length > 0) {\n      changesOpts.since = changes.results[changes.results.length - 1].seq;\n      getChanges();\n      processPendingBatch(true);\n    } else {\n\n      var complete = function () {\n        if (continuous) {\n          changesOpts.live = true;\n          getChanges();\n        } else {\n          changesCompleted = true;\n        }\n        processPendingBatch(true);\n      };\n\n      // update the checkpoint so we start from the right seq next time\n      if (!currentBatch && changes.results.length === 0) {\n        writingCheckpoint = true;\n        checkpointer.writeCheckpoint(changes.last_seq,\n            session).then(function () {\n          writingCheckpoint = false;\n          result.last_seq = last_seq = changes.last_seq;\n          complete();\n        })\n        .catch(onCheckpointError);\n      } else {\n        complete();\n      }\n    }\n  }\n\n\n  function onChangesError(err) {\n    changesPending = false;\n    /* istanbul ignore if */\n    if (returnValue.cancelled) {\n      return completeReplication();\n    }\n    abortReplication('changes rejected', err);\n  }\n\n\n  function getChanges() {\n    if (!(\n      !changesPending &&\n      !changesCompleted &&\n      batches.length < batches_limit\n      )) {\n      return;\n    }\n    changesPending = true;\n    function abortChanges() {\n      changes.cancel();\n    }\n    function removeListener() {\n      returnValue.removeListener('cancel', abortChanges);\n    }\n\n    if (returnValue._changes) { // remove old changes() and listeners\n      returnValue.removeListener('cancel', returnValue._abortChanges);\n      returnValue._changes.cancel();\n    }\n    returnValue.once('cancel', abortChanges);\n\n    var changes = src.changes(changesOpts)\n      .on('change', onChange);\n    changes.then(removeListener, removeListener);\n    changes.then(onChangesComplete)\n      .catch(onChangesError);\n\n    if (opts.retry) {\n      // save for later so we can cancel if necessary\n      returnValue._changes = changes;\n      returnValue._abortChanges = abortChanges;\n    }\n  }\n\n\n  function startChanges() {\n    initCheckpointer().then(function () {\n      /* istanbul ignore if */\n      if (returnValue.cancelled) {\n        completeReplication();\n        return;\n      }\n      return checkpointer.getCheckpoint().then(function (checkpoint) {\n        last_seq = checkpoint;\n        changesOpts = {\n          since: last_seq,\n          limit: batch_size,\n          batch_size: batch_size,\n          style: 'all_docs',\n          doc_ids: doc_ids,\n          selector: selector,\n          return_docs: true // required so we know when we're done\n        };\n        if (opts.filter) {\n          if (typeof opts.filter !== 'string') {\n            // required for the client-side filter in onChange\n            changesOpts.include_docs = true;\n          } else { // ddoc filter\n            changesOpts.filter = opts.filter;\n          }\n        }\n        if ('heartbeat' in opts) {\n          changesOpts.heartbeat = opts.heartbeat;\n        }\n        if ('timeout' in opts) {\n          changesOpts.timeout = opts.timeout;\n        }\n        if (opts.query_params) {\n          changesOpts.query_params = opts.query_params;\n        }\n        if (opts.view) {\n          changesOpts.view = opts.view;\n        }\n        getChanges();\n      });\n    }).catch(function (err) {\n      abortReplication('getCheckpoint rejected with ', err);\n    });\n  }\n\n  /* istanbul ignore next */\n  function onCheckpointError(err) {\n    writingCheckpoint = false;\n    abortReplication('writeCheckpoint completed with error', err);\n  }\n\n  /* istanbul ignore if */\n  if (returnValue.cancelled) { // cancelled immediately\n    completeReplication();\n    return;\n  }\n\n  if (!returnValue._addedListeners) {\n    returnValue.once('cancel', completeReplication);\n\n    if (typeof opts.complete === 'function') {\n      returnValue.once('error', opts.complete);\n      returnValue.once('complete', function (result) {\n        opts.complete(null, result);\n      });\n    }\n    returnValue._addedListeners = true;\n  }\n\n  if (typeof opts.since === 'undefined') {\n    startChanges();\n  } else {\n    initCheckpointer().then(function () {\n      writingCheckpoint = true;\n      return checkpointer.writeCheckpoint(opts.since, session);\n    }).then(function () {\n      writingCheckpoint = false;\n      /* istanbul ignore if */\n      if (returnValue.cancelled) {\n        completeReplication();\n        return;\n      }\n      last_seq = opts.since;\n      startChanges();\n    }).catch(onCheckpointError);\n  }\n}\n\n// We create a basic promise so the caller can cancel the replication possibly\n// before we have actually started listening to changes etc\ninherits(Replication, EE);\nfunction Replication() {\n  EE.call(this);\n  this.cancelled = false;\n  this.state = 'pending';\n  var self = this;\n  var promise = new Promise(function (fulfill, reject) {\n    self.once('complete', fulfill);\n    self.once('error', reject);\n  });\n  self.then = function (resolve, reject) {\n    return promise.then(resolve, reject);\n  };\n  self.catch = function (reject) {\n    return promise.catch(reject);\n  };\n  // As we allow error handling via \"error\" event as well,\n  // put a stub in here so that rejecting never throws UnhandledError.\n  self.catch(function () {});\n}\n\nReplication.prototype.cancel = function () {\n  this.cancelled = true;\n  this.state = 'cancelled';\n  this.emit('cancel');\n};\n\nReplication.prototype.ready = function (src, target) {\n  var self = this;\n  if (self._readyCalled) {\n    return;\n  }\n  self._readyCalled = true;\n\n  function onDestroy() {\n    self.cancel();\n  }\n  src.once('destroyed', onDestroy);\n  target.once('destroyed', onDestroy);\n  function cleanup() {\n    src.removeListener('destroyed', onDestroy);\n    target.removeListener('destroyed', onDestroy);\n  }\n  self.once('complete', cleanup);\n};\n\nfunction toPouch(db, opts) {\n  var PouchConstructor = opts.PouchConstructor;\n  if (typeof db === 'string') {\n    return new PouchConstructor(db, opts);\n  } else {\n    return db;\n  }\n}\n\nfunction replicateWrapper(src, target, opts, callback) {\n\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  if (typeof opts === 'undefined') {\n    opts = {};\n  }\n\n  if (opts.doc_ids && !Array.isArray(opts.doc_ids)) {\n    throw createError(BAD_REQUEST,\n                       \"`doc_ids` filter parameter is not a list.\");\n  }\n\n  opts.complete = callback;\n  opts = clone(opts);\n  opts.continuous = opts.continuous || opts.live;\n  opts.retry = ('retry' in opts) ? opts.retry : false;\n  /*jshint validthis:true */\n  opts.PouchConstructor = opts.PouchConstructor || this;\n  var replicateRet = new Replication(opts);\n  var srcPouch = toPouch(src, opts);\n  var targetPouch = toPouch(target, opts);\n  replicate(srcPouch, targetPouch, opts, replicateRet);\n  return replicateRet;\n}\n\ninherits(Sync, EE);\nfunction sync(src, target, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  if (typeof opts === 'undefined') {\n    opts = {};\n  }\n  opts = clone(opts);\n  /*jshint validthis:true */\n  opts.PouchConstructor = opts.PouchConstructor || this;\n  src = toPouch(src, opts);\n  target = toPouch(target, opts);\n  return new Sync(src, target, opts, callback);\n}\n\nfunction Sync(src, target, opts, callback) {\n  var self = this;\n  this.canceled = false;\n\n  var optsPush = opts.push ? $inject_Object_assign({}, opts, opts.push) : opts;\n  var optsPull = opts.pull ? $inject_Object_assign({}, opts, opts.pull) : opts;\n\n  this.push = replicateWrapper(src, target, optsPush);\n  this.pull = replicateWrapper(target, src, optsPull);\n\n  this.pushPaused = true;\n  this.pullPaused = true;\n\n  function pullChange(change) {\n    self.emit('change', {\n      direction: 'pull',\n      change: change\n    });\n  }\n  function pushChange(change) {\n    self.emit('change', {\n      direction: 'push',\n      change: change\n    });\n  }\n  function pushDenied(doc) {\n    self.emit('denied', {\n      direction: 'push',\n      doc: doc\n    });\n  }\n  function pullDenied(doc) {\n    self.emit('denied', {\n      direction: 'pull',\n      doc: doc\n    });\n  }\n  function pushPaused() {\n    self.pushPaused = true;\n    /* istanbul ignore if */\n    if (self.pullPaused) {\n      self.emit('paused');\n    }\n  }\n  function pullPaused() {\n    self.pullPaused = true;\n    /* istanbul ignore if */\n    if (self.pushPaused) {\n      self.emit('paused');\n    }\n  }\n  function pushActive() {\n    self.pushPaused = false;\n    /* istanbul ignore if */\n    if (self.pullPaused) {\n      self.emit('active', {\n        direction: 'push'\n      });\n    }\n  }\n  function pullActive() {\n    self.pullPaused = false;\n    /* istanbul ignore if */\n    if (self.pushPaused) {\n      self.emit('active', {\n        direction: 'pull'\n      });\n    }\n  }\n\n  var removed = {};\n\n  function removeAll(type) { // type is 'push' or 'pull'\n    return function (event, func) {\n      var isChange = event === 'change' &&\n        (func === pullChange || func === pushChange);\n      var isDenied = event === 'denied' &&\n        (func === pullDenied || func === pushDenied);\n      var isPaused = event === 'paused' &&\n        (func === pullPaused || func === pushPaused);\n      var isActive = event === 'active' &&\n        (func === pullActive || func === pushActive);\n\n      if (isChange || isDenied || isPaused || isActive) {\n        if (!(event in removed)) {\n          removed[event] = {};\n        }\n        removed[event][type] = true;\n        if (Object.keys(removed[event]).length === 2) {\n          // both push and pull have asked to be removed\n          self.removeAllListeners(event);\n        }\n      }\n    };\n  }\n\n  if (opts.live) {\n    this.push.on('complete', self.pull.cancel.bind(self.pull));\n    this.pull.on('complete', self.push.cancel.bind(self.push));\n  }\n\n  function addOneListener(ee, event, listener) {\n    if (ee.listeners(event).indexOf(listener) == -1) {\n      ee.on(event, listener);\n    }\n  }\n\n  this.on('newListener', function (event) {\n    if (event === 'change') {\n      addOneListener(self.pull, 'change', pullChange);\n      addOneListener(self.push, 'change', pushChange);\n    } else if (event === 'denied') {\n      addOneListener(self.pull, 'denied', pullDenied);\n      addOneListener(self.push, 'denied', pushDenied);\n    } else if (event === 'active') {\n      addOneListener(self.pull, 'active', pullActive);\n      addOneListener(self.push, 'active', pushActive);\n    } else if (event === 'paused') {\n      addOneListener(self.pull, 'paused', pullPaused);\n      addOneListener(self.push, 'paused', pushPaused);\n    }\n  });\n\n  this.on('removeListener', function (event) {\n    if (event === 'change') {\n      self.pull.removeListener('change', pullChange);\n      self.push.removeListener('change', pushChange);\n    } else if (event === 'denied') {\n      self.pull.removeListener('denied', pullDenied);\n      self.push.removeListener('denied', pushDenied);\n    } else if (event === 'active') {\n      self.pull.removeListener('active', pullActive);\n      self.push.removeListener('active', pushActive);\n    } else if (event === 'paused') {\n      self.pull.removeListener('paused', pullPaused);\n      self.push.removeListener('paused', pushPaused);\n    }\n  });\n\n  this.pull.on('removeListener', removeAll('pull'));\n  this.push.on('removeListener', removeAll('push'));\n\n  var promise = Promise.all([\n    this.push,\n    this.pull\n  ]).then(function (resp) {\n    var out = {\n      push: resp[0],\n      pull: resp[1]\n    };\n    self.emit('complete', out);\n    if (callback) {\n      callback(null, out);\n    }\n    self.removeAllListeners();\n    return out;\n  }, function (err) {\n    self.cancel();\n    if (callback) {\n      // if there's a callback, then the callback can receive\n      // the error event\n      callback(err);\n    } else {\n      // if there's no callback, then we're safe to emit an error\n      // event, which would otherwise throw an unhandled error\n      // due to 'error' being a special event in EventEmitters\n      self.emit('error', err);\n    }\n    self.removeAllListeners();\n    if (callback) {\n      // no sense throwing if we're already emitting an 'error' event\n      throw err;\n    }\n  });\n\n  this.then = function (success, err) {\n    return promise.then(success, err);\n  };\n\n  this.catch = function (err) {\n    return promise.catch(err);\n  };\n}\n\nSync.prototype.cancel = function () {\n  if (!this.canceled) {\n    this.canceled = true;\n    this.push.cancel();\n    this.pull.cancel();\n  }\n};\n\nfunction replication(PouchDB) {\n  PouchDB.replicate = replicateWrapper;\n  PouchDB.sync = sync;\n\n  Object.defineProperty(PouchDB.prototype, 'replicate', {\n    get: function () {\n      var self = this;\n      if (typeof this.replicateMethods === 'undefined') {\n        this.replicateMethods = {\n          from: function (other, opts, callback) {\n            return self.constructor.replicate(other, self, opts, callback);\n          },\n          to: function (other, opts, callback) {\n            return self.constructor.replicate(self, other, opts, callback);\n          }\n        };\n      }\n      return this.replicateMethods;\n    }\n  });\n\n  PouchDB.prototype.sync = function (dbName, opts, callback) {\n    return this.constructor.sync(this, dbName, opts, callback);\n  };\n}\n\nPouchDB.plugin(IDBPouch)\n  .plugin(HttpPouch$1)\n  .plugin(mapreduce)\n  .plugin(replication);\n\n// Pull from src because pouchdb-node/pouchdb-browser themselves\n\nexport default PouchDB;\n","'use strict';\nvar types = [\n  require('./nextTick'),\n  require('./queueMicrotask'),\n  require('./mutation.js'),\n  require('./messageChannel'),\n  require('./stateChange'),\n  require('./timeout')\n];\nvar draining;\nvar currentQueue;\nvar queueIndex = -1;\nvar queue = [];\nvar scheduled = false;\nfunction cleanUpNextTick() {\n  if (!draining || !currentQueue) {\n    return;\n  }\n  draining = false;\n  if (currentQueue.length) {\n    queue = currentQueue.concat(queue);\n  } else {\n    queueIndex = -1;\n  }\n  if (queue.length) {\n    nextTick();\n  }\n}\n\n//named nextTick for less confusing stack traces\nfunction nextTick() {\n  if (draining) {\n    return;\n  }\n  scheduled = false;\n  draining = true;\n  var len = queue.length;\n  var timeout = setTimeout(cleanUpNextTick);\n  while (len) {\n    currentQueue = queue;\n    queue = [];\n    while (currentQueue && ++queueIndex < len) {\n      currentQueue[queueIndex].run();\n    }\n    queueIndex = -1;\n    len = queue.length;\n  }\n  currentQueue = null;\n  queueIndex = -1;\n  draining = false;\n  clearTimeout(timeout);\n}\nvar scheduleDrain;\nvar i = -1;\nvar len = types.length;\nwhile (++i < len) {\n  if (types[i] && types[i].test && types[i].test()) {\n    scheduleDrain = types[i].install(nextTick);\n    break;\n  }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n  this.fun = fun;\n  this.array = array;\n}\nItem.prototype.run = function () {\n  var fun = this.fun;\n  var array = this.array;\n  switch (array.length) {\n  case 0:\n    return fun();\n  case 1:\n    return fun(array[0]);\n  case 2:\n    return fun(array[0], array[1]);\n  case 3:\n    return fun(array[0], array[1], array[2]);\n  default:\n    return fun.apply(null, array);\n  }\n\n};\nmodule.exports = immediate;\nfunction immediate(task) {\n  var args = new Array(arguments.length - 1);\n  if (arguments.length > 1) {\n    for (var i = 1; i < arguments.length; i++) {\n      args[i - 1] = arguments[i];\n    }\n  }\n  queue.push(new Item(task, args));\n  if (!scheduled && !draining) {\n    scheduled = true;\n    scheduleDrain();\n  }\n}\n","'use strict';\nexports.test = function () {\n  return typeof global.queueMicrotask === 'function';\n};\n\nexports.install = function (func) {\n  return function () {\n    global.queueMicrotask(func);\n  };\n};\n","'use strict';\n//based off rsvp https://github.com/tildeio/rsvp.js\n//license https://github.com/tildeio/rsvp.js/blob/master/LICENSE\n//https://github.com/tildeio/rsvp.js/blob/master/lib/rsvp/asap.js\n\nvar Mutation = global.MutationObserver || global.WebKitMutationObserver;\n\nexports.test = function () {\n  return Mutation;\n};\n\nexports.install = function (handle) {\n  var called = 0;\n  var observer = new Mutation(handle);\n  var element = global.document.createTextNode('');\n  observer.observe(element, {\n    characterData: true\n  });\n  return function () {\n    element.data = (called = ++called % 2);\n  };\n};","'use strict';\n\nexports.test = function () {\n  if (global.setImmediate) {\n    // we can only get here in IE10\n    // which doesn't handel postMessage well\n    return false;\n  }\n  return typeof global.MessageChannel !== 'undefined';\n};\n\nexports.install = function (func) {\n  var channel = new global.MessageChannel();\n  channel.port1.onmessage = func;\n  return function () {\n    channel.port2.postMessage(0);\n  };\n};","'use strict';\n\nexports.test = function () {\n  return 'document' in global && 'onreadystatechange' in global.document.createElement('script');\n};\n\nexports.install = function (handle) {\n  return function () {\n\n    // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n    // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n    var scriptEl = global.document.createElement('script');\n    scriptEl.onreadystatechange = function () {\n      handle();\n\n      scriptEl.onreadystatechange = null;\n      scriptEl.parentNode.removeChild(scriptEl);\n      scriptEl = null;\n    };\n    global.document.documentElement.appendChild(scriptEl);\n\n    return handle;\n  };\n};","'use strict';\nexports.test = function () {\n  return true;\n};\n\nexports.install = function (t) {\n  return function () {\n    setTimeout(t, 0);\n  };\n};","(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b  = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash.slice()\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} [raw] True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} [raw]     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     [raw] True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n","'use strict';\n\n/**\n * Stringify/parse functions that don't operate\n * recursively, so they avoid call stack exceeded\n * errors.\n */\nexports.stringify = function stringify(input) {\n  var queue = [];\n  queue.push({obj: input});\n\n  var res = '';\n  var next, obj, prefix, val, i, arrayPrefix, keys, k, key, value, objPrefix;\n  while ((next = queue.pop())) {\n    obj = next.obj;\n    prefix = next.prefix || '';\n    val = next.val || '';\n    res += prefix;\n    if (val) {\n      res += val;\n    } else if (typeof obj !== 'object') {\n      res += typeof obj === 'undefined' ? null : JSON.stringify(obj);\n    } else if (obj === null) {\n      res += 'null';\n    } else if (Array.isArray(obj)) {\n      queue.push({val: ']'});\n      for (i = obj.length - 1; i >= 0; i--) {\n        arrayPrefix = i === 0 ? '' : ',';\n        queue.push({obj: obj[i], prefix: arrayPrefix});\n      }\n      queue.push({val: '['});\n    } else { // object\n      keys = [];\n      for (k in obj) {\n        if (obj.hasOwnProperty(k)) {\n          keys.push(k);\n        }\n      }\n      queue.push({val: '}'});\n      for (i = keys.length - 1; i >= 0; i--) {\n        key = keys[i];\n        value = obj[key];\n        objPrefix = (i > 0 ? ',' : '');\n        objPrefix += JSON.stringify(key) + ':';\n        queue.push({obj: value, prefix: objPrefix});\n      }\n      queue.push({val: '{'});\n    }\n  }\n  return res;\n};\n\n// Convenience function for the parse function.\n// This pop function is basically copied from\n// pouchCollate.parseIndexableString\nfunction pop(obj, stack, metaStack) {\n  var lastMetaElement = metaStack[metaStack.length - 1];\n  if (obj === lastMetaElement.element) {\n    // popping a meta-element, e.g. an object whose value is another object\n    metaStack.pop();\n    lastMetaElement = metaStack[metaStack.length - 1];\n  }\n  var element = lastMetaElement.element;\n  var lastElementIndex = lastMetaElement.index;\n  if (Array.isArray(element)) {\n    element.push(obj);\n  } else if (lastElementIndex === stack.length - 2) { // obj with key+value\n    var key = stack.pop();\n    element[key] = obj;\n  } else {\n    stack.push(obj); // obj with key only\n  }\n}\n\nexports.parse = function (str) {\n  var stack = [];\n  var metaStack = []; // stack for arrays and objects\n  var i = 0;\n  var collationIndex,parsedNum,numChar;\n  var parsedString,lastCh,numConsecutiveSlashes,ch;\n  var arrayElement, objElement;\n  while (true) {\n    collationIndex = str[i++];\n    if (collationIndex === '}' ||\n        collationIndex === ']' ||\n        typeof collationIndex === 'undefined') {\n      if (stack.length === 1) {\n        return stack.pop();\n      } else {\n        pop(stack.pop(), stack, metaStack);\n        continue;\n      }\n    }\n    switch (collationIndex) {\n      case ' ':\n      case '\\t':\n      case '\\n':\n      case ':':\n      case ',':\n        break;\n      case 'n':\n        i += 3; // 'ull'\n        pop(null, stack, metaStack);\n        break;\n      case 't':\n        i += 3; // 'rue'\n        pop(true, stack, metaStack);\n        break;\n      case 'f':\n        i += 4; // 'alse'\n        pop(false, stack, metaStack);\n        break;\n      case '0':\n      case '1':\n      case '2':\n      case '3':\n      case '4':\n      case '5':\n      case '6':\n      case '7':\n      case '8':\n      case '9':\n      case '-':\n        parsedNum = '';\n        i--;\n        while (true) {\n          numChar = str[i++];\n          if (/[\\d\\.\\-e\\+]/.test(numChar)) {\n            parsedNum += numChar;\n          } else {\n            i--;\n            break;\n          }\n        }\n        pop(parseFloat(parsedNum), stack, metaStack);\n        break;\n      case '\"':\n        parsedString = '';\n        lastCh = void 0;\n        numConsecutiveSlashes = 0;\n        while (true) {\n          ch = str[i++];\n          if (ch !== '\"' || (lastCh === '\\\\' &&\n              numConsecutiveSlashes % 2 === 1)) {\n            parsedString += ch;\n            lastCh = ch;\n            if (lastCh === '\\\\') {\n              numConsecutiveSlashes++;\n            } else {\n              numConsecutiveSlashes = 0;\n            }\n          } else {\n            break;\n          }\n        }\n        pop(JSON.parse('\"' + parsedString + '\"'), stack, metaStack);\n        break;\n      case '[':\n        arrayElement = { element: [], index: stack.length };\n        stack.push(arrayElement.element);\n        metaStack.push(arrayElement);\n        break;\n      case '{':\n        objElement = { element: {}, index: stack.length };\n        stack.push(objElement.element);\n        metaStack.push(objElement);\n        break;\n      default:\n        throw new Error(\n          'unexpectedly reached end of input: ' + collationIndex);\n    }\n  }\n};\n","'use strict';\n\nmodule.exports = argsArray;\n\nfunction argsArray(fun) {\n  return function () {\n    var len = arguments.length;\n    if (len) {\n      var args = [];\n      var i = -1;\n      while (++i < len) {\n        args[i] = arguments[i];\n      }\n      return fun.call(this, args);\n    } else {\n      return fun.call(this, []);\n    }\n  };\n}","'use strict';\n\nmodule.exports = {\n  name: 'Open bioreactor',\n  kind: 'OpenBio',\n  description: '',\n  url: '',\n  id: '$',\n  numberParameters: 52,\n  numberLogParameters: 26,\n  parameters: [\n    {\n      label: 'A',\n      variable: 'liquidTemp',\n      name: 'T LIQ',\n      description: 'Temperature of the bioreactor solution',\n      factor: 100,\n      unit: 'C',\n      writable: false,\n    },\n\n    {\n      label: 'B',\n      variable: 'pcbTemp',\n      name: 'T PCB',\n      description: 'Temperature of the bioreactor circuit',\n      factor: 100,\n      unit: 'C',\n      writable: false,\n    },\n\n    {\n      label: 'C',\n      variable: 'pidTemp',\n      name: 'Pid',\n      description: 'PID absolute value',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'D',\n      variable: 'targetTemp',\n      name: 'T target',\n      description: 'Target temperature',\n      factor: 100,\n      unit: 'C',\n      writable: true,\n    },\n\n    {\n      label: 'E',\n      variable: 'weight',\n      name: 'Weight',\n      description: 'Weight of the bioreactor tank, in internal value',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'F',\n      variable: 'grWeight',\n      name: 'Weight (g)',\n      description: 'Weight of the bioreactor tank, in gr if calibrated',\n      factor: 1,\n      unit: 'g',\n      writable: false,\n    },\n\n    {\n      label: 'G',\n      variable: 'waitSinceLast',\n      name: 'Time since last event',\n      description: 'Time in min since last weight event',\n      factor: 1,\n      unit: 'min',\n      writable: false,\n    },\n\n    {\n      label: 'H',\n      variable: 'minWeight',\n      name: 'Weight min',\n      description: 'Weight min in internal unit',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'I',\n      variable: 'maxWeight',\n      name: 'Weight max',\n      description: 'Weight max in internal unit',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'J',\n    },\n\n    {\n      label: 'K',\n    },\n\n    {\n      label: 'L',\n    },\n\n    {\n      label: 'M',\n    },\n\n    {\n      label: 'N',\n    },\n\n    {\n      label: 'O',\n    },\n\n    {\n      label: 'P',\n    },\n\n    {\n      label: 'Q',\n    },\n\n    {\n      label: 'R',\n    },\n\n    {\n      label: 'S',\n    },\n\n    {\n      label: 'T',\n    },\n\n    {\n      label: 'U',\n    },\n\n    {\n      label: 'V',\n    },\n\n    {\n      label: 'W',\n    },\n\n    {\n      label: 'X',\n    },\n\n    {\n      label: 'Y',\n      variable: 'error',\n      name: 'Error',\n      unit: '',\n      factor: 1,\n      description: `\n            bit 0: pcb probe, 1: liquid probe, 2: pcb temperature,\n            3: liquid temperature, 4: target temp. range, 5: weight range`,\n      writable: true,\n      flags: {\n        pcbProbe: {\n          bit: 0,\n          description: 'PCB temperature probe not responding',\n        },\n        liquidProbe: {\n          bit: 1,\n          description: 'Liquid temperature probe not responding',\n        },\n        pcbTemperature: {\n          bit: 2,\n          description: 'PCB temperature out of range',\n        },\n        liquidTemperature: {\n          bit: 3,\n          description: 'Liquid temperature out of range',\n        },\n        targetTemperature: {\n          bit: 4,\n          description: 'Target temperature out of range',\n        },\n        weight: {\n          bit: 5,\n          description: 'Weight out of range',\n        },\n      },\n    },\n\n    {\n      label: 'Z',\n      variable: 'status',\n      name: 'Status',\n      description: `Status of the Bioreactor, the bits of this integer code\n        for the state of specific elements of the reactor (eg. motor ON/OFF, PUMP ON/OFF etc.).\n        bits: 0: stepper, 1: weight, 2: pid, 7: sedimentation, 8: filling, 9: emptying\n        `,\n      factor: 1,\n      unit: '',\n      writable: true,\n      flags: {\n        stepper: {\n          bit: 0,\n          description: 'Stepper running',\n        },\n        food: {\n          bit: 1,\n          description: 'Food running',\n        },\n        pid: {\n          bit: 2,\n          description: 'PID running',\n        },\n        sedimentation: {\n          bit: 7,\n          description: 'Sedimentation running',\n        },\n        filling: {\n          bit: 8,\n          description: 'Filling tank',\n        },\n        emptying: {\n          bit: 9,\n          description: 'Emptying tank',\n        },\n      },\n    },\n\n    {\n      label: 'AA',\n      variable: 'stepperSpeed',\n      name: 'Stepper speed',\n      description: '',\n      factor: 1,\n      unit: 'RPM',\n      writable: true,\n    },\n\n    {\n      label: 'AB',\n      variable: 'stepperOnDelay',\n      name: 'Stepper on delay',\n      description: 'Time in (s) for which the stepper stays on',\n      factor: 1,\n      unit: 's',\n      writable: true,\n    },\n\n    {\n      label: 'AC',\n      variable: 'stepperOffDelay',\n      name: 'Stepper off delay',\n      description: 'Time to wait in (s) before between stirring periods',\n      factor: 1,\n      unit: 's',\n      writable: true,\n    },\n\n    {\n      label: 'AD',\n    },\n\n    {\n      label: 'AE',\n    },\n\n    {\n      label: 'AF',\n      variable: 'sedTime',\n      name: 'Sedimentation Time',\n      description:\n        'Sedimentation time in min after Semi-batch operation,' +\n        'corresponds to the waiting time without stirring before emptying the reactor to the minimum level',\n      min: 0,\n      max: 32767,\n      factor: 1,\n      unit: 'min',\n      writable: true,\n    },\n\n    {\n      label: 'AG',\n      variable: 'filledTime',\n      name: 'Filled Time',\n      description:\n        'Filled time in min after Semi-batch operation,' +\n        'corresponds to the total time with and without stirring before emptying the reactor to the minimum level' +\n        'must be set longer than the sedimentation time if stirring is desired',\n      min: 0,\n      max: 32767,\n      factor: 1,\n      unit: 'min',\n      writable: true,\n    },\n\n    {\n      label: 'AH',\n      variable: 'weightFactor',\n      name: 'Weight factor',\n      description: 'Factor allowing to convert the internal weight value to g',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'AI',\n      variable: 'weightOffset',\n      name: 'Weight offset',\n      description: '',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'AJ',\n    },\n\n    {\n      label: 'AK',\n    },\n\n    {\n      label: 'AL',\n    },\n\n    {\n      label: 'AM',\n    },\n\n    {\n      label: 'AN',\n    },\n\n    {\n      label: 'AO',\n    },\n\n    {\n      label: 'AP',\n    },\n\n    {\n      label: 'AQ',\n    },\n\n    {\n      label: 'AR',\n    },\n\n    {\n      label: 'AS',\n    },\n\n    {\n      label: 'AT',\n    },\n\n    {\n      label: 'AU',\n    },\n\n    {\n      label: 'AV',\n    },\n\n    {\n      label: 'AW',\n    },\n\n    {\n      label: 'AX',\n    },\n\n    {\n      label: 'AY',\n    },\n\n    {\n      label: 'AZ',\n      variable: 'enable',\n      name: 'Enable',\n      description: 'pid - food - stepper : ex. 1: only stepper',\n      factor: 1,\n      unit: '',\n      writable: true,\n      flags: {\n        stepper: {\n          bit: 0,\n          description: 'Stepper control',\n        },\n        food: {\n          bit: 1,\n          description: 'Food control',\n        },\n        pid: {\n          bit: 2,\n          description: 'PID control',\n        },\n      },\n    },\n  ],\n  events: [\n    {\n      id: 1,\n      name: 'Arduino boot',\n      description: '',\n    },\n    {\n      id: 2,\n      name: 'Set safe mode',\n      description: '',\n    },\n    {\n      id: 3,\n      name: 'Status enable',\n      description:\n        '0:stepper, 1:food, 2:pid, 7:sedimentation, 8:filling, 9:emptying',\n      flags: {\n        0: 'stepper',\n        1: 'food',\n        2: 'pid',\n        7: 'sedimentation',\n        8: 'filling',\n        9: 'emptying',\n      },\n    },\n    {\n      id: 4,\n      name: 'Status disable',\n      description:\n        '0:stepper, 1:food, 2:pid, 7:sedimentation, 8:filling, 9:emptying',\n      flags: {\n        0: 'stepper',\n        1: 'food',\n        2: 'pid',\n        7: 'sedimentation',\n        8: 'filling',\n        9: 'emptying',\n      },\n    },\n    {\n      id: 6,\n      name: 'Error: failed',\n      description:\n        '0:stepper, 1:food, 2:pid, 7:sedimentation, 8:filling, 9:emptying',\n      flags: {\n        0: 'pcb temperature probe',\n        1: 'liquid temperature probe',\n        2: 'pcb temperature range',\n        3: 'liquid temperature range',\n        4: 'target temperature range',\n        5: 'weight range',\n      },\n    },\n    {\n      id: 7,\n      name: 'Error: recover',\n      description:\n        '0:stepper, 1:food, 2:pid, 7:sedimentation, 8:filling, 9:emptying',\n      flags: {\n        0: 'pcb temperature probe',\n        1: 'liquid temperature probe',\n        2: 'pcb temperature range',\n        3: 'liquid temperature range',\n        4: 'target temperature range',\n        5: 'weight range',\n      },\n    },\n    {\n      id: 20,\n      name: 'Rotation start',\n      description: '',\n    },\n    {\n      id: 21,\n      name: 'Rotation stop',\n      description: '',\n    },\n    {\n      id: 150,\n      name: 'Not found log entry N',\n      description: '',\n    },\n    {\n      id: 255,\n      name: 'Save all parameters',\n      description: '',\n    },\n    {\n      id: 256,\n      name: 'Change value of A',\n      description: '',\n    },\n    {\n      id: 257,\n      name: 'Change value of B',\n      description: '',\n    },\n  ],\n};\n","'use strict';\n\nmodule.exports = {\n  name: 'Open bioreactor v6',\n  kind: 'OpenBio6',\n  description: '',\n  url: '',\n  id: '6',\n  numberParameters: 68,\n  numberLogParameters: 26,\n  parameters: [\n    {\n      label: 'A',\n      variable: 'externalTemperature1',\n      name: 'T EXT 1',\n      description: 'External temperature 1',\n      factor: 100,\n      unit: 'C',\n      writable: false,\n    },\n\n    {\n      label: 'B',\n      variable: 'externalTemperature2',\n      name: 'T EXT 2',\n      description: 'External temperature 2',\n      factor: 100,\n      unit: 'C',\n      writable: false,\n    },\n\n    {\n      label: 'C',\n      variable: 'pcbTemp',\n      name: 'T PCB',\n      description: 'Temperature of the bioreactor circuit',\n      factor: 100,\n      unit: 'C',\n      writable: false,\n    },\n\n    {\n      label: 'D',\n      variable: 'pidTemp',\n      name: 'Pid',\n      description: 'PID absolute value',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'E',\n      variable: 'targetTemp',\n      name: 'T target',\n      description: 'Target temperature',\n      factor: 100,\n      unit: 'C',\n      writable: true,\n    },\n\n    {\n      label: 'F',\n      variable: 'weight',\n      name: 'Weight',\n      description: 'Weight of the bioreactor tank, in internal value',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'G',\n      variable: 'grWeight',\n      name: 'Weight (g)',\n      description: 'Weight of the bioreactor tank, in gr if calibrated',\n      factor: 1,\n      unit: 'g',\n      writable: false,\n    },\n\n    {\n      label: 'H',\n      variable: 'minWeight',\n      name: 'Weight min',\n      description: 'Weight min in internal unit',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'I',\n      variable: 'maxWeight',\n      name: 'Weight max',\n      description: 'Weight max in internal unit',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'J',\n    },\n\n    {\n      label: 'K',\n    },\n\n    {\n      label: 'L',\n    },\n\n    {\n      label: 'M',\n    },\n\n    {\n      label: 'N',\n    },\n\n    {\n      label: 'O',\n    },\n\n    {\n      label: 'P',\n    },\n\n    {\n      label: 'Q',\n    },\n\n    {\n      label: 'R',\n    },\n\n    {\n      label: 'S',\n    },\n\n    {\n      label: 'T',\n    },\n\n    {\n      label: 'U',\n    },\n\n    {\n      label: 'V',\n    },\n\n    {\n      label: 'W',\n      variable: 'currentStep',\n      name: 'Current step',\n      description: 'Current step in the pipeline',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'X',\n      variable: 'currentWaitTime',\n      name: 'Current wait time',\n      description: 'Current step wait time',\n      factor: 1,\n      unit: 'min',\n      writable: false,\n    },\n\n    {\n      label: 'Y',\n      variable: 'error',\n      name: 'Error',\n      unit: '',\n      factor: 1,\n      description: `\n            bit 0: pcb probe, 1: liquid probe, 2: pcb temperature,\n            3: liquid temperature, 4: target temp. range, 5: weight range`,\n      writable: true,\n      flags: {\n        0: 'PCB temperature probe error',\n        1: 'External temperature 1 probe error',\n        2: 'External temperature 2 probe error',\n        3: 'PCB temperature out of range',\n        4: 'External temperature 1 out of range',\n        5: 'External temperature 2 out of range',\n        6: 'Target temperature out of range',\n        7: 'Weight out of range',\n      },\n    },\n\n    {\n      label: 'Z',\n      variable: 'status',\n      name: 'Status',\n      description: `Status of the Bioreactor, the bits of this integer code\n        for the state of specific elements of the reactor (eg. motor ON/OFF, PUMP ON/OFF etc.).\n        bits: 0: stepper, 1: weight, 2: pid, 7: sedimentation, 8: filling, 9: emptying\n        `,\n      factor: 1,\n      unit: '',\n      writable: true,\n      flags: {\n        0: 'pid',\n        1: 'stepper',\n        2: 'output 1',\n        3: 'output 2',\n        4: 'output 3',\n        5: 'output 4',\n      },\n    },\n\n    {\n      label: 'AA',\n      variable: 'stepperSpeed',\n      name: 'Stepper speed',\n      description: '',\n      factor: 1,\n      unit: 'RPM',\n      writable: true,\n    },\n\n    {\n      label: 'AB',\n      variable: 'stepperSteps',\n      name: 'Stepper steps',\n      description:\n        'Number of step before changing direction. 1 tour = 200 steps',\n      factor: 1,\n      unit: '',\n      writable: true,\n    },\n\n    {\n      label: 'AC',\n      variable: 'stepperOffDelay',\n      name: 'Stepper off delay',\n      description: 'Time to wait in (s) before between stirring periods',\n      factor: 1,\n      unit: 's',\n      writable: true,\n    },\n\n    {\n      label: 'AD',\n      variable: 'weightFactor',\n      name: 'Weight factor',\n      description: 'Factor allowing to convert the internal weight value to g',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'AE',\n      variable: 'weightOffset',\n      name: 'Weight offset',\n      description: '',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'AF',\n    },\n\n    {\n      label: 'AG',\n    },\n\n    {\n      label: 'AH',\n    },\n\n    {\n      label: 'AI',\n    },\n\n    {\n      label: 'AJ',\n    },\n\n    {\n      label: 'AK',\n    },\n\n    {\n      label: 'AL',\n    },\n\n    {\n      label: 'AM',\n    },\n\n    {\n      label: 'AN',\n    },\n\n    {\n      label: 'AO',\n    },\n\n    {\n      label: 'AP',\n    },\n\n    {\n      label: 'AQ',\n    },\n\n    {\n      label: 'AR',\n    },\n\n    {\n      label: 'AS',\n    },\n\n    {\n      label: 'AT',\n    },\n\n    {\n      label: 'AU',\n    },\n\n    {\n      label: 'AV',\n    },\n\n    {\n      label: 'AW',\n    },\n\n    {\n      label: 'AX',\n    },\n\n    {\n      label: 'AY',\n    },\n\n    {\n      label: 'AZ',\n      variable: 'enable',\n      name: 'Enable',\n      description: 'pid - food - stepper : ex. 1: only stepper',\n      factor: 1,\n      unit: '',\n      writable: true,\n      flags: {\n        0: 'pid',\n        1: 'stepper',\n        2: 'output 1',\n        3: 'output 2',\n        4: 'output 3',\n        5: 'output 4',\n      },\n    },\n\n    {\n      label: 'BA',\n      variable: 'step01',\n      name: 'Step 1',\n      description: 'Step 1',\n    },\n\n    {\n      label: 'BB',\n      variable: 'step02',\n      name: 'Step 2',\n      description: 'Step 2',\n    },\n\n    {\n      label: 'BC',\n      variable: 'step03',\n      name: 'Step 3',\n      description: 'Step 3',\n    },\n\n    {\n      label: 'BD',\n      variable: 'step04',\n      name: 'Step 4',\n      description: 'Step 4',\n    },\n\n    {\n      label: 'BE',\n      variable: 'step05',\n      name: 'Step 5',\n      description: 'Step 5',\n    },\n\n    {\n      label: 'BF',\n      variable: 'step06',\n      name: 'Step 6',\n      description: 'Step 6',\n    },\n\n    {\n      label: 'BG',\n      variable: 'step07',\n      name: 'Step 7',\n      description: 'Step 7',\n    },\n\n    {\n      label: 'Bh',\n      variable: 'step08',\n      name: 'Step 8',\n      description: 'Step 8',\n    },\n\n    {\n      label: 'BI',\n      variable: 'step09',\n      name: 'Step 9',\n      description: 'Step 9',\n    },\n\n    {\n      label: 'BJ',\n      variable: 'step10',\n      name: 'Step 10',\n      description: 'Step 10',\n    },\n\n    {\n      label: 'BK',\n      variable: 'step11',\n      name: 'Step 11',\n      description: 'Step 11',\n    },\n\n    {\n      label: 'BL',\n      variable: 'step12',\n      name: 'Step 12',\n      description: 'Step 12',\n    },\n\n    {\n      label: 'BM',\n      variable: 'step13',\n      name: 'Step 13',\n      description: 'Step 13',\n    },\n\n    {\n      label: 'BN',\n      variable: 'step14',\n      name: 'Step 14',\n      description: 'Step 14',\n    },\n\n    {\n      label: 'BO',\n      variable: 'step15',\n      name: 'Step 15',\n      description: 'Step 15',\n    },\n\n    {\n      label: 'BP',\n      variable: 'step16',\n      name: 'Step 16',\n      description: 'Step 16',\n    },\n  ],\n  events: [\n    {\n      id: 1,\n      name: 'Arduino boot',\n      description: '',\n    },\n    {\n      id: 2,\n      name: 'Set safe mode',\n      description: '',\n    },\n    {\n      id: 3,\n      name: 'Status enable',\n      description:\n        '0:stepper, 1:food, 2:pid, 7:sedimentation, 8:filling, 9:emptying',\n      flags: {\n        0: 'stepper',\n        1: 'food',\n        2: 'pid',\n        7: 'sedimentation',\n        8: 'filling',\n        9: 'emptying',\n      },\n    },\n    {\n      id: 4,\n      name: 'Status disable',\n      description:\n        '0:stepper, 1:food, 2:pid, 7:sedimentation, 8:filling, 9:emptying',\n      flags: {\n        0: 'stepper',\n        1: 'food',\n        2: 'pid',\n        7: 'sedimentation',\n        8: 'filling',\n        9: 'emptying',\n      },\n    },\n    {\n      id: 6,\n      name: 'Error: failed',\n      description:\n        '0:stepper, 1:food, 2:pid, 7:sedimentation, 8:filling, 9:emptying',\n      flags: {\n        0: 'pcb temperature probe',\n        1: 'liquid temperature probe',\n        2: 'pcb temperature range',\n        3: 'liquid temperature range',\n        4: 'target temperature range',\n        5: 'weight range',\n      },\n    },\n    {\n      id: 7,\n      name: 'Error: recover',\n      description:\n        '0:stepper, 1:food, 2:pid, 7:sedimentation, 8:filling, 9:emptying',\n      flags: {\n        0: 'pcb temperature probe',\n        1: 'liquid temperature probe',\n        2: 'pcb temperature range',\n        3: 'liquid temperature range',\n        4: 'target temperature range',\n        5: 'weight range',\n      },\n    },\n    {\n      id: 20,\n      name: 'Rotation start',\n      description: '',\n    },\n    {\n      id: 21,\n      name: 'Rotation stop',\n      description: '',\n    },\n    {\n      id: 150,\n      name: 'Not found log entry N',\n      description: '',\n    },\n    {\n      id: 255,\n      name: 'Save all parameters',\n      description: '',\n    },\n    {\n      id: 256,\n      name: 'Change value of A',\n      description: '',\n    },\n    {\n      id: 257,\n      name: 'Change value of B',\n      description: '',\n    },\n  ],\n};\n","'use strict';\n\nmodule.exports = {\n  name: 'Open spectrophotometer',\n  kind: 'OpenSpectro',\n  numberParameters: 26,\n  id: 'S',\n  description: '',\n  url: '',\n  parameters: [\n    {\n      label: 'A',\n      name: 'Red point',\n      description: 'which point of the linear detector is the maximum for red',\n      factor: 1,\n      unit: 'pixel#',\n      writable: false,\n    },\n\n    {\n      label: 'B',\n      name: 'Green point',\n      description:\n        'which point of the linear detector is the maximum for green',\n      factor: 1,\n      unit: 'pixel#',\n      writable: false,\n    },\n\n    {\n      label: 'C',\n      name: 'Blue point',\n      description: 'which point of the linear detector is the maximum for blue',\n      factor: 1,\n      unit: 'pixel#',\n      writable: false,\n    },\n\n    {\n      label: 'D',\n      name: 'Compression',\n      description: '0 means no compression, can be set',\n      factor: 1,\n      unit: '',\n      writable: true,\n    },\n    {\n      label: 'E',\n      name: 'R-Intensity',\n      description: 'Red led intensity (0 to 255)',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'F',\n      name: 'G-Intensity',\n      description: 'Green led intensity (0 to 255)',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n    {\n      label: 'G',\n      name: 'B-Intensity',\n      description: 'Blue led intensity (0 to 255)',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'H',\n      name: 'Scan#',\n      description: 'Number of scans (maximum 64)',\n      factor: 1,\n      unit: '',\n      min: 1,\n      max: 64,\n      writable: true,\n    },\n\n    {\n      label: 'I',\n      name: 'DelayExp',\n      description: 'Delay between experiments in seconds',\n      factor: 1,\n      unit: 's',\n      writable: false,\n    },\n\n    {\n      label: 'J',\n      name: 'Acq Time',\n      description: 'Accumulation time in ms(in ms, good value=30)',\n      factor: 1,\n      unit: 'ms',\n      writable: true,\n    },\n\n    {\n      label: 'K',\n      name: 'lambda-R',\n      description: 'Red maximum wavelength (nm)',\n      factor: 1,\n      unit: 'nm',\n      writable: false,\n    },\n\n    {\n      label: 'L',\n      name: 'lambda-G',\n      description: 'Green maximum wavelength (nm)',\n      factor: 1,\n      unit: 'nm',\n      writable: false,\n    },\n\n    {\n      label: 'M',\n      name: 'lambda-M',\n      description: 'Blue maximum wavelength (nm)',\n      factor: 1,\n      unit: 'nm',\n      writable: false,\n    },\n\n    {\n      label: 'U',\n      name: 'red test',\n      description: 'Set intensity of red led for test (0 -> 255)',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n    {\n      label: 'V',\n      name: 'green test',\n      description: 'Set intensity of green led for test (0 -> 255)',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n    {\n      label: 'W',\n      name: 'blue test',\n      description: 'Set intensity of blue led for test (0 -> 255)',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n    {\n      label: 'X',\n      name: 'white test',\n      description: 'Set intensity of white led for test (0 -> 255)',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n    {\n      label: 'Y',\n    },\n    {\n      label: 'Z',\n    },\n  ],\n};\n","'use strict';\n\nmodule.exports = {\n  name: 'Simple spectrophotometer',\n  kind: 'SimpleSpectro',\n  numberParameters: 26,\n  description: '',\n  id: 'T',\n  url: '',\n  parameters: [\n    {\n      label: 'A',\n      name: 'Transmission of sample (Red)',\n      description: 'Frequency related to the energy of red led through sample',\n      factor: 1,\n      unit: 'Hz',\n      writable: false,\n    },\n\n    {\n      label: 'B',\n      name: 'Transmission of sample (Green)',\n      description:\n        'Frequency related to the energy of green led through sample',\n      factor: 1,\n      unit: 'Hz',\n      writable: false,\n    },\n\n    {\n      label: 'C',\n      name: 'Transmission of sample (Blue)',\n      description: 'Frequency related to the energy of blue led through sample',\n      factor: 1,\n      unit: 'Hz',\n      writable: false,\n    },\n\n    {\n      label: 'D',\n      name: 'Emission of sample (Blue)',\n      description:\n        'Frequency related to the energy of blue perpendicular led re-emitted by sample (fluorescence)',\n      factor: 1,\n      unit: 'Hz',\n      writable: false,\n    },\n\n    {\n      label: 'F',\n      name: 'Transmission of blank (Red)',\n      description: 'Frequency related to the energy of red led through blank',\n      factor: 1,\n      unit: 'Hz',\n      writable: false,\n    },\n\n    {\n      label: 'G',\n      name: 'Transmission of blank (Green)',\n      description: 'Frequency related to the energy of green led through blank',\n      factor: 1,\n      unit: 'Hz',\n      writable: false,\n    },\n\n    {\n      label: 'H',\n      name: 'Transmission of blank (Blue)',\n      description: 'Frequency related to the energy of blue led through blank',\n      factor: 1,\n      unit: 'Hz',\n      writable: false,\n    },\n\n    {\n      label: 'I',\n      name: 'Emission of blank (Blue)',\n      description:\n        'Frequency related to the energy of blue perpendicular led re-emitted by blank (fluorescence)',\n      factor: 1,\n      unit: 'Hz',\n      writable: false,\n    },\n\n    {\n      label: 'K',\n      name: 'Delay before blank',\n      description: 'Delay before the acquisition of the blank in seconds',\n      factor: 1,\n      unit: 's',\n      writable: true,\n    },\n\n    {\n      label: 'L',\n      name: 'Delay before sample',\n      description: 'Delay before the acquisition of the sample in seconds',\n      factor: 1,\n      unit: 's',\n      writable: true,\n    },\n\n    {\n      label: 'M',\n      name: 'Delay between experiments',\n      description:\n        'Delay between the acquisition of the experiments (kinetic) in seconds',\n      factor: 1,\n      unit: 's',\n      writable: true,\n    },\n\n    {\n      label: 'N',\n      name: 'Nb experiments',\n      description:\n        'Number of experiments for kinetic (max 240 / (number colors + 1))',\n      factor: 1,\n      unit: '',\n      writable: true,\n    },\n\n    {\n      label: 'O',\n      name: 'Next exp. number',\n      description: 'Number of the next experiment',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'P',\n      name: 'Waiting time',\n      description: 'Current waiting time before next experiment',\n      factor: 1,\n      unit: 's',\n      writable: false,\n    },\n\n    {\n      label: 'Q',\n      name: 'Nb sampling',\n      description:\n        'Number of acquisitions of 100ms that will be taken (default 10). This value could be reduced for fast kinetic',\n      factor: 1,\n      unit: '',\n      writable: true,\n    },\n\n    {\n      label: 'R',\n      name: 'Invert rotary',\n      description: ' Invert the rotary button direction',\n      factor: 1,\n      unit: '',\n      writable: true,\n    },\n\n    {\n      label: 'S',\n      name: 'Battery voltage',\n      description: 'Current battery voltage',\n      factor: 100,\n      unit: 'V',\n      writable: true,\n    },\n\n    {\n      label: 'T',\n      name: 'Temperature',\n      description: 'Current temperature',\n      factor: 100,\n      unit: 'C',\n      writable: true,\n    },\n\n    {\n      label: 'V',\n      name: 'Active channels',\n      description:\n        'Active leds and other. A number between 0 and 63. Each bit represents a function (Red, Green, Blue, UV, Voltage, Temperature). 5 would correspond to Red and Blue (binary combination).',\n      factor: 1,\n      unit: '',\n      writable: true,\n    },\n\n    {\n      label: 'W',\n      name: 'Error',\n      description: 'Error',\n      factor: 1,\n      unit: '',\n      writable: true,\n    },\n\n    {\n      label: 'X',\n      name: 'Result channel',\n      description: 'Value of the channel that will be displayed in the result',\n      factor: 1,\n      unit: '',\n      writable: true,\n    },\n\n    {\n      label: 'Y',\n      name: 'Status',\n      description: 'Status',\n      factor: 1,\n      unit: '',\n      writable: true,\n    },\n\n    {\n      label: 'Z',\n      name: 'Current menu',\n      description: 'Current menu',\n      factor: 1,\n      unit: '',\n      writable: true,\n    },\n  ],\n};\n","'use strict';\n\nmodule.exports = {\n  name: 'Solar decathlon 2015',\n  kind: 'Solar',\n  numberParameters: 4,\n  numberLogParameters: 4,\n  id: '#',\n  description: '',\n  url: '',\n  parameters: [\n    {\n      label: 'A',\n      name: 'Temperature',\n      description: '',\n      factor: 100,\n      unit: 'C',\n      writable: false,\n    },\n\n    {\n      label: 'B',\n      name: 'Light',\n      description: '',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'C',\n      name: 'Pressure',\n      description: '',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'D',\n      name: 'Humidity',\n      description: '',\n      factor: 10,\n      unit: '%',\n      writable: false,\n    },\n  ],\n};\n","'use strict';\n\nmodule.exports = {\n  name: 'Bee Monistoring System',\n  kind: 'Beemos',\n  numberParameters: 32,\n  numberLogParameters: 26,\n  id: 'B',\n  description: 'Bee Monistoring System data result',\n  url: '',\n  parameters: [\n    {\n      label: 'A',\n      variable: 'externalTemperature',\n      name: 'Ext temperature',\n      description: 'External temperature',\n      factor: 100,\n      unit: 'C',\n      writable: false,\n    },\n\n    {\n      label: 'B',\n      variable: 'externalHumidity',\n      name: 'Ext humidity',\n      description: 'External humidity',\n      factor: 100,\n      unit: '%',\n      writable: false,\n    },\n\n    {\n      label: 'C',\n      variable: 'luminosity',\n      name: 'Luminosity',\n      description: 'Luminosity (Arbitrary unit)',\n      factor: 10.24,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'D',\n      variable: 'pressure',\n      name: 'Pressure',\n      description: 'Press',\n      factor: 10,\n      unit: 'mbar',\n      writable: false,\n    },\n\n    {\n      label: 'E',\n      variable: 'internalTemperature',\n      name: 'Int temperature',\n      description: 'Internal temperature',\n      factor: 100,\n      unit: 'C',\n      writable: false,\n    },\n\n    {\n      label: 'F',\n      variable: 'internalHumidity',\n      name: 'Int humidity',\n      description: 'Internal humidity',\n      factor: 100,\n      unit: '%',\n      writable: false,\n    },\n\n    {\n      label: 'G',\n      variable: 'internalTemperatureA',\n      name: 'Int temperature A',\n      description: 'Internal temperature A',\n      factor: 100,\n      unit: 'C',\n      writable: false,\n    },\n    {\n      label: 'H',\n      variable: 'internalTemperatureB',\n      name: 'Int temperature B',\n      description: 'Internal temperature B',\n      factor: 100,\n      unit: 'C',\n      writable: false,\n    },\n\n    {\n      label: 'I',\n      variable: 'weight',\n      name: 'Weight',\n      description: 'Weight',\n      factor: 100,\n      unit: 'kg',\n      writable: false,\n    },\n\n    {\n      label: 'J',\n      variable: 'battery',\n      name: 'Battery',\n      description: 'Battery voltage',\n      factor: 1000,\n      unit: 'V',\n      writable: false,\n    },\n\n    {\n      label: 'K',\n      variable: 'gate1In',\n      name: 'Gate 1 IN',\n      description: 'Number of input on gate 1',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'L',\n      variable: 'gate1Out',\n      name: 'Gate 1 OUT',\n      description: 'Number of output on gate 1',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'M',\n      variable: 'gate2In',\n      name: 'Gate 2 IN',\n      description: 'Number of input on gate 2',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'N',\n      variable: 'gate2Out',\n      name: 'Gate 2 OUT',\n      description: 'Number of output on gate 2',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'O',\n      variable: 'gate3In',\n      name: 'Gate 3 IN',\n      description: 'Number of input on gate 3',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'P',\n      variable: 'gate3Out',\n      name: 'Gate 3 OUT',\n      description: 'Number of output on gate 3',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'Q',\n      variable: 'gate4In',\n      name: 'Gate 4 IN',\n      description: 'Number of input on gate 4',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'R',\n      variable: 'gate4Out',\n      name: 'Gate 4 OUT',\n      description: 'Number of output on gate 4',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'S',\n      variable: 'gate5In',\n      name: 'Gate 5 IN',\n      description: 'Number of input on gate 5',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'T',\n      variable: 'gate5Out',\n      name: 'Gate 5 OUT',\n      description: 'Number of output on gate 5',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'U',\n      variable: 'gate6In',\n      name: 'Gate 6 IN',\n      description: 'Number of input on gate 6',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'V',\n      variable: 'gate6Out',\n      name: 'Gate 6 OUT',\n      description: 'Number of output on gate 6',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'W',\n      variable: 'gate7In',\n      name: 'Gate 7 IN',\n      description: 'Number of input on gate 7',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'X',\n      variable: 'gate7Out',\n      name: 'Gate 7 OUT',\n      description: 'Number of output on gate 7',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'Y',\n      variable: 'gate8In',\n      name: 'Gate 8 IN',\n      description: 'Number of input on gate 8',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'Z',\n      variable: 'gate8Out',\n      name: 'Gate 8 OUT',\n      description: 'Number of output on gate 8',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'AA',\n      variable: 'weightInternalUnit',\n      name: 'Weight internal unit',\n      description: 'Weight in internal unit',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'AB',\n      variable: 'weightOffset',\n      name: 'Weight offset',\n      description: 'Offset to convert weight from internal unit',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'AC',\n      variable: 'weightFactor',\n      name: 'Weight factor',\n      description: 'Factor to convert the weight from internal unit',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'AD',\n      variable: 'charging',\n      name: 'Charging',\n      description: 'Indication showing if the battery is charging',\n      factor: 1,\n      unit: '',\n      writable: false,\n    },\n\n    {\n      label: 'AE',\n      variable: 'loggingInterval',\n      name: 'Logging interval',\n      description: 'Interval in seconds between logs',\n      factor: 1,\n      unit: 's',\n      writable: true,\n    },\n  ],\n};\n","'use strict';\n\nmodule.exports = {\n  name: 'Computer monitoring',\n  kind: 'Computer',\n  numberParameters: 16,\n  numberLogParameters: 16,\n  description: '',\n  id: 'C',\n  url: '',\n  parameters: [\n    {\n      label: 'A',\n      variable: 'cpuTemperature',\n      name: 'CPU Temperature',\n      description: '',\n      factor: 1,\n      unit: 'C',\n      writable: false,\n    },\n\n    {\n      label: 'B',\n      variable: 'memFree',\n      name: 'Free memory',\n      description: 'Free memory in percent',\n      factor: 1,\n      unit: '%',\n      writable: false,\n    },\n\n    {\n      label: 'C',\n      variable: 'swapFree',\n      name: 'Free swap',\n      description: 'Free swap in percent',\n      factor: 1,\n      unit: '%',\n      writable: false,\n    },\n\n    {\n      label: 'D',\n      variable: 'fsRead',\n      name: 'FS Read',\n      description: 'File system read in kb',\n      factor: 1,\n      unit: 'kb',\n      writable: false,\n    },\n\n    {\n      label: 'E',\n      variable: 'fsWrite',\n      name: 'FS Write',\n      description: 'File system read in kb',\n      factor: 1,\n      unit: 'kb',\n      writable: false,\n    },\n\n    {\n      label: 'F',\n      variable: 'networkRead',\n      name: 'Network Read',\n      description: 'File system read in kb',\n      factor: 1,\n      unit: 'kb',\n      writable: false,\n    },\n\n    {\n      label: 'G',\n      variable: 'networkWrite',\n      name: 'Network Write',\n      description: 'File system read in kb',\n      factor: 1,\n      unit: 'kb',\n      writable: false,\n    },\n\n    {\n      label: 'H',\n      variable: 'load',\n      name: 'Load',\n      description: 'Total load',\n      factor: 1,\n      unit: '%',\n      writable: false,\n    },\n\n    {\n      label: 'I',\n      variable: 'userLoad',\n      name: 'User load',\n      description: 'Load from user',\n      factor: 1,\n      unit: '%',\n      writable: false,\n    },\n\n    {\n      label: 'J',\n      variable: 'systemLoad',\n      name: 'System load',\n      description: 'Load from system',\n      factor: 1,\n      unit: '%',\n      writable: false,\n    },\n\n    {\n      label: 'K',\n      variable: 'niceLoad',\n      name: 'Nice load',\n      description: 'Load for Nice',\n      factor: 1,\n      unit: '%',\n      writable: false,\n    },\n\n    {\n      label: 'L',\n      variable: 'idleLoad',\n      name: 'Idle load',\n      description: 'Idle percent of time',\n      factor: 1,\n      unit: '%',\n      writable: false,\n    },\n\n    {\n      label: 'M',\n      variable: 'irqLoad',\n      name: 'IRQ load',\n      description: 'Load due to IRQ',\n      factor: 1,\n      unit: '%',\n      writable: false,\n    },\n\n    {\n      label: 'N',\n      variable: 'fsMinimalUse',\n      name: 'FS minimal use',\n      description: 'Minimal percent spaced used in a filesystem',\n      factor: 1,\n      unit: '%',\n      writable: false,\n    },\n    {\n      label: 'O',\n      variable: 'fsMaximalUse',\n      name: 'FS maximal use',\n      description: 'Maximal percent spaced used in a filesystem',\n      factor: 1,\n      unit: '%',\n      writable: false,\n    },\n    {\n      label: 'P',\n    },\n  ],\n};\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  return (bth[buf[i + 0]] + bth[buf[i + 1]] + bth[buf[i + 2]] + bth[buf[i + 3]] + '-' + bth[buf[i + 4]] + bth[buf[i + 5]] + '-' + bth[buf[i + 6]] + bth[buf[i + 7]] + '-' + bth[buf[i + 8]] + bth[buf[i + 9]] + '-' + bth[buf[i + 10]] + bth[buf[i + 11]] + bth[buf[i + 12]] + bth[buf[i + 13]] + bth[buf[i + 14]] + bth[buf[i + 15]]).toLowerCase();\n}\n\nexport default bytesToUuid;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  if (typeof options === 'string') {\n    buf = options === 'binary' ? new Uint8Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    var start = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[start + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return bytesToUuid(rnds);\n}\n\nexport default v4;"],"sourceRoot":""}