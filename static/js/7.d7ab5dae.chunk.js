(this["webpackJsonpbioreactor-ui"]=this["webpackJsonpbioreactor-ui"]||[]).push([[7],{104:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return m}));var r=n(3),c=n(112),o=n.n(c),a=["events","parameters"],i="BIOREACTOR-UI_devices",u="https:"===window.location.protocol?"443":"80",s="https:"===window.location.protocol?"wss":"http",l=["http","tcp","wss"],d={broadcast:"broadcast",interactive:"interactive",local:"local"},f={help:"h",settings:"u",compactSettings:"uc",runExperiment:"r",kinetic:"k",reset:"ur1234",sleep:"l",setParameter:function(e,t){return"".concat(e).concat(t)}},m=Object.keys(o.a).filter((function(e){return o.a[e].kind})).map((function(e){var t=o.a[e];t.events,t.parameters;return Object(r.a)(t,a)}))},108:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"n",(function(){return b})),n.d(t,"h",(function(){return p})),n.d(t,"f",(function(){return j})),n.d(t,"p",(function(){return v})),n.d(t,"e",(function(){return x})),n.d(t,"a",(function(){return h})),n.d(t,"o",(function(){return O})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return g})),n.d(t,"l",(function(){return N})),n.d(t,"i",(function(){return k})),n.d(t,"b",(function(){return y})),n.d(t,"m",(function(){return C})),n.d(t,"c",(function(){return _}));var r=n(53),c=n.n(r),o=n(59),a=n(1),i=n(112),u=n.n(i),s=n(115),l=n(104),d=function(e,t){console.log(e);var n=new Error("".concat(t," \n").concat(null===e||void 0===e?void 0:e.message));throw n.name="DATABASE_ERROR",n},f=function(e,t,n){return"".concat(e,"_").concat(t,"_").concat(n)},m=function(e){try{if(e)return u.a.fromDeviceID(Number(e))}catch(t){return void console.log(t)}},b=function(e,t){var n,r;return e&&t?null===(n=u.a[e])||void 0===n||null===(r=n.parameters)||void 0===r?void 0:r.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{value:t[e.label]})})):void 0},p=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s.a)(l.d).getAll({startkey:"".concat(t),endkey:"".concat(t,"\uffff")}).then((function(e){return e.rows.map((function(e){return e.doc}))})).catch((function(e){return d(e,"Get locally saved devices error")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s.a)(l.d).get(t).catch((function(e){return d(e,"Get device error")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s.a)(l.d).update(t).catch((function(e){return d(e,"Update device error")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){return Object(s.a)(l.d).remove(e).catch((function(e){return d(e,"Delete device error")}))},h=function(e){return Object(s.a)(l.d).put(e).catch((function(e){return"conflict"===e.name?d(e,"Device name must be unique"):d(e,"Insert device error")}))},O=function(e,t){return Object(s.a)(e).put(Object(a.a)({_id:Date.now().toString()},t))},w=function(e){return Object(s.a)(e).getAll({descending:!0}).then((function(e){return e.rows.map((function(e){return e.doc}))}))},g=function(e,t,n){return Object(s.a)(e).getAll({descending:!0,skip:(t-1)*n,limit:n}).then((function(e){return e.rows.map((function(e){return e.doc}))}))},N=function(e){return Object(s.a)(e).getAll({include_docs:!1}).then((function(e){return e.total_rows}))},k=function(e){return Object(s.a)(e).getAll({descending:!0,limit:1}).then((function(e){return e.rows.map((function(e){return e.doc}))}))},y=function(e){return Object(s.a)(e).destroy()},C=function(e,t,n){return Object(s.a)(e).listenToChanges(t,n)},_=function(e){return Object(s.a)(e).close()}},115:function(e,t,n){"use strict";var r=n(53),c=n.n(r),o=n(1),a=n(59),i=n(139),u={};t.a=function(e){var t=function(){return e in u||(u[e]=new i.a(e,{revs_limit:1,auto_compaction:!0})),u[e]};return{getInfo:function(){return new Promise((function(e,n){t().info().then((function(t){return e(t)})).catch((function(e){return n(e)}))}))},getAll:function(){var e=Object(a.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t().allDocs(Object(o.a)({include_docs:!0},n)).then((function(t){return e(t)})).catch((function(e){return r(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),get:function(e){return new Promise((function(n,r){var c=t();e?c.get(e).then((function(e){return n(e)})).catch((function(e){return r(e)})):r(new Error("Doc fetch : docId is required"))}))},put:function(e){return new Promise((function(n,r){var c=t();"_id"in e?c.put(e).then((function(e){return n(e)})).catch((function(e){return r(e)})):r(new Error("Doc create : _id is required in doc"))}))},update:function(e){return new Promise((function(n,r){var c=t();"_id"in e?c.get(e._id).then((function(t){return c.put(Object(o.a)(Object(o.a)({},e),{},{_rev:t._rev})).then((function(e){return n(e)})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)})):r(new Error("Doc update : _id is required in doc"))}))},remove:function(e){return new Promise((function(n,r){var c=t();e?c.get(e).then((function(t){return c.remove({_id:e,_rev:t._rev}).then((function(e){return n(e)})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)})):r(new Error("Doc remove : docId is required"))}))},listenToChanges:function(e,n,r){return t().changes(Object(o.a)({since:"now",live:!0,include_docs:!0},r)).on("change",e).on("error",n)},close:function(){var n=t();return delete u[e],n.close()},destroy:function(){var n=t();return delete u[e],n.destroy()}}}},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),c=n(20),o=n(0);function a(){var e=Object(c.P)(),t=function(t,n,c){var a=c.textColor,i=c.Icon,u=c.timeout;e.addNotification({title:Object(o.jsx)("span",{className:Object(r.a)("text-base font-semibold",a+"500"),children:t}),content:Object(o.jsx)("span",{className:"text-sm text-neutral-500",children:n}),icon:Object(o.jsx)(i,{className:Object(r.a)("w-8 h-8",a+"600")})},u)};return{addErrorNotification:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;t(e,n,{textColor:"text-danger-",Icon:c.H,timeout:r})},addWarningNotification:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2500;t(e,n,{textColor:"text-warning-",Icon:c.H,timeout:r})},addInfoNotification:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;t(e,n,{textColor:"text-primary-",Icon:c.x,timeout:r})}}}},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return x})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return O}));var r=n(53),c=n.n(r),o=n(59),a=n(1),i=n(110),u=n(115),s=n(160),l=n.n(s),d=n(147),f=function(e,t,n,r,c){return new Promise((function(r,c){!function(e,t,n,r,c,o,a){var u="".concat(t,"://").concat(e,":").concat(n),s=l.a.connect(u,{keepalive:300,reconnectPeriod:5e3});s.on("connect",(function(){Object(i.isFunction)(o)&&o(s)})),s.stream.on("error",(function(e){var t=new Error("Couldn't connect to BROKER \"".concat(u,'"'));t.name="Mqtt Error",s.end(),Object(i.isFunction)(a)&&a(t)}))}(e,t,n,0,0,(function(e){return r(e)}),(function(e){return c(e)}))}))},m=function(e,t,n,r){e.subscribe(t,{qos:2},(function(t){t?Object(i.isFunction)(r)&&r(t):e.on("message",(function(e,t){var r;Object(i.isFunction)(n)&&n((r=t,Object(d.parseCurrentSettings)(r.toString(),{})))}))}));return function(n){return e.unsubscribe(t,{},n)}},b=function(e,t){return e.end((function(){Object(i.isFunction)(t)&&t()}))},p=n(104),j=n(108),v=function(e){var t;return Object(a.a)(Object(a.a)({},e),{},{_id:Object(j.d)(p.g.broadcast,null===(t=e.kind)||void 0===t?void 0:t.kind,e.name),protocol:(null===e||void 0===e?void 0:e.protocol)?null===e||void 0===e?void 0:e.protocol:p.c,port:(null===e||void 0===e?void 0:e.port)?null===e||void 0===e?void 0:e.port:p.b})},x=function(e){var t=e._id,n=e.name,r=e.kind,i=e.deviceId,s=void 0===i?t||"".concat(r,"_").concat(n):i,l=e.url,d=e.protocol,j=void 0===d?p.c:d,v=e.port,x=void 0===v?p.b:v,h=e.topic;e.username,e.password;return new Promise(function(){var e=Object(o.a)(c.a.mark((function e(t,n){var r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(l,j,x);case 3:r=e.sent,o=Object(u.a)(s),t({subscribe:function(e,t){return m(r,h,(function(t){o.put(Object(a.a)({_id:"".concat(Date.now(),"_").concat(t.epoch)},t)).then((function(){return e(t)})).catch((function(){}))}),t)},disconnect:function(e){return b(r,e)},getAllData:function(){return o.getAll().then((function(e){return e.rows.map((function(e){return e.doc}))}))},getLastData:function(){return o.getAll({descending:!0,limit:1}).then((function(e){return e.rows.map((function(e){return e.doc}))}))},getPageData:function(e,t){return o.getAll({descending:!0,skip:e,limit:t}).then((function(e){return e.rows.map((function(e){return e.doc}))}))},getAllDataCount:function(){return o.getAll().then((function(e){return e.total_rows}))}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}())},h=function(e){var t=e.url,n=e.protocol,r=void 0===n?p.c:n,a=e.port,i=void 0===a?p.b:a,u=e.topic;e.username,e.password;return new Promise(function(){var e=Object(o.a)(c.a.mark((function e(n,o){var a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(t,r,i);case 3:a=e.sent,s=m(a,u,(function(e){s(),b(a,(function(){return n(e)}))}),o),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},O=function(){var e=Object(o.a)(c.a.mark((function e(t,n){var r,a,u,s=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:1e4,(a=function(){var e=Object(o.a)(c.a.mark((function e(){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],t.forEach((function(e){return r.push(h(e).then((function(t){return{device:e,payload:t}})).catch((function(t){throw t.device=e,t})))})),e.t0=Object(i.isFunction)(n),!e.t0){e.next=9;break}return e.t1=n,e.next=7,Promise.allSettled(r);case 7:e.t2=e.sent,(0,e.t1)(e.t2);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())(),u=setInterval(Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),r),e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},140:function(e,t){},150:function(e,t,n){"use strict";var r=n(53),c=n.n(r),o=n(3),a=n(59),i=n(6),u=n(1),s=n(2),l=n(159),d=n(110),f=n(20),m=n(128),b=n(104),p=n(0),j=["kind"],v=b.f.map((function(e){return{label:e.toUpperCase(),value:e}})),x=b.e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{label:e.name,value:e.kind})})),h=l.b().shape({name:l.c().max(50,"Name too Long!").matches(/^[A-z0-9_-]*$/,"Field supports only : letters / numbers / _ / - ").required("Required"),url:l.c().required("Required"),port:l.a().positive().integer(),protocol:l.c(),kind:l.c().required("Required"),topic:l.c().required("Required"),username:l.c().required("Required")});t.a=function(e){var t=e.isOpen,n=e.onClose,r=e.onSave,l=e.onUpdate,O=e.initialValues,w=!Object(d.isEmpty)(O),g=Object(s.useState)(Object(p.jsx)("div",{})),N=Object(i.a)(g,2),k=N[0],y=N[1],C=Object(s.useRef)(null),_=w?Object(u.a)(Object(u.a)({},O),{},{kind:O.kind.kind}):{name:"Computer_01",url:"mqtt.hackuarium.org",protocol:v.filter((function(e){return e.value===b.c}))[0].value,port:b.b,kind:"Computer",topic:"lpatiny/Computer/server",username:"user",password:"password"};Object(s.useEffect)((function(){!t&&setTimeout((function(){return y(Object(p.jsx)("div",{}))}),500)}),[t]);var q=function(){var e=Object(a.a)(c.a.mark((function e(t){var a,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.kind,i=Object(o.a)(t,j),s=b.e.filter((function(e){return e.kind===a}))[0],!w){e.next=8;break}return e.next=6,l(Object(u.a)(Object(u.a)({},i),{},{kind:s}));case 6:e.next=10;break;case 8:return e.next=10,r(Object(u.a)(Object(u.a)({},i),{},{kind:s}));case 10:n(),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),new Error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),E=function(e,t){switch(e){case"connecting":y(Object(p.jsxs)("div",{className:"mx-6 flex flex-row items-center text-sm text-left text-neutral-500",children:[Object(p.jsx)(f.n,{className:"w-6 h-6 mr-2"}),Object(p.jsx)("span",{children:t})]}));break;case"success":y(Object(p.jsxs)("div",{className:"mx-4 flex flex-row items-center text-sm text-left text-success-500",children:[Object(p.jsx)(f.r,{className:"h-6 w-6 mr-4"}),Object(p.jsx)("span",{children:t})]}));break;case"error":y(Object(p.jsxs)("div",{className:"mx-4 flex flex-row items-center text-sm text-left text-danger-500",children:[Object(p.jsx)(f.E,{className:"h-6 w-6 mr-4"}),Object(p.jsx)("span",{children:t})]}));break;default:y(Object(p.jsx)("div",{}))}};return Object(p.jsxs)(f.j,{isOpen:t,onRequestClose:n,icon:Object(p.jsx)(f.B,{}),iconColor:"neutral",animated:!0,hasCloseButton:!0,requestCloseOnBackdrop:!0,requestCloseOnEsc:!0,fluid:!0,wrapperComponent:f.f,wrapperProps:{innerRef:C,initialValues:_,validationSchema:h,onSubmit:q,className:"h-full"},children:[Object(p.jsx)(f.j.Header,{children:w?"Update Device":"Connect New Device"}),Object(p.jsxs)(f.j.Body,{children:[Object(p.jsxs)("div",{className:"p-2 mt-2",children:[Object(p.jsx)(f.i,{name:"name",id:"name",label:"Custom name",placeholder:"Device name",disabled:w,required:!0,className:"w-full",inputClassName:"w-full"}),Object(p.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between mt-4 sm:mt-0 border-t border-neutral sm:border-0",children:[Object(p.jsx)(f.i,{name:"url",id:"url",label:"URL",placeholder:"mqtt.domain.com",required:!0,leadingInlineAddon:Object(p.jsx)(f.z,{}),className:"mt-4 sm:mr-4 w-full sm:w-1/2",inputClassName:"w-full"}),Object(p.jsxs)("div",{className:"flex flex-row justify-between items-start flex-1",children:[Object(p.jsx)(f.m,{name:"protocol",id:"protocol",label:"Protocol",options:v,renderOption:function(e){return"".concat(e.label)},getValue:function(e){return e.value},className:"mt-4 mr-4 w-1/2",inputClassName:"w-full"}),Object(p.jsx)(f.i,{name:"port",id:"port",label:"Port",className:"mt-4 flex-1",inputClassName:"w-full"})]})]}),Object(p.jsxs)("div",{className:"flex flex-row justify-between items-start",children:[Object(p.jsx)(f.m,{name:"kind",id:"kind",label:"Kind",options:x,renderOption:function(e){return"".concat(e.label)},getValue:function(e){return e.value},required:!0,className:"mt-4 mr-4 w-1/2 ",inputClassName:"w-full bg-gray-500"}),Object(p.jsx)(f.i,{name:"topic",id:"topic",label:"Topic",required:!0,className:"mt-4 flex-1",inputClassName:"w-full"})]}),Object(p.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between mt-4 sm:mt-0 border-t border-neutral sm:border-0",children:[Object(p.jsx)(f.i,{name:"username",id:"username",label:"Username",placeholder:"Username",required:!0,leadingInlineAddon:Object(p.jsx)(f.D,{}),className:"mt-4 w-full sm:mr-4 sm:w-1/2",inputClassName:"w-full"}),Object(p.jsx)(f.i,{name:"password",id:"password",label:"Password",type:"password",placeholder:"********",required:!0,leadingInlineAddon:Object(p.jsx)(f.y,{}),className:"mt-4 w-full sm:flex-1",inputClassName:"w-full"})]})]}),Object(p.jsx)(f.g,{})]}),Object(p.jsx)(f.j.Footer,{children:Object(p.jsxs)("div",{className:"flex flex-col sm:flex-row items-center",children:[k,Object(p.jsx)("button",{onClick:function(e){e.stopPropagation(),E("connecting","Connecting ..."),setTimeout((function(){Object(m.d)(C.current.values).then((function(){E("success","Connected")})).catch((function(e){E("error","Connection Error: ".concat(e.message))}))}),500)},type:"button",className:"w-full sm:w-max mt-2 sm:my-0 px-4 py-2 sm:mr-4 text-sm font-semibold text-neutral-700 border rounded-md shadow bg-neutral-200 focus:outline-none flex-1 sm:flex-none",children:"Test connection"}),Object(p.jsx)(f.o,{className:"w-full my-2 sm:my-0 sm:w-max ",children:w?"Update":"Add"})]})})]})}},164:function(e,t){},165:function(e,t){},179:function(e,t){},180:function(e,t){},397:function(e,t,n){"use strict";n.r(t);var r=n(53),c=n.n(r),o=n(59),a=n(6),i=n(2),u=n(20),s=n(128),l=n(108),d=n(122),f=n(0),m=function(e){var t=e.data,n=e.onSelect,r=e.onEdit,c=e.onDelete;return Object(f.jsx)("div",{className:"overflow-hidden bg-white shadow sm:rounded-md",children:t.map((function(e){var t,o;return Object(f.jsxs)("li",{className:"block transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none focus:bg-gray-50 cursor-pointer",onClick:function(t){return n(e,t)},children:[Object(f.jsxs)("div",{className:"relative flex items-center px-4 py-4 sm:px-6",children:[Object(f.jsx)("div",{className:"flex items-center flex-1 min-w-0",children:Object(f.jsxs)("div",{className:"flex-1 min-w-0 px-4 sm:grid sm:grid-col-2 sm:gap-4",children:[Object(f.jsxs)("div",{className:"col-span-2 flex flex-row items-center flex-wrap",children:[Object(f.jsx)("p",{className:"mr-4 text-lg font-semibold truncate text-primary-700 ",children:e.name}),Object(f.jsx)(u.a,{dot:!0,rounded:!0,label:e.connected?"Active":"Inactive",size:u.b.SMALL,color:e.connected?"success":"neutral",className:"w-min h-min"})]}),Object(f.jsxs)("div",{className:"flex flex-col text-xs font-italic text-neutral-600",children:[Object(f.jsxs)("p",{className:"truncate",children:[Object(f.jsx)("span",{className:"font-semibold",children:"Device kind : "}),null===(o=e.kind)||void 0===o?void 0:o.kind]}),Object(f.jsxs)("p",{className:"truncate",children:[Object(f.jsx)("span",{className:"font-semibold",children:"URL : "}),"".concat(e.protocol,"://").concat(e.url,":").concat(e.port)]}),Object(f.jsxs)("p",{className:"truncate",children:[Object(f.jsx)("span",{className:"font-semibold",children:"Topic : "}),e.topic]})]}),Object(f.jsxs)("div",{className:"pt-2 sm:pt-0 flex justify-end items-center cursor-default",children:[Object(f.jsx)("button",{className:"mx-1 p-2 border rounded shadow-sm bg-neutral-100 focus:outline-none active:bg-neutral-200",onClick:function(t){return r(e,t)},children:Object(f.jsx)(u.G,{className:"text-gray-700"})}),Object(f.jsx)("button",{className:"mx-1 p-2 border rounded shadow-sm bg-neutral-100 focus:outline-none active:bg-neutral-200",onClick:function(t){return c(e,t)},children:Object(f.jsx)(u.J,{className:"text-gray-700"})})]})]})}),Object(f.jsx)("div",{children:Object(f.jsx)(u.s,{className:"w-5 h-5 text-neutral-400"})})]}),Object(f.jsx)("div",{className:"w-full border-t border-neutral-100"})]},(null===(t=e.kind)||void 0===t?void 0:t.kind)+e.name)}))})},b=n(150),p=n(104);t.default=function(e){var t=e.history,n=e.match,r=Object(i.useState)(!1),j=Object(a.a)(r,2),v=j[0],x=j[1],h=Object(i.useState)([]),O=Object(a.a)(h,2),w=O[0],g=O[1],N=Object(i.useState)({}),k=Object(a.a)(N,2),y=k[0],C=k[1],_=Object(d.a)().addErrorNotification;Object(i.useEffect)((function(){q()}),[]),Object(i.useEffect)((function(){var e=Object(s.c)(w,(function(e){var t=[],n=!1;e.forEach((function(e){if("fulfilled"===e.status){var r=e.value.device;r.connected||(r.connected=!0,n=!0),t.push(r)}else{var c=e.reason.device;c.connected&&(c.connected=!1,n=!0),t.push(c)}})),n&&g(t)}),1e4);return function(){return e.then((function(e){return clearInterval(e)}))}}),[w]);var q=function(){return Object(l.h)(p.g.broadcast).then(g)},E=function(){var e=Object(o.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(t),e.next=3,Object(l.a)(n);case 3:q();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.p)(t);case 2:q();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"p-8",children:[Object(f.jsx)("h2",{className:"text-3xl font-semibold mb-10",children:"Broadcast devices"}),Object(f.jsx)("div",{className:"w-full flex justify-end mb-4",children:Object(f.jsx)(u.c,{onClick:function(){return x(!0)},children:"Add"})}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"w-full my-2 flex flex-row items-center ",children:[Object(f.jsx)("h3",{className:"w-max ml-2 mr-4 text-neutral-600 text-sm whitespace-nowrap ",children:"Available devices"}),Object(f.jsx)("div",{className:"w-full border-t border-neutral-300"})]}),Object(f.jsx)(m,{data:w,onSelect:function(e,r){t.push(n.url+"/"+e._id)},onEdit:function(e,t){t.stopPropagation(),C(e),x(!0)},onDelete:function(e,t){t.stopPropagation(),Object(l.e)(e._id).then((function(){return q()})).catch((function(e){return _(e.name,e.message)}))}})]}),Object(f.jsx)(b.a,{isOpen:v,onClose:function(){x(!1),C({})},initialValues:y,onSave:E,onUpdate:A})]})}}}]);
//# sourceMappingURL=7.d7ab5dae.chunk.js.map